function yI(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Th(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var xI={exports:{}},hx={},_I={exports:{}},nn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var om=Symbol.for("react.element"),bk=Symbol.for("react.portal"),Ak=Symbol.for("react.fragment"),Ck=Symbol.for("react.strict_mode"),Dk=Symbol.for("react.profiler"),Tk=Symbol.for("react.provider"),Pk=Symbol.for("react.context"),Rk=Symbol.for("react.forward_ref"),Ik=Symbol.for("react.suspense"),Fk=Symbol.for("react.memo"),Nk=Symbol.for("react.lazy"),mD=Symbol.iterator;function Lk(n){return n===null||typeof n!="object"?null:(n=mD&&n[mD]||n["@@iterator"],typeof n=="function"?n:null)}var wI={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},SI=Object.assign,MI={};function Ph(n,e,t){this.props=n,this.context=e,this.refs=MI,this.updater=t||wI}Ph.prototype.isReactComponent={};Ph.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Ph.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function EI(){}EI.prototype=Ph.prototype;function dE(n,e,t){this.props=n,this.context=e,this.refs=MI,this.updater=t||wI}var pE=dE.prototype=new EI;pE.constructor=dE;SI(pE,Ph.prototype);pE.isPureReactComponent=!0;var gD=Array.isArray,bI=Object.prototype.hasOwnProperty,mE={current:null},AI={key:!0,ref:!0,__self:!0,__source:!0};function CI(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)bI.call(e,i)&&!AI.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:om,type:n,key:s,ref:o,props:r,_owner:mE.current}}function Ok(n,e){return{$$typeof:om,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function gE(n){return typeof n=="object"&&n!==null&&n.$$typeof===om}function zk(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var vD=/\/+/g;function P1(n,e){return typeof n=="object"&&n!==null&&n.key!=null?zk(""+n.key):e.toString(36)}function v0(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case om:case bk:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+P1(o,0):i,gD(r)?(t="",n!=null&&(t=n.replace(vD,"$&/")+"/"),v0(r,e,t,"",function(u){return u})):r!=null&&(gE(r)&&(r=Ok(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(vD,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",gD(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+P1(s,a);o+=v0(s,e,t,l,r)}else if(l=Lk(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+P1(s,a++),o+=v0(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Bg(n,e,t){if(n==null)return n;var i=[],r=0;return v0(n,i,"","",function(s){return e.call(t,s,r++)}),i}function Bk(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Fr={current:null},y0={transition:null},Uk={ReactCurrentDispatcher:Fr,ReactCurrentBatchConfig:y0,ReactCurrentOwner:mE};function DI(){throw Error("act(...) is not supported in production builds of React.")}nn.Children={map:Bg,forEach:function(n,e,t){Bg(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Bg(n,function(){e++}),e},toArray:function(n){return Bg(n,function(e){return e})||[]},only:function(n){if(!gE(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};nn.Component=Ph;nn.Fragment=Ak;nn.Profiler=Dk;nn.PureComponent=dE;nn.StrictMode=Ck;nn.Suspense=Ik;nn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Uk;nn.act=DI;nn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=SI({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=mE.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)bI.call(e,l)&&!AI.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:om,type:n.type,key:r,ref:s,props:i,_owner:o}};nn.createContext=function(n){return n={$$typeof:Pk,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:Tk,_context:n},n.Consumer=n};nn.createElement=CI;nn.createFactory=function(n){var e=CI.bind(null,n);return e.type=n,e};nn.createRef=function(){return{current:null}};nn.forwardRef=function(n){return{$$typeof:Rk,render:n}};nn.isValidElement=gE;nn.lazy=function(n){return{$$typeof:Nk,_payload:{_status:-1,_result:n},_init:Bk}};nn.memo=function(n,e){return{$$typeof:Fk,type:n,compare:e===void 0?null:e}};nn.startTransition=function(n){var e=y0.transition;y0.transition={};try{n()}finally{y0.transition=e}};nn.unstable_act=DI;nn.useCallback=function(n,e){return Fr.current.useCallback(n,e)};nn.useContext=function(n){return Fr.current.useContext(n)};nn.useDebugValue=function(){};nn.useDeferredValue=function(n){return Fr.current.useDeferredValue(n)};nn.useEffect=function(n,e){return Fr.current.useEffect(n,e)};nn.useId=function(){return Fr.current.useId()};nn.useImperativeHandle=function(n,e,t){return Fr.current.useImperativeHandle(n,e,t)};nn.useInsertionEffect=function(n,e){return Fr.current.useInsertionEffect(n,e)};nn.useLayoutEffect=function(n,e){return Fr.current.useLayoutEffect(n,e)};nn.useMemo=function(n,e){return Fr.current.useMemo(n,e)};nn.useReducer=function(n,e,t){return Fr.current.useReducer(n,e,t)};nn.useRef=function(n){return Fr.current.useRef(n)};nn.useState=function(n){return Fr.current.useState(n)};nn.useSyncExternalStore=function(n,e,t){return Fr.current.useSyncExternalStore(n,e,t)};nn.useTransition=function(){return Fr.current.useTransition()};nn.version="18.3.1";_I.exports=nn;var ie=_I.exports;const vE=Th(ie),kk=yI({__proto__:null,default:vE},[ie]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hk=ie,Vk=Symbol.for("react.element"),Wk=Symbol.for("react.fragment"),Gk=Object.prototype.hasOwnProperty,jk=Hk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qk={key:!0,ref:!0,__self:!0,__source:!0};function TI(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)Gk.call(e,i)&&!qk.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:Vk,type:n,key:s,ref:o,props:r,_owner:jk.current}}hx.Fragment=Wk;hx.jsx=TI;hx.jsxs=TI;xI.exports=hx;var O=xI.exports,CS={},PI={exports:{}},ys={},RI={exports:{}},II={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(N,W){var X=N.length;N.push(W);e:for(;0<X;){var ee=X-1>>>1,te=N[ee];if(0<r(te,W))N[ee]=W,N[X]=te,X=ee;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var W=N[0],X=N.pop();if(X!==W){N[0]=X;e:for(var ee=0,te=N.length,ce=te>>>1;ee<ce;){var Q=2*(ee+1)-1,le=N[Q],pe=Q+1,ae=N[pe];if(0>r(le,X))pe<te&&0>r(ae,le)?(N[ee]=ae,N[pe]=X,ee=pe):(N[ee]=le,N[Q]=X,ee=Q);else if(pe<te&&0>r(ae,X))N[ee]=ae,N[pe]=X,ee=pe;else break e}}return W}function r(N,W){var X=N.sortIndex-W.sortIndex;return X!==0?X:N.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,h=3,m=!1,v=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(N){for(var W=t(u);W!==null;){if(W.callback===null)i(u);else if(W.startTime<=N)i(u),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(u)}}function E(N){if(g=!1,w(N),!v)if(t(l)!==null)v=!0,G(C);else{var W=t(u);W!==null&&J(E,W.startTime-N)}}function C(N,W){v=!1,g&&(g=!1,y(R),R=-1),m=!0;var X=h;try{for(w(W),f=t(l);f!==null&&(!(f.expirationTime>W)||N&&!I());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,h=f.priorityLevel;var te=ee(f.expirationTime<=W);W=n.unstable_now(),typeof te=="function"?f.callback=te:f===t(l)&&i(l),w(W)}else i(l);f=t(l)}if(f!==null)var ce=!0;else{var Q=t(u);Q!==null&&J(E,Q.startTime-W),ce=!1}return ce}finally{f=null,h=X,m=!1}}var M=!1,T=null,R=-1,A=5,D=-1;function I(){return!(n.unstable_now()-D<A)}function L(){if(T!==null){var N=n.unstable_now();D=N;var W=!0;try{W=T(!0,N)}finally{W?H():(M=!1,T=null)}}else M=!1}var H;if(typeof _=="function")H=function(){_(L)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,$=k.port2;k.port1.onmessage=L,H=function(){$.postMessage(null)}}else H=function(){x(L,0)};function G(N){T=N,M||(M=!0,H())}function J(N,W){R=x(function(){N(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,G(C))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(h){case 1:case 2:case 3:var W=3;break;default:W=h}var X=h;h=W;try{return N()}finally{h=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,W){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var X=h;h=N;try{return W()}finally{h=X}},n.unstable_scheduleCallback=function(N,W,X){var ee=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ee+X:ee):X=ee,N){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=X+te,N={id:c++,callback:W,priorityLevel:N,startTime:X,expirationTime:te,sortIndex:-1},X>ee?(N.sortIndex=X,e(u,N),t(l)===null&&N===t(u)&&(g?(y(R),R=-1):g=!0,J(E,X-ee))):(N.sortIndex=te,e(l,N),v||m||(v=!0,G(C))),N},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(N){var W=h;return function(){var X=h;h=W;try{return N.apply(this,arguments)}finally{h=X}}}})(II);RI.exports=II;var Xk=RI.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $k=ie,ms=Xk;function Je(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var FI=new Set,gp={};function hc(n,e){oh(n,e),oh(n+"Capture",e)}function oh(n,e){for(gp[n]=e,n=0;n<e.length;n++)FI.add(e[n])}var Pa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),DS=Object.prototype.hasOwnProperty,Yk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,yD={},xD={};function Zk(n){return DS.call(xD,n)?!0:DS.call(yD,n)?!1:Yk.test(n)?xD[n]=!0:(yD[n]=!0,!1)}function Kk(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function Jk(n,e,t,i){if(e===null||typeof e>"u"||Kk(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Nr(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ji={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ji[n]=new Nr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ji[e]=new Nr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ji[n]=new Nr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ji[n]=new Nr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ji[n]=new Nr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ji[n]=new Nr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ji[n]=new Nr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ji[n]=new Nr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ji[n]=new Nr(n,5,!1,n.toLowerCase(),null,!1,!1)});var yE=/[\-:]([a-z])/g;function xE(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(yE,xE);Ji[e]=new Nr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(yE,xE);Ji[e]=new Nr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(yE,xE);Ji[e]=new Nr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ji[n]=new Nr(n,1,!1,n.toLowerCase(),null,!1,!1)});Ji.xlinkHref=new Nr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ji[n]=new Nr(n,1,!1,n.toLowerCase(),null,!0,!0)});function _E(n,e,t,i){var r=Ji.hasOwnProperty(e)?Ji[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Jk(e,t,r,i)&&(t=null),i||r===null?Zk(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Ua=$k.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ug=Symbol.for("react.element"),Mf=Symbol.for("react.portal"),Ef=Symbol.for("react.fragment"),wE=Symbol.for("react.strict_mode"),TS=Symbol.for("react.profiler"),NI=Symbol.for("react.provider"),LI=Symbol.for("react.context"),SE=Symbol.for("react.forward_ref"),PS=Symbol.for("react.suspense"),RS=Symbol.for("react.suspense_list"),ME=Symbol.for("react.memo"),ll=Symbol.for("react.lazy"),OI=Symbol.for("react.offscreen"),_D=Symbol.iterator;function cd(n){return n===null||typeof n!="object"?null:(n=_D&&n[_D]||n["@@iterator"],typeof n=="function"?n:null)}var Qn=Object.assign,R1;function Vd(n){if(R1===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);R1=e&&e[1]||""}return`
`+R1+n}var I1=!1;function F1(n,e){if(!n||I1)return"";I1=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(n,[],e)}else{try{e.call()}catch(u){i=u}n.call(e.prototype)}else{try{throw Error()}catch(u){i=u}n()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{I1=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Vd(n):""}function Qk(n){switch(n.tag){case 5:return Vd(n.type);case 16:return Vd("Lazy");case 13:return Vd("Suspense");case 19:return Vd("SuspenseList");case 0:case 2:case 15:return n=F1(n.type,!1),n;case 11:return n=F1(n.type.render,!1),n;case 1:return n=F1(n.type,!0),n;default:return""}}function IS(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case Ef:return"Fragment";case Mf:return"Portal";case TS:return"Profiler";case wE:return"StrictMode";case PS:return"Suspense";case RS:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case LI:return(n.displayName||"Context")+".Consumer";case NI:return(n._context.displayName||"Context")+".Provider";case SE:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case ME:return e=n.displayName||null,e!==null?e:IS(n.type)||"Memo";case ll:e=n._payload,n=n._init;try{return IS(n(e))}catch{}}return null}function e4(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return IS(e);case 8:return e===wE?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pl(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function zI(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function t4(n){var e=zI(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function kg(n){n._valueTracker||(n._valueTracker=t4(n))}function BI(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=zI(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function z0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function FS(n,e){var t=e.checked;return Qn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function wD(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=Pl(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function UI(n,e){e=e.checked,e!=null&&_E(n,"checked",e,!1)}function NS(n,e){UI(n,e);var t=Pl(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?LS(n,e.type,t):e.hasOwnProperty("defaultValue")&&LS(n,e.type,Pl(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function SD(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function LS(n,e,t){(e!=="number"||z0(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Wd=Array.isArray;function Xf(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+Pl(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function OS(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Je(91));return Qn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function MD(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Je(92));if(Wd(t)){if(1<t.length)throw Error(Je(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Pl(t)}}function kI(n,e){var t=Pl(e.value),i=Pl(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function ED(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function HI(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zS(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?HI(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Hg,VI=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Hg=Hg||document.createElement("div"),Hg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hg.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function vp(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Yd={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},n4=["Webkit","ms","Moz","O"];Object.keys(Yd).forEach(function(n){n4.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Yd[e]=Yd[n]})});function WI(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Yd.hasOwnProperty(n)&&Yd[n]?(""+e).trim():e+"px"}function GI(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=WI(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var i4=Qn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function BS(n,e){if(e){if(i4[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Je(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Je(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Je(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Je(62))}}function US(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var kS=null;function EE(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var HS=null,$f=null,Yf=null;function bD(n){if(n=um(n)){if(typeof HS!="function")throw Error(Je(280));var e=n.stateNode;e&&(e=vx(e),HS(n.stateNode,n.type,e))}}function jI(n){$f?Yf?Yf.push(n):Yf=[n]:$f=n}function qI(){if($f){var n=$f,e=Yf;if(Yf=$f=null,bD(n),e)for(n=0;n<e.length;n++)bD(e[n])}}function XI(n,e){return n(e)}function $I(){}var N1=!1;function YI(n,e,t){if(N1)return n(e,t);N1=!0;try{return XI(n,e,t)}finally{N1=!1,($f!==null||Yf!==null)&&($I(),qI())}}function yp(n,e){var t=n.stateNode;if(t===null)return null;var i=vx(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Je(231,e,typeof t));return t}var VS=!1;if(Pa)try{var fd={};Object.defineProperty(fd,"passive",{get:function(){VS=!0}}),window.addEventListener("test",fd,fd),window.removeEventListener("test",fd,fd)}catch{VS=!1}function r4(n,e,t,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var Zd=!1,B0=null,U0=!1,WS=null,s4={onError:function(n){Zd=!0,B0=n}};function o4(n,e,t,i,r,s,o,a,l){Zd=!1,B0=null,r4.apply(s4,arguments)}function a4(n,e,t,i,r,s,o,a,l){if(o4.apply(this,arguments),Zd){if(Zd){var u=B0;Zd=!1,B0=null}else throw Error(Je(198));U0||(U0=!0,WS=u)}}function dc(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function ZI(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function AD(n){if(dc(n)!==n)throw Error(Je(188))}function l4(n){var e=n.alternate;if(!e){if(e=dc(n),e===null)throw Error(Je(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return AD(r),n;if(s===i)return AD(r),e;s=s.sibling}throw Error(Je(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(Je(189))}}if(t.alternate!==i)throw Error(Je(190))}if(t.tag!==3)throw Error(Je(188));return t.stateNode.current===t?n:e}function KI(n){return n=l4(n),n!==null?JI(n):null}function JI(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=JI(n);if(e!==null)return e;n=n.sibling}return null}var QI=ms.unstable_scheduleCallback,CD=ms.unstable_cancelCallback,u4=ms.unstable_shouldYield,c4=ms.unstable_requestPaint,fi=ms.unstable_now,f4=ms.unstable_getCurrentPriorityLevel,bE=ms.unstable_ImmediatePriority,eF=ms.unstable_UserBlockingPriority,k0=ms.unstable_NormalPriority,h4=ms.unstable_LowPriority,tF=ms.unstable_IdlePriority,dx=null,Wo=null;function d4(n){if(Wo&&typeof Wo.onCommitFiberRoot=="function")try{Wo.onCommitFiberRoot(dx,n,void 0,(n.current.flags&128)===128)}catch{}}var co=Math.clz32?Math.clz32:g4,p4=Math.log,m4=Math.LN2;function g4(n){return n>>>=0,n===0?32:31-(p4(n)/m4|0)|0}var Vg=64,Wg=4194304;function Gd(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function H0(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=Gd(a):(s&=o,s!==0&&(i=Gd(s)))}else o=t&~r,o!==0?i=Gd(o):s!==0&&(i=Gd(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-co(e),r=1<<t,i|=n[t],e&=~r;return i}function v4(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function y4(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-co(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=v4(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function GS(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function nF(){var n=Vg;return Vg<<=1,!(Vg&4194240)&&(Vg=64),n}function L1(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function am(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-co(e),n[e]=t}function x4(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-co(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function AE(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-co(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var wn=0;function iF(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var rF,CE,sF,oF,aF,jS=!1,Gg=[],wl=null,Sl=null,Ml=null,xp=new Map,_p=new Map,fl=[],_4="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function DD(n,e){switch(n){case"focusin":case"focusout":wl=null;break;case"dragenter":case"dragleave":Sl=null;break;case"mouseover":case"mouseout":Ml=null;break;case"pointerover":case"pointerout":xp.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_p.delete(e.pointerId)}}function hd(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=um(e),e!==null&&CE(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function w4(n,e,t,i,r){switch(e){case"focusin":return wl=hd(wl,n,e,t,i,r),!0;case"dragenter":return Sl=hd(Sl,n,e,t,i,r),!0;case"mouseover":return Ml=hd(Ml,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return xp.set(s,hd(xp.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,_p.set(s,hd(_p.get(s)||null,n,e,t,i,r)),!0}return!1}function lF(n){var e=Du(n.target);if(e!==null){var t=dc(e);if(t!==null){if(e=t.tag,e===13){if(e=ZI(t),e!==null){n.blockedOn=e,aF(n.priority,function(){sF(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function x0(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=qS(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);kS=i,t.target.dispatchEvent(i),kS=null}else return e=um(t),e!==null&&CE(e),n.blockedOn=t,!1;e.shift()}return!0}function TD(n,e,t){x0(n)&&t.delete(e)}function S4(){jS=!1,wl!==null&&x0(wl)&&(wl=null),Sl!==null&&x0(Sl)&&(Sl=null),Ml!==null&&x0(Ml)&&(Ml=null),xp.forEach(TD),_p.forEach(TD)}function dd(n,e){n.blockedOn===e&&(n.blockedOn=null,jS||(jS=!0,ms.unstable_scheduleCallback(ms.unstable_NormalPriority,S4)))}function wp(n){function e(r){return dd(r,n)}if(0<Gg.length){dd(Gg[0],n);for(var t=1;t<Gg.length;t++){var i=Gg[t];i.blockedOn===n&&(i.blockedOn=null)}}for(wl!==null&&dd(wl,n),Sl!==null&&dd(Sl,n),Ml!==null&&dd(Ml,n),xp.forEach(e),_p.forEach(e),t=0;t<fl.length;t++)i=fl[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<fl.length&&(t=fl[0],t.blockedOn===null);)lF(t),t.blockedOn===null&&fl.shift()}var Zf=Ua.ReactCurrentBatchConfig,V0=!0;function M4(n,e,t,i){var r=wn,s=Zf.transition;Zf.transition=null;try{wn=1,DE(n,e,t,i)}finally{wn=r,Zf.transition=s}}function E4(n,e,t,i){var r=wn,s=Zf.transition;Zf.transition=null;try{wn=4,DE(n,e,t,i)}finally{wn=r,Zf.transition=s}}function DE(n,e,t,i){if(V0){var r=qS(n,e,t,i);if(r===null)j1(n,e,i,W0,t),DD(n,i);else if(w4(r,n,e,t,i))i.stopPropagation();else if(DD(n,i),e&4&&-1<_4.indexOf(n)){for(;r!==null;){var s=um(r);if(s!==null&&rF(s),s=qS(n,e,t,i),s===null&&j1(n,e,i,W0,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else j1(n,e,i,null,t)}}var W0=null;function qS(n,e,t,i){if(W0=null,n=EE(i),n=Du(n),n!==null)if(e=dc(n),e===null)n=null;else if(t=e.tag,t===13){if(n=ZI(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return W0=n,null}function uF(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(f4()){case bE:return 1;case eF:return 4;case k0:case h4:return 16;case tF:return 536870912;default:return 16}default:return 16}}var yl=null,TE=null,_0=null;function cF(){if(_0)return _0;var n,e=TE,t=e.length,i,r="value"in yl?yl.value:yl.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return _0=r.slice(n,1<i?1-i:void 0)}function w0(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function jg(){return!0}function PD(){return!1}function xs(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?jg:PD,this.isPropagationStopped=PD,this}return Qn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=jg)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=jg)},persist:function(){},isPersistent:jg}),e}var Rh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},PE=xs(Rh),lm=Qn({},Rh,{view:0,detail:0}),b4=xs(lm),O1,z1,pd,px=Qn({},lm,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:RE,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==pd&&(pd&&n.type==="mousemove"?(O1=n.screenX-pd.screenX,z1=n.screenY-pd.screenY):z1=O1=0,pd=n),O1)},movementY:function(n){return"movementY"in n?n.movementY:z1}}),RD=xs(px),A4=Qn({},px,{dataTransfer:0}),C4=xs(A4),D4=Qn({},lm,{relatedTarget:0}),B1=xs(D4),T4=Qn({},Rh,{animationName:0,elapsedTime:0,pseudoElement:0}),P4=xs(T4),R4=Qn({},Rh,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),I4=xs(R4),F4=Qn({},Rh,{data:0}),ID=xs(F4),N4={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},L4={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},O4={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function z4(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=O4[n])?!!e[n]:!1}function RE(){return z4}var B4=Qn({},lm,{key:function(n){if(n.key){var e=N4[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=w0(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?L4[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:RE,charCode:function(n){return n.type==="keypress"?w0(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?w0(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),U4=xs(B4),k4=Qn({},px,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),FD=xs(k4),H4=Qn({},lm,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:RE}),V4=xs(H4),W4=Qn({},Rh,{propertyName:0,elapsedTime:0,pseudoElement:0}),G4=xs(W4),j4=Qn({},px,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),q4=xs(j4),X4=[9,13,27,32],IE=Pa&&"CompositionEvent"in window,Kd=null;Pa&&"documentMode"in document&&(Kd=document.documentMode);var $4=Pa&&"TextEvent"in window&&!Kd,fF=Pa&&(!IE||Kd&&8<Kd&&11>=Kd),ND=" ",LD=!1;function hF(n,e){switch(n){case"keyup":return X4.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dF(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var bf=!1;function Y4(n,e){switch(n){case"compositionend":return dF(e);case"keypress":return e.which!==32?null:(LD=!0,ND);case"textInput":return n=e.data,n===ND&&LD?null:n;default:return null}}function Z4(n,e){if(bf)return n==="compositionend"||!IE&&hF(n,e)?(n=cF(),_0=TE=yl=null,bf=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return fF&&e.locale!=="ko"?null:e.data;default:return null}}var K4={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function OD(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!K4[n.type]:e==="textarea"}function pF(n,e,t,i){jI(i),e=G0(e,"onChange"),0<e.length&&(t=new PE("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Jd=null,Sp=null;function J4(n){bF(n,0)}function mx(n){var e=Df(n);if(BI(e))return n}function Q4(n,e){if(n==="change")return e}var mF=!1;if(Pa){var U1;if(Pa){var k1="oninput"in document;if(!k1){var zD=document.createElement("div");zD.setAttribute("oninput","return;"),k1=typeof zD.oninput=="function"}U1=k1}else U1=!1;mF=U1&&(!document.documentMode||9<document.documentMode)}function BD(){Jd&&(Jd.detachEvent("onpropertychange",gF),Sp=Jd=null)}function gF(n){if(n.propertyName==="value"&&mx(Sp)){var e=[];pF(e,Sp,n,EE(n)),YI(J4,e)}}function e5(n,e,t){n==="focusin"?(BD(),Jd=e,Sp=t,Jd.attachEvent("onpropertychange",gF)):n==="focusout"&&BD()}function t5(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return mx(Sp)}function n5(n,e){if(n==="click")return mx(e)}function i5(n,e){if(n==="input"||n==="change")return mx(e)}function r5(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var mo=typeof Object.is=="function"?Object.is:r5;function Mp(n,e){if(mo(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!DS.call(e,r)||!mo(n[r],e[r]))return!1}return!0}function UD(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function kD(n,e){var t=UD(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=UD(t)}}function vF(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?vF(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function yF(){for(var n=window,e=z0();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=z0(n.document)}return e}function FE(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function s5(n){var e=yF(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&vF(t.ownerDocument.documentElement,t)){if(i!==null&&FE(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=kD(t,s);var o=kD(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var o5=Pa&&"documentMode"in document&&11>=document.documentMode,Af=null,XS=null,Qd=null,$S=!1;function HD(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;$S||Af==null||Af!==z0(i)||(i=Af,"selectionStart"in i&&FE(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Qd&&Mp(Qd,i)||(Qd=i,i=G0(XS,"onSelect"),0<i.length&&(e=new PE("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=Af)))}function qg(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Cf={animationend:qg("Animation","AnimationEnd"),animationiteration:qg("Animation","AnimationIteration"),animationstart:qg("Animation","AnimationStart"),transitionend:qg("Transition","TransitionEnd")},H1={},xF={};Pa&&(xF=document.createElement("div").style,"AnimationEvent"in window||(delete Cf.animationend.animation,delete Cf.animationiteration.animation,delete Cf.animationstart.animation),"TransitionEvent"in window||delete Cf.transitionend.transition);function gx(n){if(H1[n])return H1[n];if(!Cf[n])return n;var e=Cf[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in xF)return H1[n]=e[t];return n}var _F=gx("animationend"),wF=gx("animationiteration"),SF=gx("animationstart"),MF=gx("transitionend"),EF=new Map,VD="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function kl(n,e){EF.set(n,e),hc(e,[n])}for(var V1=0;V1<VD.length;V1++){var W1=VD[V1],a5=W1.toLowerCase(),l5=W1[0].toUpperCase()+W1.slice(1);kl(a5,"on"+l5)}kl(_F,"onAnimationEnd");kl(wF,"onAnimationIteration");kl(SF,"onAnimationStart");kl("dblclick","onDoubleClick");kl("focusin","onFocus");kl("focusout","onBlur");kl(MF,"onTransitionEnd");oh("onMouseEnter",["mouseout","mouseover"]);oh("onMouseLeave",["mouseout","mouseover"]);oh("onPointerEnter",["pointerout","pointerover"]);oh("onPointerLeave",["pointerout","pointerover"]);hc("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hc("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hc("onBeforeInput",["compositionend","keypress","textInput","paste"]);hc("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hc("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hc("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u5=new Set("cancel close invalid load scroll toggle".split(" ").concat(jd));function WD(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,a4(i,e,void 0,n),n.currentTarget=null}function bF(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;WD(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;WD(r,a,u),s=l}}}if(U0)throw n=WS,U0=!1,WS=null,n}function On(n,e){var t=e[QS];t===void 0&&(t=e[QS]=new Set);var i=n+"__bubble";t.has(i)||(AF(e,n,2,!1),t.add(i))}function G1(n,e,t){var i=0;e&&(i|=4),AF(t,n,i,e)}var Xg="_reactListening"+Math.random().toString(36).slice(2);function Ep(n){if(!n[Xg]){n[Xg]=!0,FI.forEach(function(t){t!=="selectionchange"&&(u5.has(t)||G1(t,!1,n),G1(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Xg]||(e[Xg]=!0,G1("selectionchange",!1,e))}}function AF(n,e,t,i){switch(uF(e)){case 1:var r=M4;break;case 4:r=E4;break;default:r=DE}t=r.bind(null,e,t,n),r=void 0,!VS||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function j1(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Du(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}YI(function(){var u=s,c=EE(t),f=[];e:{var h=EF.get(n);if(h!==void 0){var m=PE,v=n;switch(n){case"keypress":if(w0(t)===0)break e;case"keydown":case"keyup":m=U4;break;case"focusin":v="focus",m=B1;break;case"focusout":v="blur",m=B1;break;case"beforeblur":case"afterblur":m=B1;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=RD;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=C4;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=V4;break;case _F:case wF:case SF:m=P4;break;case MF:m=G4;break;case"scroll":m=b4;break;case"wheel":m=q4;break;case"copy":case"cut":case"paste":m=I4;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=FD}var g=(e&4)!==0,x=!g&&n==="scroll",y=g?h!==null?h+"Capture":null:h;g=[];for(var _=u,w;_!==null;){w=_;var E=w.stateNode;if(w.tag===5&&E!==null&&(w=E,y!==null&&(E=yp(_,y),E!=null&&g.push(bp(_,E,w)))),x)break;_=_.return}0<g.length&&(h=new m(h,v,null,t,c),f.push({event:h,listeners:g}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",m=n==="mouseout"||n==="pointerout",h&&t!==kS&&(v=t.relatedTarget||t.fromElement)&&(Du(v)||v[Ra]))break e;if((m||h)&&(h=c.window===c?c:(h=c.ownerDocument)?h.defaultView||h.parentWindow:window,m?(v=t.relatedTarget||t.toElement,m=u,v=v?Du(v):null,v!==null&&(x=dc(v),v!==x||v.tag!==5&&v.tag!==6)&&(v=null)):(m=null,v=u),m!==v)){if(g=RD,E="onMouseLeave",y="onMouseEnter",_="mouse",(n==="pointerout"||n==="pointerover")&&(g=FD,E="onPointerLeave",y="onPointerEnter",_="pointer"),x=m==null?h:Df(m),w=v==null?h:Df(v),h=new g(E,_+"leave",m,t,c),h.target=x,h.relatedTarget=w,E=null,Du(c)===u&&(g=new g(y,_+"enter",v,t,c),g.target=w,g.relatedTarget=x,E=g),x=E,m&&v)t:{for(g=m,y=v,_=0,w=g;w;w=jc(w))_++;for(w=0,E=y;E;E=jc(E))w++;for(;0<_-w;)g=jc(g),_--;for(;0<w-_;)y=jc(y),w--;for(;_--;){if(g===y||y!==null&&g===y.alternate)break t;g=jc(g),y=jc(y)}g=null}else g=null;m!==null&&GD(f,h,m,g,!1),v!==null&&x!==null&&GD(f,x,v,g,!0)}}e:{if(h=u?Df(u):window,m=h.nodeName&&h.nodeName.toLowerCase(),m==="select"||m==="input"&&h.type==="file")var C=Q4;else if(OD(h))if(mF)C=i5;else{C=t5;var M=e5}else(m=h.nodeName)&&m.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(C=n5);if(C&&(C=C(n,u))){pF(f,C,t,c);break e}M&&M(n,h,u),n==="focusout"&&(M=h._wrapperState)&&M.controlled&&h.type==="number"&&LS(h,"number",h.value)}switch(M=u?Df(u):window,n){case"focusin":(OD(M)||M.contentEditable==="true")&&(Af=M,XS=u,Qd=null);break;case"focusout":Qd=XS=Af=null;break;case"mousedown":$S=!0;break;case"contextmenu":case"mouseup":case"dragend":$S=!1,HD(f,t,c);break;case"selectionchange":if(o5)break;case"keydown":case"keyup":HD(f,t,c)}var T;if(IE)e:{switch(n){case"compositionstart":var R="onCompositionStart";break e;case"compositionend":R="onCompositionEnd";break e;case"compositionupdate":R="onCompositionUpdate";break e}R=void 0}else bf?hF(n,t)&&(R="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(R="onCompositionStart");R&&(fF&&t.locale!=="ko"&&(bf||R!=="onCompositionStart"?R==="onCompositionEnd"&&bf&&(T=cF()):(yl=c,TE="value"in yl?yl.value:yl.textContent,bf=!0)),M=G0(u,R),0<M.length&&(R=new ID(R,n,null,t,c),f.push({event:R,listeners:M}),T?R.data=T:(T=dF(t),T!==null&&(R.data=T)))),(T=$4?Y4(n,t):Z4(n,t))&&(u=G0(u,"onBeforeInput"),0<u.length&&(c=new ID("onBeforeInput","beforeinput",null,t,c),f.push({event:c,listeners:u}),c.data=T))}bF(f,e)})}function bp(n,e,t){return{instance:n,listener:e,currentTarget:t}}function G0(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=yp(n,t),s!=null&&i.unshift(bp(n,s,r)),s=yp(n,e),s!=null&&i.push(bp(n,s,r))),n=n.return}return i}function jc(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function GD(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=yp(t,s),l!=null&&o.unshift(bp(t,l,a))):r||(l=yp(t,s),l!=null&&o.push(bp(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var c5=/\r\n?/g,f5=/\u0000|\uFFFD/g;function jD(n){return(typeof n=="string"?n:""+n).replace(c5,`
`).replace(f5,"")}function $g(n,e,t){if(e=jD(e),jD(n)!==e&&t)throw Error(Je(425))}function j0(){}var YS=null,ZS=null;function KS(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var JS=typeof setTimeout=="function"?setTimeout:void 0,h5=typeof clearTimeout=="function"?clearTimeout:void 0,qD=typeof Promise=="function"?Promise:void 0,d5=typeof queueMicrotask=="function"?queueMicrotask:typeof qD<"u"?function(n){return qD.resolve(null).then(n).catch(p5)}:JS;function p5(n){setTimeout(function(){throw n})}function q1(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),wp(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);wp(e)}function El(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function XD(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Ih=Math.random().toString(36).slice(2),zo="__reactFiber$"+Ih,Ap="__reactProps$"+Ih,Ra="__reactContainer$"+Ih,QS="__reactEvents$"+Ih,m5="__reactListeners$"+Ih,g5="__reactHandles$"+Ih;function Du(n){var e=n[zo];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ra]||t[zo]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=XD(n);n!==null;){if(t=n[zo])return t;n=XD(n)}return e}n=t,t=n.parentNode}return null}function um(n){return n=n[zo]||n[Ra],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Df(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Je(33))}function vx(n){return n[Ap]||null}var eM=[],Tf=-1;function Hl(n){return{current:n}}function Bn(n){0>Tf||(n.current=eM[Tf],eM[Tf]=null,Tf--)}function Rn(n,e){Tf++,eM[Tf]=n.current,n.current=e}var Rl={},xr=Hl(Rl),Gr=Hl(!1),Ju=Rl;function ah(n,e){var t=n.type.contextTypes;if(!t)return Rl;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function jr(n){return n=n.childContextTypes,n!=null}function q0(){Bn(Gr),Bn(xr)}function $D(n,e,t){if(xr.current!==Rl)throw Error(Je(168));Rn(xr,e),Rn(Gr,t)}function CF(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Je(108,e4(n)||"Unknown",r));return Qn({},t,i)}function X0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Rl,Ju=xr.current,Rn(xr,n),Rn(Gr,Gr.current),!0}function YD(n,e,t){var i=n.stateNode;if(!i)throw Error(Je(169));t?(n=CF(n,e,Ju),i.__reactInternalMemoizedMergedChildContext=n,Bn(Gr),Bn(xr),Rn(xr,n)):Bn(Gr),Rn(Gr,t)}var pa=null,yx=!1,X1=!1;function DF(n){pa===null?pa=[n]:pa.push(n)}function v5(n){yx=!0,DF(n)}function Vl(){if(!X1&&pa!==null){X1=!0;var n=0,e=wn;try{var t=pa;for(wn=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}pa=null,yx=!1}catch(r){throw pa!==null&&(pa=pa.slice(n+1)),QI(bE,Vl),r}finally{wn=e,X1=!1}}return null}var Pf=[],Rf=0,$0=null,Y0=0,Fs=[],Ns=0,Qu=null,_a=1,wa="";function wu(n,e){Pf[Rf++]=Y0,Pf[Rf++]=$0,$0=n,Y0=e}function TF(n,e,t){Fs[Ns++]=_a,Fs[Ns++]=wa,Fs[Ns++]=Qu,Qu=n;var i=_a;n=wa;var r=32-co(i)-1;i&=~(1<<r),t+=1;var s=32-co(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,_a=1<<32-co(e)+r|t<<r|i,wa=s+n}else _a=1<<s|t<<r|i,wa=n}function NE(n){n.return!==null&&(wu(n,1),TF(n,1,0))}function LE(n){for(;n===$0;)$0=Pf[--Rf],Pf[Rf]=null,Y0=Pf[--Rf],Pf[Rf]=null;for(;n===Qu;)Qu=Fs[--Ns],Fs[Ns]=null,wa=Fs[--Ns],Fs[Ns]=null,_a=Fs[--Ns],Fs[Ns]=null}var hs=null,cs=null,Wn=!1,so=null;function PF(n,e){var t=Os(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function ZD(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,hs=n,cs=El(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,hs=n,cs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Qu!==null?{id:_a,overflow:wa}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Os(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,hs=n,cs=null,!0):!1;default:return!1}}function tM(n){return(n.mode&1)!==0&&(n.flags&128)===0}function nM(n){if(Wn){var e=cs;if(e){var t=e;if(!ZD(n,e)){if(tM(n))throw Error(Je(418));e=El(t.nextSibling);var i=hs;e&&ZD(n,e)?PF(i,t):(n.flags=n.flags&-4097|2,Wn=!1,hs=n)}}else{if(tM(n))throw Error(Je(418));n.flags=n.flags&-4097|2,Wn=!1,hs=n}}}function KD(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;hs=n}function Yg(n){if(n!==hs)return!1;if(!Wn)return KD(n),Wn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!KS(n.type,n.memoizedProps)),e&&(e=cs)){if(tM(n))throw RF(),Error(Je(418));for(;e;)PF(n,e),e=El(e.nextSibling)}if(KD(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Je(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){cs=El(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}cs=null}}else cs=hs?El(n.stateNode.nextSibling):null;return!0}function RF(){for(var n=cs;n;)n=El(n.nextSibling)}function lh(){cs=hs=null,Wn=!1}function OE(n){so===null?so=[n]:so.push(n)}var y5=Ua.ReactCurrentBatchConfig;function md(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Je(309));var i=t.stateNode}if(!i)throw Error(Je(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Je(284));if(!t._owner)throw Error(Je(290,n))}return n}function Zg(n,e){throw n=Object.prototype.toString.call(e),Error(Je(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function JD(n){var e=n._init;return e(n._payload)}function IF(n){function e(y,_){if(n){var w=y.deletions;w===null?(y.deletions=[_],y.flags|=16):w.push(_)}}function t(y,_){if(!n)return null;for(;_!==null;)e(y,_),_=_.sibling;return null}function i(y,_){for(y=new Map;_!==null;)_.key!==null?y.set(_.key,_):y.set(_.index,_),_=_.sibling;return y}function r(y,_){return y=Dl(y,_),y.index=0,y.sibling=null,y}function s(y,_,w){return y.index=w,n?(w=y.alternate,w!==null?(w=w.index,w<_?(y.flags|=2,_):w):(y.flags|=2,_)):(y.flags|=1048576,_)}function o(y){return n&&y.alternate===null&&(y.flags|=2),y}function a(y,_,w,E){return _===null||_.tag!==6?(_=ew(w,y.mode,E),_.return=y,_):(_=r(_,w),_.return=y,_)}function l(y,_,w,E){var C=w.type;return C===Ef?c(y,_,w.props.children,E,w.key):_!==null&&(_.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ll&&JD(C)===_.type)?(E=r(_,w.props),E.ref=md(y,_,w),E.return=y,E):(E=D0(w.type,w.key,w.props,null,y.mode,E),E.ref=md(y,_,w),E.return=y,E)}function u(y,_,w,E){return _===null||_.tag!==4||_.stateNode.containerInfo!==w.containerInfo||_.stateNode.implementation!==w.implementation?(_=tw(w,y.mode,E),_.return=y,_):(_=r(_,w.children||[]),_.return=y,_)}function c(y,_,w,E,C){return _===null||_.tag!==7?(_=Gu(w,y.mode,E,C),_.return=y,_):(_=r(_,w),_.return=y,_)}function f(y,_,w){if(typeof _=="string"&&_!==""||typeof _=="number")return _=ew(""+_,y.mode,w),_.return=y,_;if(typeof _=="object"&&_!==null){switch(_.$$typeof){case Ug:return w=D0(_.type,_.key,_.props,null,y.mode,w),w.ref=md(y,null,_),w.return=y,w;case Mf:return _=tw(_,y.mode,w),_.return=y,_;case ll:var E=_._init;return f(y,E(_._payload),w)}if(Wd(_)||cd(_))return _=Gu(_,y.mode,w,null),_.return=y,_;Zg(y,_)}return null}function h(y,_,w,E){var C=_!==null?_.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return C!==null?null:a(y,_,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case Ug:return w.key===C?l(y,_,w,E):null;case Mf:return w.key===C?u(y,_,w,E):null;case ll:return C=w._init,h(y,_,C(w._payload),E)}if(Wd(w)||cd(w))return C!==null?null:c(y,_,w,E,null);Zg(y,w)}return null}function m(y,_,w,E,C){if(typeof E=="string"&&E!==""||typeof E=="number")return y=y.get(w)||null,a(_,y,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Ug:return y=y.get(E.key===null?w:E.key)||null,l(_,y,E,C);case Mf:return y=y.get(E.key===null?w:E.key)||null,u(_,y,E,C);case ll:var M=E._init;return m(y,_,w,M(E._payload),C)}if(Wd(E)||cd(E))return y=y.get(w)||null,c(_,y,E,C,null);Zg(_,E)}return null}function v(y,_,w,E){for(var C=null,M=null,T=_,R=_=0,A=null;T!==null&&R<w.length;R++){T.index>R?(A=T,T=null):A=T.sibling;var D=h(y,T,w[R],E);if(D===null){T===null&&(T=A);break}n&&T&&D.alternate===null&&e(y,T),_=s(D,_,R),M===null?C=D:M.sibling=D,M=D,T=A}if(R===w.length)return t(y,T),Wn&&wu(y,R),C;if(T===null){for(;R<w.length;R++)T=f(y,w[R],E),T!==null&&(_=s(T,_,R),M===null?C=T:M.sibling=T,M=T);return Wn&&wu(y,R),C}for(T=i(y,T);R<w.length;R++)A=m(T,y,R,w[R],E),A!==null&&(n&&A.alternate!==null&&T.delete(A.key===null?R:A.key),_=s(A,_,R),M===null?C=A:M.sibling=A,M=A);return n&&T.forEach(function(I){return e(y,I)}),Wn&&wu(y,R),C}function g(y,_,w,E){var C=cd(w);if(typeof C!="function")throw Error(Je(150));if(w=C.call(w),w==null)throw Error(Je(151));for(var M=C=null,T=_,R=_=0,A=null,D=w.next();T!==null&&!D.done;R++,D=w.next()){T.index>R?(A=T,T=null):A=T.sibling;var I=h(y,T,D.value,E);if(I===null){T===null&&(T=A);break}n&&T&&I.alternate===null&&e(y,T),_=s(I,_,R),M===null?C=I:M.sibling=I,M=I,T=A}if(D.done)return t(y,T),Wn&&wu(y,R),C;if(T===null){for(;!D.done;R++,D=w.next())D=f(y,D.value,E),D!==null&&(_=s(D,_,R),M===null?C=D:M.sibling=D,M=D);return Wn&&wu(y,R),C}for(T=i(y,T);!D.done;R++,D=w.next())D=m(T,y,R,D.value,E),D!==null&&(n&&D.alternate!==null&&T.delete(D.key===null?R:D.key),_=s(D,_,R),M===null?C=D:M.sibling=D,M=D);return n&&T.forEach(function(L){return e(y,L)}),Wn&&wu(y,R),C}function x(y,_,w,E){if(typeof w=="object"&&w!==null&&w.type===Ef&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case Ug:e:{for(var C=w.key,M=_;M!==null;){if(M.key===C){if(C=w.type,C===Ef){if(M.tag===7){t(y,M.sibling),_=r(M,w.props.children),_.return=y,y=_;break e}}else if(M.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ll&&JD(C)===M.type){t(y,M.sibling),_=r(M,w.props),_.ref=md(y,M,w),_.return=y,y=_;break e}t(y,M);break}else e(y,M);M=M.sibling}w.type===Ef?(_=Gu(w.props.children,y.mode,E,w.key),_.return=y,y=_):(E=D0(w.type,w.key,w.props,null,y.mode,E),E.ref=md(y,_,w),E.return=y,y=E)}return o(y);case Mf:e:{for(M=w.key;_!==null;){if(_.key===M)if(_.tag===4&&_.stateNode.containerInfo===w.containerInfo&&_.stateNode.implementation===w.implementation){t(y,_.sibling),_=r(_,w.children||[]),_.return=y,y=_;break e}else{t(y,_);break}else e(y,_);_=_.sibling}_=tw(w,y.mode,E),_.return=y,y=_}return o(y);case ll:return M=w._init,x(y,_,M(w._payload),E)}if(Wd(w))return v(y,_,w,E);if(cd(w))return g(y,_,w,E);Zg(y,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,_!==null&&_.tag===6?(t(y,_.sibling),_=r(_,w),_.return=y,y=_):(t(y,_),_=ew(w,y.mode,E),_.return=y,y=_),o(y)):t(y,_)}return x}var uh=IF(!0),FF=IF(!1),Z0=Hl(null),K0=null,If=null,zE=null;function BE(){zE=If=K0=null}function UE(n){var e=Z0.current;Bn(Z0),n._currentValue=e}function iM(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Kf(n,e){K0=n,zE=If=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Wr=!0),n.firstContext=null)}function ks(n){var e=n._currentValue;if(zE!==n)if(n={context:n,memoizedValue:e,next:null},If===null){if(K0===null)throw Error(Je(308));If=n,K0.dependencies={lanes:0,firstContext:n}}else If=If.next=n;return e}var Tu=null;function kE(n){Tu===null?Tu=[n]:Tu.push(n)}function NF(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,kE(e)):(t.next=r.next,r.next=t),e.interleaved=t,Ia(n,i)}function Ia(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var ul=!1;function HE(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function LF(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Aa(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function bl(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,un&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Ia(n,t)}return r=i.interleaved,r===null?(e.next=e,kE(i)):(e.next=r.next,r.next=e),i.interleaved=e,Ia(n,t)}function S0(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,AE(n,t)}}function QD(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function J0(n,e,t,i){var r=n.updateQueue;ul=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=n.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var f=r.baseState;o=0,c=u=l=null,a=s;do{var h=a.lane,m=a.eventTime;if((i&h)===h){c!==null&&(c=c.next={eventTime:m,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var v=n,g=a;switch(h=e,m=t,g.tag){case 1:if(v=g.payload,typeof v=="function"){f=v.call(m,f,h);break e}f=v;break e;case 3:v.flags=v.flags&-65537|128;case 0:if(v=g.payload,h=typeof v=="function"?v.call(m,f,h):v,h==null)break e;f=Qn({},f,h);break e;case 2:ul=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,h=r.effects,h===null?r.effects=[a]:h.push(a))}else m={eventTime:m,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=m,l=f):c=c.next=m,o|=h;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;h=a,a=h.next,h.next=null,r.lastBaseUpdate=h,r.shared.pending=null}}while(!0);if(c===null&&(l=f),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);tc|=o,n.lanes=o,n.memoizedState=f}}function eT(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Je(191,r));r.call(i)}}}var cm={},Go=Hl(cm),Cp=Hl(cm),Dp=Hl(cm);function Pu(n){if(n===cm)throw Error(Je(174));return n}function VE(n,e){switch(Rn(Dp,e),Rn(Cp,n),Rn(Go,cm),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zS(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=zS(e,n)}Bn(Go),Rn(Go,e)}function ch(){Bn(Go),Bn(Cp),Bn(Dp)}function OF(n){Pu(Dp.current);var e=Pu(Go.current),t=zS(e,n.type);e!==t&&(Rn(Cp,n),Rn(Go,t))}function WE(n){Cp.current===n&&(Bn(Go),Bn(Cp))}var Yn=Hl(0);function Q0(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var $1=[];function GE(){for(var n=0;n<$1.length;n++)$1[n]._workInProgressVersionPrimary=null;$1.length=0}var M0=Ua.ReactCurrentDispatcher,Y1=Ua.ReactCurrentBatchConfig,ec=0,Jn=null,Ei=null,Li=null,ey=!1,ep=!1,Tp=0,x5=0;function sr(){throw Error(Je(321))}function jE(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!mo(n[t],e[t]))return!1;return!0}function qE(n,e,t,i,r,s){if(ec=s,Jn=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,M0.current=n===null||n.memoizedState===null?M5:E5,n=t(i,r),ep){s=0;do{if(ep=!1,Tp=0,25<=s)throw Error(Je(301));s+=1,Li=Ei=null,e.updateQueue=null,M0.current=b5,n=t(i,r)}while(ep)}if(M0.current=ty,e=Ei!==null&&Ei.next!==null,ec=0,Li=Ei=Jn=null,ey=!1,e)throw Error(Je(300));return n}function XE(){var n=Tp!==0;return Tp=0,n}function No(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Li===null?Jn.memoizedState=Li=n:Li=Li.next=n,Li}function Hs(){if(Ei===null){var n=Jn.alternate;n=n!==null?n.memoizedState:null}else n=Ei.next;var e=Li===null?Jn.memoizedState:Li.next;if(e!==null)Li=e,Ei=n;else{if(n===null)throw Error(Je(310));Ei=n,n={memoizedState:Ei.memoizedState,baseState:Ei.baseState,baseQueue:Ei.baseQueue,queue:Ei.queue,next:null},Li===null?Jn.memoizedState=Li=n:Li=Li.next=n}return Li}function Pp(n,e){return typeof e=="function"?e(n):e}function Z1(n){var e=Hs(),t=e.queue;if(t===null)throw Error(Je(311));t.lastRenderedReducer=n;var i=Ei,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((ec&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:n(i,u.action);else{var f={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,Jn.lanes|=c,tc|=c}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,mo(i,e.memoizedState)||(Wr=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,Jn.lanes|=s,tc|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function K1(n){var e=Hs(),t=e.queue;if(t===null)throw Error(Je(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);mo(s,e.memoizedState)||(Wr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function zF(){}function BF(n,e){var t=Jn,i=Hs(),r=e(),s=!mo(i.memoizedState,r);if(s&&(i.memoizedState=r,Wr=!0),i=i.queue,$E(HF.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Li!==null&&Li.memoizedState.tag&1){if(t.flags|=2048,Rp(9,kF.bind(null,t,i,r,e),void 0,null),zi===null)throw Error(Je(349));ec&30||UF(t,e,r)}return r}function UF(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=Jn.updateQueue,e===null?(e={lastEffect:null,stores:null},Jn.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function kF(n,e,t,i){e.value=t,e.getSnapshot=i,VF(e)&&WF(n)}function HF(n,e,t){return t(function(){VF(e)&&WF(n)})}function VF(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!mo(n,t)}catch{return!0}}function WF(n){var e=Ia(n,1);e!==null&&fo(e,n,1,-1)}function tT(n){var e=No();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pp,lastRenderedState:n},e.queue=n,n=n.dispatch=S5.bind(null,Jn,n),[e.memoizedState,n]}function Rp(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=Jn.updateQueue,e===null?(e={lastEffect:null,stores:null},Jn.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function GF(){return Hs().memoizedState}function E0(n,e,t,i){var r=No();Jn.flags|=n,r.memoizedState=Rp(1|e,t,void 0,i===void 0?null:i)}function xx(n,e,t,i){var r=Hs();i=i===void 0?null:i;var s=void 0;if(Ei!==null){var o=Ei.memoizedState;if(s=o.destroy,i!==null&&jE(i,o.deps)){r.memoizedState=Rp(e,t,s,i);return}}Jn.flags|=n,r.memoizedState=Rp(1|e,t,s,i)}function nT(n,e){return E0(8390656,8,n,e)}function $E(n,e){return xx(2048,8,n,e)}function jF(n,e){return xx(4,2,n,e)}function qF(n,e){return xx(4,4,n,e)}function XF(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function $F(n,e,t){return t=t!=null?t.concat([n]):null,xx(4,4,XF.bind(null,e,n),t)}function YE(){}function YF(n,e){var t=Hs();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&jE(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function ZF(n,e){var t=Hs();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&jE(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function KF(n,e,t){return ec&21?(mo(t,e)||(t=nF(),Jn.lanes|=t,tc|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Wr=!0),n.memoizedState=t)}function _5(n,e){var t=wn;wn=t!==0&&4>t?t:4,n(!0);var i=Y1.transition;Y1.transition={};try{n(!1),e()}finally{wn=t,Y1.transition=i}}function JF(){return Hs().memoizedState}function w5(n,e,t){var i=Cl(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},QF(n))eN(e,t);else if(t=NF(n,e,t,i),t!==null){var r=Pr();fo(t,n,i,r),tN(t,e,i)}}function S5(n,e,t){var i=Cl(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(QF(n))eN(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,mo(a,o)){var l=e.interleaved;l===null?(r.next=r,kE(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=NF(n,e,r,i),t!==null&&(r=Pr(),fo(t,n,i,r),tN(t,e,i))}}function QF(n){var e=n.alternate;return n===Jn||e!==null&&e===Jn}function eN(n,e){ep=ey=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function tN(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,AE(n,t)}}var ty={readContext:ks,useCallback:sr,useContext:sr,useEffect:sr,useImperativeHandle:sr,useInsertionEffect:sr,useLayoutEffect:sr,useMemo:sr,useReducer:sr,useRef:sr,useState:sr,useDebugValue:sr,useDeferredValue:sr,useTransition:sr,useMutableSource:sr,useSyncExternalStore:sr,useId:sr,unstable_isNewReconciler:!1},M5={readContext:ks,useCallback:function(n,e){return No().memoizedState=[n,e===void 0?null:e],n},useContext:ks,useEffect:nT,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,E0(4194308,4,XF.bind(null,e,n),t)},useLayoutEffect:function(n,e){return E0(4194308,4,n,e)},useInsertionEffect:function(n,e){return E0(4,2,n,e)},useMemo:function(n,e){var t=No();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=No();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=w5.bind(null,Jn,n),[i.memoizedState,n]},useRef:function(n){var e=No();return n={current:n},e.memoizedState=n},useState:tT,useDebugValue:YE,useDeferredValue:function(n){return No().memoizedState=n},useTransition:function(){var n=tT(!1),e=n[0];return n=_5.bind(null,n[1]),No().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=Jn,r=No();if(Wn){if(t===void 0)throw Error(Je(407));t=t()}else{if(t=e(),zi===null)throw Error(Je(349));ec&30||UF(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,nT(HF.bind(null,i,s,n),[n]),i.flags|=2048,Rp(9,kF.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=No(),e=zi.identifierPrefix;if(Wn){var t=wa,i=_a;t=(i&~(1<<32-co(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Tp++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=x5++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},E5={readContext:ks,useCallback:YF,useContext:ks,useEffect:$E,useImperativeHandle:$F,useInsertionEffect:jF,useLayoutEffect:qF,useMemo:ZF,useReducer:Z1,useRef:GF,useState:function(){return Z1(Pp)},useDebugValue:YE,useDeferredValue:function(n){var e=Hs();return KF(e,Ei.memoizedState,n)},useTransition:function(){var n=Z1(Pp)[0],e=Hs().memoizedState;return[n,e]},useMutableSource:zF,useSyncExternalStore:BF,useId:JF,unstable_isNewReconciler:!1},b5={readContext:ks,useCallback:YF,useContext:ks,useEffect:$E,useImperativeHandle:$F,useInsertionEffect:jF,useLayoutEffect:qF,useMemo:ZF,useReducer:K1,useRef:GF,useState:function(){return K1(Pp)},useDebugValue:YE,useDeferredValue:function(n){var e=Hs();return Ei===null?e.memoizedState=n:KF(e,Ei.memoizedState,n)},useTransition:function(){var n=K1(Pp)[0],e=Hs().memoizedState;return[n,e]},useMutableSource:zF,useSyncExternalStore:BF,useId:JF,unstable_isNewReconciler:!1};function eo(n,e){if(n&&n.defaultProps){e=Qn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function rM(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Qn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var _x={isMounted:function(n){return(n=n._reactInternals)?dc(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Pr(),r=Cl(n),s=Aa(i,r);s.payload=e,t!=null&&(s.callback=t),e=bl(n,s,r),e!==null&&(fo(e,n,r,i),S0(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Pr(),r=Cl(n),s=Aa(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=bl(n,s,r),e!==null&&(fo(e,n,r,i),S0(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Pr(),i=Cl(n),r=Aa(t,i);r.tag=2,e!=null&&(r.callback=e),e=bl(n,r,i),e!==null&&(fo(e,n,i,t),S0(e,n,i))}};function iT(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Mp(t,i)||!Mp(r,s):!0}function nN(n,e,t){var i=!1,r=Rl,s=e.contextType;return typeof s=="object"&&s!==null?s=ks(s):(r=jr(e)?Ju:xr.current,i=e.contextTypes,s=(i=i!=null)?ah(n,r):Rl),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=_x,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function rT(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&_x.enqueueReplaceState(e,e.state,null)}function sM(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},HE(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=ks(s):(s=jr(e)?Ju:xr.current,r.context=ah(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(rM(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&_x.enqueueReplaceState(r,r.state,null),J0(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function fh(n,e){try{var t="",i=e;do t+=Qk(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function J1(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function oM(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var A5=typeof WeakMap=="function"?WeakMap:Map;function iN(n,e,t){t=Aa(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){iy||(iy=!0,gM=i),oM(n,e)},t}function rN(n,e,t){t=Aa(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){oM(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){oM(n,e),typeof i!="function"&&(Al===null?Al=new Set([this]):Al.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function sT(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new A5;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=k5.bind(null,n,e,t),e.then(n,n))}function oT(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function aT(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Aa(-1,1),e.tag=2,bl(t,e,1))),t.lanes|=1),n)}var C5=Ua.ReactCurrentOwner,Wr=!1;function Ar(n,e,t,i){e.child=n===null?FF(e,null,t,i):uh(e,n.child,t,i)}function lT(n,e,t,i,r){t=t.render;var s=e.ref;return Kf(e,r),i=qE(n,e,t,i,s,r),t=XE(),n!==null&&!Wr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Fa(n,e,r)):(Wn&&t&&NE(e),e.flags|=1,Ar(n,e,i,r),e.child)}function uT(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!ib(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,sN(n,e,s,i,r)):(n=D0(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Mp,t(o,i)&&n.ref===e.ref)return Fa(n,e,r)}return e.flags|=1,n=Dl(s,i),n.ref=e.ref,n.return=e,e.child=n}function sN(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Mp(s,i)&&n.ref===e.ref)if(Wr=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Wr=!0);else return e.lanes=n.lanes,Fa(n,e,r)}return aM(n,e,t,i,r)}function oN(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Rn(Nf,as),as|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Rn(Nf,as),as|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,Rn(Nf,as),as|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Rn(Nf,as),as|=i;return Ar(n,e,r,t),e.child}function aN(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function aM(n,e,t,i,r){var s=jr(t)?Ju:xr.current;return s=ah(e,s),Kf(e,r),t=qE(n,e,t,i,s,r),i=XE(),n!==null&&!Wr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Fa(n,e,r)):(Wn&&i&&NE(e),e.flags|=1,Ar(n,e,t,r),e.child)}function cT(n,e,t,i,r){if(jr(t)){var s=!0;X0(e)}else s=!1;if(Kf(e,r),e.stateNode===null)b0(n,e),nN(e,t,i),sM(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=t.contextType;typeof u=="object"&&u!==null?u=ks(u):(u=jr(t)?Ju:xr.current,u=ah(e,u));var c=t.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&rT(e,o,i,u),ul=!1;var h=e.memoizedState;o.state=h,J0(e,i,o,r),l=e.memoizedState,a!==i||h!==l||Gr.current||ul?(typeof c=="function"&&(rM(e,t,c,i),l=e.memoizedState),(a=ul||iT(e,t,a,i,h,l,u))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,LF(n,e),a=e.memoizedProps,u=e.type===e.elementType?a:eo(e.type,a),o.props=u,f=e.pendingProps,h=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=ks(l):(l=jr(t)?Ju:xr.current,l=ah(e,l));var m=t.getDerivedStateFromProps;(c=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||h!==l)&&rT(e,o,i,l),ul=!1,h=e.memoizedState,o.state=h,J0(e,i,o,r);var v=e.memoizedState;a!==f||h!==v||Gr.current||ul?(typeof m=="function"&&(rM(e,t,m,i),v=e.memoizedState),(u=ul||iT(e,t,u,i,h,v,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,v,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,v,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=v),o.props=i,o.state=v,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),i=!1)}return lM(n,e,t,i,s,r)}function lM(n,e,t,i,r,s){aN(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&YD(e,t,!1),Fa(n,e,s);i=e.stateNode,C5.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=uh(e,n.child,null,s),e.child=uh(e,null,a,s)):Ar(n,e,a,s),e.memoizedState=i.state,r&&YD(e,t,!0),e.child}function lN(n){var e=n.stateNode;e.pendingContext?$D(n,e.pendingContext,e.pendingContext!==e.context):e.context&&$D(n,e.context,!1),VE(n,e.containerInfo)}function fT(n,e,t,i,r){return lh(),OE(r),e.flags|=256,Ar(n,e,t,i),e.child}var uM={dehydrated:null,treeContext:null,retryLane:0};function cM(n){return{baseLanes:n,cachePool:null,transitions:null}}function uN(n,e,t){var i=e.pendingProps,r=Yn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Rn(Yn,r&1),n===null)return nM(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Mx(o,i,0,null),n=Gu(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=cM(t),e.memoizedState=uM,n):ZE(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return D5(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Dl(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Dl(a,s):(s=Gu(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?cM(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=uM,i}return s=n.child,n=s.sibling,i=Dl(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function ZE(n,e){return e=Mx({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Kg(n,e,t,i){return i!==null&&OE(i),uh(e,n.child,null,t),n=ZE(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function D5(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=J1(Error(Je(422))),Kg(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Mx({mode:"visible",children:i.children},r,0,null),s=Gu(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&uh(e,n.child,null,o),e.child.memoizedState=cM(o),e.memoizedState=uM,s);if(!(e.mode&1))return Kg(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Je(419)),i=J1(s,i,void 0),Kg(n,e,o,i)}if(a=(o&n.childLanes)!==0,Wr||a){if(i=zi,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Ia(n,r),fo(i,n,r,-1))}return nb(),i=J1(Error(Je(421))),Kg(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=H5.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,cs=El(r.nextSibling),hs=e,Wn=!0,so=null,n!==null&&(Fs[Ns++]=_a,Fs[Ns++]=wa,Fs[Ns++]=Qu,_a=n.id,wa=n.overflow,Qu=e),e=ZE(e,i.children),e.flags|=4096,e)}function hT(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),iM(n.return,e,t)}function Q1(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function cN(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Ar(n,e,i.children,t),i=Yn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&hT(n,t,e);else if(n.tag===19)hT(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Rn(Yn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&Q0(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),Q1(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&Q0(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}Q1(e,!0,t,null,s);break;case"together":Q1(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function b0(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Fa(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),tc|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Je(153));if(e.child!==null){for(n=e.child,t=Dl(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Dl(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function T5(n,e,t){switch(e.tag){case 3:lN(e),lh();break;case 5:OF(e);break;case 1:jr(e.type)&&X0(e);break;case 4:VE(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Rn(Z0,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Rn(Yn,Yn.current&1),e.flags|=128,null):t&e.child.childLanes?uN(n,e,t):(Rn(Yn,Yn.current&1),n=Fa(n,e,t),n!==null?n.sibling:null);Rn(Yn,Yn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return cN(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Rn(Yn,Yn.current),i)break;return null;case 22:case 23:return e.lanes=0,oN(n,e,t)}return Fa(n,e,t)}var fN,fM,hN,dN;fN=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};fM=function(){};hN=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Pu(Go.current);var s=null;switch(t){case"input":r=FS(n,r),i=FS(n,i),s=[];break;case"select":r=Qn({},r,{value:void 0}),i=Qn({},i,{value:void 0}),s=[];break;case"textarea":r=OS(n,r),i=OS(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=j0)}BS(t,i);var o;t=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(gp.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(gp.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&On("scroll",n),s||a===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};dN=function(n,e,t,i){t!==i&&(e.flags|=4)};function gd(n,e){if(!Wn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function or(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function P5(n,e,t){var i=e.pendingProps;switch(LE(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return or(e),null;case 1:return jr(e.type)&&q0(),or(e),null;case 3:return i=e.stateNode,ch(),Bn(Gr),Bn(xr),GE(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Yg(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,so!==null&&(xM(so),so=null))),fM(n,e),or(e),null;case 5:WE(e);var r=Pu(Dp.current);if(t=e.type,n!==null&&e.stateNode!=null)hN(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Je(166));return or(e),null}if(n=Pu(Go.current),Yg(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[zo]=e,i[Ap]=s,n=(e.mode&1)!==0,t){case"dialog":On("cancel",i),On("close",i);break;case"iframe":case"object":case"embed":On("load",i);break;case"video":case"audio":for(r=0;r<jd.length;r++)On(jd[r],i);break;case"source":On("error",i);break;case"img":case"image":case"link":On("error",i),On("load",i);break;case"details":On("toggle",i);break;case"input":wD(i,s),On("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},On("invalid",i);break;case"textarea":MD(i,s),On("invalid",i)}BS(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&$g(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&$g(i.textContent,a,n),r=["children",""+a]):gp.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&On("scroll",i)}switch(t){case"input":kg(i),SD(i,s,!0);break;case"textarea":kg(i),ED(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=j0)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=HI(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[zo]=e,n[Ap]=i,fN(n,e,!1,!1),e.stateNode=n;e:{switch(o=US(t,i),t){case"dialog":On("cancel",n),On("close",n),r=i;break;case"iframe":case"object":case"embed":On("load",n),r=i;break;case"video":case"audio":for(r=0;r<jd.length;r++)On(jd[r],n);r=i;break;case"source":On("error",n),r=i;break;case"img":case"image":case"link":On("error",n),On("load",n),r=i;break;case"details":On("toggle",n),r=i;break;case"input":wD(n,i),r=FS(n,i),On("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=Qn({},i,{value:void 0}),On("invalid",n);break;case"textarea":MD(n,i),r=OS(n,i),On("invalid",n);break;default:r=i}BS(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?GI(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&VI(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&vp(n,l):typeof l=="number"&&vp(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(gp.hasOwnProperty(s)?l!=null&&s==="onScroll"&&On("scroll",n):l!=null&&_E(n,s,l,o))}switch(t){case"input":kg(n),SD(n,i,!1);break;case"textarea":kg(n),ED(n);break;case"option":i.value!=null&&n.setAttribute("value",""+Pl(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Xf(n,!!i.multiple,s,!1):i.defaultValue!=null&&Xf(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=j0)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return or(e),null;case 6:if(n&&e.stateNode!=null)dN(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Je(166));if(t=Pu(Dp.current),Pu(Go.current),Yg(e)){if(i=e.stateNode,t=e.memoizedProps,i[zo]=e,(s=i.nodeValue!==t)&&(n=hs,n!==null))switch(n.tag){case 3:$g(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&$g(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[zo]=e,e.stateNode=i}return or(e),null;case 13:if(Bn(Yn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Wn&&cs!==null&&e.mode&1&&!(e.flags&128))RF(),lh(),e.flags|=98560,s=!1;else if(s=Yg(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Je(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Je(317));s[zo]=e}else lh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;or(e),s=!1}else so!==null&&(xM(so),so=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Yn.current&1?Ai===0&&(Ai=3):nb())),e.updateQueue!==null&&(e.flags|=4),or(e),null);case 4:return ch(),fM(n,e),n===null&&Ep(e.stateNode.containerInfo),or(e),null;case 10:return UE(e.type._context),or(e),null;case 17:return jr(e.type)&&q0(),or(e),null;case 19:if(Bn(Yn),s=e.memoizedState,s===null)return or(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)gd(s,!1);else{if(Ai!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=Q0(n),o!==null){for(e.flags|=128,gd(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Rn(Yn,Yn.current&1|2),e.child}n=n.sibling}s.tail!==null&&fi()>hh&&(e.flags|=128,i=!0,gd(s,!1),e.lanes=4194304)}else{if(!i)if(n=Q0(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),gd(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Wn)return or(e),null}else 2*fi()-s.renderingStartTime>hh&&t!==1073741824&&(e.flags|=128,i=!0,gd(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=fi(),e.sibling=null,t=Yn.current,Rn(Yn,i?t&1|2:t&1),e):(or(e),null);case 22:case 23:return tb(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?as&1073741824&&(or(e),e.subtreeFlags&6&&(e.flags|=8192)):or(e),null;case 24:return null;case 25:return null}throw Error(Je(156,e.tag))}function R5(n,e){switch(LE(e),e.tag){case 1:return jr(e.type)&&q0(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return ch(),Bn(Gr),Bn(xr),GE(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return WE(e),null;case 13:if(Bn(Yn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Je(340));lh()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return Bn(Yn),null;case 4:return ch(),null;case 10:return UE(e.type._context),null;case 22:case 23:return tb(),null;case 24:return null;default:return null}}var Jg=!1,hr=!1,I5=typeof WeakSet=="function"?WeakSet:Set,yt=null;function Ff(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){ii(n,e,i)}else t.current=null}function hM(n,e,t){try{t()}catch(i){ii(n,e,i)}}var dT=!1;function F5(n,e){if(YS=V0,n=yF(),FE(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,u=0,c=0,f=n,h=null;t:for(;;){for(var m;f!==t||r!==0&&f.nodeType!==3||(a=o+r),f!==s||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(m=f.firstChild)!==null;)h=f,f=m;for(;;){if(f===n)break t;if(h===t&&++u===r&&(a=o),h===s&&++c===i&&(l=o),(m=f.nextSibling)!==null)break;f=h,h=f.parentNode}f=m}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(ZS={focusedElem:n,selectionRange:t},V0=!1,yt=e;yt!==null;)if(e=yt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,yt=n;else for(;yt!==null;){e=yt;try{var v=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(v!==null){var g=v.memoizedProps,x=v.memoizedState,y=e.stateNode,_=y.getSnapshotBeforeUpdate(e.elementType===e.type?g:eo(e.type,g),x);y.__reactInternalSnapshotBeforeUpdate=_}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Je(163))}}catch(E){ii(e,e.return,E)}if(n=e.sibling,n!==null){n.return=e.return,yt=n;break}yt=e.return}return v=dT,dT=!1,v}function tp(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&hM(e,t,s)}r=r.next}while(r!==i)}}function wx(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function dM(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function pN(n){var e=n.alternate;e!==null&&(n.alternate=null,pN(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[zo],delete e[Ap],delete e[QS],delete e[m5],delete e[g5])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function mN(n){return n.tag===5||n.tag===3||n.tag===4}function pT(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||mN(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function pM(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=j0));else if(i!==4&&(n=n.child,n!==null))for(pM(n,e,t),n=n.sibling;n!==null;)pM(n,e,t),n=n.sibling}function mM(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(mM(n,e,t),n=n.sibling;n!==null;)mM(n,e,t),n=n.sibling}var ji=null,io=!1;function Ja(n,e,t){for(t=t.child;t!==null;)gN(n,e,t),t=t.sibling}function gN(n,e,t){if(Wo&&typeof Wo.onCommitFiberUnmount=="function")try{Wo.onCommitFiberUnmount(dx,t)}catch{}switch(t.tag){case 5:hr||Ff(t,e);case 6:var i=ji,r=io;ji=null,Ja(n,e,t),ji=i,io=r,ji!==null&&(io?(n=ji,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):ji.removeChild(t.stateNode));break;case 18:ji!==null&&(io?(n=ji,t=t.stateNode,n.nodeType===8?q1(n.parentNode,t):n.nodeType===1&&q1(n,t),wp(n)):q1(ji,t.stateNode));break;case 4:i=ji,r=io,ji=t.stateNode.containerInfo,io=!0,Ja(n,e,t),ji=i,io=r;break;case 0:case 11:case 14:case 15:if(!hr&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&hM(t,e,o),r=r.next}while(r!==i)}Ja(n,e,t);break;case 1:if(!hr&&(Ff(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){ii(t,e,a)}Ja(n,e,t);break;case 21:Ja(n,e,t);break;case 22:t.mode&1?(hr=(i=hr)||t.memoizedState!==null,Ja(n,e,t),hr=i):Ja(n,e,t);break;default:Ja(n,e,t)}}function mT(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new I5),e.forEach(function(i){var r=V5.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function Zs(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:ji=a.stateNode,io=!1;break e;case 3:ji=a.stateNode.containerInfo,io=!0;break e;case 4:ji=a.stateNode.containerInfo,io=!0;break e}a=a.return}if(ji===null)throw Error(Je(160));gN(s,o,r),ji=null,io=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){ii(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)vN(e,n),e=e.sibling}function vN(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Zs(e,n),Ro(n),i&4){try{tp(3,n,n.return),wx(3,n)}catch(g){ii(n,n.return,g)}try{tp(5,n,n.return)}catch(g){ii(n,n.return,g)}}break;case 1:Zs(e,n),Ro(n),i&512&&t!==null&&Ff(t,t.return);break;case 5:if(Zs(e,n),Ro(n),i&512&&t!==null&&Ff(t,t.return),n.flags&32){var r=n.stateNode;try{vp(r,"")}catch(g){ii(n,n.return,g)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&UI(r,s),US(a,o);var u=US(a,s);for(o=0;o<l.length;o+=2){var c=l[o],f=l[o+1];c==="style"?GI(r,f):c==="dangerouslySetInnerHTML"?VI(r,f):c==="children"?vp(r,f):_E(r,c,f,u)}switch(a){case"input":NS(r,s);break;case"textarea":kI(r,s);break;case"select":var h=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var m=s.value;m!=null?Xf(r,!!s.multiple,m,!1):h!==!!s.multiple&&(s.defaultValue!=null?Xf(r,!!s.multiple,s.defaultValue,!0):Xf(r,!!s.multiple,s.multiple?[]:"",!1))}r[Ap]=s}catch(g){ii(n,n.return,g)}}break;case 6:if(Zs(e,n),Ro(n),i&4){if(n.stateNode===null)throw Error(Je(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(g){ii(n,n.return,g)}}break;case 3:if(Zs(e,n),Ro(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{wp(e.containerInfo)}catch(g){ii(n,n.return,g)}break;case 4:Zs(e,n),Ro(n);break;case 13:Zs(e,n),Ro(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(QE=fi())),i&4&&mT(n);break;case 22:if(c=t!==null&&t.memoizedState!==null,n.mode&1?(hr=(u=hr)||c,Zs(e,n),hr=u):Zs(e,n),Ro(n),i&8192){if(u=n.memoizedState!==null,(n.stateNode.isHidden=u)&&!c&&n.mode&1)for(yt=n,c=n.child;c!==null;){for(f=yt=c;yt!==null;){switch(h=yt,m=h.child,h.tag){case 0:case 11:case 14:case 15:tp(4,h,h.return);break;case 1:Ff(h,h.return);var v=h.stateNode;if(typeof v.componentWillUnmount=="function"){i=h,t=h.return;try{e=i,v.props=e.memoizedProps,v.state=e.memoizedState,v.componentWillUnmount()}catch(g){ii(i,t,g)}}break;case 5:Ff(h,h.return);break;case 22:if(h.memoizedState!==null){vT(f);continue}}m!==null?(m.return=h,yt=m):vT(f)}c=c.sibling}e:for(c=null,f=n;;){if(f.tag===5){if(c===null){c=f;try{r=f.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=WI("display",o))}catch(g){ii(n,n.return,g)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(g){ii(n,n.return,g)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Zs(e,n),Ro(n),i&4&&mT(n);break;case 21:break;default:Zs(e,n),Ro(n)}}function Ro(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(mN(t)){var i=t;break e}t=t.return}throw Error(Je(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(vp(r,""),i.flags&=-33);var s=pT(n);mM(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=pT(n);pM(n,a,o);break;default:throw Error(Je(161))}}catch(l){ii(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function N5(n,e,t){yt=n,yN(n)}function yN(n,e,t){for(var i=(n.mode&1)!==0;yt!==null;){var r=yt,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Jg;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||hr;a=Jg;var u=hr;if(Jg=o,(hr=l)&&!u)for(yt=r;yt!==null;)o=yt,l=o.child,o.tag===22&&o.memoizedState!==null?yT(r):l!==null?(l.return=o,yt=l):yT(r);for(;s!==null;)yt=s,yN(s),s=s.sibling;yt=r,Jg=a,hr=u}gT(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,yt=s):gT(n)}}function gT(n){for(;yt!==null;){var e=yt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:hr||wx(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!hr)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:eo(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&eT(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}eT(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&wp(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Je(163))}hr||e.flags&512&&dM(e)}catch(h){ii(e,e.return,h)}}if(e===n){yt=null;break}if(t=e.sibling,t!==null){t.return=e.return,yt=t;break}yt=e.return}}function vT(n){for(;yt!==null;){var e=yt;if(e===n){yt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,yt=t;break}yt=e.return}}function yT(n){for(;yt!==null;){var e=yt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{wx(4,e)}catch(l){ii(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){ii(e,r,l)}}var s=e.return;try{dM(e)}catch(l){ii(e,s,l)}break;case 5:var o=e.return;try{dM(e)}catch(l){ii(e,o,l)}}}catch(l){ii(e,e.return,l)}if(e===n){yt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,yt=a;break}yt=e.return}}var L5=Math.ceil,ny=Ua.ReactCurrentDispatcher,KE=Ua.ReactCurrentOwner,Bs=Ua.ReactCurrentBatchConfig,un=0,zi=null,_i=null,Ki=0,as=0,Nf=Hl(0),Ai=0,Ip=null,tc=0,Sx=0,JE=0,np=null,Vr=null,QE=0,hh=1/0,da=null,iy=!1,gM=null,Al=null,Qg=!1,xl=null,ry=0,ip=0,vM=null,A0=-1,C0=0;function Pr(){return un&6?fi():A0!==-1?A0:A0=fi()}function Cl(n){return n.mode&1?un&2&&Ki!==0?Ki&-Ki:y5.transition!==null?(C0===0&&(C0=nF()),C0):(n=wn,n!==0||(n=window.event,n=n===void 0?16:uF(n.type)),n):1}function fo(n,e,t,i){if(50<ip)throw ip=0,vM=null,Error(Je(185));am(n,t,i),(!(un&2)||n!==zi)&&(n===zi&&(!(un&2)&&(Sx|=t),Ai===4&&hl(n,Ki)),qr(n,i),t===1&&un===0&&!(e.mode&1)&&(hh=fi()+500,yx&&Vl()))}function qr(n,e){var t=n.callbackNode;y4(n,e);var i=H0(n,n===zi?Ki:0);if(i===0)t!==null&&CD(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&CD(t),e===1)n.tag===0?v5(xT.bind(null,n)):DF(xT.bind(null,n)),d5(function(){!(un&6)&&Vl()}),t=null;else{switch(iF(i)){case 1:t=bE;break;case 4:t=eF;break;case 16:t=k0;break;case 536870912:t=tF;break;default:t=k0}t=AN(t,xN.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function xN(n,e){if(A0=-1,C0=0,un&6)throw Error(Je(327));var t=n.callbackNode;if(Jf()&&n.callbackNode!==t)return null;var i=H0(n,n===zi?Ki:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=sy(n,i);else{e=i;var r=un;un|=2;var s=wN();(zi!==n||Ki!==e)&&(da=null,hh=fi()+500,Wu(n,e));do try{B5();break}catch(a){_N(n,a)}while(!0);BE(),ny.current=s,un=r,_i!==null?e=0:(zi=null,Ki=0,e=Ai)}if(e!==0){if(e===2&&(r=GS(n),r!==0&&(i=r,e=yM(n,r))),e===1)throw t=Ip,Wu(n,0),hl(n,i),qr(n,fi()),t;if(e===6)hl(n,i);else{if(r=n.current.alternate,!(i&30)&&!O5(r)&&(e=sy(n,i),e===2&&(s=GS(n),s!==0&&(i=s,e=yM(n,s))),e===1))throw t=Ip,Wu(n,0),hl(n,i),qr(n,fi()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Je(345));case 2:Su(n,Vr,da);break;case 3:if(hl(n,i),(i&130023424)===i&&(e=QE+500-fi(),10<e)){if(H0(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Pr(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=JS(Su.bind(null,n,Vr,da),e);break}Su(n,Vr,da);break;case 4:if(hl(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-co(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=fi()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*L5(i/1960))-i,10<i){n.timeoutHandle=JS(Su.bind(null,n,Vr,da),i);break}Su(n,Vr,da);break;case 5:Su(n,Vr,da);break;default:throw Error(Je(329))}}}return qr(n,fi()),n.callbackNode===t?xN.bind(null,n):null}function yM(n,e){var t=np;return n.current.memoizedState.isDehydrated&&(Wu(n,e).flags|=256),n=sy(n,e),n!==2&&(e=Vr,Vr=t,e!==null&&xM(e)),n}function xM(n){Vr===null?Vr=n:Vr.push.apply(Vr,n)}function O5(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!mo(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hl(n,e){for(e&=~JE,e&=~Sx,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-co(e),i=1<<t;n[t]=-1,e&=~i}}function xT(n){if(un&6)throw Error(Je(327));Jf();var e=H0(n,0);if(!(e&1))return qr(n,fi()),null;var t=sy(n,e);if(n.tag!==0&&t===2){var i=GS(n);i!==0&&(e=i,t=yM(n,i))}if(t===1)throw t=Ip,Wu(n,0),hl(n,e),qr(n,fi()),t;if(t===6)throw Error(Je(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Su(n,Vr,da),qr(n,fi()),null}function eb(n,e){var t=un;un|=1;try{return n(e)}finally{un=t,un===0&&(hh=fi()+500,yx&&Vl())}}function nc(n){xl!==null&&xl.tag===0&&!(un&6)&&Jf();var e=un;un|=1;var t=Bs.transition,i=wn;try{if(Bs.transition=null,wn=1,n)return n()}finally{wn=i,Bs.transition=t,un=e,!(un&6)&&Vl()}}function tb(){as=Nf.current,Bn(Nf)}function Wu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,h5(t)),_i!==null)for(t=_i.return;t!==null;){var i=t;switch(LE(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&q0();break;case 3:ch(),Bn(Gr),Bn(xr),GE();break;case 5:WE(i);break;case 4:ch();break;case 13:Bn(Yn);break;case 19:Bn(Yn);break;case 10:UE(i.type._context);break;case 22:case 23:tb()}t=t.return}if(zi=n,_i=n=Dl(n.current,null),Ki=as=e,Ai=0,Ip=null,JE=Sx=tc=0,Vr=np=null,Tu!==null){for(e=0;e<Tu.length;e++)if(t=Tu[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}Tu=null}return n}function _N(n,e){do{var t=_i;try{if(BE(),M0.current=ty,ey){for(var i=Jn.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}ey=!1}if(ec=0,Li=Ei=Jn=null,ep=!1,Tp=0,KE.current=null,t===null||t.return===null){Ai=1,Ip=e,_i=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Ki,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var h=c.alternate;h?(c.updateQueue=h.updateQueue,c.memoizedState=h.memoizedState,c.lanes=h.lanes):(c.updateQueue=null,c.memoizedState=null)}var m=oT(o);if(m!==null){m.flags&=-257,aT(m,o,a,s,e),m.mode&1&&sT(s,u,e),e=m,l=u;var v=e.updateQueue;if(v===null){var g=new Set;g.add(l),e.updateQueue=g}else v.add(l);break e}else{if(!(e&1)){sT(s,u,e),nb();break e}l=Error(Je(426))}}else if(Wn&&a.mode&1){var x=oT(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),aT(x,o,a,s,e),OE(fh(l,a));break e}}s=l=fh(l,a),Ai!==4&&(Ai=2),np===null?np=[s]:np.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var y=iN(s,l,e);QD(s,y);break e;case 1:a=l;var _=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof _.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Al===null||!Al.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var E=rN(s,a,e);QD(s,E);break e}}s=s.return}while(s!==null)}MN(t)}catch(C){e=C,_i===t&&t!==null&&(_i=t=t.return);continue}break}while(!0)}function wN(){var n=ny.current;return ny.current=ty,n===null?ty:n}function nb(){(Ai===0||Ai===3||Ai===2)&&(Ai=4),zi===null||!(tc&268435455)&&!(Sx&268435455)||hl(zi,Ki)}function sy(n,e){var t=un;un|=2;var i=wN();(zi!==n||Ki!==e)&&(da=null,Wu(n,e));do try{z5();break}catch(r){_N(n,r)}while(!0);if(BE(),un=t,ny.current=i,_i!==null)throw Error(Je(261));return zi=null,Ki=0,Ai}function z5(){for(;_i!==null;)SN(_i)}function B5(){for(;_i!==null&&!u4();)SN(_i)}function SN(n){var e=bN(n.alternate,n,as);n.memoizedProps=n.pendingProps,e===null?MN(n):_i=e,KE.current=null}function MN(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=R5(t,e),t!==null){t.flags&=32767,_i=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ai=6,_i=null;return}}else if(t=P5(t,e,as),t!==null){_i=t;return}if(e=e.sibling,e!==null){_i=e;return}_i=e=n}while(e!==null);Ai===0&&(Ai=5)}function Su(n,e,t){var i=wn,r=Bs.transition;try{Bs.transition=null,wn=1,U5(n,e,t,i)}finally{Bs.transition=r,wn=i}return null}function U5(n,e,t,i){do Jf();while(xl!==null);if(un&6)throw Error(Je(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Je(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(x4(n,s),n===zi&&(_i=zi=null,Ki=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Qg||(Qg=!0,AN(k0,function(){return Jf(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Bs.transition,Bs.transition=null;var o=wn;wn=1;var a=un;un|=4,KE.current=null,F5(n,t),vN(t,n),s5(ZS),V0=!!YS,ZS=YS=null,n.current=t,N5(t),c4(),un=a,wn=o,Bs.transition=s}else n.current=t;if(Qg&&(Qg=!1,xl=n,ry=r),s=n.pendingLanes,s===0&&(Al=null),d4(t.stateNode),qr(n,fi()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(iy)throw iy=!1,n=gM,gM=null,n;return ry&1&&n.tag!==0&&Jf(),s=n.pendingLanes,s&1?n===vM?ip++:(ip=0,vM=n):ip=0,Vl(),null}function Jf(){if(xl!==null){var n=iF(ry),e=Bs.transition,t=wn;try{if(Bs.transition=null,wn=16>n?16:n,xl===null)var i=!1;else{if(n=xl,xl=null,ry=0,un&6)throw Error(Je(331));var r=un;for(un|=4,yt=n.current;yt!==null;){var s=yt,o=s.child;if(yt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(yt=u;yt!==null;){var c=yt;switch(c.tag){case 0:case 11:case 15:tp(8,c,s)}var f=c.child;if(f!==null)f.return=c,yt=f;else for(;yt!==null;){c=yt;var h=c.sibling,m=c.return;if(pN(c),c===u){yt=null;break}if(h!==null){h.return=m,yt=h;break}yt=m}}}var v=s.alternate;if(v!==null){var g=v.child;if(g!==null){v.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}yt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,yt=o;else e:for(;yt!==null;){if(s=yt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:tp(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,yt=y;break e}yt=s.return}}var _=n.current;for(yt=_;yt!==null;){o=yt;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,yt=w;else e:for(o=_;yt!==null;){if(a=yt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:wx(9,a)}}catch(C){ii(a,a.return,C)}if(a===o){yt=null;break e}var E=a.sibling;if(E!==null){E.return=a.return,yt=E;break e}yt=a.return}}if(un=r,Vl(),Wo&&typeof Wo.onPostCommitFiberRoot=="function")try{Wo.onPostCommitFiberRoot(dx,n)}catch{}i=!0}return i}finally{wn=t,Bs.transition=e}}return!1}function _T(n,e,t){e=fh(t,e),e=iN(n,e,1),n=bl(n,e,1),e=Pr(),n!==null&&(am(n,1,e),qr(n,e))}function ii(n,e,t){if(n.tag===3)_T(n,n,t);else for(;e!==null;){if(e.tag===3){_T(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Al===null||!Al.has(i))){n=fh(t,n),n=rN(e,n,1),e=bl(e,n,1),n=Pr(),e!==null&&(am(e,1,n),qr(e,n));break}}e=e.return}}function k5(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Pr(),n.pingedLanes|=n.suspendedLanes&t,zi===n&&(Ki&t)===t&&(Ai===4||Ai===3&&(Ki&130023424)===Ki&&500>fi()-QE?Wu(n,0):JE|=t),qr(n,e)}function EN(n,e){e===0&&(n.mode&1?(e=Wg,Wg<<=1,!(Wg&130023424)&&(Wg=4194304)):e=1);var t=Pr();n=Ia(n,e),n!==null&&(am(n,e,t),qr(n,t))}function H5(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),EN(n,t)}function V5(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Je(314))}i!==null&&i.delete(e),EN(n,t)}var bN;bN=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Gr.current)Wr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Wr=!1,T5(n,e,t);Wr=!!(n.flags&131072)}else Wr=!1,Wn&&e.flags&1048576&&TF(e,Y0,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;b0(n,e),n=e.pendingProps;var r=ah(e,xr.current);Kf(e,t),r=qE(null,e,i,n,r,t);var s=XE();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,jr(i)?(s=!0,X0(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,HE(e),r.updater=_x,e.stateNode=r,r._reactInternals=e,sM(e,i,n,t),e=lM(null,e,i,!0,s,t)):(e.tag=0,Wn&&s&&NE(e),Ar(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(b0(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=G5(i),n=eo(i,n),r){case 0:e=aM(null,e,i,n,t);break e;case 1:e=cT(null,e,i,n,t);break e;case 11:e=lT(null,e,i,n,t);break e;case 14:e=uT(null,e,i,eo(i.type,n),t);break e}throw Error(Je(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:eo(i,r),aM(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:eo(i,r),cT(n,e,i,r,t);case 3:e:{if(lN(e),n===null)throw Error(Je(387));i=e.pendingProps,s=e.memoizedState,r=s.element,LF(n,e),J0(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=fh(Error(Je(423)),e),e=fT(n,e,i,t,r);break e}else if(i!==r){r=fh(Error(Je(424)),e),e=fT(n,e,i,t,r);break e}else for(cs=El(e.stateNode.containerInfo.firstChild),hs=e,Wn=!0,so=null,t=FF(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(lh(),i===r){e=Fa(n,e,t);break e}Ar(n,e,i,t)}e=e.child}return e;case 5:return OF(e),n===null&&nM(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,KS(i,r)?o=null:s!==null&&KS(i,s)&&(e.flags|=32),aN(n,e),Ar(n,e,o,t),e.child;case 6:return n===null&&nM(e),null;case 13:return uN(n,e,t);case 4:return VE(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=uh(e,null,i,t):Ar(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:eo(i,r),lT(n,e,i,r,t);case 7:return Ar(n,e,e.pendingProps,t),e.child;case 8:return Ar(n,e,e.pendingProps.children,t),e.child;case 12:return Ar(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Rn(Z0,i._currentValue),i._currentValue=o,s!==null)if(mo(s.value,o)){if(s.children===r.children&&!Gr.current){e=Fa(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Aa(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),iM(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Je(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),iM(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ar(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Kf(e,t),r=ks(r),i=i(r),e.flags|=1,Ar(n,e,i,t),e.child;case 14:return i=e.type,r=eo(i,e.pendingProps),r=eo(i.type,r),uT(n,e,i,r,t);case 15:return sN(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:eo(i,r),b0(n,e),e.tag=1,jr(i)?(n=!0,X0(e)):n=!1,Kf(e,t),nN(e,i,r),sM(e,i,r,t),lM(null,e,i,!0,n,t);case 19:return cN(n,e,t);case 22:return oN(n,e,t)}throw Error(Je(156,e.tag))};function AN(n,e){return QI(n,e)}function W5(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Os(n,e,t,i){return new W5(n,e,t,i)}function ib(n){return n=n.prototype,!(!n||!n.isReactComponent)}function G5(n){if(typeof n=="function")return ib(n)?1:0;if(n!=null){if(n=n.$$typeof,n===SE)return 11;if(n===ME)return 14}return 2}function Dl(n,e){var t=n.alternate;return t===null?(t=Os(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function D0(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")ib(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case Ef:return Gu(t.children,r,s,e);case wE:o=8,r|=8;break;case TS:return n=Os(12,t,e,r|2),n.elementType=TS,n.lanes=s,n;case PS:return n=Os(13,t,e,r),n.elementType=PS,n.lanes=s,n;case RS:return n=Os(19,t,e,r),n.elementType=RS,n.lanes=s,n;case OI:return Mx(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case NI:o=10;break e;case LI:o=9;break e;case SE:o=11;break e;case ME:o=14;break e;case ll:o=16,i=null;break e}throw Error(Je(130,n==null?n:typeof n,""))}return e=Os(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Gu(n,e,t,i){return n=Os(7,n,i,e),n.lanes=t,n}function Mx(n,e,t,i){return n=Os(22,n,i,e),n.elementType=OI,n.lanes=t,n.stateNode={isHidden:!1},n}function ew(n,e,t){return n=Os(6,n,null,e),n.lanes=t,n}function tw(n,e,t){return e=Os(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function j5(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=L1(0),this.expirationTimes=L1(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=L1(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function rb(n,e,t,i,r,s,o,a,l){return n=new j5(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Os(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},HE(s),n}function q5(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mf,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function CN(n){if(!n)return Rl;n=n._reactInternals;e:{if(dc(n)!==n||n.tag!==1)throw Error(Je(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(jr(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Je(171))}if(n.tag===1){var t=n.type;if(jr(t))return CF(n,t,e)}return e}function DN(n,e,t,i,r,s,o,a,l){return n=rb(t,i,!0,n,r,s,o,a,l),n.context=CN(null),t=n.current,i=Pr(),r=Cl(t),s=Aa(i,r),s.callback=e??null,bl(t,s,r),n.current.lanes=r,am(n,r,i),qr(n,i),n}function Ex(n,e,t,i){var r=e.current,s=Pr(),o=Cl(r);return t=CN(t),e.context===null?e.context=t:e.pendingContext=t,e=Aa(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=bl(r,e,o),n!==null&&(fo(n,r,o,s),S0(n,r,o)),o}function oy(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function wT(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function sb(n,e){wT(n,e),(n=n.alternate)&&wT(n,e)}function X5(){return null}var TN=typeof reportError=="function"?reportError:function(n){console.error(n)};function ob(n){this._internalRoot=n}bx.prototype.render=ob.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Je(409));Ex(n,e,null,null)};bx.prototype.unmount=ob.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;nc(function(){Ex(null,n,null,null)}),e[Ra]=null}};function bx(n){this._internalRoot=n}bx.prototype.unstable_scheduleHydration=function(n){if(n){var e=oF();n={blockedOn:null,target:n,priority:e};for(var t=0;t<fl.length&&e!==0&&e<fl[t].priority;t++);fl.splice(t,0,n),t===0&&lF(n)}};function ab(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Ax(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function ST(){}function $5(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=oy(o);s.call(u)}}var o=DN(e,i,n,0,null,!1,!1,"",ST);return n._reactRootContainer=o,n[Ra]=o.current,Ep(n.nodeType===8?n.parentNode:n),nc(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=oy(l);a.call(u)}}var l=rb(n,0,!1,null,null,!1,!1,"",ST);return n._reactRootContainer=l,n[Ra]=l.current,Ep(n.nodeType===8?n.parentNode:n),nc(function(){Ex(e,l,t,i)}),l}function Cx(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=oy(o);a.call(l)}}Ex(e,o,n,r)}else o=$5(t,e,n,r,i);return oy(o)}rF=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Gd(e.pendingLanes);t!==0&&(AE(e,t|1),qr(e,fi()),!(un&6)&&(hh=fi()+500,Vl()))}break;case 13:nc(function(){var i=Ia(n,1);if(i!==null){var r=Pr();fo(i,n,1,r)}}),sb(n,1)}};CE=function(n){if(n.tag===13){var e=Ia(n,134217728);if(e!==null){var t=Pr();fo(e,n,134217728,t)}sb(n,134217728)}};sF=function(n){if(n.tag===13){var e=Cl(n),t=Ia(n,e);if(t!==null){var i=Pr();fo(t,n,e,i)}sb(n,e)}};oF=function(){return wn};aF=function(n,e){var t=wn;try{return wn=n,e()}finally{wn=t}};HS=function(n,e,t){switch(e){case"input":if(NS(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=vx(i);if(!r)throw Error(Je(90));BI(i),NS(i,r)}}}break;case"textarea":kI(n,t);break;case"select":e=t.value,e!=null&&Xf(n,!!t.multiple,e,!1)}};XI=eb;$I=nc;var Y5={usingClientEntryPoint:!1,Events:[um,Df,vx,jI,qI,eb]},vd={findFiberByHostInstance:Du,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Z5={bundleType:vd.bundleType,version:vd.version,rendererPackageName:vd.rendererPackageName,rendererConfig:vd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ua.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=KI(n),n===null?null:n.stateNode},findFiberByHostInstance:vd.findFiberByHostInstance||X5,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ev=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ev.isDisabled&&ev.supportsFiber)try{dx=ev.inject(Z5),Wo=ev}catch{}}ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y5;ys.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ab(e))throw Error(Je(200));return q5(n,e,null,t)};ys.createRoot=function(n,e){if(!ab(n))throw Error(Je(299));var t=!1,i="",r=TN;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=rb(n,1,!1,null,null,t,!1,i,r),n[Ra]=e.current,Ep(n.nodeType===8?n.parentNode:n),new ob(e)};ys.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Je(188)):(n=Object.keys(n).join(","),Error(Je(268,n)));return n=KI(e),n=n===null?null:n.stateNode,n};ys.flushSync=function(n){return nc(n)};ys.hydrate=function(n,e,t){if(!Ax(e))throw Error(Je(200));return Cx(null,n,e,!0,t)};ys.hydrateRoot=function(n,e,t){if(!ab(n))throw Error(Je(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=TN;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=DN(e,null,n,1,t??null,r,!1,s,o),n[Ra]=e.current,Ep(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new bx(e)};ys.render=function(n,e,t){if(!Ax(e))throw Error(Je(200));return Cx(null,n,e,!1,t)};ys.unmountComponentAtNode=function(n){if(!Ax(n))throw Error(Je(40));return n._reactRootContainer?(nc(function(){Cx(null,null,n,!1,function(){n._reactRootContainer=null,n[Ra]=null})}),!0):!1};ys.unstable_batchedUpdates=eb;ys.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!Ax(t))throw Error(Je(200));if(n==null||n._reactInternals===void 0)throw Error(Je(38));return Cx(n,e,t,!1,i)};ys.version="18.3.1-next-f1338f8080-20240426";function PN(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(PN)}catch(n){console.error(n)}}PN(),PI.exports=ys;var lb=PI.exports;const K5=Th(lb),J5=yI({__proto__:null,default:K5},[lb]);var MT=lb;CS.createRoot=MT.createRoot,CS.hydrateRoot=MT.hydrateRoot;/**
 * @remix-run/router v1.17.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $n(){return $n=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},$n.apply(this,arguments)}var yi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(yi||(yi={}));const ET="popstate";function Q5(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return Fp("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:fm(r)}return t8(e,t,null,n)}function tn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function dh(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function e8(){return Math.random().toString(36).substr(2,8)}function bT(n,e){return{usr:n.state,key:n.key,idx:e}}function Fp(n,e,t,i){return t===void 0&&(t=null),$n({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Wl(e):e,{state:t,key:e&&e.key||i||e8()})}function fm(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Wl(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function t8(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=yi.Pop,l=null,u=c();u==null&&(u=0,o.replaceState($n({},o.state,{idx:u}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=yi.Pop;let x=c(),y=x==null?null:x-u;u=x,l&&l({action:a,location:g.location,delta:y})}function h(x,y){a=yi.Push;let _=Fp(g.location,x,y);u=c()+1;let w=bT(_,u),E=g.createHref(_);try{o.pushState(w,"",E)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;r.location.assign(E)}s&&l&&l({action:a,location:g.location,delta:1})}function m(x,y){a=yi.Replace;let _=Fp(g.location,x,y);u=c();let w=bT(_,u),E=g.createHref(_);o.replaceState(w,"",E),s&&l&&l({action:a,location:g.location,delta:0})}function v(x){let y=r.location.origin!=="null"?r.location.origin:r.location.href,_=typeof x=="string"?x:fm(x);return _=_.replace(/ $/,"%20"),tn(y,"No window.location.(origin|href) available to create URL for href: "+_),new URL(_,y)}let g={get action(){return a},get location(){return n(r,o)},listen(x){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(ET,f),l=x,()=>{r.removeEventListener(ET,f),l=null}},createHref(x){return e(r,x)},createURL:v,encodeLocation(x){let y=v(x);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:h,replace:m,go(x){return o.go(x)}};return g}var Tn;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Tn||(Tn={}));const n8=new Set(["lazy","caseSensitive","path","id","index","children"]);function i8(n){return n.index===!0}function Np(n,e,t,i){return t===void 0&&(t=[]),i===void 0&&(i={}),n.map((r,s)=>{let o=[...t,String(s)],a=typeof r.id=="string"?r.id:o.join("-");if(tn(r.index!==!0||!r.children,"Cannot specify children on an index route"),tn(!i[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),i8(r)){let l=$n({},r,e(r),{id:a});return i[a]=l,l}else{let l=$n({},r,e(r),{id:a,children:void 0});return i[a]=l,r.children&&(l.children=Np(r.children,e,o,i)),l}})}function bu(n,e,t){return t===void 0&&(t="/"),T0(n,e,t,!1)}function T0(n,e,t,i){let r=typeof e=="string"?Wl(e):e,s=hm(r.pathname||"/",t);if(s==null)return null;let o=RN(n);s8(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let u=g8(s);a=p8(o[l],u,i)}return a}function r8(n,e){let{route:t,pathname:i,params:r}=n;return{id:t.id,pathname:i,params:r,data:e[t.id],handle:t.handle}}function RN(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(tn(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let u=Tl([i,l.relativePath]),c=t.concat(l);s.children&&s.children.length>0&&(tn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),RN(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:h8(u,s.index),routesMeta:c})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of IN(s.path))r(s,o,l)}),e}function IN(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=IN(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function s8(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:d8(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const o8=/^:[\w-]+$/,a8=3,l8=2,u8=1,c8=10,f8=-2,AT=n=>n==="*";function h8(n,e){let t=n.split("/"),i=t.length;return t.some(AT)&&(i+=f8),e&&(i+=l8),t.filter(r=>!AT(r)).reduce((r,s)=>r+(o8.test(s)?a8:s===""?u8:c8),i)}function d8(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function p8(n,e,t){t===void 0&&(t=!1);let{routesMeta:i}=n,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],u=a===i.length-1,c=s==="/"?e:e.slice(s.length)||"/",f=CT({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),h=l.route;if(!f&&u&&t&&!i[i.length-1].route.index&&(f=CT({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!f)return null;Object.assign(r,f.params),o.push({params:r,pathname:Tl([s,f.pathname]),pathnameBase:x8(Tl([s,f.pathnameBase])),route:h}),f.pathnameBase!=="/"&&(s=Tl([s,f.pathnameBase]))}return o}function CT(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=m8(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((u,c,f)=>{let{paramName:h,isOptional:m}=c;if(h==="*"){let g=a[f]||"";o=s.slice(0,s.length-g.length).replace(/(.)\/+$/,"$1")}const v=a[f];return m&&!v?u[h]=void 0:u[h]=(v||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:n}}function m8(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),dh(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function g8(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dh(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function hm(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function v8(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Wl(n):n;return{pathname:t?t.startsWith("/")?t:y8(t,e):e,search:_8(i),hash:w8(r)}}function y8(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function nw(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function FN(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function NN(n,e){let t=FN(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function LN(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=Wl(n):(r=$n({},n),tn(!r.pathname||!r.pathname.includes("?"),nw("?","pathname","search",r)),tn(!r.pathname||!r.pathname.includes("#"),nw("#","pathname","hash",r)),tn(!r.search||!r.search.includes("#"),nw("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!i&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),f-=1;r.pathname=h.join("/")}a=f>=0?e[f]:"/"}let l=v8(r,a),u=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Tl=n=>n.join("/").replace(/\/\/+/g,"/"),x8=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),_8=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,w8=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class ub{constructor(e,t,i,r){r===void 0&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function Dx(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const ON=["post","put","patch","delete"],S8=new Set(ON),M8=["get",...ON],E8=new Set(M8),b8=new Set([301,302,303,307,308]),A8=new Set([307,308]),iw={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},C8={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},yd={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},cb=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,D8=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),zN="remix-router-transitions";function T8(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",i=!t;tn(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r;if(n.mapRouteProperties)r=n.mapRouteProperties;else if(n.detectErrorBoundary){let oe=n.detectErrorBoundary;r=ve=>({hasErrorBoundary:oe(ve)})}else r=D8;let s={},o=Np(n.routes,r,void 0,s),a,l=n.basename||"/",u=n.unstable_dataStrategy||N8,c=n.unstable_patchRoutesOnMiss,f=$n({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,unstable_skipActionErrorRevalidation:!1},n.future),h=null,m=new Set,v=null,g=null,x=null,y=n.hydrationData!=null,_=bu(o,n.history.location,l),w=null;if(_==null&&!c){let oe=br(404,{pathname:n.history.location.pathname}),{matches:ve,route:be}=zT(o);_=ve,w={[be.id]:oe}}_&&c&&Un(_,o,n.history.location.pathname).active&&(_=null);let E;if(!_)E=!1,_=[];else if(_.some(oe=>oe.route.lazy))E=!1;else if(!_.some(oe=>oe.route.loader))E=!0;else if(f.v7_partialHydration){let oe=n.hydrationData?n.hydrationData.loaderData:null,ve=n.hydrationData?n.hydrationData.errors:null,be=Ue=>Ue.route.loader?typeof Ue.route.loader=="function"&&Ue.route.loader.hydrate===!0?!1:oe&&oe[Ue.route.id]!==void 0||ve&&ve[Ue.route.id]!==void 0:!0;if(ve){let Ue=_.findIndex(at=>ve[at.route.id]!==void 0);E=_.slice(0,Ue+1).every(be)}else E=_.every(be)}else E=n.hydrationData!=null;let C,M={historyAction:n.history.action,location:n.history.location,matches:_,initialized:E,navigation:iw,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||w,fetchers:new Map,blockers:new Map},T=yi.Pop,R=!1,A,D=!1,I=new Map,L=null,H=!1,k=!1,$=[],G=[],J=new Map,N=0,W=-1,X=new Map,ee=new Set,te=new Map,ce=new Map,Q=new Set,le=new Map,pe=new Map,ae=new Map,Te=!1;function Pe(){if(h=n.history.listen(oe=>{let{action:ve,location:be,delta:Ue}=oe;if(Te){Te=!1;return}dh(pe.size===0||Ue!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let at=Oe({currentLocation:M.location,nextLocation:be,historyAction:ve});if(at&&Ue!=null){Te=!0,n.history.go(Ue*-1),He(at,{state:"blocked",location:be,proceed(){He(at,{state:"proceeding",proceed:void 0,reset:void 0,location:be}),n.history.go(Ue)},reset(){let vt=new Map(M.blockers);vt.set(at,yd),z({blockers:vt})}});return}return Me(ve,be)}),t){X8(e,I);let oe=()=>$8(e,I);e.addEventListener("pagehide",oe),L=()=>e.removeEventListener("pagehide",oe)}return M.initialized||Me(yi.Pop,M.location,{initialHydration:!0}),C}function Ae(){h&&h(),L&&L(),m.clear(),A&&A.abort(),M.fetchers.forEach((oe,ve)=>Ee(ve)),M.blockers.forEach((oe,ve)=>re(ve))}function We(oe){return m.add(oe),()=>m.delete(oe)}function z(oe,ve){ve===void 0&&(ve={}),M=$n({},M,oe);let be=[],Ue=[];f.v7_fetcherPersist&&M.fetchers.forEach((at,vt)=>{at.state==="idle"&&(Q.has(vt)?Ue.push(vt):be.push(vt))}),[...m].forEach(at=>at(M,{deletedFetchers:Ue,unstable_viewTransitionOpts:ve.viewTransitionOpts,unstable_flushSync:ve.flushSync===!0})),f.v7_fetcherPersist&&(be.forEach(at=>M.fetchers.delete(at)),Ue.forEach(at=>Ee(at)))}function Se(oe,ve,be){var Ue,at;let{flushSync:vt}=be===void 0?{}:be,Rt=M.actionData!=null&&M.navigation.formMethod!=null&&ro(M.navigation.formMethod)&&M.navigation.state==="loading"&&((Ue=oe.state)==null?void 0:Ue._isRedirect)!==!0,rt;ve.actionData?Object.keys(ve.actionData).length>0?rt=ve.actionData:rt=null:Rt?rt=M.actionData:rt=null;let kt=ve.loaderData?LT(M.loaderData,ve.loaderData,ve.matches||[],ve.errors):M.loaderData,bt=M.blockers;bt.size>0&&(bt=new Map(bt),bt.forEach((se,xe)=>bt.set(xe,yd)));let At=R===!0||M.navigation.formMethod!=null&&ro(M.navigation.formMethod)&&((at=oe.state)==null?void 0:at._isRedirect)!==!0;a&&(o=a,a=void 0),H||T===yi.Pop||(T===yi.Push?n.history.push(oe,oe.state):T===yi.Replace&&n.history.replace(oe,oe.state));let V;if(T===yi.Pop){let se=I.get(M.location.pathname);se&&se.has(oe.pathname)?V={currentLocation:M.location,nextLocation:oe}:I.has(oe.pathname)&&(V={currentLocation:oe,nextLocation:M.location})}else if(D){let se=I.get(M.location.pathname);se?se.add(oe.pathname):(se=new Set([oe.pathname]),I.set(M.location.pathname,se)),V={currentLocation:M.location,nextLocation:oe}}z($n({},ve,{actionData:rt,loaderData:kt,historyAction:T,location:oe,initialized:!0,navigation:iw,revalidation:"idle",restoreScrollPosition:Wt(oe,ve.matches||M.matches),preventScrollReset:At,blockers:bt}),{viewTransitionOpts:V,flushSync:vt===!0}),T=yi.Pop,R=!1,D=!1,H=!1,k=!1,$=[],G=[]}async function De(oe,ve){if(typeof oe=="number"){n.history.go(oe);return}let be=_M(M.location,M.matches,l,f.v7_prependBasename,oe,f.v7_relativeSplatPath,ve==null?void 0:ve.fromRouteId,ve==null?void 0:ve.relative),{path:Ue,submission:at,error:vt}=DT(f.v7_normalizeFormMethod,!1,be,ve),Rt=M.location,rt=Fp(M.location,Ue,ve&&ve.state);rt=$n({},rt,n.history.encodeLocation(rt));let kt=ve&&ve.replace!=null?ve.replace:void 0,bt=yi.Push;kt===!0?bt=yi.Replace:kt===!1||at!=null&&ro(at.formMethod)&&at.formAction===M.location.pathname+M.location.search&&(bt=yi.Replace);let At=ve&&"preventScrollReset"in ve?ve.preventScrollReset===!0:void 0,V=(ve&&ve.unstable_flushSync)===!0,se=Oe({currentLocation:Rt,nextLocation:rt,historyAction:bt});if(se){He(se,{state:"blocked",location:rt,proceed(){He(se,{state:"proceeding",proceed:void 0,reset:void 0,location:rt}),De(oe,ve)},reset(){let xe=new Map(M.blockers);xe.set(se,yd),z({blockers:xe})}});return}return await Me(bt,rt,{submission:at,pendingError:vt,preventScrollReset:At,replace:ve&&ve.replace,enableViewTransition:ve&&ve.unstable_viewTransition,flushSync:V})}function ke(){if(fe(),z({revalidation:"loading"}),M.navigation.state!=="submitting"){if(M.navigation.state==="idle"){Me(M.historyAction,M.location,{startUninterruptedRevalidation:!0});return}Me(T||M.historyAction,M.navigation.location,{overrideNavigation:M.navigation})}}async function Me(oe,ve,be){A&&A.abort(),A=null,T=oe,H=(be&&be.startUninterruptedRevalidation)===!0,yn(M.location,M.matches),R=(be&&be.preventScrollReset)===!0,D=(be&&be.enableViewTransition)===!0;let Ue=a||o,at=be&&be.overrideNavigation,vt=bu(Ue,ve,l),Rt=(be&&be.flushSync)===!0,rt=Un(vt,Ue,ve.pathname);if(rt.active&&rt.matches&&(vt=rt.matches),!vt){let{error:_e,notFoundMatches:de,route:je}=Be(ve.pathname);Se(ve,{matches:de,loaderData:{},errors:{[je.id]:_e}},{flushSync:Rt});return}if(M.initialized&&!k&&k8(M.location,ve)&&!(be&&be.submission&&ro(be.submission.formMethod))){Se(ve,{matches:vt},{flushSync:Rt});return}A=new AbortController;let kt=qc(n.history,ve,A.signal,be&&be.submission),bt;if(be&&be.pendingError)bt=[rp(vt).route.id,{type:Tn.error,error:be.pendingError}];else if(be&&be.submission&&ro(be.submission.formMethod)){let _e=await Qe(kt,ve,be.submission,vt,rt.active,{replace:be.replace,flushSync:Rt});if(_e.shortCircuited)return;if(_e.pendingActionResult){let[de,je]=_e.pendingActionResult;if(ls(je)&&Dx(je.error)&&je.error.status===404){A=null,Se(ve,{matches:_e.matches,loaderData:{},errors:{[de]:je.error}});return}}vt=_e.matches||vt,bt=_e.pendingActionResult,at=rw(ve,be.submission),Rt=!1,rt.active=!1,kt=qc(n.history,kt.url,kt.signal)}let{shortCircuited:At,matches:V,loaderData:se,errors:xe}=await Ge(kt,ve,vt,rt.active,at,be&&be.submission,be&&be.fetcherSubmission,be&&be.replace,be&&be.initialHydration===!0,Rt,bt);At||(A=null,Se(ve,$n({matches:V||vt},OT(bt),{loaderData:se,errors:xe})))}async function Qe(oe,ve,be,Ue,at,vt){vt===void 0&&(vt={}),fe();let Rt=j8(ve,be);if(z({navigation:Rt},{flushSync:vt.flushSync===!0}),at){let bt=await Nn(Ue,ve.pathname,oe.signal);if(bt.type==="aborted")return{shortCircuited:!0};if(bt.type==="error"){let{error:At,notFoundMatches:V,route:se}=tt(ve.pathname,bt);return{matches:V,pendingActionResult:[se.id,{type:Tn.error,error:At}]}}else if(bt.matches)Ue=bt.matches;else{let{notFoundMatches:At,error:V,route:se}=Be(ve.pathname);return{matches:At,pendingActionResult:[se.id,{type:Tn.error,error:V}]}}}let rt,kt=qd(Ue,ve);if(!kt.route.action&&!kt.route.lazy)rt={type:Tn.error,error:br(405,{method:oe.method,pathname:ve.pathname,routeId:kt.route.id})};else if(rt=(await Z("action",oe,[kt],Ue))[0],oe.signal.aborted)return{shortCircuited:!0};if(Iu(rt)){let bt;return vt&&vt.replace!=null?bt=vt.replace:bt=IT(rt.response.headers.get("Location"),new URL(oe.url),l)===M.location.pathname+M.location.search,await q(oe,rt,{submission:be,replace:bt}),{shortCircuited:!0}}if(Ru(rt))throw br(400,{type:"defer-action"});if(ls(rt)){let bt=rp(Ue,kt.route.id);return(vt&&vt.replace)!==!0&&(T=yi.Push),{matches:Ue,pendingActionResult:[bt.route.id,rt]}}return{matches:Ue,pendingActionResult:[kt.route.id,rt]}}async function Ge(oe,ve,be,Ue,at,vt,Rt,rt,kt,bt,At){let V=at||rw(ve,vt),se=vt||Rt||kT(V),xe=!H&&(!f.v7_partialHydration||!kt);if(Ue){if(xe){let ut=Ze(At);z($n({navigation:V},ut!==void 0?{actionData:ut}:{}),{flushSync:bt})}let wt=await Nn(be,ve.pathname,oe.signal);if(wt.type==="aborted")return{shortCircuited:!0};if(wt.type==="error"){let{error:ut,notFoundMatches:Ke,route:Ft}=tt(ve.pathname,wt);return{matches:Ke,loaderData:{},errors:{[Ft.id]:ut}}}else if(wt.matches)be=wt.matches;else{let{error:ut,notFoundMatches:Ke,route:Ft}=Be(ve.pathname);return{matches:Ke,loaderData:{},errors:{[Ft.id]:ut}}}}let _e=a||o,[de,je]=TT(n.history,M,be,se,ve,f.v7_partialHydration&&kt===!0,f.unstable_skipActionErrorRevalidation,k,$,G,Q,te,ee,_e,l,At);if(Et(wt=>!(be&&be.some(ut=>ut.route.id===wt))||de&&de.some(ut=>ut.route.id===wt)),W=++N,de.length===0&&je.length===0){let wt=ne();return Se(ve,$n({matches:be,loaderData:{},errors:At&&ls(At[1])?{[At[0]]:At[1].error}:null},OT(At),wt?{fetchers:new Map(M.fetchers)}:{}),{flushSync:bt}),{shortCircuited:!0}}if(xe){let wt={};if(!Ue){wt.navigation=V;let ut=Ze(At);ut!==void 0&&(wt.actionData=ut)}je.length>0&&(wt.fetchers=Y(je)),z(wt,{flushSync:bt})}je.forEach(wt=>{J.has(wt.key)&&nt(wt.key),wt.controller&&J.set(wt.key,wt.controller)});let lt=()=>je.forEach(wt=>nt(wt.key));A&&A.signal.addEventListener("abort",lt);let{loaderResults:ct,fetcherResults:$e}=await he(M.matches,be,de,je,oe);if(oe.signal.aborted)return{shortCircuited:!0};A&&A.signal.removeEventListener("abort",lt),je.forEach(wt=>J.delete(wt.key));let ht=BT([...ct,...$e]);if(ht){if(ht.idx>=de.length){let wt=je[ht.idx-de.length].key;ee.add(wt)}return await q(oe,ht.result,{replace:rt}),{shortCircuited:!0}}let{loaderData:Mt,errors:gt}=NT(M,be,de,ct,At,je,$e,le);le.forEach((wt,ut)=>{wt.subscribe(Ke=>{(Ke||wt.done)&&le.delete(ut)})}),f.v7_partialHydration&&kt&&M.errors&&Object.entries(M.errors).filter(wt=>{let[ut]=wt;return!de.some(Ke=>Ke.route.id===ut)}).forEach(wt=>{let[ut,Ke]=wt;gt=Object.assign(gt||{},{[ut]:Ke})});let Gt=ne(),an=Re(W),on=Gt||an||je.length>0;return $n({matches:be,loaderData:Mt,errors:gt},on?{fetchers:new Map(M.fetchers)}:{})}function Ze(oe){if(oe&&!ls(oe[1]))return{[oe[0]]:oe[1].data};if(M.actionData)return Object.keys(M.actionData).length===0?null:M.actionData}function Y(oe){return oe.forEach(ve=>{let be=M.fetchers.get(ve.key),Ue=xd(void 0,be?be.data:void 0);M.fetchers.set(ve.key,Ue)}),new Map(M.fetchers)}function B(oe,ve,be,Ue){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");J.has(oe)&&nt(oe);let at=(Ue&&Ue.unstable_flushSync)===!0,vt=a||o,Rt=_M(M.location,M.matches,l,f.v7_prependBasename,be,f.v7_relativeSplatPath,ve,Ue==null?void 0:Ue.relative),rt=bu(vt,Rt,l),kt=Un(rt,vt,Rt);if(kt.active&&kt.matches&&(rt=kt.matches),!rt){Ne(oe,ve,br(404,{pathname:Rt}),{flushSync:at});return}let{path:bt,submission:At,error:V}=DT(f.v7_normalizeFormMethod,!0,Rt,Ue);if(V){Ne(oe,ve,V,{flushSync:at});return}let se=qd(rt,bt);if(R=(Ue&&Ue.preventScrollReset)===!0,At&&ro(At.formMethod)){we(oe,ve,bt,se,rt,kt.active,at,At);return}te.set(oe,{routeId:ve,path:bt}),U(oe,ve,bt,se,rt,kt.active,at,At)}async function we(oe,ve,be,Ue,at,vt,Rt,rt){fe(),te.delete(oe);function kt(Ft){if(!Ft.route.action&&!Ft.route.lazy){let Dt=br(405,{method:rt.formMethod,pathname:be,routeId:ve});return Ne(oe,ve,Dt,{flushSync:Rt}),!0}return!1}if(!vt&&kt(Ue))return;let bt=M.fetchers.get(oe);ue(oe,q8(rt,bt),{flushSync:Rt});let At=new AbortController,V=qc(n.history,be,At.signal,rt);if(vt){let Ft=await Nn(at,be,V.signal);if(Ft.type==="aborted")return;if(Ft.type==="error"){let{error:Dt}=tt(be,Ft);Ne(oe,ve,Dt,{flushSync:Rt});return}else if(Ft.matches){if(at=Ft.matches,Ue=qd(at,be),kt(Ue))return}else{Ne(oe,ve,br(404,{pathname:be}),{flushSync:Rt});return}}J.set(oe,At);let se=N,_e=(await Z("action",V,[Ue],at))[0];if(V.signal.aborted){J.get(oe)===At&&J.delete(oe);return}if(f.v7_fetcherPersist&&Q.has(oe)){if(Iu(_e)||ls(_e)){ue(oe,al(void 0));return}}else{if(Iu(_e))if(J.delete(oe),W>se){ue(oe,al(void 0));return}else return ee.add(oe),ue(oe,xd(rt)),q(V,_e,{fetcherSubmission:rt});if(ls(_e)){Ne(oe,ve,_e.error);return}}if(Ru(_e))throw br(400,{type:"defer-action"});let de=M.navigation.location||M.location,je=qc(n.history,de,At.signal),lt=a||o,ct=M.navigation.state!=="idle"?bu(lt,M.navigation.location,l):M.matches;tn(ct,"Didn't find any matches after fetcher action");let $e=++N;X.set(oe,$e);let ht=xd(rt,_e.data);M.fetchers.set(oe,ht);let[Mt,gt]=TT(n.history,M,ct,rt,de,!1,f.unstable_skipActionErrorRevalidation,k,$,G,Q,te,ee,lt,l,[Ue.route.id,_e]);gt.filter(Ft=>Ft.key!==oe).forEach(Ft=>{let Dt=Ft.key,xn=M.fetchers.get(Dt),er=xd(void 0,xn?xn.data:void 0);M.fetchers.set(Dt,er),J.has(Dt)&&nt(Dt),Ft.controller&&J.set(Dt,Ft.controller)}),z({fetchers:new Map(M.fetchers)});let Gt=()=>gt.forEach(Ft=>nt(Ft.key));At.signal.addEventListener("abort",Gt);let{loaderResults:an,fetcherResults:on}=await he(M.matches,ct,Mt,gt,je);if(At.signal.aborted)return;At.signal.removeEventListener("abort",Gt),X.delete(oe),J.delete(oe),gt.forEach(Ft=>J.delete(Ft.key));let wt=BT([...an,...on]);if(wt){if(wt.idx>=Mt.length){let Ft=gt[wt.idx-Mt.length].key;ee.add(Ft)}return q(je,wt.result)}let{loaderData:ut,errors:Ke}=NT(M,M.matches,Mt,an,void 0,gt,on,le);if(M.fetchers.has(oe)){let Ft=al(_e.data);M.fetchers.set(oe,Ft)}Re($e),M.navigation.state==="loading"&&$e>W?(tn(T,"Expected pending action"),A&&A.abort(),Se(M.navigation.location,{matches:ct,loaderData:ut,errors:Ke,fetchers:new Map(M.fetchers)})):(z({errors:Ke,loaderData:LT(M.loaderData,ut,ct,Ke),fetchers:new Map(M.fetchers)}),k=!1)}async function U(oe,ve,be,Ue,at,vt,Rt,rt){let kt=M.fetchers.get(oe);ue(oe,xd(rt,kt?kt.data:void 0),{flushSync:Rt});let bt=new AbortController,At=qc(n.history,be,bt.signal);if(vt){let _e=await Nn(at,be,At.signal);if(_e.type==="aborted")return;if(_e.type==="error"){let{error:de}=tt(be,_e);Ne(oe,ve,de,{flushSync:Rt});return}else if(_e.matches)at=_e.matches,Ue=qd(at,be);else{Ne(oe,ve,br(404,{pathname:be}),{flushSync:Rt});return}}J.set(oe,bt);let V=N,xe=(await Z("loader",At,[Ue],at))[0];if(Ru(xe)&&(xe=await VN(xe,At.signal,!0)||xe),J.get(oe)===bt&&J.delete(oe),!At.signal.aborted){if(Q.has(oe)){ue(oe,al(void 0));return}if(Iu(xe))if(W>V){ue(oe,al(void 0));return}else{ee.add(oe),await q(At,xe);return}if(ls(xe)){Ne(oe,ve,xe.error);return}tn(!Ru(xe),"Unhandled fetcher deferred data"),ue(oe,al(xe.data))}}async function q(oe,ve,be){let{submission:Ue,fetcherSubmission:at,replace:vt}=be===void 0?{}:be;ve.response.headers.has("X-Remix-Revalidate")&&(k=!0);let Rt=ve.response.headers.get("Location");tn(Rt,"Expected a Location header on the redirect Response"),Rt=IT(Rt,new URL(oe.url),l);let rt=Fp(M.location,Rt,{_isRedirect:!0});if(t){let xe=!1;if(ve.response.headers.has("X-Remix-Reload-Document"))xe=!0;else if(cb.test(Rt)){const _e=n.history.createURL(Rt);xe=_e.origin!==e.location.origin||hm(_e.pathname,l)==null}if(xe){vt?e.location.replace(Rt):e.location.assign(Rt);return}}A=null;let kt=vt===!0?yi.Replace:yi.Push,{formMethod:bt,formAction:At,formEncType:V}=M.navigation;!Ue&&!at&&bt&&At&&V&&(Ue=kT(M.navigation));let se=Ue||at;if(A8.has(ve.response.status)&&se&&ro(se.formMethod))await Me(kt,rt,{submission:$n({},se,{formAction:Rt}),preventScrollReset:R});else{let xe=rw(rt,Ue);await Me(kt,rt,{overrideNavigation:xe,fetcherSubmission:at,preventScrollReset:R})}}async function Z(oe,ve,be,Ue){try{let at=await L8(u,oe,ve,be,Ue,s,r);return await Promise.all(at.map((vt,Rt)=>{if(V8(vt)){let rt=vt.result;return{type:Tn.redirect,response:B8(rt,ve,be[Rt].route.id,Ue,l,f.v7_relativeSplatPath)}}return z8(vt)}))}catch(at){return be.map(()=>({type:Tn.error,error:at}))}}async function he(oe,ve,be,Ue,at){let[vt,...Rt]=await Promise.all([be.length?Z("loader",at,be,ve):[],...Ue.map(rt=>{if(rt.matches&&rt.match&&rt.controller){let kt=qc(n.history,rt.path,rt.controller.signal);return Z("loader",kt,[rt.match],rt.matches).then(bt=>bt[0])}else return Promise.resolve({type:Tn.error,error:br(404,{pathname:rt.path})})})]);return await Promise.all([UT(oe,be,vt,vt.map(()=>at.signal),!1,M.loaderData),UT(oe,Ue.map(rt=>rt.match),Rt,Ue.map(rt=>rt.controller?rt.controller.signal:null),!0)]),{loaderResults:vt,fetcherResults:Rt}}function fe(){k=!0,$.push(...Et()),te.forEach((oe,ve)=>{J.has(ve)&&(G.push(ve),nt(ve))})}function ue(oe,ve,be){be===void 0&&(be={}),M.fetchers.set(oe,ve),z({fetchers:new Map(M.fetchers)},{flushSync:(be&&be.flushSync)===!0})}function Ne(oe,ve,be,Ue){Ue===void 0&&(Ue={});let at=rp(M.matches,ve);Ee(oe),z({errors:{[at.route.id]:be},fetchers:new Map(M.fetchers)},{flushSync:(Ue&&Ue.flushSync)===!0})}function ge(oe){return f.v7_fetcherPersist&&(ce.set(oe,(ce.get(oe)||0)+1),Q.has(oe)&&Q.delete(oe)),M.fetchers.get(oe)||C8}function Ee(oe){let ve=M.fetchers.get(oe);J.has(oe)&&!(ve&&ve.state==="loading"&&X.has(oe))&&nt(oe),te.delete(oe),X.delete(oe),ee.delete(oe),Q.delete(oe),M.fetchers.delete(oe)}function Le(oe){if(f.v7_fetcherPersist){let ve=(ce.get(oe)||0)-1;ve<=0?(ce.delete(oe),Q.add(oe)):ce.set(oe,ve)}else Ee(oe);z({fetchers:new Map(M.fetchers)})}function nt(oe){let ve=J.get(oe);tn(ve,"Expected fetch controller: "+oe),ve.abort(),J.delete(oe)}function Ye(oe){for(let ve of oe){let be=ge(ve),Ue=al(be.data);M.fetchers.set(ve,Ue)}}function ne(){let oe=[],ve=!1;for(let be of ee){let Ue=M.fetchers.get(be);tn(Ue,"Expected fetcher: "+be),Ue.state==="loading"&&(ee.delete(be),oe.push(be),ve=!0)}return Ye(oe),ve}function Re(oe){let ve=[];for(let[be,Ue]of X)if(Ue<oe){let at=M.fetchers.get(be);tn(at,"Expected fetcher: "+be),at.state==="loading"&&(nt(be),X.delete(be),ve.push(be))}return Ye(ve),ve.length>0}function et(oe,ve){let be=M.blockers.get(oe)||yd;return pe.get(oe)!==ve&&pe.set(oe,ve),be}function re(oe){M.blockers.delete(oe),pe.delete(oe)}function He(oe,ve){let be=M.blockers.get(oe)||yd;tn(be.state==="unblocked"&&ve.state==="blocked"||be.state==="blocked"&&ve.state==="blocked"||be.state==="blocked"&&ve.state==="proceeding"||be.state==="blocked"&&ve.state==="unblocked"||be.state==="proceeding"&&ve.state==="unblocked","Invalid blocker state transition: "+be.state+" -> "+ve.state);let Ue=new Map(M.blockers);Ue.set(oe,ve),z({blockers:Ue})}function Oe(oe){let{currentLocation:ve,nextLocation:be,historyAction:Ue}=oe;if(pe.size===0)return;pe.size>1&&dh(!1,"A router only supports one blocker at a time");let at=Array.from(pe.entries()),[vt,Rt]=at[at.length-1],rt=M.blockers.get(vt);if(!(rt&&rt.state==="proceeding")&&Rt({currentLocation:ve,nextLocation:be,historyAction:Ue}))return vt}function Be(oe){let ve=br(404,{pathname:oe}),be=a||o,{matches:Ue,route:at}=zT(be);return Et(),{notFoundMatches:Ue,route:at,error:ve}}function tt(oe,ve){let be=ve.partialMatches,Ue=be[be.length-1].route,at=br(400,{type:"route-discovery",routeId:Ue.id,pathname:oe,message:ve.error!=null&&"message"in ve.error?ve.error:String(ve.error)});return{notFoundMatches:be,route:Ue,error:at}}function Et(oe){let ve=[];return le.forEach((be,Ue)=>{(!oe||oe(Ue))&&(be.cancel(),ve.push(Ue),le.delete(Ue))}),ve}function Bt(oe,ve,be){if(v=oe,x=ve,g=be||null,!y&&M.navigation===iw){y=!0;let Ue=Wt(M.location,M.matches);Ue!=null&&z({restoreScrollPosition:Ue})}return()=>{v=null,x=null,g=null}}function en(oe,ve){return g&&g(oe,ve.map(Ue=>r8(Ue,M.loaderData)))||oe.key}function yn(oe,ve){if(v&&x){let be=en(oe,ve);v[be]=x()}}function Wt(oe,ve){if(v){let be=en(oe,ve),Ue=v[be];if(typeof Ue=="number")return Ue}return null}function Un(oe,ve,be){if(c)if(oe){let Ue=oe[oe.length-1].route;if(Ue.path&&(Ue.path==="*"||Ue.path.endsWith("/*")))return{active:!0,matches:T0(ve,be,l,!0)}}else return{active:!0,matches:T0(ve,be,l,!0)||[]};return{active:!1,matches:null}}async function Nn(oe,ve,be){let Ue=oe,at=Ue.length>0?Ue[Ue.length-1].route:null;for(;;){let vt=a==null,Rt=a||o;try{await F8(c,ve,Ue,Rt,s,r,ae,be)}catch(At){return{type:"error",error:At,partialMatches:Ue}}finally{vt&&(o=[...o])}if(be.aborted)return{type:"aborted"};let rt=bu(Rt,ve,l),kt=!1;if(rt){let At=rt[rt.length-1].route;if(At.index)return{type:"success",matches:rt};if(At.path&&At.path.length>0)if(At.path==="*")kt=!0;else return{type:"success",matches:rt}}let bt=T0(Rt,ve,l,!0);if(!bt||Ue.map(At=>At.route.id).join("-")===bt.map(At=>At.route.id).join("-"))return{type:"success",matches:kt?rt:null};if(Ue=bt,at=Ue[Ue.length-1].route,at.path==="*")return{type:"success",matches:Ue}}}function Wa(oe){s={},a=Np(oe,r,void 0,s)}function Kr(oe,ve){let be=a==null;UN(oe,ve,a||o,s,r),be&&(o=[...o],z({}))}return C={get basename(){return l},get future(){return f},get state(){return M},get routes(){return o},get window(){return e},initialize:Pe,subscribe:We,enableScrollRestoration:Bt,navigate:De,fetch:B,revalidate:ke,createHref:oe=>n.history.createHref(oe),encodeLocation:oe=>n.history.encodeLocation(oe),getFetcher:ge,deleteFetcher:Le,dispose:Ae,getBlocker:et,deleteBlocker:re,patchRoutes:Kr,_internalFetchControllers:J,_internalActiveDeferreds:le,_internalSetRoutes:Wa},C}function P8(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function _M(n,e,t,i,r,s,o,a){let l,u;if(o){l=[];for(let f of e)if(l.push(f),f.route.id===o){u=f;break}}else l=e,u=e[e.length-1];let c=LN(r||".",NN(l,s),hm(n.pathname,t)||n.pathname,a==="path");return r==null&&(c.search=n.search,c.hash=n.hash),(r==null||r===""||r===".")&&u&&u.route.index&&!fb(c.search)&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),i&&t!=="/"&&(c.pathname=c.pathname==="/"?t:Tl([t,c.pathname])),fm(c)}function DT(n,e,t,i){if(!i||!P8(i))return{path:t};if(i.formMethod&&!G8(i.formMethod))return{path:t,error:br(405,{method:i.formMethod})};let r=()=>({path:t,error:br(400,{type:"invalid-body"})}),s=i.formMethod||"get",o=n?s.toUpperCase():s.toLowerCase(),a=kN(t);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!ro(o))return r();let h=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((m,v)=>{let[g,x]=v;return""+m+g+"="+x+`
`},""):String(i.body);return{path:t,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:void 0,text:h}}}else if(i.formEncType==="application/json"){if(!ro(o))return r();try{let h=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:t,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:h,text:void 0}}}catch{return r()}}}tn(typeof FormData=="function","FormData is not available in this environment");let l,u;if(i.formData)l=wM(i.formData),u=i.formData;else if(i.body instanceof FormData)l=wM(i.body),u=i.body;else if(i.body instanceof URLSearchParams)l=i.body,u=FT(l);else if(i.body==null)l=new URLSearchParams,u=new FormData;else try{l=new URLSearchParams(i.body),u=FT(l)}catch{return r()}let c={formMethod:o,formAction:a,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:u,json:void 0,text:void 0};if(ro(c.formMethod))return{path:t,submission:c};let f=Wl(t);return e&&f.search&&fb(f.search)&&l.append("index",""),f.search="?"+l,{path:fm(f),submission:c}}function R8(n,e){let t=n;if(e){let i=n.findIndex(r=>r.route.id===e);i>=0&&(t=n.slice(0,i))}return t}function TT(n,e,t,i,r,s,o,a,l,u,c,f,h,m,v,g){let x=g?ls(g[1])?g[1].error:g[1].data:void 0,y=n.createURL(e.location),_=n.createURL(r),w=g&&ls(g[1])?g[0]:void 0,E=w?R8(t,w):t,C=g?g[1].statusCode:void 0,M=o&&C&&C>=400,T=E.filter((A,D)=>{let{route:I}=A;if(I.lazy)return!0;if(I.loader==null)return!1;if(s)return typeof I.loader!="function"||I.loader.hydrate?!0:e.loaderData[I.id]===void 0&&(!e.errors||e.errors[I.id]===void 0);if(I8(e.loaderData,e.matches[D],A)||l.some(k=>k===A.route.id))return!0;let L=e.matches[D],H=A;return PT(A,$n({currentUrl:y,currentParams:L.params,nextUrl:_,nextParams:H.params},i,{actionResult:x,unstable_actionStatus:C,defaultShouldRevalidate:M?!1:a||y.pathname+y.search===_.pathname+_.search||y.search!==_.search||BN(L,H)}))}),R=[];return f.forEach((A,D)=>{if(s||!t.some($=>$.route.id===A.routeId)||c.has(D))return;let I=bu(m,A.path,v);if(!I){R.push({key:D,routeId:A.routeId,path:A.path,matches:null,match:null,controller:null});return}let L=e.fetchers.get(D),H=qd(I,A.path),k=!1;h.has(D)?k=!1:u.includes(D)?k=!0:L&&L.state!=="idle"&&L.data===void 0?k=a:k=PT(H,$n({currentUrl:y,currentParams:e.matches[e.matches.length-1].params,nextUrl:_,nextParams:t[t.length-1].params},i,{actionResult:x,unstable_actionStatus:C,defaultShouldRevalidate:M?!1:a})),k&&R.push({key:D,routeId:A.routeId,path:A.path,matches:I,match:H,controller:new AbortController})}),[T,R]}function I8(n,e,t){let i=!e||t.route.id!==e.route.id,r=n[t.route.id]===void 0;return i||r}function BN(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function PT(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}async function F8(n,e,t,i,r,s,o,a){let l=[e,...t.map(u=>u.route.id)].join("-");try{let u=o.get(l);u||(u=n({path:e,matches:t,patch:(c,f)=>{a.aborted||UN(c,f,i,r,s)}}),o.set(l,u)),u&&H8(u)&&await u}finally{o.delete(l)}}function UN(n,e,t,i,r){if(n){var s;let o=i[n];tn(o,"No route found to patch children into: routeId = "+n);let a=Np(e,r,[n,"patch",String(((s=o.children)==null?void 0:s.length)||"0")],i);o.children?o.children.push(...a):o.children=a}else{let o=Np(e,r,["patch",String(t.length||"0")],i);t.push(...o)}}async function RT(n,e,t){if(!n.lazy)return;let i=await n.lazy();if(!n.lazy)return;let r=t[n.id];tn(r,"No route found in manifest");let s={};for(let o in i){let l=r[o]!==void 0&&o!=="hasErrorBoundary";dh(!l,'Route "'+r.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!n8.has(o)&&(s[o]=i[o])}Object.assign(r,s),Object.assign(r,$n({},e(r),{lazy:void 0}))}function N8(n){return Promise.all(n.matches.map(e=>e.resolve()))}async function L8(n,e,t,i,r,s,o,a){let l=i.reduce((f,h)=>f.add(h.route.id),new Set),u=new Set,c=await n({matches:r.map(f=>{let h=l.has(f.route.id);return $n({},f,{shouldLoad:h,resolve:v=>(u.add(f.route.id),h?O8(e,t,f,s,o,v,a):Promise.resolve({type:Tn.data,result:void 0}))})}),request:t,params:r[0].params,context:a});return r.forEach(f=>tn(u.has(f.route.id),'`match.resolve()` was not called for route id "'+f.route.id+'". You must call `match.resolve()` on every match passed to `dataStrategy` to ensure all routes are properly loaded.')),c.filter((f,h)=>l.has(r[h].route.id))}async function O8(n,e,t,i,r,s,o){let a,l,u=c=>{let f,h=new Promise((g,x)=>f=x);l=()=>f(),e.signal.addEventListener("abort",l);let m=g=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+t.route.id+"]"))):c({request:e,params:t.params,context:o},...g!==void 0?[g]:[]),v;return s?v=s(g=>m(g)):v=(async()=>{try{return{type:"data",result:await m()}}catch(g){return{type:"error",result:g}}})(),Promise.race([v,h])};try{let c=t.route[n];if(t.route.lazy)if(c){let f,[h]=await Promise.all([u(c).catch(m=>{f=m}),RT(t.route,r,i)]);if(f!==void 0)throw f;a=h}else if(await RT(t.route,r,i),c=t.route[n],c)a=await u(c);else if(n==="action"){let f=new URL(e.url),h=f.pathname+f.search;throw br(405,{method:e.method,pathname:h,routeId:t.route.id})}else return{type:Tn.data,result:void 0};else if(c)a=await u(c);else{let f=new URL(e.url),h=f.pathname+f.search;throw br(404,{pathname:h})}tn(a.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:Tn.error,result:c}}finally{l&&e.signal.removeEventListener("abort",l)}return a}async function z8(n){let{result:e,type:t,status:i}=n;if(HN(e)){let o;try{let a=e.headers.get("Content-Type");a&&/\bapplication\/json\b/.test(a)?e.body==null?o=null:o=await e.json():o=await e.text()}catch(a){return{type:Tn.error,error:a}}return t===Tn.error?{type:Tn.error,error:new ub(e.status,e.statusText,o),statusCode:e.status,headers:e.headers}:{type:Tn.data,data:o,statusCode:e.status,headers:e.headers}}if(t===Tn.error)return{type:Tn.error,error:e,statusCode:Dx(e)?e.status:i};if(W8(e)){var r,s;return{type:Tn.deferred,deferredData:e,statusCode:(r=e.init)==null?void 0:r.status,headers:((s=e.init)==null?void 0:s.headers)&&new Headers(e.init.headers)}}return{type:Tn.data,data:e,statusCode:i}}function B8(n,e,t,i,r,s){let o=n.headers.get("Location");if(tn(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!cb.test(o)){let a=i.slice(0,i.findIndex(l=>l.route.id===t)+1);o=_M(new URL(e.url),a,r,!0,o,s),n.headers.set("Location",o)}return n}function IT(n,e,t){if(cb.test(n)){let i=n,r=i.startsWith("//")?new URL(e.protocol+i):new URL(i),s=hm(r.pathname,t)!=null;if(r.origin===e.origin&&s)return r.pathname+r.search+r.hash}return n}function qc(n,e,t,i){let r=n.createURL(kN(e)).toString(),s={signal:t};if(i&&ro(i.formMethod)){let{formMethod:o,formEncType:a}=i;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(i.json)):a==="text/plain"?s.body=i.text:a==="application/x-www-form-urlencoded"&&i.formData?s.body=wM(i.formData):s.body=i.formData}return new Request(r,s)}function wM(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function FT(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function U8(n,e,t,i,r,s){let o={},a=null,l,u=!1,c={},f=i&&ls(i[1])?i[1].error:void 0;return t.forEach((h,m)=>{let v=e[m].route.id;if(tn(!Iu(h),"Cannot handle redirect results in processLoaderData"),ls(h)){let g=h.error;f!==void 0&&(g=f,f=void 0),a=a||{};{let x=rp(n,v);a[x.route.id]==null&&(a[x.route.id]=g)}o[v]=void 0,u||(u=!0,l=Dx(h.error)?h.error.status:500),h.headers&&(c[v]=h.headers)}else Ru(h)?(r.set(v,h.deferredData),o[v]=h.deferredData.data,h.statusCode!=null&&h.statusCode!==200&&!u&&(l=h.statusCode),h.headers&&(c[v]=h.headers)):(o[v]=h.data,h.statusCode&&h.statusCode!==200&&!u&&(l=h.statusCode),h.headers&&(c[v]=h.headers))}),f!==void 0&&i&&(a={[i[0]]:f},o[i[0]]=void 0),{loaderData:o,errors:a,statusCode:l||200,loaderHeaders:c}}function NT(n,e,t,i,r,s,o,a){let{loaderData:l,errors:u}=U8(e,t,i,r,a);for(let c=0;c<s.length;c++){let{key:f,match:h,controller:m}=s[c];tn(o!==void 0&&o[c]!==void 0,"Did not find corresponding fetcher result");let v=o[c];if(!(m&&m.signal.aborted))if(ls(v)){let g=rp(n.matches,h==null?void 0:h.route.id);u&&u[g.route.id]||(u=$n({},u,{[g.route.id]:v.error})),n.fetchers.delete(f)}else if(Iu(v))tn(!1,"Unhandled fetcher revalidation redirect");else if(Ru(v))tn(!1,"Unhandled fetcher deferred data");else{let g=al(v.data);n.fetchers.set(f,g)}}return{loaderData:l,errors:u}}function LT(n,e,t,i){let r=$n({},e);for(let s of t){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(r[o]=e[o]):n[o]!==void 0&&s.route.loader&&(r[o]=n[o]),i&&i.hasOwnProperty(o))break}return r}function OT(n){return n?ls(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function rp(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function zT(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function br(n,e){let{pathname:t,routeId:i,method:r,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return n===400?(a="Bad Request",s==="route-discovery"?l='Unable to match URL "'+t+'" - the `children()` function for '+("route `"+i+"` threw the following error:\n"+o):r&&t&&i?l="You made a "+r+' request to "'+t+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):n===403?(a="Forbidden",l='Route "'+i+'" does not match URL "'+t+'"'):n===404?(a="Not Found",l='No route matches URL "'+t+'"'):n===405&&(a="Method Not Allowed",r&&t&&i?l="You made a "+r.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":r&&(l='Invalid request method "'+r.toUpperCase()+'"')),new ub(n||500,a,new Error(l),!0)}function BT(n){for(let e=n.length-1;e>=0;e--){let t=n[e];if(Iu(t))return{result:t,idx:e}}}function kN(n){let e=typeof n=="string"?Wl(n):n;return fm($n({},e,{hash:""}))}function k8(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function H8(n){return typeof n=="object"&&n!=null&&"then"in n}function V8(n){return HN(n.result)&&b8.has(n.result.status)}function Ru(n){return n.type===Tn.deferred}function ls(n){return n.type===Tn.error}function Iu(n){return(n&&n.type)===Tn.redirect}function W8(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function HN(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function G8(n){return E8.has(n.toLowerCase())}function ro(n){return S8.has(n.toLowerCase())}async function UT(n,e,t,i,r,s){for(let o=0;o<t.length;o++){let a=t[o],l=e[o];if(!l)continue;let u=n.find(f=>f.route.id===l.route.id),c=u!=null&&!BN(u,l)&&(s&&s[l.route.id])!==void 0;if(Ru(a)&&(r||c)){let f=i[o];tn(f,"Expected an AbortSignal for revalidating fetcher deferred result"),await VN(a,f,r).then(h=>{h&&(t[o]=h||t[o])})}}}async function VN(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:Tn.data,data:n.deferredData.unwrappedData}}catch(r){return{type:Tn.error,error:r}}return{type:Tn.data,data:n.deferredData.data}}}function fb(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function qd(n,e){let t=typeof e=="string"?Wl(e).search:e.search;if(n[n.length-1].route.index&&fb(t||""))return n[n.length-1];let i=FN(n);return i[i.length-1]}function kT(n){let{formMethod:e,formAction:t,formEncType:i,text:r,formData:s,json:o}=n;if(!(!e||!t||!i)){if(r!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:r};if(s!=null)return{formMethod:e,formAction:t,formEncType:i,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:o,text:void 0}}}function rw(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function j8(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function xd(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function q8(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function al(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function X8(n,e){try{let t=n.sessionStorage.getItem(zN);if(t){let i=JSON.parse(t);for(let[r,s]of Object.entries(i||{}))s&&Array.isArray(s)&&e.set(r,new Set(s||[]))}}catch{}}function $8(n,e){if(e.size>0){let t={};for(let[i,r]of e)t[i]=[...r];try{n.sessionStorage.setItem(zN,JSON.stringify(t))}catch(i){dh(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}/**
 * React Router v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ay(){return ay=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ay.apply(this,arguments)}const Tx=ie.createContext(null),WN=ie.createContext(null),Px=ie.createContext(null),hb=ie.createContext(null),pc=ie.createContext({outlet:null,matches:[],isDataRoute:!1}),GN=ie.createContext(null);function Rx(){return ie.useContext(hb)!=null}function jN(){return Rx()||tn(!1),ie.useContext(hb).location}function qN(n){ie.useContext(Px).static||ie.useLayoutEffect(n)}function xo(){let{isDataRoute:n}=ie.useContext(pc);return n?l6():Y8()}function Y8(){Rx()||tn(!1);let n=ie.useContext(Tx),{basename:e,future:t,navigator:i}=ie.useContext(Px),{matches:r}=ie.useContext(pc),{pathname:s}=jN(),o=JSON.stringify(NN(r,t.v7_relativeSplatPath)),a=ie.useRef(!1);return qN(()=>{a.current=!0}),ie.useCallback(function(u,c){if(c===void 0&&(c={}),!a.current)return;if(typeof u=="number"){i.go(u);return}let f=LN(u,JSON.parse(o),s,c.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Tl([e,f.pathname])),(c.replace?i.replace:i.push)(f,c.state,c)},[e,i,o,s,n])}const Z8=ie.createContext(null);function K8(n){let e=ie.useContext(pc).outlet;return e&&ie.createElement(Z8.Provider,{value:n},e)}function J8(n,e,t,i){Rx()||tn(!1);let{navigator:r}=ie.useContext(Px),{matches:s}=ie.useContext(pc),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let u=jN(),c;c=u;let f=c.pathname||"/",h=f;if(l!=="/"){let g=l.replace(/^\//,"").split("/");h="/"+f.replace(/^\//,"").split("/").slice(g.length).join("/")}let m=bu(n,{pathname:h});return i6(m&&m.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:Tl([l,r.encodeLocation?r.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?l:Tl([l,r.encodeLocation?r.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,t,i)}function Q8(){let n=a6(),e=Dx(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ie.createElement(ie.Fragment,null,ie.createElement("h2",null,"Unexpected Application Error!"),ie.createElement("h3",{style:{fontStyle:"italic"}},e),t?ie.createElement("pre",{style:r},t):null,null)}const e6=ie.createElement(Q8,null);class t6 extends ie.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?ie.createElement(pc.Provider,{value:this.props.routeContext},ie.createElement(GN.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function n6(n){let{routeContext:e,match:t,children:i}=n,r=ie.useContext(Tx);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),ie.createElement(pc.Provider,{value:e},i)}function i6(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if((s=t)!=null&&s.errors)n=t.matches;else return null}let o=n,a=(r=t)==null?void 0:r.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||tn(!1),o=o.slice(0,Math.min(o.length,c+1))}let l=!1,u=-1;if(t&&i&&i.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(u=c),f.route.id){let{loaderData:h,errors:m}=t,v=f.route.loader&&h[f.route.id]===void 0&&(!m||m[f.route.id]===void 0);if(f.route.lazy||v){l=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((c,f,h)=>{let m,v=!1,g=null,x=null;t&&(m=a&&f.route.id?a[f.route.id]:void 0,g=f.route.errorElement||e6,l&&(u<0&&h===0?(u6("route-fallback"),v=!0,x=null):u===h&&(v=!0,x=f.route.hydrateFallbackElement||null)));let y=e.concat(o.slice(0,h+1)),_=()=>{let w;return m?w=g:v?w=x:f.route.Component?w=ie.createElement(f.route.Component,null):f.route.element?w=f.route.element:w=c,ie.createElement(n6,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:t!=null},children:w})};return t&&(f.route.ErrorBoundary||f.route.errorElement||h===0)?ie.createElement(t6,{location:t.location,revalidation:t.revalidation,component:g,error:m,children:_(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):_()},null)}var XN=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(XN||{}),ly=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(ly||{});function r6(n){let e=ie.useContext(Tx);return e||tn(!1),e}function s6(n){let e=ie.useContext(WN);return e||tn(!1),e}function o6(n){let e=ie.useContext(pc);return e||tn(!1),e}function $N(n){let e=o6(),t=e.matches[e.matches.length-1];return t.route.id||tn(!1),t.route.id}function a6(){var n;let e=ie.useContext(GN),t=s6(ly.UseRouteError),i=$N(ly.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function l6(){let{router:n}=r6(XN.UseNavigateStable),e=$N(ly.UseNavigateStable),t=ie.useRef(!1);return qN(()=>{t.current=!0}),ie.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,ay({fromRouteId:e},s)))},[n,e])}const HT={};function u6(n,e,t){HT[n]||(HT[n]=!0)}function c6(n){return K8(n.context)}function f6(n){let{basename:e="/",children:t=null,location:i,navigationType:r=yi.Pop,navigator:s,static:o=!1,future:a}=n;Rx()&&tn(!1);let l=e.replace(/^\/*/,"/"),u=ie.useMemo(()=>({basename:l,navigator:s,static:o,future:ay({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=Wl(i));let{pathname:c="/",search:f="",hash:h="",state:m=null,key:v="default"}=i,g=ie.useMemo(()=>{let x=hm(c,l);return x==null?null:{location:{pathname:x,search:f,hash:h,state:m,key:v},navigationType:r}},[l,c,f,h,m,v,r]);return g==null?null:ie.createElement(Px.Provider,{value:u},ie.createElement(hb.Provider,{children:t,value:g}))}new Promise(()=>{});function h6(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:ie.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:ie.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:ie.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.24.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function uy(){return uy=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},uy.apply(this,arguments)}const d6="6";try{window.__reactRouterVersion=d6}catch{}function p6(n,e){return T8({basename:e==null?void 0:e.basename,future:uy({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:Q5({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||m6(),routes:n,mapRouteProperties:h6,unstable_dataStrategy:e==null?void 0:e.unstable_dataStrategy,unstable_patchRoutesOnMiss:e==null?void 0:e.unstable_patchRoutesOnMiss,window:e==null?void 0:e.window}).initialize()}function m6(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=uy({},e,{errors:g6(e.errors)})),e}function g6(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,r]of e)if(r&&r.__type==="RouteErrorResponse")t[i]=new ub(r.status,r.statusText,r.data,r.internal===!0);else if(r&&r.__type==="Error"){if(r.__subType){let s=window[r.__subType];if(typeof s=="function")try{let o=new s(r.message);o.stack="",t[i]=o}catch{}}if(t[i]==null){let s=new Error(r.message);s.stack="",t[i]=s}}else t[i]=r;return t}const v6=ie.createContext({isTransitioning:!1}),y6=ie.createContext(new Map),x6="startTransition",VT=kk[x6],_6="flushSync",WT=J5[_6];function w6(n){VT?VT(n):n()}function _d(n){WT?WT(n):n()}class S6{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}}function M6(n){let{fallbackElement:e,router:t,future:i}=n,[r,s]=ie.useState(t.state),[o,a]=ie.useState(),[l,u]=ie.useState({isTransitioning:!1}),[c,f]=ie.useState(),[h,m]=ie.useState(),[v,g]=ie.useState(),x=ie.useRef(new Map),{v7_startTransition:y}=i||{},_=ie.useCallback(T=>{y?w6(T):T()},[y]),w=ie.useCallback((T,R)=>{let{deletedFetchers:A,unstable_flushSync:D,unstable_viewTransitionOpts:I}=R;A.forEach(H=>x.current.delete(H)),T.fetchers.forEach((H,k)=>{H.data!==void 0&&x.current.set(k,H.data)});let L=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!I||L){D?_d(()=>s(T)):_(()=>s(T));return}if(D){_d(()=>{h&&(c&&c.resolve(),h.skipTransition()),u({isTransitioning:!0,flushSync:!0,currentLocation:I.currentLocation,nextLocation:I.nextLocation})});let H=t.window.document.startViewTransition(()=>{_d(()=>s(T))});H.finished.finally(()=>{_d(()=>{f(void 0),m(void 0),a(void 0),u({isTransitioning:!1})})}),_d(()=>m(H));return}h?(c&&c.resolve(),h.skipTransition(),g({state:T,currentLocation:I.currentLocation,nextLocation:I.nextLocation})):(a(T),u({isTransitioning:!0,flushSync:!1,currentLocation:I.currentLocation,nextLocation:I.nextLocation}))},[t.window,h,c,x,_]);ie.useLayoutEffect(()=>t.subscribe(w),[t,w]),ie.useEffect(()=>{l.isTransitioning&&!l.flushSync&&f(new S6)},[l]),ie.useEffect(()=>{if(c&&o&&t.window){let T=o,R=c.promise,A=t.window.document.startViewTransition(async()=>{_(()=>s(T)),await R});A.finished.finally(()=>{f(void 0),m(void 0),a(void 0),u({isTransitioning:!1})}),m(A)}},[_,o,c,t.window]),ie.useEffect(()=>{c&&o&&r.location.key===o.location.key&&c.resolve()},[c,h,r.location,o]),ie.useEffect(()=>{!l.isTransitioning&&v&&(a(v.state),u({isTransitioning:!0,flushSync:!1,currentLocation:v.currentLocation,nextLocation:v.nextLocation}),g(void 0))},[l.isTransitioning,v]),ie.useEffect(()=>{},[]);let E=ie.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:T=>t.navigate(T),push:(T,R,A)=>t.navigate(T,{state:R,preventScrollReset:A==null?void 0:A.preventScrollReset}),replace:(T,R,A)=>t.navigate(T,{replace:!0,state:R,preventScrollReset:A==null?void 0:A.preventScrollReset})}),[t]),C=t.basename||"/",M=ie.useMemo(()=>({router:t,navigator:E,static:!1,basename:C}),[t,E,C]);return ie.createElement(ie.Fragment,null,ie.createElement(Tx.Provider,{value:M},ie.createElement(WN.Provider,{value:r},ie.createElement(y6.Provider,{value:x.current},ie.createElement(v6.Provider,{value:l},ie.createElement(f6,{basename:C,location:r.location,navigationType:r.historyAction,navigator:E,future:{v7_relativeSplatPath:t.future.v7_relativeSplatPath}},r.initialized||t.future.v7_partialHydration?ie.createElement(E6,{routes:t.routes,future:t.future,state:r}):e))))),null)}function E6(n){let{routes:e,future:t,state:i}=n;return J8(e,void 0,i,t)}var GT;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(GT||(GT={}));var jT;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(jT||(jT={}));const b6={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE_URL:"/FlatEarthProject/"},qT=n=>{let e;const t=new Set,i=(c,f)=>{const h=typeof c=="function"?c(e):c;if(!Object.is(h,e)){const m=e;e=f??(typeof h!="object"||h===null)?h:Object.assign({},e,h),t.forEach(v=>v(e,m))}},r=()=>e,l={setState:i,getState:r,getInitialState:()=>u,subscribe:c=>(t.add(c),()=>t.delete(c)),destroy:()=>{(b6?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),t.clear()}},u=e=n(i,r,l);return l},A6=n=>n?qT(n):qT;var YN={exports:{}},ZN={},KN={exports:{}},JN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ph=ie;function C6(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var D6=typeof Object.is=="function"?Object.is:C6,T6=ph.useState,P6=ph.useEffect,R6=ph.useLayoutEffect,I6=ph.useDebugValue;function F6(n,e){var t=e(),i=T6({inst:{value:t,getSnapshot:e}}),r=i[0].inst,s=i[1];return R6(function(){r.value=t,r.getSnapshot=e,sw(r)&&s({inst:r})},[n,t,e]),P6(function(){return sw(r)&&s({inst:r}),n(function(){sw(r)&&s({inst:r})})},[n]),I6(t),t}function sw(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!D6(n,t)}catch{return!0}}function N6(n,e){return e()}var L6=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?N6:F6;JN.useSyncExternalStore=ph.useSyncExternalStore!==void 0?ph.useSyncExternalStore:L6;KN.exports=JN;var O6=KN.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ix=ie,z6=O6;function B6(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var U6=typeof Object.is=="function"?Object.is:B6,k6=z6.useSyncExternalStore,H6=Ix.useRef,V6=Ix.useEffect,W6=Ix.useMemo,G6=Ix.useDebugValue;ZN.useSyncExternalStoreWithSelector=function(n,e,t,i,r){var s=H6(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=W6(function(){function l(m){if(!u){if(u=!0,c=m,m=i(m),r!==void 0&&o.hasValue){var v=o.value;if(r(v,m))return f=v}return f=m}if(v=f,U6(c,m))return v;var g=i(m);return r!==void 0&&r(v,g)?v:(c=m,f=g)}var u=!1,c,f,h=t===void 0?null:t;return[function(){return l(e())},h===null?void 0:function(){return l(h())}]},[e,t,i,r]);var a=k6(n,s[0],s[1]);return V6(function(){o.hasValue=!0,o.value=a},[a]),G6(a),a};YN.exports=ZN;var j6=YN.exports;const q6=Th(j6),QN={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_BASE_URL:"/FlatEarthProject/"},{useDebugValue:X6}=vE,{useSyncExternalStoreWithSelector:$6}=q6;let XT=!1;const Y6=n=>n;function Z6(n,e=Y6,t){(QN?"production":void 0)!=="production"&&t&&!XT&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),XT=!0);const i=$6(n.subscribe,n.getState,n.getServerState||n.getInitialState,e,t);return X6(i),i}const $T=n=>{(QN?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof n=="function"?A6(n):n,t=(i,r)=>Z6(e,i,r);return Object.assign(t,e),t},K6=n=>n?$T(n):$T,ds={atlanta:{lat:33.753746,lon:-84.38633},beijing:{lat:39.913818,lon:116.363625},cape:{lat:-34.270836,lon:18.459778},delhi:{lat:28.6448,lon:77.216721},easter:{lat:-27.104671,lon:-109.360481},florence:{lat:43.769562,lon:11.255814},goiania:{lat:-16.665136,lon:-49.286041},hobart:{lat:-42.880554,lon:147.324997},irkutsk:{lat:52.286974,lon:104.305018},jakarta:{lat:-6.121435,lon:106.774124},kiev:{lat:50.450001,lon:30.523333}};/*! js-cookie v3.0.5 | MIT */function tv(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)n[i]=t[i]}return n}var J6={read:function(n){return n[0]==='"'&&(n=n.slice(1,-1)),n.replace(/(%[\dA-F]{2})+/gi,decodeURIComponent)},write:function(n){return encodeURIComponent(n).replace(/%(2[346BF]|3[AC-F]|40|5[BDE]|60|7[BCD])/g,decodeURIComponent)}};function SM(n,e){function t(r,s,o){if(!(typeof document>"u")){o=tv({},e,o),typeof o.expires=="number"&&(o.expires=new Date(Date.now()+o.expires*864e5)),o.expires&&(o.expires=o.expires.toUTCString()),r=encodeURIComponent(r).replace(/%(2[346B]|5E|60|7C)/g,decodeURIComponent).replace(/[()]/g,escape);var a="";for(var l in o)o[l]&&(a+="; "+l,o[l]!==!0&&(a+="="+o[l].split(";")[0]));return document.cookie=r+"="+n.write(s,r)+a}}function i(r){if(!(typeof document>"u"||arguments.length&&!r)){for(var s=document.cookie?document.cookie.split("; "):[],o={},a=0;a<s.length;a++){var l=s[a].split("="),u=l.slice(1).join("=");try{var c=decodeURIComponent(l[0]);if(o[c]=n.read(u,c),r===c)break}catch{}}return r?o[r]:o}}return Object.create({set:t,get:i,remove:function(r,s){t(r,"",tv({},s,{expires:-1}))},withAttributes:function(r){return SM(this.converter,tv({},this.attributes,r))},withConverter:function(r){return SM(tv({},this.converter,r),this.attributes)}},{attributes:{value:Object.freeze(e)},converter:{value:Object.freeze(n)}})}var cy=SM(J6,{path:"/"});console.log(void 0);const db="http://localhost:8080";async function Q6(){try{const e=(await fetch(db+"/register").then(t=>t.json())).token;return e===void 0?null:(console.log("completed handshake"),e)}catch(n){return console.error(n),null}}async function eH(n,e,t){dm(n,"click",{x:e,y:t})}async function tH(n,e,t){if(e.length<=1){console.error("Path length should not be <=1");return}if(e.length===2){const[r,s]=e;if(r.x===s.x&&r.y===s.y&&r.z==s.z)return}e.reverse(),dm(n,"drag",{path:e,city_name:t})}async function YT(n,e,t){const i={solve_type:e};e==="fixed"&&t!==void 0&&(i.city_name=t),dm(n,"solve",i)}async function nv(n,e,t=!0){if(n===null)return;const i={destination:e,success:t};console.log("Posting route_change with",i,n),dm(n,"route_change",i)}async function nH(n,e){if(n===null)return;dm(n,"exit",{current_route:e})}async function dm(n,e,t){const i={event_type:e};t!==null&&(i.payload=t);try{const r=await fetch(db+"/log/event",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${n}`},body:JSON.stringify(i)});if(!r.ok)throw Error(`Received error code: ${r.status}`)}catch(r){console.error(r)}console.log(`logged type:${e}, body:${JSON.stringify(i)}`)}async function pb(n,e,t){if(e===null){console.log(`Endpoint ${n} requires authorization`);return}try{const i=await fetch(db+n,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${e}`},body:JSON.stringify(t)});if(!i.ok)throw Error(`Received error code: ${i.status}`)}catch(i){console.error(i)}console.log(`sent payload to ${n}`)}function iH(n,e){return pb("/log/report",n,e)}function rH(n,e){return pb("/log/survey1",n,e)}function sH(n,e){return pb("/log/survey2",n,e)}const MM=n=>Object.keys(ds).reduce((e,t)=>({...e,[t]:n}),{}),wd=!1,EM=ie.createRef(),oH=null,aH=MM(null),ow={cityName:null,anchor:null,mousePosition:null,visible:!1},aw=!1,ZT=7,lH=null,KT={},JT=0,uH=!0,cH=!1,fH="plane",hH={},lw={},QT=null,dH=cy.get("progression")??null;EM.current={};const pH=0,mH=0,eL=ie.createRef();eL.current={mouseX:pH,mouseY:mH};const gH=cy.get("jwt")||null,Ve=K6((n,e)=>({route:lH,citiesRef:EM,hoveredCity:oH,isDragging:wd,animations:aH,contextMenu:ow,nCities:ZT,isAnimating:aw,nRenderedCities:JT,truePositions:KT,controlsEnabled:uH,moveLock:cH,objectType:fH,currPositions:hH,hoverPositions:lw,earthUUID:QT,progression:dH,jwt:gH,mouseRef:eL,updateMoveLock:t=>n({moveLock:t}),updateRoute:t=>{e().hoveredCity=null,e().updateIsDragging(wd),e().updateAnimationState(null),e().citiesRef.current={},n({route:t,nRenderedCities:JT,isAnimating:aw,isDragging:wd,contextMenu:ow,nCities:ZT,truePositions:KT,objectType:t==="globe"?"sphere":"plane",earthUUID:QT,hoverPositions:lw})},updateCities:(t,i,r=!1)=>{const s=e().citiesRef.current;if(r===!0){if(s[t]===void 0)return;e().citiesRef.current[t],n(o=>({nRenderedCities:o.nRenderedCities-1}))}else e().citiesRef.current[t]=i,n(o=>({nRenderedCities:o.nRenderedCities+1}));e().updateCurrPositions()},updateHoveredCity:t=>{if(t===null){n({hoveredCity:null});return}const i=e().citiesRef.current[t];if(i===void 0)throw new Error("invalid city name");n({hoveredCity:{name:t,mesh:i}})},moveHoveredCity:(t,i,r,s)=>{if(e().moveLock===!0&&s!==!1)return;const o=e().hoveredCity;if(o===null)throw new Error("Trying to move without selecting a city");o.mesh.position.set(t,i,r),s!==void 0&&n({moveLock:s}),e().updateCurrPositions()},updateIsDragging:t=>n({isDragging:t}),updateAnimationState:(t,i)=>{if(t!==null&&Object.values(e().animations).find(r=>r===null)===void 0)return!1;if(i===void 0)return n({animations:MM(t)}),!0;if(t==="fixed"){const r=MM("moving");return r[i]=null,n({animations:r}),!0}return n(r=>({animations:{...r.animations,[i]:t}})),!0},updateContextMenu:t=>n({contextMenu:t}),updateNCities:t=>{const i=t;if(i===void 0)return ds;const r=Object.keys(ds),s={};for(let o=0;o<i;o++){const a=r[o];s[a]=ds[a]}n({hoveredCity:null}),e().updateIsDragging(wd),e().updateAnimationState(null),n({nCities:t,isAnimating:aw,isDragging:wd,contextMenu:ow,truePositions:s,hoverPositions:lw})},updateIsAnimating:t=>n({isAnimating:t}),updateControlsEnabled:t=>n({controlsEnabled:t}),updateCurrPositions:()=>{var r;const t={},i=e().citiesRef.current;for(const s of Object.keys(i))t[s]=(r=EM.current[s])==null?void 0:r.position;n({currPositions:t})},updateHoverPositions:(t,i,r=0)=>{n(s=>({hoverPositions:{...s.hoverPositions,[t]:{position:i,rotation:r}}}))},clearHoverPositions:()=>{n({hoverPositions:{}})},updateEarthUUID:t=>n({earthUUID:t}),updateProgression:t=>{const i=[null,"tutorial1","tutorial2","tutorial3","tutorial4","tutorial5","plane","globe","survey1","survey2"];if(!i.includes(t))return nv(e().jwt,t),!0;const r=e().progression,s=i.indexOf(r),o=i.indexOf(t);if(s===null)throw Error("currIndex should never be null");return o>s+1?(nv(e().jwt,t,!1),!1):o===s+1?(n({progression:t}),cy.set("progression",t,{expires:1}),nv(e().jwt,t),!0):(nv(e().jwt,t),!0)},updateMousePosition:(t,i)=>e().mouseRef.current={mouseX:t,mouseY:i},setJwt:t=>{cy.set("jwt",t,{expires:1/24}),n({jwt:t})}}));function mc({EarthMesh:n}){const e=Ve(c=>c.isDragging),t=Ve(c=>c.hoveredCity),i=Ve(c=>c.moveHoveredCity),r=Ve(c=>c.updateIsDragging),s=Ve(c=>c.updateControlsEnabled),o=Ve(c=>c.updateEarthUUID),a=ie.useRef(null),l=c=>{if(!e||!t)return;const f=c.intersections.find(g=>g.object.uuid===a.current.uuid);if(f===void 0)throw new Error("Didn't intersect earth");const{x:h,y:m,z:v}=f.point;i(h,m,v),c.stopPropagation()},u=()=>{r(!1),s(!0)};return ie.useEffect(()=>o(a.current.uuid),[o]),O.jsx(n,{onPointerMove:l,onPointerUp:u,ref:a})}/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const pm="166",ma={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ga={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},tL=0,bM=1,nL=2,vH=3,iL=0,Fx=1,sp=2,to=3,Na=0,Rr=1,Bo=2,Ca=0,ju=1,AM=2,CM=3,DM=4,rL=5,dl=100,sL=101,oL=102,aL=103,lL=104,uL=200,cL=201,fL=202,hL=203,fy=204,hy=205,dL=206,pL=207,mL=208,gL=209,vL=210,yL=211,xL=212,_L=213,wL=214,SL=0,ML=1,EL=2,Lp=3,bL=4,AL=5,CL=6,DL=7,mm=0,TL=1,PL=2,jo=0,RL=1,IL=2,FL=3,mb=4,NL=5,LL=6,OL=7,TM="attached",zL="detached",Nx=300,La=301,Il=302,Op=303,zp=304,Fh=306,ic=1e3,zs=1001,Bp=1002,Oi=1003,gb=1004,yH=1004,Lf=1005,xH=1005,ai=1006,op=1007,_H=1007,ko=1008,wH=1008,go=1009,vb=1010,yb=1011,mh=1012,Lx=1013,Oa=1014,Tr=1015,gc=1016,Ox=1017,zx=1018,rc=1020,xb=35902,_b=1021,wb=1022,pr=1023,Sb=1024,Mb=1025,qu=1026,sc=1027,Bx=1028,gm=1029,Eb=1030,Ux=1031,SH=1032,kx=1033,ap=33776,lp=33777,up=33778,cp=33779,dy=35840,py=35841,my=35842,gy=35843,vy=36196,yy=37492,xy=37496,_y=37808,wy=37809,Sy=37810,My=37811,Ey=37812,by=37813,Ay=37814,Cy=37815,Dy=37816,Ty=37817,Py=37818,Ry=37819,Iy=37820,Fy=37821,fp=36492,Ny=36494,Ly=36495,bb=36283,Oy=36284,zy=36285,By=36286,BL=2200,UL=2201,kL=2202,Up=2300,Uy=2301,P0=2302,Fu=2400,Nu=2401,kp=2402,Hx=2500,Ab=2501,MH=0,EH=1,bH=2,HL=3200,VL=3201,Gl=0,WL=1,ya="",Is="srgb",ka="srgb-linear",Vx="display-p3",vm="display-p3-linear",Hp="linear",Cn="srgb",Vp="rec709",Wp="p3",AH=0,Mu=7680,CH=7681,DH=7682,TH=7683,PH=34055,RH=34056,IH=5386,FH=512,NH=513,LH=514,OH=515,zH=516,BH=517,UH=518,PM=519,GL=512,jL=513,qL=514,Cb=515,XL=516,$L=517,YL=518,ZL=519,Gp=35044,kH=35048,HH=35040,VH=35045,WH=35049,GH=35041,jH=35046,qH=35050,XH=35042,$H="100",RM="300 es",Ho=2e3,jp=2001;let Ko=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const ar=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let e2=1234567;const Xu=Math.PI/180,gh=180/Math.PI;function ps(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(ar[n&255]+ar[n>>8&255]+ar[n>>16&255]+ar[n>>24&255]+"-"+ar[e&255]+ar[e>>8&255]+"-"+ar[e>>16&15|64]+ar[e>>24&255]+"-"+ar[t&63|128]+ar[t>>8&255]+"-"+ar[t>>16&255]+ar[t>>24&255]+ar[i&255]+ar[i>>8&255]+ar[i>>16&255]+ar[i>>24&255]).toLowerCase()}function si(n,e,t){return Math.max(e,Math.min(t,n))}function Db(n,e){return(n%e+e)%e}function YH(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function ZH(n,e,t){return n!==e?(t-n)/(e-n):0}function hp(n,e,t){return(1-t)*n+t*e}function KH(n,e,t,i){return hp(n,e,1-Math.exp(-t*i))}function JH(n,e=1){return e-Math.abs(Db(n,e*2)-e)}function QH(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function eV(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function tV(n,e){return n+Math.floor(Math.random()*(e-n+1))}function nV(n,e){return n+Math.random()*(e-n)}function iV(n){return n*(.5-Math.random())}function rV(n){n!==void 0&&(e2=n);let e=e2+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function sV(n){return n*Xu}function oV(n){return n*gh}function aV(n){return(n&n-1)===0&&n!==0}function lV(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function uV(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function cV(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+i)/2),c=o((e+i)/2),f=s((e-i)/2),h=o((e-i)/2),m=s((i-e)/2),v=o((i-e)/2);switch(r){case"XYX":n.set(a*c,l*f,l*h,a*u);break;case"YZY":n.set(l*h,a*c,l*f,a*u);break;case"ZXZ":n.set(l*f,l*h,a*c,a*u);break;case"XZX":n.set(a*c,l*v,l*m,a*u);break;case"YXY":n.set(l*m,a*c,l*v,a*u);break;case"ZYZ":n.set(l*v,l*m,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Dr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Yt(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const KL={DEG2RAD:Xu,RAD2DEG:gh,generateUUID:ps,clamp:si,euclideanModulo:Db,mapLinear:YH,inverseLerp:ZH,lerp:hp,damp:KH,pingpong:JH,smoothstep:QH,smootherstep:eV,randInt:tV,randFloat:nV,randFloatSpread:iV,seededRandom:rV,degToRad:sV,radToDeg:oV,isPowerOfTwo:aV,ceilPowerOfTwo:lV,floorPowerOfTwo:uV,setQuaternionFromProperEuler:cV,normalize:Yt,denormalize:Dr};class Fe{constructor(e=0,t=0){Fe.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(si(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class $t{constructor(e,t,i,r,s,o,a,l,u){$t.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,u)}set(e,t,i,r,s,o,a,l,u){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=s,c[5]=l,c[6]=i,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],u=i[1],c=i[4],f=i[7],h=i[2],m=i[5],v=i[8],g=r[0],x=r[3],y=r[6],_=r[1],w=r[4],E=r[7],C=r[2],M=r[5],T=r[8];return s[0]=o*g+a*_+l*C,s[3]=o*x+a*w+l*M,s[6]=o*y+a*E+l*T,s[1]=u*g+c*_+f*C,s[4]=u*x+c*w+f*M,s[7]=u*y+c*E+f*T,s[2]=h*g+m*_+v*C,s[5]=h*x+m*w+v*M,s[8]=h*y+m*E+v*T,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-i*s*c+i*a*l+r*s*u-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=c*o-a*u,h=a*l-c*s,m=u*s-o*l,v=t*f+i*h+r*m;if(v===0)return this.set(0,0,0,0,0,0,0,0,0);const g=1/v;return e[0]=f*g,e[1]=(r*u-c*i)*g,e[2]=(a*i-r*o)*g,e[3]=h*g,e[4]=(c*t-r*l)*g,e[5]=(r*s-a*t)*g,e[6]=m*g,e[7]=(i*l-u*t)*g,e[8]=(o*t-i*s)*g,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(i*l,i*u,-i*(l*o+u*a)+o+e,-r*u,r*l,-r*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(uw.makeScale(e,t)),this}rotate(e){return this.premultiply(uw.makeRotation(-e)),this}translate(e,t){return this.premultiply(uw.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const uw=new $t;function JL(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const fV={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Of(n,e){return new fV[n](e)}function qp(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function QL(){const n=qp("canvas");return n.style.display="block",n}const t2={};function Tb(n){n in t2||(t2[n]=!0,console.warn(n))}function hV(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}const n2=new $t().set(.8224621,.177538,0,.0331941,.9668058,0,.0170827,.0723974,.9105199),i2=new $t().set(1.2249401,-.2249404,0,-.0420569,1.0420571,0,-.0196376,-.0786361,1.0982735),iv={[ka]:{transfer:Hp,primaries:Vp,toReference:n=>n,fromReference:n=>n},[Is]:{transfer:Cn,primaries:Vp,toReference:n=>n.convertSRGBToLinear(),fromReference:n=>n.convertLinearToSRGB()},[vm]:{transfer:Hp,primaries:Wp,toReference:n=>n.applyMatrix3(i2),fromReference:n=>n.applyMatrix3(n2)},[Vx]:{transfer:Cn,primaries:Wp,toReference:n=>n.convertSRGBToLinear().applyMatrix3(i2),fromReference:n=>n.applyMatrix3(n2).convertLinearToSRGB()}},dV=new Set([ka,vm]),vn={enabled:!0,_workingColorSpace:ka,get workingColorSpace(){return this._workingColorSpace},set workingColorSpace(n){if(!dV.has(n))throw new Error(`Unsupported working color space, "${n}".`);this._workingColorSpace=n},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=iv[e].toReference,r=iv[t].fromReference;return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this._workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this._workingColorSpace)},getPrimaries:function(n){return iv[n].primaries},getTransfer:function(n){return n===ya?Hp:iv[n].transfer}};function Qf(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function cw(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Xc;class eO{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Xc===void 0&&(Xc=qp("canvas")),Xc.width=e.width,Xc.height=e.height;const i=Xc.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Xc}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=qp("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Qf(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Qf(t[i]/255)*255):t[i]=Qf(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let pV=0;class Lu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:pV++}),this.uuid=ps(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(fw(r[o].image)):s.push(fw(r[o]))}else s=fw(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function fw(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?eO.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let mV=0;class jn extends Ko{constructor(e=jn.DEFAULT_IMAGE,t=jn.DEFAULT_MAPPING,i=zs,r=zs,s=ai,o=ko,a=pr,l=go,u=jn.DEFAULT_ANISOTROPY,c=ya){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:mV++}),this.uuid=ps(),this.name="",this.source=new Lu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Fe(0,0),this.repeat=new Fe(1,1),this.center=new Fe(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new $t,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==Nx)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case ic:e.x=e.x-Math.floor(e.x);break;case zs:e.x=e.x<0?0:1;break;case Bp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case ic:e.y=e.y-Math.floor(e.y);break;case zs:e.y=e.y<0?0:1;break;case Bp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}jn.DEFAULT_IMAGE=null;jn.DEFAULT_MAPPING=Nx;jn.DEFAULT_ANISOTROPY=1;class sn{constructor(e=0,t=0,i=0,r=1){sn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,u=l[0],c=l[4],f=l[8],h=l[1],m=l[5],v=l[9],g=l[2],x=l[6],y=l[10];if(Math.abs(c-h)<.01&&Math.abs(f-g)<.01&&Math.abs(v-x)<.01){if(Math.abs(c+h)<.1&&Math.abs(f+g)<.1&&Math.abs(v+x)<.1&&Math.abs(u+m+y-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const w=(u+1)/2,E=(m+1)/2,C=(y+1)/2,M=(c+h)/4,T=(f+g)/4,R=(v+x)/4;return w>E&&w>C?w<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(w),r=M/i,s=T/i):E>C?E<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(E),i=M/r,s=R/r):C<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(C),i=T/s,r=R/s),this.set(i,r,s,t),this}let _=Math.sqrt((x-v)*(x-v)+(f-g)*(f-g)+(h-c)*(h-c));return Math.abs(_)<.001&&(_=1),this.x=(x-v)/_,this.y=(f-g)/_,this.z=(h-c)/_,this.w=Math.acos((u+m+y-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class tO extends Ko{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new sn(0,0,e,t),this.scissorTest=!1,this.viewport=new sn(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:ai,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new jn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Lu(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Vs extends tO{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Wx extends jn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Oi,this.minFilter=Oi,this.wrapR=zs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class gV extends Vs{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Wx(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Pb extends jn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Oi,this.minFilter=Oi,this.wrapR=zs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class vV extends Vs{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Pb(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class mr{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],u=i[r+1],c=i[r+2],f=i[r+3];const h=s[o+0],m=s[o+1],v=s[o+2],g=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=f;return}if(a===1){e[t+0]=h,e[t+1]=m,e[t+2]=v,e[t+3]=g;return}if(f!==g||l!==h||u!==m||c!==v){let x=1-a;const y=l*h+u*m+c*v+f*g,_=y>=0?1:-1,w=1-y*y;if(w>Number.EPSILON){const C=Math.sqrt(w),M=Math.atan2(C,y*_);x=Math.sin(x*M)/C,a=Math.sin(a*M)/C}const E=a*_;if(l=l*x+h*E,u=u*x+m*E,c=c*x+v*E,f=f*x+g*E,x===1-a){const C=1/Math.sqrt(l*l+u*u+c*c+f*f);l*=C,u*=C,c*=C,f*=C}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],u=i[r+2],c=i[r+3],f=s[o],h=s[o+1],m=s[o+2],v=s[o+3];return e[t]=a*v+c*f+l*m-u*h,e[t+1]=l*v+c*h+u*f-a*m,e[t+2]=u*v+c*m+a*h-l*f,e[t+3]=c*v-a*f-l*h-u*m,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(i/2),c=a(r/2),f=a(s/2),h=l(i/2),m=l(r/2),v=l(s/2);switch(o){case"XYZ":this._x=h*c*f+u*m*v,this._y=u*m*f-h*c*v,this._z=u*c*v+h*m*f,this._w=u*c*f-h*m*v;break;case"YXZ":this._x=h*c*f+u*m*v,this._y=u*m*f-h*c*v,this._z=u*c*v-h*m*f,this._w=u*c*f+h*m*v;break;case"ZXY":this._x=h*c*f-u*m*v,this._y=u*m*f+h*c*v,this._z=u*c*v+h*m*f,this._w=u*c*f-h*m*v;break;case"ZYX":this._x=h*c*f-u*m*v,this._y=u*m*f+h*c*v,this._z=u*c*v-h*m*f,this._w=u*c*f+h*m*v;break;case"YZX":this._x=h*c*f+u*m*v,this._y=u*m*f+h*c*v,this._z=u*c*v-h*m*f,this._w=u*c*f-h*m*v;break;case"XZY":this._x=h*c*f-u*m*v,this._y=u*m*f-h*c*v,this._z=u*c*v+h*m*f,this._w=u*c*f+h*m*v;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],c=t[6],f=t[10],h=i+a+f;if(h>0){const m=.5/Math.sqrt(h+1);this._w=.25/m,this._x=(c-l)*m,this._y=(s-u)*m,this._z=(o-r)*m}else if(i>a&&i>f){const m=2*Math.sqrt(1+i-a-f);this._w=(c-l)/m,this._x=.25*m,this._y=(r+o)/m,this._z=(s+u)/m}else if(a>f){const m=2*Math.sqrt(1+a-i-f);this._w=(s-u)/m,this._x=(r+o)/m,this._y=.25*m,this._z=(l+c)/m}else{const m=2*Math.sqrt(1+f-i-a);this._w=(o-r)/m,this._x=(s+u)/m,this._y=(l+c)/m,this._z=.25*m}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(si(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,c=t._w;return this._x=i*c+o*a+r*u-s*l,this._y=r*c+o*l+s*a-i*u,this._z=s*c+o*u+i*l-r*a,this._w=o*c-i*a-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const m=1-t;return this._w=m*o+t*this._w,this._x=m*i+t*this._x,this._y=m*r+t*this._y,this._z=m*s+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),f=Math.sin((1-t)*c)/u,h=Math.sin(t*c)/u;return this._w=o*f+this._w*h,this._x=i*f+this._x*h,this._y=r*f+this._y*h,this._z=s*f+this._z*h,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class j{constructor(e=0,t=0,i=0){j.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(r2.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(r2.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*r-a*i),c=2*(a*t-s*r),f=2*(s*i-o*t);return this.x=t+l*u+o*f-a*c,this.y=i+l*c+a*u-s*f,this.z=r+l*f+s*c-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return hw.copy(this).projectOnVector(e),this.sub(hw)}reflect(e){return this.sub(hw.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(si(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const hw=new j,r2=new mr;class Bi{constructor(e=new j(1/0,1/0,1/0),t=new j(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Ks.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Ks.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Ks.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,Ks):Ks.fromBufferAttribute(s,o),Ks.applyMatrix4(e.matrixWorld),this.expandByPoint(Ks);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),rv.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),rv.copy(i.boundingBox)),rv.applyMatrix4(e.matrixWorld),this.union(rv)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ks),Ks.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Sd),sv.subVectors(this.max,Sd),$c.subVectors(e.a,Sd),Yc.subVectors(e.b,Sd),Zc.subVectors(e.c,Sd),Qa.subVectors(Yc,$c),el.subVectors(Zc,Yc),su.subVectors($c,Zc);let t=[0,-Qa.z,Qa.y,0,-el.z,el.y,0,-su.z,su.y,Qa.z,0,-Qa.x,el.z,0,-el.x,su.z,0,-su.x,-Qa.y,Qa.x,0,-el.y,el.x,0,-su.y,su.x,0];return!dw(t,$c,Yc,Zc,sv)||(t=[1,0,0,0,1,0,0,0,1],!dw(t,$c,Yc,Zc,sv))?!1:(ov.crossVectors(Qa,el),t=[ov.x,ov.y,ov.z],dw(t,$c,Yc,Zc,sv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ks).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ks).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(oa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),oa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),oa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),oa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),oa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),oa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),oa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),oa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(oa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const oa=[new j,new j,new j,new j,new j,new j,new j,new j],Ks=new j,rv=new Bi,$c=new j,Yc=new j,Zc=new j,Qa=new j,el=new j,su=new j,Sd=new j,sv=new j,ov=new j,ou=new j;function dw(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){ou.fromArray(n,s);const a=r.x*Math.abs(ou.x)+r.y*Math.abs(ou.y)+r.z*Math.abs(ou.z),l=e.dot(ou),u=t.dot(ou),c=i.dot(ou);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const yV=new Bi,Md=new j,pw=new j;class Ui{constructor(e=new j,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):yV.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Md.subVectors(e,this.center);const t=Md.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Md,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(pw.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Md.copy(e.center).add(pw)),this.expandByPoint(Md.copy(e.center).sub(pw))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const aa=new j,mw=new j,av=new j,tl=new j,gw=new j,lv=new j,vw=new j;class vc{constructor(e=new j,t=new j(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,aa)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=aa.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(aa.copy(this.origin).addScaledVector(this.direction,t),aa.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){mw.copy(e).add(t).multiplyScalar(.5),av.copy(t).sub(e).normalize(),tl.copy(this.origin).sub(mw);const s=e.distanceTo(t)*.5,o=-this.direction.dot(av),a=tl.dot(this.direction),l=-tl.dot(av),u=tl.lengthSq(),c=Math.abs(1-o*o);let f,h,m,v;if(c>0)if(f=o*l-a,h=o*a-l,v=s*c,f>=0)if(h>=-v)if(h<=v){const g=1/c;f*=g,h*=g,m=f*(f+o*h+2*a)+h*(o*f+h+2*l)+u}else h=s,f=Math.max(0,-(o*h+a)),m=-f*f+h*(h+2*l)+u;else h=-s,f=Math.max(0,-(o*h+a)),m=-f*f+h*(h+2*l)+u;else h<=-v?(f=Math.max(0,-(-o*s+a)),h=f>0?-s:Math.min(Math.max(-s,-l),s),m=-f*f+h*(h+2*l)+u):h<=v?(f=0,h=Math.min(Math.max(-s,-l),s),m=h*(h+2*l)+u):(f=Math.max(0,-(o*s+a)),h=f>0?s:Math.min(Math.max(-s,-l),s),m=-f*f+h*(h+2*l)+u);else h=o>0?-s:s,f=Math.max(0,-(o*h+a)),m=-f*f+h*(h+2*l)+u;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(mw).addScaledVector(av,h),m}intersectSphere(e,t){aa.subVectors(e.center,this.origin);const i=aa.dot(this.direction),r=aa.dot(aa)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const u=1/this.direction.x,c=1/this.direction.y,f=1/this.direction.z,h=this.origin;return u>=0?(i=(e.min.x-h.x)*u,r=(e.max.x-h.x)*u):(i=(e.max.x-h.x)*u,r=(e.min.x-h.x)*u),c>=0?(s=(e.min.y-h.y)*c,o=(e.max.y-h.y)*c):(s=(e.max.y-h.y)*c,o=(e.min.y-h.y)*c),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-h.z)*f,l=(e.max.z-h.z)*f):(a=(e.max.z-h.z)*f,l=(e.min.z-h.z)*f),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,aa)!==null}intersectTriangle(e,t,i,r,s){gw.subVectors(t,e),lv.subVectors(i,e),vw.crossVectors(gw,lv);let o=this.direction.dot(vw),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;tl.subVectors(this.origin,e);const l=a*this.direction.dot(lv.crossVectors(tl,lv));if(l<0)return null;const u=a*this.direction.dot(gw.cross(tl));if(u<0||l+u>o)return null;const c=-a*tl.dot(vw);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class zt{constructor(e,t,i,r,s,o,a,l,u,c,f,h,m,v,g,x){zt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,u,c,f,h,m,v,g,x)}set(e,t,i,r,s,o,a,l,u,c,f,h,m,v,g,x){const y=this.elements;return y[0]=e,y[4]=t,y[8]=i,y[12]=r,y[1]=s,y[5]=o,y[9]=a,y[13]=l,y[2]=u,y[6]=c,y[10]=f,y[14]=h,y[3]=m,y[7]=v,y[11]=g,y[15]=x,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new zt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Kc.setFromMatrixColumn(e,0).length(),s=1/Kc.setFromMatrixColumn(e,1).length(),o=1/Kc.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),u=Math.sin(r),c=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const h=o*c,m=o*f,v=a*c,g=a*f;t[0]=l*c,t[4]=-l*f,t[8]=u,t[1]=m+v*u,t[5]=h-g*u,t[9]=-a*l,t[2]=g-h*u,t[6]=v+m*u,t[10]=o*l}else if(e.order==="YXZ"){const h=l*c,m=l*f,v=u*c,g=u*f;t[0]=h+g*a,t[4]=v*a-m,t[8]=o*u,t[1]=o*f,t[5]=o*c,t[9]=-a,t[2]=m*a-v,t[6]=g+h*a,t[10]=o*l}else if(e.order==="ZXY"){const h=l*c,m=l*f,v=u*c,g=u*f;t[0]=h-g*a,t[4]=-o*f,t[8]=v+m*a,t[1]=m+v*a,t[5]=o*c,t[9]=g-h*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const h=o*c,m=o*f,v=a*c,g=a*f;t[0]=l*c,t[4]=v*u-m,t[8]=h*u+g,t[1]=l*f,t[5]=g*u+h,t[9]=m*u-v,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const h=o*l,m=o*u,v=a*l,g=a*u;t[0]=l*c,t[4]=g-h*f,t[8]=v*f+m,t[1]=f,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=m*f+v,t[10]=h-g*f}else if(e.order==="XZY"){const h=o*l,m=o*u,v=a*l,g=a*u;t[0]=l*c,t[4]=-f,t[8]=u*c,t[1]=h*f+g,t[5]=o*c,t[9]=m*f-v,t[2]=v*f-m,t[6]=a*c,t[10]=g*f+h}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(xV,e,_V)}lookAt(e,t,i){const r=this.elements;return is.subVectors(e,t),is.lengthSq()===0&&(is.z=1),is.normalize(),nl.crossVectors(i,is),nl.lengthSq()===0&&(Math.abs(i.z)===1?is.x+=1e-4:is.z+=1e-4,is.normalize(),nl.crossVectors(i,is)),nl.normalize(),uv.crossVectors(is,nl),r[0]=nl.x,r[4]=uv.x,r[8]=is.x,r[1]=nl.y,r[5]=uv.y,r[9]=is.y,r[2]=nl.z,r[6]=uv.z,r[10]=is.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],u=i[12],c=i[1],f=i[5],h=i[9],m=i[13],v=i[2],g=i[6],x=i[10],y=i[14],_=i[3],w=i[7],E=i[11],C=i[15],M=r[0],T=r[4],R=r[8],A=r[12],D=r[1],I=r[5],L=r[9],H=r[13],k=r[2],$=r[6],G=r[10],J=r[14],N=r[3],W=r[7],X=r[11],ee=r[15];return s[0]=o*M+a*D+l*k+u*N,s[4]=o*T+a*I+l*$+u*W,s[8]=o*R+a*L+l*G+u*X,s[12]=o*A+a*H+l*J+u*ee,s[1]=c*M+f*D+h*k+m*N,s[5]=c*T+f*I+h*$+m*W,s[9]=c*R+f*L+h*G+m*X,s[13]=c*A+f*H+h*J+m*ee,s[2]=v*M+g*D+x*k+y*N,s[6]=v*T+g*I+x*$+y*W,s[10]=v*R+g*L+x*G+y*X,s[14]=v*A+g*H+x*J+y*ee,s[3]=_*M+w*D+E*k+C*N,s[7]=_*T+w*I+E*$+C*W,s[11]=_*R+w*L+E*G+C*X,s[15]=_*A+w*H+E*J+C*ee,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],c=e[2],f=e[6],h=e[10],m=e[14],v=e[3],g=e[7],x=e[11],y=e[15];return v*(+s*l*f-r*u*f-s*a*h+i*u*h+r*a*m-i*l*m)+g*(+t*l*m-t*u*h+s*o*h-r*o*m+r*u*c-s*l*c)+x*(+t*u*f-t*a*m-s*o*f+i*o*m+s*a*c-i*u*c)+y*(-r*a*c-t*l*f+t*a*h+r*o*f-i*o*h+i*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],f=e[9],h=e[10],m=e[11],v=e[12],g=e[13],x=e[14],y=e[15],_=f*x*u-g*h*u+g*l*m-a*x*m-f*l*y+a*h*y,w=v*h*u-c*x*u-v*l*m+o*x*m+c*l*y-o*h*y,E=c*g*u-v*f*u+v*a*m-o*g*m-c*a*y+o*f*y,C=v*f*l-c*g*l-v*a*h+o*g*h+c*a*x-o*f*x,M=t*_+i*w+r*E+s*C;if(M===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const T=1/M;return e[0]=_*T,e[1]=(g*h*s-f*x*s-g*r*m+i*x*m+f*r*y-i*h*y)*T,e[2]=(a*x*s-g*l*s+g*r*u-i*x*u-a*r*y+i*l*y)*T,e[3]=(f*l*s-a*h*s-f*r*u+i*h*u+a*r*m-i*l*m)*T,e[4]=w*T,e[5]=(c*x*s-v*h*s+v*r*m-t*x*m-c*r*y+t*h*y)*T,e[6]=(v*l*s-o*x*s-v*r*u+t*x*u+o*r*y-t*l*y)*T,e[7]=(o*h*s-c*l*s+c*r*u-t*h*u-o*r*m+t*l*m)*T,e[8]=E*T,e[9]=(v*f*s-c*g*s-v*i*m+t*g*m+c*i*y-t*f*y)*T,e[10]=(o*g*s-v*a*s+v*i*u-t*g*u-o*i*y+t*a*y)*T,e[11]=(c*a*s-o*f*s-c*i*u+t*f*u+o*i*m-t*a*m)*T,e[12]=C*T,e[13]=(c*g*r-v*f*r+v*i*h-t*g*h-c*i*x+t*f*x)*T,e[14]=(v*a*r-o*g*r-v*i*l+t*g*l+o*i*x-t*a*x)*T,e[15]=(o*f*r-c*a*r+c*i*l-t*f*l-o*i*h+t*a*h)*T,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,u=s*o,c=s*a;return this.set(u*o+i,u*a-r*l,u*l+r*a,0,u*a+r*l,c*a+i,c*l-r*o,0,u*l-r*a,c*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,c=o+o,f=a+a,h=s*u,m=s*c,v=s*f,g=o*c,x=o*f,y=a*f,_=l*u,w=l*c,E=l*f,C=i.x,M=i.y,T=i.z;return r[0]=(1-(g+y))*C,r[1]=(m+E)*C,r[2]=(v-w)*C,r[3]=0,r[4]=(m-E)*M,r[5]=(1-(h+y))*M,r[6]=(x+_)*M,r[7]=0,r[8]=(v+w)*T,r[9]=(x-_)*T,r[10]=(1-(h+g))*T,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Kc.set(r[0],r[1],r[2]).length();const o=Kc.set(r[4],r[5],r[6]).length(),a=Kc.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Js.copy(this);const u=1/s,c=1/o,f=1/a;return Js.elements[0]*=u,Js.elements[1]*=u,Js.elements[2]*=u,Js.elements[4]*=c,Js.elements[5]*=c,Js.elements[6]*=c,Js.elements[8]*=f,Js.elements[9]*=f,Js.elements[10]*=f,t.setFromRotationMatrix(Js),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Ho){const l=this.elements,u=2*s/(t-e),c=2*s/(i-r),f=(t+e)/(t-e),h=(i+r)/(i-r);let m,v;if(a===Ho)m=-(o+s)/(o-s),v=-2*o*s/(o-s);else if(a===jp)m=-o/(o-s),v=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=u,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=c,l[9]=h,l[13]=0,l[2]=0,l[6]=0,l[10]=m,l[14]=v,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Ho){const l=this.elements,u=1/(t-e),c=1/(i-r),f=1/(o-s),h=(t+e)*u,m=(i+r)*c;let v,g;if(a===Ho)v=(o+s)*f,g=-2*f;else if(a===jp)v=s*f,g=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*u,l[4]=0,l[8]=0,l[12]=-h,l[1]=0,l[5]=2*c,l[9]=0,l[13]=-m,l[2]=0,l[6]=0,l[10]=g,l[14]=-v,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Kc=new j,Js=new zt,xV=new j(0,0,0),_V=new j(1,1,1),nl=new j,uv=new j,is=new j,s2=new zt,o2=new mr;class gs{constructor(e=0,t=0,i=0,r=gs.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],u=r[5],c=r[9],f=r[2],h=r[6],m=r[10];switch(t){case"XYZ":this._y=Math.asin(si(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,m),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(h,u),this._z=0);break;case"YXZ":this._x=Math.asin(-si(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,m),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(si(h,-1,1)),Math.abs(h)<.9999999?(this._y=Math.atan2(-f,m),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-si(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(h,m),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(si(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,m));break;case"XZY":this._z=Math.asin(-si(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(h,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,m),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return s2.makeRotationFromQuaternion(e),this.setFromRotationMatrix(s2,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return o2.setFromEuler(this),this.setFromQuaternion(o2,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}gs.DEFAULT_ORDER="XYZ";class $u{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let wV=0;const a2=new j,Jc=new mr,la=new zt,cv=new j,Ed=new j,SV=new j,MV=new mr,l2=new j(1,0,0),u2=new j(0,1,0),c2=new j(0,0,1),f2={type:"added"},EV={type:"removed"},Qc={type:"childadded",child:null},yw={type:"childremoved",child:null};class fn extends Ko{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:wV++}),this.uuid=ps(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=fn.DEFAULT_UP.clone();const e=new j,t=new gs,i=new mr,r=new j(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new zt},normalMatrix:{value:new $t}}),this.matrix=new zt,this.matrixWorld=new zt,this.matrixAutoUpdate=fn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=fn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new $u,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Jc.setFromAxisAngle(e,t),this.quaternion.multiply(Jc),this}rotateOnWorldAxis(e,t){return Jc.setFromAxisAngle(e,t),this.quaternion.premultiply(Jc),this}rotateX(e){return this.rotateOnAxis(l2,e)}rotateY(e){return this.rotateOnAxis(u2,e)}rotateZ(e){return this.rotateOnAxis(c2,e)}translateOnAxis(e,t){return a2.copy(e).applyQuaternion(this.quaternion),this.position.add(a2.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(l2,e)}translateY(e){return this.translateOnAxis(u2,e)}translateZ(e){return this.translateOnAxis(c2,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(la.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?cv.copy(e):cv.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Ed.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?la.lookAt(Ed,cv,this.up):la.lookAt(cv,Ed,this.up),this.quaternion.setFromRotationMatrix(la),r&&(la.extractRotation(r.matrixWorld),Jc.setFromRotationMatrix(la),this.quaternion.premultiply(Jc.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(f2),Qc.child=e,this.dispatchEvent(Qc),Qc.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(EV),yw.child=e,this.dispatchEvent(yw),yw.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),la.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),la.multiply(e.parent.matrixWorld)),e.applyMatrix4(la),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(f2),Qc.child=e,this.dispatchEvent(Qc),Qc.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ed,e,SV),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ed,MV,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const f=l[u];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),f=o(e.shapes),h=o(e.skeletons),m=o(e.animations),v=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),u.length>0&&(i.textures=u),c.length>0&&(i.images=c),f.length>0&&(i.shapes=f),h.length>0&&(i.skeletons=h),m.length>0&&(i.animations=m),v.length>0&&(i.nodes=v)}return i.object=r,i;function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}fn.DEFAULT_UP=new j(0,1,0);fn.DEFAULT_MATRIX_AUTO_UPDATE=!0;fn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Qs=new j,ua=new j,xw=new j,ca=new j,ef=new j,tf=new j,h2=new j,_w=new j,ww=new j,Sw=new j;class us{constructor(e=new j,t=new j,i=new j){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Qs.subVectors(e,t),r.cross(Qs);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Qs.subVectors(r,t),ua.subVectors(i,t),xw.subVectors(e,t);const o=Qs.dot(Qs),a=Qs.dot(ua),l=Qs.dot(xw),u=ua.dot(ua),c=ua.dot(xw),f=o*u-a*a;if(f===0)return s.set(0,0,0),null;const h=1/f,m=(u*l-a*c)*h,v=(o*c-a*l)*h;return s.set(1-m-v,v,m)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,ca)===null?!1:ca.x>=0&&ca.y>=0&&ca.x+ca.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,ca)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,ca.x),l.addScaledVector(o,ca.y),l.addScaledVector(a,ca.z),l)}static isFrontFacing(e,t,i,r){return Qs.subVectors(i,t),ua.subVectors(e,t),Qs.cross(ua).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Qs.subVectors(this.c,this.b),ua.subVectors(this.a,this.b),Qs.cross(ua).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return us.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return us.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return us.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return us.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return us.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;ef.subVectors(r,i),tf.subVectors(s,i),_w.subVectors(e,i);const l=ef.dot(_w),u=tf.dot(_w);if(l<=0&&u<=0)return t.copy(i);ww.subVectors(e,r);const c=ef.dot(ww),f=tf.dot(ww);if(c>=0&&f<=c)return t.copy(r);const h=l*f-c*u;if(h<=0&&l>=0&&c<=0)return o=l/(l-c),t.copy(i).addScaledVector(ef,o);Sw.subVectors(e,s);const m=ef.dot(Sw),v=tf.dot(Sw);if(v>=0&&m<=v)return t.copy(s);const g=m*u-l*v;if(g<=0&&u>=0&&v<=0)return a=u/(u-v),t.copy(i).addScaledVector(tf,a);const x=c*v-m*f;if(x<=0&&f-c>=0&&m-v>=0)return h2.subVectors(s,r),a=(f-c)/(f-c+(m-v)),t.copy(r).addScaledVector(h2,a);const y=1/(x+g+h);return o=g*y,a=h*y,t.copy(i).addScaledVector(ef,o).addScaledVector(tf,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const nO={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},il={h:0,s:0,l:0},fv={h:0,s:0,l:0};function Mw(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class mt{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=Is){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,vn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=vn.workingColorSpace){return this.r=e,this.g=t,this.b=i,vn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=vn.workingColorSpace){if(e=Db(e,1),t=si(t,0,1),i=si(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=Mw(o,s,e+1/3),this.g=Mw(o,s,e),this.b=Mw(o,s,e-1/3)}return vn.toWorkingColorSpace(this,r),this}setStyle(e,t=Is){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=Is){const i=nO[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Qf(e.r),this.g=Qf(e.g),this.b=Qf(e.b),this}copyLinearToSRGB(e){return this.r=cw(e.r),this.g=cw(e.g),this.b=cw(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=Is){return vn.fromWorkingColorSpace(lr.copy(this),e),Math.round(si(lr.r*255,0,255))*65536+Math.round(si(lr.g*255,0,255))*256+Math.round(si(lr.b*255,0,255))}getHexString(e=Is){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=vn.workingColorSpace){vn.fromWorkingColorSpace(lr.copy(this),t);const i=lr.r,r=lr.g,s=lr.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,u;const c=(a+o)/2;if(a===o)l=0,u=0;else{const f=o-a;switch(u=c<=.5?f/(o+a):f/(2-o-a),o){case i:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-i)/f+2;break;case s:l=(i-r)/f+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=vn.workingColorSpace){return vn.fromWorkingColorSpace(lr.copy(this),t),e.r=lr.r,e.g=lr.g,e.b=lr.b,e}getStyle(e=Is){vn.fromWorkingColorSpace(lr.copy(this),e);const t=lr.r,i=lr.g,r=lr.b;return e!==Is?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(il),this.setHSL(il.h+e,il.s+t,il.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(il),e.getHSL(fv);const i=hp(il.h,fv.h,t),r=hp(il.s,fv.s,t),s=hp(il.l,fv.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const lr=new mt;mt.NAMES=nO;let bV=0;class Qi extends Ko{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:bV++}),this.uuid=ps(),this.name="",this.type="Material",this.blending=ju,this.side=Na,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=fy,this.blendDst=hy,this.blendEquation=dl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new mt(0,0,0),this.blendAlpha=0,this.depthFunc=Lp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=PM,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Mu,this.stencilZFail=Mu,this.stencilZPass=Mu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==ju&&(i.blending=this.blending),this.side!==Na&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==fy&&(i.blendSrc=this.blendSrc),this.blendDst!==hy&&(i.blendDst=this.blendDst),this.blendEquation!==dl&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Lp&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==PM&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Mu&&(i.stencilFail=this.stencilFail),this.stencilZFail!==Mu&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==Mu&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}onBeforeRender(){console.warn("Material: onBeforeRender() has been removed.")}}class Ha extends Qi{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new mt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gs,this.combine=mm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const xa=AV();function AV(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(i[l]=1024>>-u-14,i[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(i[l]=u+15<<10,i[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function Hr(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=si(n,-65504,65504),xa.floatView[0]=n;const e=xa.uint32View[0],t=e>>23&511;return xa.baseTable[t]+((e&8388607)>>xa.shiftTable[t])}function Xd(n){const e=n>>10;return xa.uint32View[0]=xa.mantissaTable[xa.offsetTable[e]+(n&1023)]+xa.exponentTable[e],xa.floatView[0]}const CV={toHalfFloat:Hr,fromHalfFloat:Xd},vi=new j,hv=new Fe;class Mn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=Gp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.gpuType=Tr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Tb("THREE.BufferAttribute: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)hv.fromBufferAttribute(this,t),hv.applyMatrix3(e),this.setXY(t,hv.x,hv.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)vi.fromBufferAttribute(this,t),vi.applyMatrix3(e),this.setXYZ(t,vi.x,vi.y,vi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)vi.fromBufferAttribute(this,t),vi.applyMatrix4(e),this.setXYZ(t,vi.x,vi.y,vi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)vi.fromBufferAttribute(this,t),vi.applyNormalMatrix(e),this.setXYZ(t,vi.x,vi.y,vi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)vi.fromBufferAttribute(this,t),vi.transformDirection(e),this.setXYZ(t,vi.x,vi.y,vi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Dr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Yt(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Dr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Dr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Dr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Dr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Yt(t,this.array),i=Yt(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Yt(t,this.array),i=Yt(i,this.array),r=Yt(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Yt(t,this.array),i=Yt(i,this.array),r=Yt(r,this.array),s=Yt(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==Gp&&(e.usage=this.usage),e}}class DV extends Mn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class TV extends Mn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class PV extends Mn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class RV extends Mn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class Rb extends Mn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class IV extends Mn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class Ib extends Mn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class FV extends Mn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Xd(this.array[e*this.itemSize]);return this.normalized&&(t=Dr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize]=Hr(t),this}getY(e){let t=Xd(this.array[e*this.itemSize+1]);return this.normalized&&(t=Dr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize+1]=Hr(t),this}getZ(e){let t=Xd(this.array[e*this.itemSize+2]);return this.normalized&&(t=Dr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize+2]=Hr(t),this}getW(e){let t=Xd(this.array[e*this.itemSize+3]);return this.normalized&&(t=Dr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Yt(t,this.array)),this.array[e*this.itemSize+3]=Hr(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Yt(t,this.array),i=Yt(i,this.array)),this.array[e+0]=Hr(t),this.array[e+1]=Hr(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Yt(t,this.array),i=Yt(i,this.array),r=Yt(r,this.array)),this.array[e+0]=Hr(t),this.array[e+1]=Hr(i),this.array[e+2]=Hr(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Yt(t,this.array),i=Yt(i,this.array),r=Yt(r,this.array),s=Yt(s,this.array)),this.array[e+0]=Hr(t),this.array[e+1]=Hr(i),this.array[e+2]=Hr(r),this.array[e+3]=Hr(s),this}}class _t extends Mn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let NV=0;const Ds=new zt,Ew=new fn,nf=new j,rs=new Bi,bd=new Bi,Fi=new j;class Kt extends Ko{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:NV++}),this.uuid=ps(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(JL(e)?Ib:Rb)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new $t().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ds.makeRotationFromQuaternion(e),this.applyMatrix4(Ds),this}rotateX(e){return Ds.makeRotationX(e),this.applyMatrix4(Ds),this}rotateY(e){return Ds.makeRotationY(e),this.applyMatrix4(Ds),this}rotateZ(e){return Ds.makeRotationZ(e),this.applyMatrix4(Ds),this}translate(e,t,i){return Ds.makeTranslation(e,t,i),this.applyMatrix4(Ds),this}scale(e,t,i){return Ds.makeScale(e,t,i),this.applyMatrix4(Ds),this}lookAt(e){return Ew.lookAt(e),Ew.updateMatrix(),this.applyMatrix4(Ew.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(nf).negate(),this.translate(nf.x,nf.y,nf.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new _t(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Bi);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new j(-1/0,-1/0,-1/0),new j(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];rs.setFromBufferAttribute(s),this.morphTargetsRelative?(Fi.addVectors(this.boundingBox.min,rs.min),this.boundingBox.expandByPoint(Fi),Fi.addVectors(this.boundingBox.max,rs.max),this.boundingBox.expandByPoint(Fi)):(this.boundingBox.expandByPoint(rs.min),this.boundingBox.expandByPoint(rs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ui);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new j,1/0);return}if(e){const i=this.boundingSphere.center;if(rs.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];bd.setFromBufferAttribute(a),this.morphTargetsRelative?(Fi.addVectors(rs.min,bd.min),rs.expandByPoint(Fi),Fi.addVectors(rs.max,bd.max),rs.expandByPoint(Fi)):(rs.expandByPoint(bd.min),rs.expandByPoint(bd.max))}rs.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Fi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Fi));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)Fi.fromBufferAttribute(a,u),l&&(nf.fromBufferAttribute(e,u),Fi.add(nf)),r=Math.max(r,i.distanceToSquared(Fi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new Mn(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let R=0;R<i.count;R++)a[R]=new j,l[R]=new j;const u=new j,c=new j,f=new j,h=new Fe,m=new Fe,v=new Fe,g=new j,x=new j;function y(R,A,D){u.fromBufferAttribute(i,R),c.fromBufferAttribute(i,A),f.fromBufferAttribute(i,D),h.fromBufferAttribute(s,R),m.fromBufferAttribute(s,A),v.fromBufferAttribute(s,D),c.sub(u),f.sub(u),m.sub(h),v.sub(h);const I=1/(m.x*v.y-v.x*m.y);isFinite(I)&&(g.copy(c).multiplyScalar(v.y).addScaledVector(f,-m.y).multiplyScalar(I),x.copy(f).multiplyScalar(m.x).addScaledVector(c,-v.x).multiplyScalar(I),a[R].add(g),a[A].add(g),a[D].add(g),l[R].add(x),l[A].add(x),l[D].add(x))}let _=this.groups;_.length===0&&(_=[{start:0,count:e.count}]);for(let R=0,A=_.length;R<A;++R){const D=_[R],I=D.start,L=D.count;for(let H=I,k=I+L;H<k;H+=3)y(e.getX(H+0),e.getX(H+1),e.getX(H+2))}const w=new j,E=new j,C=new j,M=new j;function T(R){C.fromBufferAttribute(r,R),M.copy(C);const A=a[R];w.copy(A),w.sub(C.multiplyScalar(C.dot(A))).normalize(),E.crossVectors(M,A);const I=E.dot(l[R])<0?-1:1;o.setXYZW(R,w.x,w.y,w.z,I)}for(let R=0,A=_.length;R<A;++R){const D=_[R],I=D.start,L=D.count;for(let H=I,k=I+L;H<k;H+=3)T(e.getX(H+0)),T(e.getX(H+1)),T(e.getX(H+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new Mn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let h=0,m=i.count;h<m;h++)i.setXYZ(h,0,0,0);const r=new j,s=new j,o=new j,a=new j,l=new j,u=new j,c=new j,f=new j;if(e)for(let h=0,m=e.count;h<m;h+=3){const v=e.getX(h+0),g=e.getX(h+1),x=e.getX(h+2);r.fromBufferAttribute(t,v),s.fromBufferAttribute(t,g),o.fromBufferAttribute(t,x),c.subVectors(o,s),f.subVectors(r,s),c.cross(f),a.fromBufferAttribute(i,v),l.fromBufferAttribute(i,g),u.fromBufferAttribute(i,x),a.add(c),l.add(c),u.add(c),i.setXYZ(v,a.x,a.y,a.z),i.setXYZ(g,l.x,l.y,l.z),i.setXYZ(x,u.x,u.y,u.z)}else for(let h=0,m=t.count;h<m;h+=3)r.fromBufferAttribute(t,h+0),s.fromBufferAttribute(t,h+1),o.fromBufferAttribute(t,h+2),c.subVectors(o,s),f.subVectors(r,s),c.cross(f),i.setXYZ(h+0,c.x,c.y,c.z),i.setXYZ(h+1,c.x,c.y,c.z),i.setXYZ(h+2,c.x,c.y,c.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Fi.fromBufferAttribute(e,t),Fi.normalize(),e.setXYZ(t,Fi.x,Fi.y,Fi.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,f=a.normalized,h=new u.constructor(l.length*c);let m=0,v=0;for(let g=0,x=l.length;g<x;g++){a.isInterleavedBufferAttribute?m=l[g]*a.data.stride+a.offset:m=l[g]*c;for(let y=0;y<c;y++)h[v++]=u[m++]}return new Mn(h,c,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Kt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],u=e(l,i);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let c=0,f=u.length;c<f;c++){const h=u[c],m=e(h,i);l.push(m)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const u=i[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let f=0,h=u.length;f<h;f++){const m=u[f];c.push(m.toJSON(e.data))}c.length>0&&(r[l]=c,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const u in r){const c=r[u];this.setAttribute(u,c.clone(t))}const s=e.morphAttributes;for(const u in s){const c=[],f=s[u];for(let h=0,m=f.length;h<m;h++)c.push(f[h].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const f=o[u];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const d2=new zt,au=new vc,dv=new Ui,p2=new j,rf=new j,sf=new j,of=new j,bw=new j,pv=new j,mv=new Fe,gv=new Fe,vv=new Fe,m2=new j,g2=new j,v2=new j,yv=new j,xv=new j;class hi extends fn{constructor(e=new Kt,t=new Ha){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){pv.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=a[l],f=s[l];c!==0&&(bw.fromBufferAttribute(f,e),o?pv.addScaledVector(bw,c):pv.addScaledVector(bw.sub(t),c))}t.add(pv)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),dv.copy(i.boundingSphere),dv.applyMatrix4(s),au.copy(e.ray).recast(e.near),!(dv.containsPoint(au.origin)===!1&&(au.intersectSphere(dv,p2)===null||au.origin.distanceToSquared(p2)>(e.far-e.near)**2))&&(d2.copy(s).invert(),au.copy(e.ray).applyMatrix4(d2),!(i.boundingBox!==null&&au.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,au)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,c=s.attributes.uv1,f=s.attributes.normal,h=s.groups,m=s.drawRange;if(a!==null)if(Array.isArray(o))for(let v=0,g=h.length;v<g;v++){const x=h[v],y=o[x.materialIndex],_=Math.max(x.start,m.start),w=Math.min(a.count,Math.min(x.start+x.count,m.start+m.count));for(let E=_,C=w;E<C;E+=3){const M=a.getX(E),T=a.getX(E+1),R=a.getX(E+2);r=_v(this,y,e,i,u,c,f,M,T,R),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),g=Math.min(a.count,m.start+m.count);for(let x=v,y=g;x<y;x+=3){const _=a.getX(x),w=a.getX(x+1),E=a.getX(x+2);r=_v(this,o,e,i,u,c,f,_,w,E),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let v=0,g=h.length;v<g;v++){const x=h[v],y=o[x.materialIndex],_=Math.max(x.start,m.start),w=Math.min(l.count,Math.min(x.start+x.count,m.start+m.count));for(let E=_,C=w;E<C;E+=3){const M=E,T=E+1,R=E+2;r=_v(this,y,e,i,u,c,f,M,T,R),r&&(r.faceIndex=Math.floor(E/3),r.face.materialIndex=x.materialIndex,t.push(r))}}else{const v=Math.max(0,m.start),g=Math.min(l.count,m.start+m.count);for(let x=v,y=g;x<y;x+=3){const _=x,w=x+1,E=x+2;r=_v(this,o,e,i,u,c,f,_,w,E),r&&(r.faceIndex=Math.floor(x/3),t.push(r))}}}}function LV(n,e,t,i,r,s,o,a){let l;if(e.side===Rr?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Na,a),l===null)return null;xv.copy(a),xv.applyMatrix4(n.matrixWorld);const u=t.ray.origin.distanceTo(xv);return u<t.near||u>t.far?null:{distance:u,point:xv.clone(),object:n}}function _v(n,e,t,i,r,s,o,a,l,u){n.getVertexPosition(a,rf),n.getVertexPosition(l,sf),n.getVertexPosition(u,of);const c=LV(n,e,t,i,rf,sf,of,yv);if(c){r&&(mv.fromBufferAttribute(r,a),gv.fromBufferAttribute(r,l),vv.fromBufferAttribute(r,u),c.uv=us.getInterpolation(yv,rf,sf,of,mv,gv,vv,new Fe)),s&&(mv.fromBufferAttribute(s,a),gv.fromBufferAttribute(s,l),vv.fromBufferAttribute(s,u),c.uv1=us.getInterpolation(yv,rf,sf,of,mv,gv,vv,new Fe)),o&&(m2.fromBufferAttribute(o,a),g2.fromBufferAttribute(o,l),v2.fromBufferAttribute(o,u),c.normal=us.getInterpolation(yv,rf,sf,of,m2,g2,v2,new j),c.normal.dot(i.direction)>0&&c.normal.multiplyScalar(-1));const f={a,b:l,c:u,normal:new j,materialIndex:0};us.getNormal(rf,sf,of,f.normal),c.face=f}return c}class yc extends Kt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],c=[],f=[];let h=0,m=0;v("z","y","x",-1,-1,i,t,e,o,s,0),v("z","y","x",1,-1,i,t,-e,o,s,1),v("x","z","y",1,1,e,i,t,r,o,2),v("x","z","y",1,-1,e,i,-t,r,o,3),v("x","y","z",1,-1,e,t,i,r,s,4),v("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new _t(u,3)),this.setAttribute("normal",new _t(c,3)),this.setAttribute("uv",new _t(f,2));function v(g,x,y,_,w,E,C,M,T,R,A){const D=E/T,I=C/R,L=E/2,H=C/2,k=M/2,$=T+1,G=R+1;let J=0,N=0;const W=new j;for(let X=0;X<G;X++){const ee=X*I-H;for(let te=0;te<$;te++){const ce=te*D-L;W[g]=ce*_,W[x]=ee*w,W[y]=k,u.push(W.x,W.y,W.z),W[g]=0,W[x]=0,W[y]=M>0?1:-1,c.push(W.x,W.y,W.z),f.push(te/T),f.push(1-X/R),J+=1}}for(let X=0;X<R;X++)for(let ee=0;ee<T;ee++){const te=h+ee+$*X,ce=h+ee+$*(X+1),Q=h+(ee+1)+$*(X+1),le=h+(ee+1)+$*X;l.push(te,ce,le),l.push(ce,Q,le),N+=6}a.addGroup(m,N,A),m+=N,h+=J}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new yc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function vh(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Er(n){const e={};for(let t=0;t<n.length;t++){const i=vh(n[t]);for(const r in i)e[r]=i[r]}return e}function OV(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function iO(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:vn.workingColorSpace}const ky={clone:vh,merge:Er};var zV=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,BV=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Ws extends Qi{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=zV,this.fragmentShader=BV,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=vh(e.uniforms),this.uniformsGroups=OV(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class ym extends fn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new zt,this.projectionMatrix=new zt,this.projectionMatrixInverse=new zt,this.coordinateSystem=Ho}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const rl=new j,y2=new Fe,x2=new Fe;let oi=class extends ym{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=gh*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Xu*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return gh*2*Math.atan(Math.tan(Xu*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){rl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(rl.x,rl.y).multiplyScalar(-e/rl.z),rl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(rl.x,rl.y).multiplyScalar(-e/rl.z)}getViewSize(e,t){return this.getViewBounds(e,y2,x2),t.subVectors(x2,y2)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Xu*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/u,r*=o.width/l,i*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}};const af=-90,lf=1;class rO extends fn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new oi(af,lf,e,t);r.layers=this.layers,this.add(r);const s=new oi(af,lf,e,t);s.layers=this.layers,this.add(s);const o=new oi(af,lf,e,t);o.layers=this.layers,this.add(o);const a=new oi(af,lf,e,t);a.layers=this.layers,this.add(a);const l=new oi(af,lf,e,t);l.layers=this.layers,this.add(l);const u=new oi(af,lf,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===Ho)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===jp)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,c]=this.children,f=e.getRenderTarget(),h=e.getActiveCubeFace(),m=e.getActiveMipmapLevel(),v=e.xr.enabled;e.xr.enabled=!1;const g=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,u),i.texture.generateMipmaps=g,e.setRenderTarget(i,5,r),e.render(t,c),e.setRenderTarget(f,h,m),e.xr.enabled=v,i.texture.needsPMREMUpdate=!0}}class xm extends jn{constructor(e,t,i,r,s,o,a,l,u,c){e=e!==void 0?e:[],t=t!==void 0?t:La,super(e,t,i,r,s,o,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class sO extends Vs{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new xm(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:ai}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new yc(5,5,5),s=new Ws({name:"CubemapFromEquirect",uniforms:vh(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Rr,blending:Ca});s.uniforms.tEquirect.value=t;const o=new hi(r,s),a=t.minFilter;return t.minFilter===ko&&(t.minFilter=ai),new rO(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const Aw=new j,UV=new j,kV=new $t;let va=class{constructor(e=new j(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=Aw.subVectors(i,t).cross(UV.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(Aw),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||kV.getNormalMatrix(e),r=this.coplanarPoint(Aw).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}};const lu=new Ui,wv=new j;class _m{constructor(e=new va,t=new va,i=new va,r=new va,s=new va,o=new va){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Ho){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],u=r[4],c=r[5],f=r[6],h=r[7],m=r[8],v=r[9],g=r[10],x=r[11],y=r[12],_=r[13],w=r[14],E=r[15];if(i[0].setComponents(l-s,h-u,x-m,E-y).normalize(),i[1].setComponents(l+s,h+u,x+m,E+y).normalize(),i[2].setComponents(l+o,h+c,x+v,E+_).normalize(),i[3].setComponents(l-o,h-c,x-v,E-_).normalize(),i[4].setComponents(l-a,h-f,x-g,E-w).normalize(),t===Ho)i[5].setComponents(l+a,h+f,x+g,E+w).normalize();else if(t===jp)i[5].setComponents(a,f,g,w).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),lu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),lu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(lu)}intersectsSprite(e){return lu.center.set(0,0,0),lu.radius=.7071067811865476,lu.applyMatrix4(e.matrixWorld),this.intersectsSphere(lu)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(wv.x=r.normal.x>0?e.max.x:e.min.x,wv.y=r.normal.y>0?e.max.y:e.min.y,wv.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(wv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function oO(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function HV(n){const e=new WeakMap;function t(a,l){const u=a.array,c=a.usage,f=u.byteLength,h=n.createBuffer();n.bindBuffer(l,h),n.bufferData(l,u,c),a.onUploadCallback();let m;if(u instanceof Float32Array)m=n.FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?m=n.HALF_FLOAT:m=n.UNSIGNED_SHORT;else if(u instanceof Int16Array)m=n.SHORT;else if(u instanceof Uint32Array)m=n.UNSIGNED_INT;else if(u instanceof Int32Array)m=n.INT;else if(u instanceof Int8Array)m=n.BYTE;else if(u instanceof Uint8Array)m=n.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)m=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:h,type:m,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:f}}function i(a,l,u){const c=l.array,f=l._updateRange,h=l.updateRanges;if(n.bindBuffer(u,a),f.count===-1&&h.length===0&&n.bufferSubData(u,0,c),h.length!==0){for(let m=0,v=h.length;m<v;m++){const g=h[m];n.bufferSubData(u,g.start*c.BYTES_PER_ELEMENT,c,g.start,g.count)}l.clearUpdateRanges()}f.count!==-1&&(n.bufferSubData(u,f.offset*c.BYTES_PER_ELEMENT,c,f.offset,f.count),f.count=-1),l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isGLBufferAttribute){const c=e.get(a);(!c||c.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}a.isInterleavedBufferAttribute&&(a=a.data);const u=e.get(a);if(u===void 0)e.set(a,t(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(u.buffer,a,l),u.version=a.version}}return{get:r,remove:s,update:o}}class Nh extends Kt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),u=a+1,c=l+1,f=e/a,h=t/l,m=[],v=[],g=[],x=[];for(let y=0;y<c;y++){const _=y*h-o;for(let w=0;w<u;w++){const E=w*f-s;v.push(E,-_,0),g.push(0,0,1),x.push(w/a),x.push(1-y/l)}}for(let y=0;y<l;y++)for(let _=0;_<a;_++){const w=_+u*y,E=_+u*(y+1),C=_+1+u*(y+1),M=_+1+u*y;m.push(w,E,M),m.push(E,C,M)}this.setIndex(m),this.setAttribute("position",new _t(v,3)),this.setAttribute("normal",new _t(g,3)),this.setAttribute("uv",new _t(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nh(e.width,e.height,e.widthSegments,e.heightSegments)}}var VV=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,WV=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,GV=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,jV=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,qV=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,XV=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,$V=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,YV=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,ZV=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,KV=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,JV=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,QV=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,e7=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,t7=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,n7=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,i7=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,r7=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,s7=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,o7=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,a7=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,l7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,u7=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,c7=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,f7=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,h7=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,d7=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,p7=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,m7=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,g7=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,v7=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,y7="gl_FragColor = linearToOutputTexel( gl_FragColor );",x7=`
const mat3 LINEAR_SRGB_TO_LINEAR_DISPLAY_P3 = mat3(
	vec3( 0.8224621, 0.177538, 0.0 ),
	vec3( 0.0331941, 0.9668058, 0.0 ),
	vec3( 0.0170827, 0.0723974, 0.9105199 )
);
const mat3 LINEAR_DISPLAY_P3_TO_LINEAR_SRGB = mat3(
	vec3( 1.2249401, - 0.2249404, 0.0 ),
	vec3( - 0.0420569, 1.0420571, 0.0 ),
	vec3( - 0.0196376, - 0.0786361, 1.0982735 )
);
vec4 LinearSRGBToLinearDisplayP3( in vec4 value ) {
	return vec4( value.rgb * LINEAR_SRGB_TO_LINEAR_DISPLAY_P3, value.a );
}
vec4 LinearDisplayP3ToLinearSRGB( in vec4 value ) {
	return vec4( value.rgb * LINEAR_DISPLAY_P3_TO_LINEAR_SRGB, value.a );
}
vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}
vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return sRGBTransferOETF( value );
}`,_7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,w7=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,S7=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,M7=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,E7=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,b7=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,A7=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,C7=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,D7=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,T7=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,P7=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,R7=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,I7=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,F7=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,N7=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,L7=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,O7=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,z7=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,B7=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,U7=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,k7=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,H7=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,V7=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,W7=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,G7=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,j7=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,q7=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,X7=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,$7=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = vec4( mix( pow( sampledDiffuseColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), sampledDiffuseColor.rgb * 0.0773993808, vec3( lessThanEqual( sampledDiffuseColor.rgb, vec3( 0.04045 ) ) ) ), sampledDiffuseColor.w );
	
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Y7=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Z7=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,K7=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,J7=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Q7=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,e9=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,t9=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,n9=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,i9=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,r9=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,s9=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,o9=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,a9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,l9=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,u9=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,c9=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,f9=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,h9=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,d9=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,p9=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,m9=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,g9=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,v9=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,y9=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,x9=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,_9=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,w9=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,S9=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,M9=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,E9=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,b9=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,A9=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,C9=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,D9=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,T9=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,P9=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,R9=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,I9=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,F9=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,N9=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,L9=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,O9=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,z9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,B9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,U9=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,k9=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const H9=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,V9=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,W9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,G9=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,j9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,q9=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,X9=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,$9=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Y9=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Z9=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,K9=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,J9=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Q9=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,eW=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,tW=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,nW=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iW=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rW=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sW=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,oW=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,aW=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,lW=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,uW=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,cW=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fW=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,hW=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dW=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,pW=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mW=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,gW=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,vW=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,yW=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,xW=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,_W=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Zt={alphahash_fragment:VV,alphahash_pars_fragment:WV,alphamap_fragment:GV,alphamap_pars_fragment:jV,alphatest_fragment:qV,alphatest_pars_fragment:XV,aomap_fragment:$V,aomap_pars_fragment:YV,batching_pars_vertex:ZV,batching_vertex:KV,begin_vertex:JV,beginnormal_vertex:QV,bsdfs:e7,iridescence_fragment:t7,bumpmap_pars_fragment:n7,clipping_planes_fragment:i7,clipping_planes_pars_fragment:r7,clipping_planes_pars_vertex:s7,clipping_planes_vertex:o7,color_fragment:a7,color_pars_fragment:l7,color_pars_vertex:u7,color_vertex:c7,common:f7,cube_uv_reflection_fragment:h7,defaultnormal_vertex:d7,displacementmap_pars_vertex:p7,displacementmap_vertex:m7,emissivemap_fragment:g7,emissivemap_pars_fragment:v7,colorspace_fragment:y7,colorspace_pars_fragment:x7,envmap_fragment:_7,envmap_common_pars_fragment:w7,envmap_pars_fragment:S7,envmap_pars_vertex:M7,envmap_physical_pars_fragment:N7,envmap_vertex:E7,fog_vertex:b7,fog_pars_vertex:A7,fog_fragment:C7,fog_pars_fragment:D7,gradientmap_pars_fragment:T7,lightmap_pars_fragment:P7,lights_lambert_fragment:R7,lights_lambert_pars_fragment:I7,lights_pars_begin:F7,lights_toon_fragment:L7,lights_toon_pars_fragment:O7,lights_phong_fragment:z7,lights_phong_pars_fragment:B7,lights_physical_fragment:U7,lights_physical_pars_fragment:k7,lights_fragment_begin:H7,lights_fragment_maps:V7,lights_fragment_end:W7,logdepthbuf_fragment:G7,logdepthbuf_pars_fragment:j7,logdepthbuf_pars_vertex:q7,logdepthbuf_vertex:X7,map_fragment:$7,map_pars_fragment:Y7,map_particle_fragment:Z7,map_particle_pars_fragment:K7,metalnessmap_fragment:J7,metalnessmap_pars_fragment:Q7,morphinstance_vertex:e9,morphcolor_vertex:t9,morphnormal_vertex:n9,morphtarget_pars_vertex:i9,morphtarget_vertex:r9,normal_fragment_begin:s9,normal_fragment_maps:o9,normal_pars_fragment:a9,normal_pars_vertex:l9,normal_vertex:u9,normalmap_pars_fragment:c9,clearcoat_normal_fragment_begin:f9,clearcoat_normal_fragment_maps:h9,clearcoat_pars_fragment:d9,iridescence_pars_fragment:p9,opaque_fragment:m9,packing:g9,premultiplied_alpha_fragment:v9,project_vertex:y9,dithering_fragment:x9,dithering_pars_fragment:_9,roughnessmap_fragment:w9,roughnessmap_pars_fragment:S9,shadowmap_pars_fragment:M9,shadowmap_pars_vertex:E9,shadowmap_vertex:b9,shadowmask_pars_fragment:A9,skinbase_vertex:C9,skinning_pars_vertex:D9,skinning_vertex:T9,skinnormal_vertex:P9,specularmap_fragment:R9,specularmap_pars_fragment:I9,tonemapping_fragment:F9,tonemapping_pars_fragment:N9,transmission_fragment:L9,transmission_pars_fragment:O9,uv_pars_fragment:z9,uv_pars_vertex:B9,uv_vertex:U9,worldpos_vertex:k9,background_vert:H9,background_frag:V9,backgroundCube_vert:W9,backgroundCube_frag:G9,cube_vert:j9,cube_frag:q9,depth_vert:X9,depth_frag:$9,distanceRGBA_vert:Y9,distanceRGBA_frag:Z9,equirect_vert:K9,equirect_frag:J9,linedashed_vert:Q9,linedashed_frag:eW,meshbasic_vert:tW,meshbasic_frag:nW,meshlambert_vert:iW,meshlambert_frag:rW,meshmatcap_vert:sW,meshmatcap_frag:oW,meshnormal_vert:aW,meshnormal_frag:lW,meshphong_vert:uW,meshphong_frag:cW,meshphysical_vert:fW,meshphysical_frag:hW,meshtoon_vert:dW,meshtoon_frag:pW,points_vert:mW,points_frag:gW,shadow_vert:vW,shadow_frag:yW,sprite_vert:xW,sprite_frag:_W},ft={common:{diffuse:{value:new mt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new $t},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new $t}},envmap:{envMap:{value:null},envMapRotation:{value:new $t},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new $t}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new $t}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new $t},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new $t},normalScale:{value:new Fe(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new $t},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new $t}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new $t}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new $t}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new mt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new mt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0},uvTransform:{value:new $t}},sprite:{diffuse:{value:new mt(16777215)},opacity:{value:1},center:{value:new Fe(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new $t},alphaMap:{value:null},alphaMapTransform:{value:new $t},alphaTest:{value:0}}},oo={basic:{uniforms:Er([ft.common,ft.specularmap,ft.envmap,ft.aomap,ft.lightmap,ft.fog]),vertexShader:Zt.meshbasic_vert,fragmentShader:Zt.meshbasic_frag},lambert:{uniforms:Er([ft.common,ft.specularmap,ft.envmap,ft.aomap,ft.lightmap,ft.emissivemap,ft.bumpmap,ft.normalmap,ft.displacementmap,ft.fog,ft.lights,{emissive:{value:new mt(0)}}]),vertexShader:Zt.meshlambert_vert,fragmentShader:Zt.meshlambert_frag},phong:{uniforms:Er([ft.common,ft.specularmap,ft.envmap,ft.aomap,ft.lightmap,ft.emissivemap,ft.bumpmap,ft.normalmap,ft.displacementmap,ft.fog,ft.lights,{emissive:{value:new mt(0)},specular:{value:new mt(1118481)},shininess:{value:30}}]),vertexShader:Zt.meshphong_vert,fragmentShader:Zt.meshphong_frag},standard:{uniforms:Er([ft.common,ft.envmap,ft.aomap,ft.lightmap,ft.emissivemap,ft.bumpmap,ft.normalmap,ft.displacementmap,ft.roughnessmap,ft.metalnessmap,ft.fog,ft.lights,{emissive:{value:new mt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Zt.meshphysical_vert,fragmentShader:Zt.meshphysical_frag},toon:{uniforms:Er([ft.common,ft.aomap,ft.lightmap,ft.emissivemap,ft.bumpmap,ft.normalmap,ft.displacementmap,ft.gradientmap,ft.fog,ft.lights,{emissive:{value:new mt(0)}}]),vertexShader:Zt.meshtoon_vert,fragmentShader:Zt.meshtoon_frag},matcap:{uniforms:Er([ft.common,ft.bumpmap,ft.normalmap,ft.displacementmap,ft.fog,{matcap:{value:null}}]),vertexShader:Zt.meshmatcap_vert,fragmentShader:Zt.meshmatcap_frag},points:{uniforms:Er([ft.points,ft.fog]),vertexShader:Zt.points_vert,fragmentShader:Zt.points_frag},dashed:{uniforms:Er([ft.common,ft.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Zt.linedashed_vert,fragmentShader:Zt.linedashed_frag},depth:{uniforms:Er([ft.common,ft.displacementmap]),vertexShader:Zt.depth_vert,fragmentShader:Zt.depth_frag},normal:{uniforms:Er([ft.common,ft.bumpmap,ft.normalmap,ft.displacementmap,{opacity:{value:1}}]),vertexShader:Zt.meshnormal_vert,fragmentShader:Zt.meshnormal_frag},sprite:{uniforms:Er([ft.sprite,ft.fog]),vertexShader:Zt.sprite_vert,fragmentShader:Zt.sprite_frag},background:{uniforms:{uvTransform:{value:new $t},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Zt.background_vert,fragmentShader:Zt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new $t}},vertexShader:Zt.backgroundCube_vert,fragmentShader:Zt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Zt.cube_vert,fragmentShader:Zt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Zt.equirect_vert,fragmentShader:Zt.equirect_frag},distanceRGBA:{uniforms:Er([ft.common,ft.displacementmap,{referencePosition:{value:new j},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Zt.distanceRGBA_vert,fragmentShader:Zt.distanceRGBA_frag},shadow:{uniforms:Er([ft.lights,ft.fog,{color:{value:new mt(0)},opacity:{value:1}}]),vertexShader:Zt.shadow_vert,fragmentShader:Zt.shadow_frag}};oo.physical={uniforms:Er([oo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new $t},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new $t},clearcoatNormalScale:{value:new Fe(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new $t},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new $t},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new $t},sheen:{value:0},sheenColor:{value:new mt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new $t},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new $t},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new $t},transmissionSamplerSize:{value:new Fe},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new $t},attenuationDistance:{value:0},attenuationColor:{value:new mt(0)},specularColor:{value:new mt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new $t},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new $t},anisotropyVector:{value:new Fe},anisotropyMap:{value:null},anisotropyMapTransform:{value:new $t}}]),vertexShader:Zt.meshphysical_vert,fragmentShader:Zt.meshphysical_frag};const Sv={r:0,b:0,g:0},uu=new gs,wW=new zt;function SW(n,e,t,i,r,s,o){const a=new mt(0);let l=s===!0?0:1,u,c,f=null,h=0,m=null;function v(_){let w=_.isScene===!0?_.background:null;return w&&w.isTexture&&(w=(_.backgroundBlurriness>0?t:e).get(w)),w}function g(_){let w=!1;const E=v(_);E===null?y(a,l):E&&E.isColor&&(y(E,1),w=!0);const C=n.xr.getEnvironmentBlendMode();C==="additive"?i.buffers.color.setClear(0,0,0,1,o):C==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||w)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function x(_,w){const E=v(w);E&&(E.isCubeTexture||E.mapping===Fh)?(c===void 0&&(c=new hi(new yc(1,1,1),new Ws({name:"BackgroundCubeMaterial",uniforms:vh(oo.backgroundCube.uniforms),vertexShader:oo.backgroundCube.vertexShader,fragmentShader:oo.backgroundCube.fragmentShader,side:Rr,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(C,M,T){this.matrixWorld.copyPosition(T.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),uu.copy(w.backgroundRotation),uu.x*=-1,uu.y*=-1,uu.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(uu.y*=-1,uu.z*=-1),c.material.uniforms.envMap.value=E,c.material.uniforms.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=w.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(wW.makeRotationFromEuler(uu)),c.material.toneMapped=vn.getTransfer(E.colorSpace)!==Cn,(f!==E||h!==E.version||m!==n.toneMapping)&&(c.material.needsUpdate=!0,f=E,h=E.version,m=n.toneMapping),c.layers.enableAll(),_.unshift(c,c.geometry,c.material,0,0,null)):E&&E.isTexture&&(u===void 0&&(u=new hi(new Nh(2,2),new Ws({name:"BackgroundMaterial",uniforms:vh(oo.background.uniforms),vertexShader:oo.background.vertexShader,fragmentShader:oo.background.fragmentShader,side:Na,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=E,u.material.uniforms.backgroundIntensity.value=w.backgroundIntensity,u.material.toneMapped=vn.getTransfer(E.colorSpace)!==Cn,E.matrixAutoUpdate===!0&&E.updateMatrix(),u.material.uniforms.uvTransform.value.copy(E.matrix),(f!==E||h!==E.version||m!==n.toneMapping)&&(u.material.needsUpdate=!0,f=E,h=E.version,m=n.toneMapping),u.layers.enableAll(),_.unshift(u,u.geometry,u.material,0,0,null))}function y(_,w){_.getRGB(Sv,iO(n)),i.buffers.color.setClear(Sv.r,Sv.g,Sv.b,w,o)}return{getClearColor:function(){return a},setClearColor:function(_,w=1){a.set(_),l=w,y(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(_){l=_,y(a,l)},render:g,addToRenderList:x}}function MW(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=h(null);let s=r,o=!1;function a(D,I,L,H,k){let $=!1;const G=f(H,L,I);s!==G&&(s=G,u(s.object)),$=m(D,H,L,k),$&&v(D,H,L,k),k!==null&&e.update(k,n.ELEMENT_ARRAY_BUFFER),($||o)&&(o=!1,E(D,I,L,H),k!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(k).buffer))}function l(){return n.createVertexArray()}function u(D){return n.bindVertexArray(D)}function c(D){return n.deleteVertexArray(D)}function f(D,I,L){const H=L.wireframe===!0;let k=i[D.id];k===void 0&&(k={},i[D.id]=k);let $=k[I.id];$===void 0&&($={},k[I.id]=$);let G=$[H];return G===void 0&&(G=h(l()),$[H]=G),G}function h(D){const I=[],L=[],H=[];for(let k=0;k<t;k++)I[k]=0,L[k]=0,H[k]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:I,enabledAttributes:L,attributeDivisors:H,object:D,attributes:{},index:null}}function m(D,I,L,H){const k=s.attributes,$=I.attributes;let G=0;const J=L.getAttributes();for(const N in J)if(J[N].location>=0){const X=k[N];let ee=$[N];if(ee===void 0&&(N==="instanceMatrix"&&D.instanceMatrix&&(ee=D.instanceMatrix),N==="instanceColor"&&D.instanceColor&&(ee=D.instanceColor)),X===void 0||X.attribute!==ee||ee&&X.data!==ee.data)return!0;G++}return s.attributesNum!==G||s.index!==H}function v(D,I,L,H){const k={},$=I.attributes;let G=0;const J=L.getAttributes();for(const N in J)if(J[N].location>=0){let X=$[N];X===void 0&&(N==="instanceMatrix"&&D.instanceMatrix&&(X=D.instanceMatrix),N==="instanceColor"&&D.instanceColor&&(X=D.instanceColor));const ee={};ee.attribute=X,X&&X.data&&(ee.data=X.data),k[N]=ee,G++}s.attributes=k,s.attributesNum=G,s.index=H}function g(){const D=s.newAttributes;for(let I=0,L=D.length;I<L;I++)D[I]=0}function x(D){y(D,0)}function y(D,I){const L=s.newAttributes,H=s.enabledAttributes,k=s.attributeDivisors;L[D]=1,H[D]===0&&(n.enableVertexAttribArray(D),H[D]=1),k[D]!==I&&(n.vertexAttribDivisor(D,I),k[D]=I)}function _(){const D=s.newAttributes,I=s.enabledAttributes;for(let L=0,H=I.length;L<H;L++)I[L]!==D[L]&&(n.disableVertexAttribArray(L),I[L]=0)}function w(D,I,L,H,k,$,G){G===!0?n.vertexAttribIPointer(D,I,L,k,$):n.vertexAttribPointer(D,I,L,H,k,$)}function E(D,I,L,H){g();const k=H.attributes,$=L.getAttributes(),G=I.defaultAttributeValues;for(const J in $){const N=$[J];if(N.location>=0){let W=k[J];if(W===void 0&&(J==="instanceMatrix"&&D.instanceMatrix&&(W=D.instanceMatrix),J==="instanceColor"&&D.instanceColor&&(W=D.instanceColor)),W!==void 0){const X=W.normalized,ee=W.itemSize,te=e.get(W);if(te===void 0)continue;const ce=te.buffer,Q=te.type,le=te.bytesPerElement,pe=Q===n.INT||Q===n.UNSIGNED_INT||W.gpuType===Lx;if(W.isInterleavedBufferAttribute){const ae=W.data,Te=ae.stride,Pe=W.offset;if(ae.isInstancedInterleavedBuffer){for(let Ae=0;Ae<N.locationSize;Ae++)y(N.location+Ae,ae.meshPerAttribute);D.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=ae.meshPerAttribute*ae.count)}else for(let Ae=0;Ae<N.locationSize;Ae++)x(N.location+Ae);n.bindBuffer(n.ARRAY_BUFFER,ce);for(let Ae=0;Ae<N.locationSize;Ae++)w(N.location+Ae,ee/N.locationSize,Q,X,Te*le,(Pe+ee/N.locationSize*Ae)*le,pe)}else{if(W.isInstancedBufferAttribute){for(let ae=0;ae<N.locationSize;ae++)y(N.location+ae,W.meshPerAttribute);D.isInstancedMesh!==!0&&H._maxInstanceCount===void 0&&(H._maxInstanceCount=W.meshPerAttribute*W.count)}else for(let ae=0;ae<N.locationSize;ae++)x(N.location+ae);n.bindBuffer(n.ARRAY_BUFFER,ce);for(let ae=0;ae<N.locationSize;ae++)w(N.location+ae,ee/N.locationSize,Q,X,ee*le,ee/N.locationSize*ae*le,pe)}}else if(G!==void 0){const X=G[J];if(X!==void 0)switch(X.length){case 2:n.vertexAttrib2fv(N.location,X);break;case 3:n.vertexAttrib3fv(N.location,X);break;case 4:n.vertexAttrib4fv(N.location,X);break;default:n.vertexAttrib1fv(N.location,X)}}}}_()}function C(){R();for(const D in i){const I=i[D];for(const L in I){const H=I[L];for(const k in H)c(H[k].object),delete H[k];delete I[L]}delete i[D]}}function M(D){if(i[D.id]===void 0)return;const I=i[D.id];for(const L in I){const H=I[L];for(const k in H)c(H[k].object),delete H[k];delete I[L]}delete i[D.id]}function T(D){for(const I in i){const L=i[I];if(L[D.id]===void 0)continue;const H=L[D.id];for(const k in H)c(H[k].object),delete H[k];delete L[D.id]}}function R(){A(),o=!0,s!==r&&(s=r,u(s.object))}function A(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:R,resetDefaultState:A,dispose:C,releaseStatesOfGeometry:M,releaseStatesOfProgram:T,initAttributes:g,enableAttribute:x,disableUnusedAttributes:_}}function EW(n,e,t){let i;function r(u){i=u}function s(u,c){n.drawArrays(i,u,c),t.update(c,i,1)}function o(u,c,f){f!==0&&(n.drawArraysInstanced(i,u,c,f),t.update(c,i,f))}function a(u,c,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,u,0,c,0,f);let m=0;for(let v=0;v<f;v++)m+=c[v];t.update(m,i,1)}function l(u,c,f,h){if(f===0)return;const m=e.get("WEBGL_multi_draw");if(m===null)for(let v=0;v<u.length;v++)o(u[v],c[v],h[v]);else{m.multiDrawArraysInstancedWEBGL(i,u,0,c,0,h,0,f);let v=0;for(let g=0;g<f;g++)v+=c[g];for(let g=0;g<h.length;g++)t.update(v,i,h[g])}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function bW(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const M=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(M.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(M){return!(M!==pr&&i.convert(M)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(M){const T=M===gc&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(M!==go&&i.convert(M)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&M!==Tr&&!T)}function l(M){if(M==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";M="mediump"}return M==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const c=l(u);c!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",c,"instead."),u=c);const f=t.logarithmicDepthBuffer===!0,h=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),m=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_TEXTURE_SIZE),g=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),x=n.getParameter(n.MAX_VERTEX_ATTRIBS),y=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),_=n.getParameter(n.MAX_VARYING_VECTORS),w=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),E=m>0,C=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:f,maxTextures:h,maxVertexTextures:m,maxTextureSize:v,maxCubemapSize:g,maxAttributes:x,maxVertexUniforms:y,maxVaryings:_,maxFragmentUniforms:w,vertexTextures:E,maxSamples:C}}function AW(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new va,a=new $t,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,h){const m=f.length!==0||h||i!==0||r;return r=h,i=f.length,m},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,h){t=c(f,h,0)},this.setState=function(f,h,m){const v=f.clippingPlanes,g=f.clipIntersection,x=f.clipShadows,y=n.get(f);if(!r||v===null||v.length===0||s&&!x)s?c(null):u();else{const _=s?0:i,w=_*4;let E=y.clippingState||null;l.value=E,E=c(v,h,w,m);for(let C=0;C!==w;++C)E[C]=t[C];y.clippingState=E,this.numIntersection=g?this.numPlanes:0,this.numPlanes+=_}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function c(f,h,m,v){const g=f!==null?f.length:0;let x=null;if(g!==0){if(x=l.value,v!==!0||x===null){const y=m+g*4,_=h.matrixWorldInverse;a.getNormalMatrix(_),(x===null||x.length<y)&&(x=new Float32Array(y));for(let w=0,E=m;w!==g;++w,E+=4)o.copy(f[w]).applyMatrix4(_,a),o.normal.toArray(x,E),x[E+3]=o.constant}l.value=x,l.needsUpdate=!0}return e.numPlanes=g,e.numIntersection=0,x}}function CW(n){let e=new WeakMap;function t(o,a){return a===Op?o.mapping=La:a===zp&&(o.mapping=Il),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Op||a===zp)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new sO(l.height);return u.fromEquirectangularTexture(n,o),e.set(o,u),o.addEventListener("dispose",r),t(u.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class Sa extends ym{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const zf=4,_2=[.125,.215,.35,.446,.526,.582],Au=20,Cw=new Sa,w2=new mt;let Dw=null,Tw=0,Pw=0,Rw=!1;const Eu=(1+Math.sqrt(5))/2,uf=1/Eu,S2=[new j(-Eu,uf,0),new j(Eu,uf,0),new j(-uf,0,Eu),new j(uf,0,Eu),new j(0,Eu,-uf),new j(0,Eu,uf),new j(-1,1,-1),new j(1,1,-1),new j(-1,1,1),new j(1,1,1)];class IM{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){Dw=this._renderer.getRenderTarget(),Tw=this._renderer.getActiveCubeFace(),Pw=this._renderer.getActiveMipmapLevel(),Rw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=b2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=E2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Dw,Tw,Pw),this._renderer.xr.enabled=Rw,e.scissorTest=!1,Mv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===La||e.mapping===Il?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Dw=this._renderer.getRenderTarget(),Tw=this._renderer.getActiveCubeFace(),Pw=this._renderer.getActiveMipmapLevel(),Rw=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:ai,minFilter:ai,generateMipmaps:!1,type:gc,format:pr,colorSpace:ka,depthBuffer:!1},r=M2(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=M2(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=DW(s)),this._blurMaterial=TW(s,e,t)}return r}_compileMaterial(e){const t=new hi(this._lodPlanes[0],e);this._renderer.compile(t,Cw)}_sceneToCubeUV(e,t,i,r){const a=new oi(90,1,t,i),l=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],c=this._renderer,f=c.autoClear,h=c.toneMapping;c.getClearColor(w2),c.toneMapping=jo,c.autoClear=!1;const m=new Ha({name:"PMREM.Background",side:Rr,depthWrite:!1,depthTest:!1}),v=new hi(new yc,m);let g=!1;const x=e.background;x?x.isColor&&(m.color.copy(x),e.background=null,g=!0):(m.color.copy(w2),g=!0);for(let y=0;y<6;y++){const _=y%3;_===0?(a.up.set(0,l[y],0),a.lookAt(u[y],0,0)):_===1?(a.up.set(0,0,l[y]),a.lookAt(0,u[y],0)):(a.up.set(0,l[y],0),a.lookAt(0,0,u[y]));const w=this._cubeSize;Mv(r,_*w,y>2?w:0,w,w),c.setRenderTarget(r),g&&c.render(v,a),c.render(e,a)}v.geometry.dispose(),v.material.dispose(),c.toneMapping=h,c.autoClear=f,e.background=x}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===La||e.mapping===Il;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=b2()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=E2());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new hi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Mv(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,Cw)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=S2[(r-s-1)%S2.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,f=new hi(this._lodPlanes[r],u),h=u.uniforms,m=this._sizeLods[i]-1,v=isFinite(s)?Math.PI/(2*m):2*Math.PI/(2*Au-1),g=s/v,x=isFinite(s)?1+Math.floor(c*g):Au;x>Au&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${x} samples when the maximum is set to ${Au}`);const y=[];let _=0;for(let T=0;T<Au;++T){const R=T/g,A=Math.exp(-R*R/2);y.push(A),T===0?_+=A:T<x&&(_+=2*A)}for(let T=0;T<y.length;T++)y[T]=y[T]/_;h.envMap.value=e.texture,h.samples.value=x,h.weights.value=y,h.latitudinal.value=o==="latitudinal",a&&(h.poleAxis.value=a);const{_lodMax:w}=this;h.dTheta.value=v,h.mipInt.value=w-i;const E=this._sizeLods[r],C=3*E*(r>w-zf?r-w+zf:0),M=4*(this._cubeSize-E);Mv(t,C,M,3*E,2*E),l.setRenderTarget(t),l.render(f,Cw)}}function DW(n){const e=[],t=[],i=[];let r=n;const s=n-zf+1+_2.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-zf?l=_2[o-n+zf-1]:o===0&&(l=0),i.push(l);const u=1/(a-2),c=-u,f=1+u,h=[c,c,f,c,f,f,c,c,f,f,c,f],m=6,v=6,g=3,x=2,y=1,_=new Float32Array(g*v*m),w=new Float32Array(x*v*m),E=new Float32Array(y*v*m);for(let M=0;M<m;M++){const T=M%3*2/3-1,R=M>2?0:-1,A=[T,R,0,T+2/3,R,0,T+2/3,R+1,0,T,R,0,T+2/3,R+1,0,T,R+1,0];_.set(A,g*v*M),w.set(h,x*v*M);const D=[M,M,M,M,M,M];E.set(D,y*v*M)}const C=new Kt;C.setAttribute("position",new Mn(_,g)),C.setAttribute("uv",new Mn(w,x)),C.setAttribute("faceIndex",new Mn(E,y)),e.push(C),r>zf&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function M2(n,e,t){const i=new Vs(n,e,t);return i.texture.mapping=Fh,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Mv(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function TW(n,e,t){const i=new Float32Array(Au),r=new j(0,1,0);return new Ws({name:"SphericalGaussianBlur",defines:{n:Au,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Fb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ca,depthTest:!1,depthWrite:!1})}function E2(){return new Ws({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Fb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ca,depthTest:!1,depthWrite:!1})}function b2(){return new Ws({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Fb(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ca,depthTest:!1,depthWrite:!1})}function Fb(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function PW(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,u=l===Op||l===zp,c=l===La||l===Il;if(u||c){let f=e.get(a);const h=f!==void 0?f.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==h)return t===null&&(t=new IM(n)),f=u?t.fromEquirectangular(a,f):t.fromCubemap(a,f),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),f.texture;if(f!==void 0)return f.texture;{const m=a.image;return u&&m&&m.height>0||c&&m&&r(m)?(t===null&&(t=new IM(n)),f=u?t.fromEquirectangular(a):t.fromCubemap(a),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),a.addEventListener("dispose",s),f.texture):null}}}return a}function r(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function RW(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&Tb("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function IW(n,e,t,i){const r={},s=new WeakMap;function o(f){const h=f.target;h.index!==null&&e.remove(h.index);for(const v in h.attributes)e.remove(h.attributes[v]);for(const v in h.morphAttributes){const g=h.morphAttributes[v];for(let x=0,y=g.length;x<y;x++)e.remove(g[x])}h.removeEventListener("dispose",o),delete r[h.id];const m=s.get(h);m&&(e.remove(m),s.delete(h)),i.releaseStatesOfGeometry(h),h.isInstancedBufferGeometry===!0&&delete h._maxInstanceCount,t.memory.geometries--}function a(f,h){return r[h.id]===!0||(h.addEventListener("dispose",o),r[h.id]=!0,t.memory.geometries++),h}function l(f){const h=f.attributes;for(const v in h)e.update(h[v],n.ARRAY_BUFFER);const m=f.morphAttributes;for(const v in m){const g=m[v];for(let x=0,y=g.length;x<y;x++)e.update(g[x],n.ARRAY_BUFFER)}}function u(f){const h=[],m=f.index,v=f.attributes.position;let g=0;if(m!==null){const _=m.array;g=m.version;for(let w=0,E=_.length;w<E;w+=3){const C=_[w+0],M=_[w+1],T=_[w+2];h.push(C,M,M,T,T,C)}}else if(v!==void 0){const _=v.array;g=v.version;for(let w=0,E=_.length/3-1;w<E;w+=3){const C=w+0,M=w+1,T=w+2;h.push(C,M,M,T,T,C)}}else return;const x=new(JL(h)?Ib:Rb)(h,1);x.version=g;const y=s.get(f);y&&e.remove(y),s.set(f,x)}function c(f){const h=s.get(f);if(h){const m=f.index;m!==null&&h.version<m.version&&u(f)}else u(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:c}}function FW(n,e,t){let i;function r(h){i=h}let s,o;function a(h){s=h.type,o=h.bytesPerElement}function l(h,m){n.drawElements(i,m,s,h*o),t.update(m,i,1)}function u(h,m,v){v!==0&&(n.drawElementsInstanced(i,m,s,h*o,v),t.update(m,i,v))}function c(h,m,v){if(v===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,m,0,s,h,0,v);let x=0;for(let y=0;y<v;y++)x+=m[y];t.update(x,i,1)}function f(h,m,v,g){if(v===0)return;const x=e.get("WEBGL_multi_draw");if(x===null)for(let y=0;y<h.length;y++)u(h[y]/o,m[y],g[y]);else{x.multiDrawElementsInstancedWEBGL(i,m,0,s,h,0,g,0,v);let y=0;for(let _=0;_<v;_++)y+=m[_];for(let _=0;_<g.length;_++)t.update(y,i,g[_])}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=c,this.renderMultiDrawInstances=f}function NW(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function LW(n,e,t){const i=new WeakMap,r=new sn;function s(o,a,l){const u=o.morphTargetInfluences,c=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,f=c!==void 0?c.length:0;let h=i.get(a);if(h===void 0||h.count!==f){let D=function(){R.dispose(),i.delete(a),a.removeEventListener("dispose",D)};var m=D;h!==void 0&&h.texture.dispose();const v=a.morphAttributes.position!==void 0,g=a.morphAttributes.normal!==void 0,x=a.morphAttributes.color!==void 0,y=a.morphAttributes.position||[],_=a.morphAttributes.normal||[],w=a.morphAttributes.color||[];let E=0;v===!0&&(E=1),g===!0&&(E=2),x===!0&&(E=3);let C=a.attributes.position.count*E,M=1;C>e.maxTextureSize&&(M=Math.ceil(C/e.maxTextureSize),C=e.maxTextureSize);const T=new Float32Array(C*M*4*f),R=new Wx(T,C,M,f);R.type=Tr,R.needsUpdate=!0;const A=E*4;for(let I=0;I<f;I++){const L=y[I],H=_[I],k=w[I],$=C*M*4*I;for(let G=0;G<L.count;G++){const J=G*A;v===!0&&(r.fromBufferAttribute(L,G),T[$+J+0]=r.x,T[$+J+1]=r.y,T[$+J+2]=r.z,T[$+J+3]=0),g===!0&&(r.fromBufferAttribute(H,G),T[$+J+4]=r.x,T[$+J+5]=r.y,T[$+J+6]=r.z,T[$+J+7]=0),x===!0&&(r.fromBufferAttribute(k,G),T[$+J+8]=r.x,T[$+J+9]=r.y,T[$+J+10]=r.z,T[$+J+11]=k.itemSize===4?r.w:1)}}h={count:f,texture:R,size:new Fe(C,M)},i.set(a,h),a.addEventListener("dispose",D)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let v=0;for(let x=0;x<u.length;x++)v+=u[x];const g=a.morphTargetsRelative?1:1-v;l.getUniforms().setValue(n,"morphTargetBaseInfluence",g),l.getUniforms().setValue(n,"morphTargetInfluences",u)}l.getUniforms().setValue(n,"morphTargetsTexture",h.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",h.size)}return{update:s}}function OW(n,e,t,i){let r=new WeakMap;function s(l){const u=i.render.frame,c=l.geometry,f=e.get(l,c);if(r.get(f)!==u&&(e.update(f),r.set(f,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){const h=l.skeleton;r.get(h)!==u&&(h.update(),r.set(h,u))}return f}function o(){r=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}class Gx extends jn{constructor(e,t,i,r,s,o,a,l,u,c=qu){if(c!==qu&&c!==sc)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&c===qu&&(i=Oa),i===void 0&&c===sc&&(i=rc),super(null,r,s,o,a,l,c,i,u),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Oi,this.minFilter=l!==void 0?l:Oi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const aO=new jn,A2=new Gx(1,1),lO=new Wx,uO=new Pb,cO=new xm,C2=[],D2=[],T2=new Float32Array(16),P2=new Float32Array(9),R2=new Float32Array(4);function Lh(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=C2[r];if(s===void 0&&(s=new Float32Array(r),C2[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Ci(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Di(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function jx(n,e){let t=D2[e];t===void 0&&(t=new Int32Array(e),D2[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function zW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function BW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ci(t,e))return;n.uniform2fv(this.addr,e),Di(t,e)}}function UW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Ci(t,e))return;n.uniform3fv(this.addr,e),Di(t,e)}}function kW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ci(t,e))return;n.uniform4fv(this.addr,e),Di(t,e)}}function HW(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ci(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Di(t,e)}else{if(Ci(t,i))return;R2.set(i),n.uniformMatrix2fv(this.addr,!1,R2),Di(t,i)}}function VW(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ci(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Di(t,e)}else{if(Ci(t,i))return;P2.set(i),n.uniformMatrix3fv(this.addr,!1,P2),Di(t,i)}}function WW(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Ci(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Di(t,e)}else{if(Ci(t,i))return;T2.set(i),n.uniformMatrix4fv(this.addr,!1,T2),Di(t,i)}}function GW(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function jW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ci(t,e))return;n.uniform2iv(this.addr,e),Di(t,e)}}function qW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ci(t,e))return;n.uniform3iv(this.addr,e),Di(t,e)}}function XW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ci(t,e))return;n.uniform4iv(this.addr,e),Di(t,e)}}function $W(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function YW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Ci(t,e))return;n.uniform2uiv(this.addr,e),Di(t,e)}}function ZW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Ci(t,e))return;n.uniform3uiv(this.addr,e),Di(t,e)}}function KW(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Ci(t,e))return;n.uniform4uiv(this.addr,e),Di(t,e)}}function JW(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(A2.compareFunction=Cb,s=A2):s=aO,t.setTexture2D(e||s,r)}function QW(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||uO,r)}function eG(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||cO,r)}function tG(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||lO,r)}function nG(n){switch(n){case 5126:return zW;case 35664:return BW;case 35665:return UW;case 35666:return kW;case 35674:return HW;case 35675:return VW;case 35676:return WW;case 5124:case 35670:return GW;case 35667:case 35671:return jW;case 35668:case 35672:return qW;case 35669:case 35673:return XW;case 5125:return $W;case 36294:return YW;case 36295:return ZW;case 36296:return KW;case 35678:case 36198:case 36298:case 36306:case 35682:return JW;case 35679:case 36299:case 36307:return QW;case 35680:case 36300:case 36308:case 36293:return eG;case 36289:case 36303:case 36311:case 36292:return tG}}function iG(n,e){n.uniform1fv(this.addr,e)}function rG(n,e){const t=Lh(e,this.size,2);n.uniform2fv(this.addr,t)}function sG(n,e){const t=Lh(e,this.size,3);n.uniform3fv(this.addr,t)}function oG(n,e){const t=Lh(e,this.size,4);n.uniform4fv(this.addr,t)}function aG(n,e){const t=Lh(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function lG(n,e){const t=Lh(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function uG(n,e){const t=Lh(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function cG(n,e){n.uniform1iv(this.addr,e)}function fG(n,e){n.uniform2iv(this.addr,e)}function hG(n,e){n.uniform3iv(this.addr,e)}function dG(n,e){n.uniform4iv(this.addr,e)}function pG(n,e){n.uniform1uiv(this.addr,e)}function mG(n,e){n.uniform2uiv(this.addr,e)}function gG(n,e){n.uniform3uiv(this.addr,e)}function vG(n,e){n.uniform4uiv(this.addr,e)}function yG(n,e,t){const i=this.cache,r=e.length,s=jx(t,r);Ci(i,s)||(n.uniform1iv(this.addr,s),Di(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||aO,s[o])}function xG(n,e,t){const i=this.cache,r=e.length,s=jx(t,r);Ci(i,s)||(n.uniform1iv(this.addr,s),Di(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||uO,s[o])}function _G(n,e,t){const i=this.cache,r=e.length,s=jx(t,r);Ci(i,s)||(n.uniform1iv(this.addr,s),Di(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||cO,s[o])}function wG(n,e,t){const i=this.cache,r=e.length,s=jx(t,r);Ci(i,s)||(n.uniform1iv(this.addr,s),Di(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||lO,s[o])}function SG(n){switch(n){case 5126:return iG;case 35664:return rG;case 35665:return sG;case 35666:return oG;case 35674:return aG;case 35675:return lG;case 35676:return uG;case 5124:case 35670:return cG;case 35667:case 35671:return fG;case 35668:case 35672:return hG;case 35669:case 35673:return dG;case 5125:return pG;case 36294:return mG;case 36295:return gG;case 36296:return vG;case 35678:case 36198:case 36298:case 36306:case 35682:return yG;case 35679:case 36299:case 36307:return xG;case 35680:case 36300:case 36308:case 36293:return _G;case 36289:case 36303:case 36311:case 36292:return wG}}class MG{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=nG(t.type)}}class EG{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=SG(t.type)}}class bG{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const Iw=/(\w+)(\])?(\[|\.)?/g;function I2(n,e){n.seq.push(e),n.map[e.id]=e}function AG(n,e,t){const i=n.name,r=i.length;for(Iw.lastIndex=0;;){const s=Iw.exec(i),o=Iw.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===r){I2(t,u===void 0?new MG(a,n,e):new EG(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new bG(a),I2(t,f)),t=f}}}class R0{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);AG(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function F2(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const CG=37297;let DG=0;function TG(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}function PG(n){const e=vn.getPrimaries(vn.workingColorSpace),t=vn.getPrimaries(n);let i;switch(e===t?i="":e===Wp&&t===Vp?i="LinearDisplayP3ToLinearSRGB":e===Vp&&t===Wp&&(i="LinearSRGBToLinearDisplayP3"),n){case ka:case vm:return[i,"LinearTransferOETF"];case Is:case Vx:return[i,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),[i,"LinearTransferOETF"]}}function N2(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+TG(n.getShaderSource(e),o)}else return r}function RG(n,e){const t=PG(e);return`vec4 ${n}( vec4 value ) { return ${t[0]}( ${t[1]}( value ) ); }`}function IG(n,e){let t;switch(e){case RL:t="Linear";break;case IL:t="Reinhard";break;case FL:t="OptimizedCineon";break;case mb:t="ACESFilmic";break;case LL:t="AgX";break;case OL:t="Neutral";break;case NL:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function FG(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter($d).join(`
`)}function NG(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function LG(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function $d(n){return n!==""}function L2(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function O2(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const OG=/^[ \t]*#include +<([\w\d./]+)>/gm;function FM(n){return n.replace(OG,BG)}const zG=new Map;function BG(n,e){let t=Zt[e];if(t===void 0){const i=zG.get(e);if(i!==void 0)t=Zt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return FM(t)}const UG=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function z2(n){return n.replace(UG,kG)}function kG(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function B2(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function HG(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===Fx?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===sp?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===to&&(e="SHADOWMAP_TYPE_VSM"),e}function VG(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case La:case Il:e="ENVMAP_TYPE_CUBE";break;case Fh:e="ENVMAP_TYPE_CUBE_UV";break}return e}function WG(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case Il:e="ENVMAP_MODE_REFRACTION";break}return e}function GG(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case mm:e="ENVMAP_BLENDING_MULTIPLY";break;case TL:e="ENVMAP_BLENDING_MIX";break;case PL:e="ENVMAP_BLENDING_ADD";break}return e}function jG(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function qG(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=HG(t),u=VG(t),c=WG(t),f=GG(t),h=jG(t),m=FG(t),v=NG(s),g=r.createProgram();let x,y,_=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(x=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter($d).join(`
`),x.length>0&&(x+=`
`),y=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v].filter($d).join(`
`),y.length>0&&(y+=`
`)):(x=[B2(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter($d).join(`
`),y=[B2(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,v,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+f:"",h?"#define CUBEUV_TEXEL_WIDTH "+h.texelWidth:"",h?"#define CUBEUV_TEXEL_HEIGHT "+h.texelHeight:"",h?"#define CUBEUV_MAX_MIP "+h.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==jo?"#define TONE_MAPPING":"",t.toneMapping!==jo?Zt.tonemapping_pars_fragment:"",t.toneMapping!==jo?IG("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Zt.colorspace_pars_fragment,RG("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter($d).join(`
`)),o=FM(o),o=L2(o,t),o=O2(o,t),a=FM(a),a=L2(a,t),a=O2(a,t),o=z2(o),a=z2(a),t.isRawShaderMaterial!==!0&&(_=`#version 300 es
`,x=[m,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+x,y=["#define varying in",t.glslVersion===RM?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===RM?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+y);const w=_+x+o,E=_+y+a,C=F2(r,r.VERTEX_SHADER,w),M=F2(r,r.FRAGMENT_SHADER,E);r.attachShader(g,C),r.attachShader(g,M),t.index0AttributeName!==void 0?r.bindAttribLocation(g,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(g,0,"position"),r.linkProgram(g);function T(I){if(n.debug.checkShaderErrors){const L=r.getProgramInfoLog(g).trim(),H=r.getShaderInfoLog(C).trim(),k=r.getShaderInfoLog(M).trim();let $=!0,G=!0;if(r.getProgramParameter(g,r.LINK_STATUS)===!1)if($=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,g,C,M);else{const J=N2(r,C,"vertex"),N=N2(r,M,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(g,r.VALIDATE_STATUS)+`

Material Name: `+I.name+`
Material Type: `+I.type+`

Program Info Log: `+L+`
`+J+`
`+N)}else L!==""?console.warn("THREE.WebGLProgram: Program Info Log:",L):(H===""||k==="")&&(G=!1);G&&(I.diagnostics={runnable:$,programLog:L,vertexShader:{log:H,prefix:x},fragmentShader:{log:k,prefix:y}})}r.deleteShader(C),r.deleteShader(M),R=new R0(r,g),A=LG(r,g)}let R;this.getUniforms=function(){return R===void 0&&T(this),R};let A;this.getAttributes=function(){return A===void 0&&T(this),A};let D=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return D===!1&&(D=r.getProgramParameter(g,CG)),D},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(g),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=DG++,this.cacheKey=e,this.usedTimes=1,this.program=g,this.vertexShader=C,this.fragmentShader=M,this}let XG=0;class $G{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new YG(e),t.set(e,i)),i}}class YG{constructor(e){this.id=XG++,this.code=e,this.usedTimes=0}}function ZG(n,e,t,i,r,s,o){const a=new $u,l=new $G,u=new Set,c=[],f=r.logarithmicDepthBuffer,h=r.vertexTextures;let m=r.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function g(A){return u.add(A),A===0?"uv":`uv${A}`}function x(A,D,I,L,H){const k=L.fog,$=H.geometry,G=A.isMeshStandardMaterial?L.environment:null,J=(A.isMeshStandardMaterial?t:e).get(A.envMap||G),N=J&&J.mapping===Fh?J.image.height:null,W=v[A.type];A.precision!==null&&(m=r.getMaxPrecision(A.precision),m!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",m,"instead."));const X=$.morphAttributes.position||$.morphAttributes.normal||$.morphAttributes.color,ee=X!==void 0?X.length:0;let te=0;$.morphAttributes.position!==void 0&&(te=1),$.morphAttributes.normal!==void 0&&(te=2),$.morphAttributes.color!==void 0&&(te=3);let ce,Q,le,pe;if(W){const Wt=oo[W];ce=Wt.vertexShader,Q=Wt.fragmentShader}else ce=A.vertexShader,Q=A.fragmentShader,l.update(A),le=l.getVertexShaderID(A),pe=l.getFragmentShaderID(A);const ae=n.getRenderTarget(),Te=H.isInstancedMesh===!0,Pe=H.isBatchedMesh===!0,Ae=!!A.map,We=!!A.matcap,z=!!J,Se=!!A.aoMap,De=!!A.lightMap,ke=!!A.bumpMap,Me=!!A.normalMap,Qe=!!A.displacementMap,Ge=!!A.emissiveMap,Ze=!!A.metalnessMap,Y=!!A.roughnessMap,B=A.anisotropy>0,we=A.clearcoat>0,U=A.dispersion>0,q=A.iridescence>0,Z=A.sheen>0,he=A.transmission>0,fe=B&&!!A.anisotropyMap,ue=we&&!!A.clearcoatMap,Ne=we&&!!A.clearcoatNormalMap,ge=we&&!!A.clearcoatRoughnessMap,Ee=q&&!!A.iridescenceMap,Le=q&&!!A.iridescenceThicknessMap,nt=Z&&!!A.sheenColorMap,Ye=Z&&!!A.sheenRoughnessMap,ne=!!A.specularMap,Re=!!A.specularColorMap,et=!!A.specularIntensityMap,re=he&&!!A.transmissionMap,He=he&&!!A.thicknessMap,Oe=!!A.gradientMap,Be=!!A.alphaMap,tt=A.alphaTest>0,Et=!!A.alphaHash,Bt=!!A.extensions;let en=jo;A.toneMapped&&(ae===null||ae.isXRRenderTarget===!0)&&(en=n.toneMapping);const yn={shaderID:W,shaderType:A.type,shaderName:A.name,vertexShader:ce,fragmentShader:Q,defines:A.defines,customVertexShaderID:le,customFragmentShaderID:pe,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:m,batching:Pe,batchingColor:Pe&&H._colorsTexture!==null,instancing:Te,instancingColor:Te&&H.instanceColor!==null,instancingMorph:Te&&H.morphTexture!==null,supportsVertexTextures:h,outputColorSpace:ae===null?n.outputColorSpace:ae.isXRRenderTarget===!0?ae.texture.colorSpace:ka,alphaToCoverage:!!A.alphaToCoverage,map:Ae,matcap:We,envMap:z,envMapMode:z&&J.mapping,envMapCubeUVHeight:N,aoMap:Se,lightMap:De,bumpMap:ke,normalMap:Me,displacementMap:h&&Qe,emissiveMap:Ge,normalMapObjectSpace:Me&&A.normalMapType===WL,normalMapTangentSpace:Me&&A.normalMapType===Gl,metalnessMap:Ze,roughnessMap:Y,anisotropy:B,anisotropyMap:fe,clearcoat:we,clearcoatMap:ue,clearcoatNormalMap:Ne,clearcoatRoughnessMap:ge,dispersion:U,iridescence:q,iridescenceMap:Ee,iridescenceThicknessMap:Le,sheen:Z,sheenColorMap:nt,sheenRoughnessMap:Ye,specularMap:ne,specularColorMap:Re,specularIntensityMap:et,transmission:he,transmissionMap:re,thicknessMap:He,gradientMap:Oe,opaque:A.transparent===!1&&A.blending===ju&&A.alphaToCoverage===!1,alphaMap:Be,alphaTest:tt,alphaHash:Et,combine:A.combine,mapUv:Ae&&g(A.map.channel),aoMapUv:Se&&g(A.aoMap.channel),lightMapUv:De&&g(A.lightMap.channel),bumpMapUv:ke&&g(A.bumpMap.channel),normalMapUv:Me&&g(A.normalMap.channel),displacementMapUv:Qe&&g(A.displacementMap.channel),emissiveMapUv:Ge&&g(A.emissiveMap.channel),metalnessMapUv:Ze&&g(A.metalnessMap.channel),roughnessMapUv:Y&&g(A.roughnessMap.channel),anisotropyMapUv:fe&&g(A.anisotropyMap.channel),clearcoatMapUv:ue&&g(A.clearcoatMap.channel),clearcoatNormalMapUv:Ne&&g(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:ge&&g(A.clearcoatRoughnessMap.channel),iridescenceMapUv:Ee&&g(A.iridescenceMap.channel),iridescenceThicknessMapUv:Le&&g(A.iridescenceThicknessMap.channel),sheenColorMapUv:nt&&g(A.sheenColorMap.channel),sheenRoughnessMapUv:Ye&&g(A.sheenRoughnessMap.channel),specularMapUv:ne&&g(A.specularMap.channel),specularColorMapUv:Re&&g(A.specularColorMap.channel),specularIntensityMapUv:et&&g(A.specularIntensityMap.channel),transmissionMapUv:re&&g(A.transmissionMap.channel),thicknessMapUv:He&&g(A.thicknessMap.channel),alphaMapUv:Be&&g(A.alphaMap.channel),vertexTangents:!!$.attributes.tangent&&(Me||B),vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!$.attributes.color&&$.attributes.color.itemSize===4,pointsUvs:H.isPoints===!0&&!!$.attributes.uv&&(Ae||Be),fog:!!k,useFog:A.fog===!0,fogExp2:!!k&&k.isFogExp2,flatShading:A.flatShading===!0,sizeAttenuation:A.sizeAttenuation===!0,logarithmicDepthBuffer:f,skinning:H.isSkinnedMesh===!0,morphTargets:$.morphAttributes.position!==void 0,morphNormals:$.morphAttributes.normal!==void 0,morphColors:$.morphAttributes.color!==void 0,morphTargetsCount:ee,morphTextureStride:te,numDirLights:D.directional.length,numPointLights:D.point.length,numSpotLights:D.spot.length,numSpotLightMaps:D.spotLightMap.length,numRectAreaLights:D.rectArea.length,numHemiLights:D.hemi.length,numDirLightShadows:D.directionalShadowMap.length,numPointLightShadows:D.pointShadowMap.length,numSpotLightShadows:D.spotShadowMap.length,numSpotLightShadowsWithMaps:D.numSpotLightShadowsWithMaps,numLightProbes:D.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:A.dithering,shadowMapEnabled:n.shadowMap.enabled&&I.length>0,shadowMapType:n.shadowMap.type,toneMapping:en,decodeVideoTexture:Ae&&A.map.isVideoTexture===!0&&vn.getTransfer(A.map.colorSpace)===Cn,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===Bo,flipSided:A.side===Rr,useDepthPacking:A.depthPacking>=0,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionClipCullDistance:Bt&&A.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Bt&&A.extensions.multiDraw===!0||Pe)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:A.customProgramCacheKey()};return yn.vertexUv1s=u.has(1),yn.vertexUv2s=u.has(2),yn.vertexUv3s=u.has(3),u.clear(),yn}function y(A){const D=[];if(A.shaderID?D.push(A.shaderID):(D.push(A.customVertexShaderID),D.push(A.customFragmentShaderID)),A.defines!==void 0)for(const I in A.defines)D.push(I),D.push(A.defines[I]);return A.isRawShaderMaterial===!1&&(_(D,A),w(D,A),D.push(n.outputColorSpace)),D.push(A.customProgramCacheKey),D.join()}function _(A,D){A.push(D.precision),A.push(D.outputColorSpace),A.push(D.envMapMode),A.push(D.envMapCubeUVHeight),A.push(D.mapUv),A.push(D.alphaMapUv),A.push(D.lightMapUv),A.push(D.aoMapUv),A.push(D.bumpMapUv),A.push(D.normalMapUv),A.push(D.displacementMapUv),A.push(D.emissiveMapUv),A.push(D.metalnessMapUv),A.push(D.roughnessMapUv),A.push(D.anisotropyMapUv),A.push(D.clearcoatMapUv),A.push(D.clearcoatNormalMapUv),A.push(D.clearcoatRoughnessMapUv),A.push(D.iridescenceMapUv),A.push(D.iridescenceThicknessMapUv),A.push(D.sheenColorMapUv),A.push(D.sheenRoughnessMapUv),A.push(D.specularMapUv),A.push(D.specularColorMapUv),A.push(D.specularIntensityMapUv),A.push(D.transmissionMapUv),A.push(D.thicknessMapUv),A.push(D.combine),A.push(D.fogExp2),A.push(D.sizeAttenuation),A.push(D.morphTargetsCount),A.push(D.morphAttributeCount),A.push(D.numDirLights),A.push(D.numPointLights),A.push(D.numSpotLights),A.push(D.numSpotLightMaps),A.push(D.numHemiLights),A.push(D.numRectAreaLights),A.push(D.numDirLightShadows),A.push(D.numPointLightShadows),A.push(D.numSpotLightShadows),A.push(D.numSpotLightShadowsWithMaps),A.push(D.numLightProbes),A.push(D.shadowMapType),A.push(D.toneMapping),A.push(D.numClippingPlanes),A.push(D.numClipIntersection),A.push(D.depthPacking)}function w(A,D){a.disableAll(),D.supportsVertexTextures&&a.enable(0),D.instancing&&a.enable(1),D.instancingColor&&a.enable(2),D.instancingMorph&&a.enable(3),D.matcap&&a.enable(4),D.envMap&&a.enable(5),D.normalMapObjectSpace&&a.enable(6),D.normalMapTangentSpace&&a.enable(7),D.clearcoat&&a.enable(8),D.iridescence&&a.enable(9),D.alphaTest&&a.enable(10),D.vertexColors&&a.enable(11),D.vertexAlphas&&a.enable(12),D.vertexUv1s&&a.enable(13),D.vertexUv2s&&a.enable(14),D.vertexUv3s&&a.enable(15),D.vertexTangents&&a.enable(16),D.anisotropy&&a.enable(17),D.alphaHash&&a.enable(18),D.batching&&a.enable(19),D.dispersion&&a.enable(20),D.batchingColor&&a.enable(21),A.push(a.mask),a.disableAll(),D.fog&&a.enable(0),D.useFog&&a.enable(1),D.flatShading&&a.enable(2),D.logarithmicDepthBuffer&&a.enable(3),D.skinning&&a.enable(4),D.morphTargets&&a.enable(5),D.morphNormals&&a.enable(6),D.morphColors&&a.enable(7),D.premultipliedAlpha&&a.enable(8),D.shadowMapEnabled&&a.enable(9),D.doubleSided&&a.enable(10),D.flipSided&&a.enable(11),D.useDepthPacking&&a.enable(12),D.dithering&&a.enable(13),D.transmission&&a.enable(14),D.sheen&&a.enable(15),D.opaque&&a.enable(16),D.pointsUvs&&a.enable(17),D.decodeVideoTexture&&a.enable(18),D.alphaToCoverage&&a.enable(19),A.push(a.mask)}function E(A){const D=v[A.type];let I;if(D){const L=oo[D];I=ky.clone(L.uniforms)}else I=A.uniforms;return I}function C(A,D){let I;for(let L=0,H=c.length;L<H;L++){const k=c[L];if(k.cacheKey===D){I=k,++I.usedTimes;break}}return I===void 0&&(I=new qG(n,D,A,s),c.push(I)),I}function M(A){if(--A.usedTimes===0){const D=c.indexOf(A);c[D]=c[c.length-1],c.pop(),A.destroy()}}function T(A){l.remove(A)}function R(){l.dispose()}return{getParameters:x,getProgramCacheKey:y,getUniforms:E,acquireProgram:C,releaseProgram:M,releaseShaderCache:T,programs:c,dispose:R}}function KG(){let n=new WeakMap;function e(s){let o=n.get(s);return o===void 0&&(o={},n.set(s,o)),o}function t(s){n.delete(s)}function i(s,o,a){n.get(s)[o]=a}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function JG(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function U2(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function k2(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(f,h,m,v,g,x){let y=n[e];return y===void 0?(y={id:f.id,object:f,geometry:h,material:m,groupOrder:v,renderOrder:f.renderOrder,z:g,group:x},n[e]=y):(y.id=f.id,y.object=f,y.geometry=h,y.material=m,y.groupOrder=v,y.renderOrder=f.renderOrder,y.z=g,y.group=x),e++,y}function a(f,h,m,v,g,x){const y=o(f,h,m,v,g,x);m.transmission>0?i.push(y):m.transparent===!0?r.push(y):t.push(y)}function l(f,h,m,v,g,x){const y=o(f,h,m,v,g,x);m.transmission>0?i.unshift(y):m.transparent===!0?r.unshift(y):t.unshift(y)}function u(f,h){t.length>1&&t.sort(f||JG),i.length>1&&i.sort(h||U2),r.length>1&&r.sort(h||U2)}function c(){for(let f=e,h=n.length;f<h;f++){const m=n[f];if(m.id===null)break;m.id=null,m.object=null,m.geometry=null,m.material=null,m.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:c,sort:u}}function QG(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new k2,n.set(i,[o])):r>=s.length?(o=new k2,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function ej(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new j,color:new mt};break;case"SpotLight":t={position:new j,direction:new j,color:new mt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new j,color:new mt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new j,skyColor:new mt,groundColor:new mt};break;case"RectAreaLight":t={color:new mt,position:new j,halfWidth:new j,halfHeight:new j};break}return n[e.id]=t,t}}}function tj(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fe};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fe};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Fe,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let nj=0;function ij(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function rj(n){const e=new ej,t=tj(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)i.probe.push(new j);const r=new j,s=new zt,o=new zt;function a(u){let c=0,f=0,h=0;for(let A=0;A<9;A++)i.probe[A].set(0,0,0);let m=0,v=0,g=0,x=0,y=0,_=0,w=0,E=0,C=0,M=0,T=0;u.sort(ij);for(let A=0,D=u.length;A<D;A++){const I=u[A],L=I.color,H=I.intensity,k=I.distance,$=I.shadow&&I.shadow.map?I.shadow.map.texture:null;if(I.isAmbientLight)c+=L.r*H,f+=L.g*H,h+=L.b*H;else if(I.isLightProbe){for(let G=0;G<9;G++)i.probe[G].addScaledVector(I.sh.coefficients[G],H);T++}else if(I.isDirectionalLight){const G=e.get(I);if(G.color.copy(I.color).multiplyScalar(I.intensity),I.castShadow){const J=I.shadow,N=t.get(I);N.shadowIntensity=J.intensity,N.shadowBias=J.bias,N.shadowNormalBias=J.normalBias,N.shadowRadius=J.radius,N.shadowMapSize=J.mapSize,i.directionalShadow[m]=N,i.directionalShadowMap[m]=$,i.directionalShadowMatrix[m]=I.shadow.matrix,_++}i.directional[m]=G,m++}else if(I.isSpotLight){const G=e.get(I);G.position.setFromMatrixPosition(I.matrixWorld),G.color.copy(L).multiplyScalar(H),G.distance=k,G.coneCos=Math.cos(I.angle),G.penumbraCos=Math.cos(I.angle*(1-I.penumbra)),G.decay=I.decay,i.spot[g]=G;const J=I.shadow;if(I.map&&(i.spotLightMap[C]=I.map,C++,J.updateMatrices(I),I.castShadow&&M++),i.spotLightMatrix[g]=J.matrix,I.castShadow){const N=t.get(I);N.shadowIntensity=J.intensity,N.shadowBias=J.bias,N.shadowNormalBias=J.normalBias,N.shadowRadius=J.radius,N.shadowMapSize=J.mapSize,i.spotShadow[g]=N,i.spotShadowMap[g]=$,E++}g++}else if(I.isRectAreaLight){const G=e.get(I);G.color.copy(L).multiplyScalar(H),G.halfWidth.set(I.width*.5,0,0),G.halfHeight.set(0,I.height*.5,0),i.rectArea[x]=G,x++}else if(I.isPointLight){const G=e.get(I);if(G.color.copy(I.color).multiplyScalar(I.intensity),G.distance=I.distance,G.decay=I.decay,I.castShadow){const J=I.shadow,N=t.get(I);N.shadowIntensity=J.intensity,N.shadowBias=J.bias,N.shadowNormalBias=J.normalBias,N.shadowRadius=J.radius,N.shadowMapSize=J.mapSize,N.shadowCameraNear=J.camera.near,N.shadowCameraFar=J.camera.far,i.pointShadow[v]=N,i.pointShadowMap[v]=$,i.pointShadowMatrix[v]=I.shadow.matrix,w++}i.point[v]=G,v++}else if(I.isHemisphereLight){const G=e.get(I);G.skyColor.copy(I.color).multiplyScalar(H),G.groundColor.copy(I.groundColor).multiplyScalar(H),i.hemi[y]=G,y++}}x>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ft.LTC_FLOAT_1,i.rectAreaLTC2=ft.LTC_FLOAT_2):(i.rectAreaLTC1=ft.LTC_HALF_1,i.rectAreaLTC2=ft.LTC_HALF_2)),i.ambient[0]=c,i.ambient[1]=f,i.ambient[2]=h;const R=i.hash;(R.directionalLength!==m||R.pointLength!==v||R.spotLength!==g||R.rectAreaLength!==x||R.hemiLength!==y||R.numDirectionalShadows!==_||R.numPointShadows!==w||R.numSpotShadows!==E||R.numSpotMaps!==C||R.numLightProbes!==T)&&(i.directional.length=m,i.spot.length=g,i.rectArea.length=x,i.point.length=v,i.hemi.length=y,i.directionalShadow.length=_,i.directionalShadowMap.length=_,i.pointShadow.length=w,i.pointShadowMap.length=w,i.spotShadow.length=E,i.spotShadowMap.length=E,i.directionalShadowMatrix.length=_,i.pointShadowMatrix.length=w,i.spotLightMatrix.length=E+C-M,i.spotLightMap.length=C,i.numSpotLightShadowsWithMaps=M,i.numLightProbes=T,R.directionalLength=m,R.pointLength=v,R.spotLength=g,R.rectAreaLength=x,R.hemiLength=y,R.numDirectionalShadows=_,R.numPointShadows=w,R.numSpotShadows=E,R.numSpotMaps=C,R.numLightProbes=T,i.version=nj++)}function l(u,c){let f=0,h=0,m=0,v=0,g=0;const x=c.matrixWorldInverse;for(let y=0,_=u.length;y<_;y++){const w=u[y];if(w.isDirectionalLight){const E=i.directional[f];E.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),E.direction.sub(r),E.direction.transformDirection(x),f++}else if(w.isSpotLight){const E=i.spot[m];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(x),E.direction.setFromMatrixPosition(w.matrixWorld),r.setFromMatrixPosition(w.target.matrixWorld),E.direction.sub(r),E.direction.transformDirection(x),m++}else if(w.isRectAreaLight){const E=i.rectArea[v];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(x),o.identity(),s.copy(w.matrixWorld),s.premultiply(x),o.extractRotation(s),E.halfWidth.set(w.width*.5,0,0),E.halfHeight.set(0,w.height*.5,0),E.halfWidth.applyMatrix4(o),E.halfHeight.applyMatrix4(o),v++}else if(w.isPointLight){const E=i.point[h];E.position.setFromMatrixPosition(w.matrixWorld),E.position.applyMatrix4(x),h++}else if(w.isHemisphereLight){const E=i.hemi[g];E.direction.setFromMatrixPosition(w.matrixWorld),E.direction.transformDirection(x),g++}}}return{setup:a,setupView:l,state:i}}function H2(n){const e=new rj(n),t=[],i=[];function r(c){u.camera=c,t.length=0,i.length=0}function s(c){t.push(c)}function o(c){i.push(c)}function a(){e.setup(t)}function l(c){e.setupView(t,c)}const u={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function sj(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new H2(n),e.set(r,[a])):s>=o.length?(a=new H2(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}class Nb extends Qi{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=HL,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Lb extends Qi{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const oj=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,aj=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function lj(n,e,t){let i=new _m;const r=new Fe,s=new Fe,o=new sn,a=new Nb({depthPacking:VL}),l=new Lb,u={},c=t.maxTextureSize,f={[Na]:Rr,[Rr]:Na,[Bo]:Bo},h=new Ws({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Fe},radius:{value:4}},vertexShader:oj,fragmentShader:aj}),m=h.clone();m.defines.HORIZONTAL_PASS=1;const v=new Kt;v.setAttribute("position",new Mn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const g=new hi(v,h),x=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=Fx;let y=this.type;this.render=function(M,T,R){if(x.enabled===!1||x.autoUpdate===!1&&x.needsUpdate===!1||M.length===0)return;const A=n.getRenderTarget(),D=n.getActiveCubeFace(),I=n.getActiveMipmapLevel(),L=n.state;L.setBlending(Ca),L.buffers.color.setClear(1,1,1,1),L.buffers.depth.setTest(!0),L.setScissorTest(!1);const H=y!==to&&this.type===to,k=y===to&&this.type!==to;for(let $=0,G=M.length;$<G;$++){const J=M[$],N=J.shadow;if(N===void 0){console.warn("THREE.WebGLShadowMap:",J,"has no shadow.");continue}if(N.autoUpdate===!1&&N.needsUpdate===!1)continue;r.copy(N.mapSize);const W=N.getFrameExtents();if(r.multiply(W),s.copy(N.mapSize),(r.x>c||r.y>c)&&(r.x>c&&(s.x=Math.floor(c/W.x),r.x=s.x*W.x,N.mapSize.x=s.x),r.y>c&&(s.y=Math.floor(c/W.y),r.y=s.y*W.y,N.mapSize.y=s.y)),N.map===null||H===!0||k===!0){const ee=this.type!==to?{minFilter:Oi,magFilter:Oi}:{};N.map!==null&&N.map.dispose(),N.map=new Vs(r.x,r.y,ee),N.map.texture.name=J.name+".shadowMap",N.camera.updateProjectionMatrix()}n.setRenderTarget(N.map),n.clear();const X=N.getViewportCount();for(let ee=0;ee<X;ee++){const te=N.getViewport(ee);o.set(s.x*te.x,s.y*te.y,s.x*te.z,s.y*te.w),L.viewport(o),N.updateMatrices(J,ee),i=N.getFrustum(),E(T,R,N.camera,J,this.type)}N.isPointLightShadow!==!0&&this.type===to&&_(N,R),N.needsUpdate=!1}y=this.type,x.needsUpdate=!1,n.setRenderTarget(A,D,I)};function _(M,T){const R=e.update(g);h.defines.VSM_SAMPLES!==M.blurSamples&&(h.defines.VSM_SAMPLES=M.blurSamples,m.defines.VSM_SAMPLES=M.blurSamples,h.needsUpdate=!0,m.needsUpdate=!0),M.mapPass===null&&(M.mapPass=new Vs(r.x,r.y)),h.uniforms.shadow_pass.value=M.map.texture,h.uniforms.resolution.value=M.mapSize,h.uniforms.radius.value=M.radius,n.setRenderTarget(M.mapPass),n.clear(),n.renderBufferDirect(T,null,R,h,g,null),m.uniforms.shadow_pass.value=M.mapPass.texture,m.uniforms.resolution.value=M.mapSize,m.uniforms.radius.value=M.radius,n.setRenderTarget(M.map),n.clear(),n.renderBufferDirect(T,null,R,m,g,null)}function w(M,T,R,A){let D=null;const I=R.isPointLight===!0?M.customDistanceMaterial:M.customDepthMaterial;if(I!==void 0)D=I;else if(D=R.isPointLight===!0?l:a,n.localClippingEnabled&&T.clipShadows===!0&&Array.isArray(T.clippingPlanes)&&T.clippingPlanes.length!==0||T.displacementMap&&T.displacementScale!==0||T.alphaMap&&T.alphaTest>0||T.map&&T.alphaTest>0){const L=D.uuid,H=T.uuid;let k=u[L];k===void 0&&(k={},u[L]=k);let $=k[H];$===void 0&&($=D.clone(),k[H]=$,T.addEventListener("dispose",C)),D=$}if(D.visible=T.visible,D.wireframe=T.wireframe,A===to?D.side=T.shadowSide!==null?T.shadowSide:T.side:D.side=T.shadowSide!==null?T.shadowSide:f[T.side],D.alphaMap=T.alphaMap,D.alphaTest=T.alphaTest,D.map=T.map,D.clipShadows=T.clipShadows,D.clippingPlanes=T.clippingPlanes,D.clipIntersection=T.clipIntersection,D.displacementMap=T.displacementMap,D.displacementScale=T.displacementScale,D.displacementBias=T.displacementBias,D.wireframeLinewidth=T.wireframeLinewidth,D.linewidth=T.linewidth,R.isPointLight===!0&&D.isMeshDistanceMaterial===!0){const L=n.properties.get(D);L.light=R}return D}function E(M,T,R,A,D){if(M.visible===!1)return;if(M.layers.test(T.layers)&&(M.isMesh||M.isLine||M.isPoints)&&(M.castShadow||M.receiveShadow&&D===to)&&(!M.frustumCulled||i.intersectsObject(M))){M.modelViewMatrix.multiplyMatrices(R.matrixWorldInverse,M.matrixWorld);const H=e.update(M),k=M.material;if(Array.isArray(k)){const $=H.groups;for(let G=0,J=$.length;G<J;G++){const N=$[G],W=k[N.materialIndex];if(W&&W.visible){const X=w(M,W,A,D);M.onBeforeShadow(n,M,T,R,H,X,N),n.renderBufferDirect(R,null,H,X,M,N),M.onAfterShadow(n,M,T,R,H,X,N)}}}else if(k.visible){const $=w(M,k,A,D);M.onBeforeShadow(n,M,T,R,H,$,null),n.renderBufferDirect(R,null,H,$,M,null),M.onAfterShadow(n,M,T,R,H,$,null)}}const L=M.children;for(let H=0,k=L.length;H<k;H++)E(L[H],T,R,A,D)}function C(M){M.target.removeEventListener("dispose",C);for(const R in u){const A=u[R],D=M.target.uuid;D in A&&(A[D].dispose(),delete A[D])}}}function uj(n){function e(){let re=!1;const He=new sn;let Oe=null;const Be=new sn(0,0,0,0);return{setMask:function(tt){Oe!==tt&&!re&&(n.colorMask(tt,tt,tt,tt),Oe=tt)},setLocked:function(tt){re=tt},setClear:function(tt,Et,Bt,en,yn){yn===!0&&(tt*=en,Et*=en,Bt*=en),He.set(tt,Et,Bt,en),Be.equals(He)===!1&&(n.clearColor(tt,Et,Bt,en),Be.copy(He))},reset:function(){re=!1,Oe=null,Be.set(-1,0,0,0)}}}function t(){let re=!1,He=null,Oe=null,Be=null;return{setTest:function(tt){tt?pe(n.DEPTH_TEST):ae(n.DEPTH_TEST)},setMask:function(tt){He!==tt&&!re&&(n.depthMask(tt),He=tt)},setFunc:function(tt){if(Oe!==tt){switch(tt){case SL:n.depthFunc(n.NEVER);break;case ML:n.depthFunc(n.ALWAYS);break;case EL:n.depthFunc(n.LESS);break;case Lp:n.depthFunc(n.LEQUAL);break;case bL:n.depthFunc(n.EQUAL);break;case AL:n.depthFunc(n.GEQUAL);break;case CL:n.depthFunc(n.GREATER);break;case DL:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Oe=tt}},setLocked:function(tt){re=tt},setClear:function(tt){Be!==tt&&(n.clearDepth(tt),Be=tt)},reset:function(){re=!1,He=null,Oe=null,Be=null}}}function i(){let re=!1,He=null,Oe=null,Be=null,tt=null,Et=null,Bt=null,en=null,yn=null;return{setTest:function(Wt){re||(Wt?pe(n.STENCIL_TEST):ae(n.STENCIL_TEST))},setMask:function(Wt){He!==Wt&&!re&&(n.stencilMask(Wt),He=Wt)},setFunc:function(Wt,Un,Nn){(Oe!==Wt||Be!==Un||tt!==Nn)&&(n.stencilFunc(Wt,Un,Nn),Oe=Wt,Be=Un,tt=Nn)},setOp:function(Wt,Un,Nn){(Et!==Wt||Bt!==Un||en!==Nn)&&(n.stencilOp(Wt,Un,Nn),Et=Wt,Bt=Un,en=Nn)},setLocked:function(Wt){re=Wt},setClear:function(Wt){yn!==Wt&&(n.clearStencil(Wt),yn=Wt)},reset:function(){re=!1,He=null,Oe=null,Be=null,tt=null,Et=null,Bt=null,en=null,yn=null}}}const r=new e,s=new t,o=new i,a=new WeakMap,l=new WeakMap;let u={},c={},f=new WeakMap,h=[],m=null,v=!1,g=null,x=null,y=null,_=null,w=null,E=null,C=null,M=new mt(0,0,0),T=0,R=!1,A=null,D=null,I=null,L=null,H=null;const k=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let $=!1,G=0;const J=n.getParameter(n.VERSION);J.indexOf("WebGL")!==-1?(G=parseFloat(/^WebGL (\d)/.exec(J)[1]),$=G>=1):J.indexOf("OpenGL ES")!==-1&&(G=parseFloat(/^OpenGL ES (\d)/.exec(J)[1]),$=G>=2);let N=null,W={};const X=n.getParameter(n.SCISSOR_BOX),ee=n.getParameter(n.VIEWPORT),te=new sn().fromArray(X),ce=new sn().fromArray(ee);function Q(re,He,Oe,Be){const tt=new Uint8Array(4),Et=n.createTexture();n.bindTexture(re,Et),n.texParameteri(re,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(re,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Bt=0;Bt<Oe;Bt++)re===n.TEXTURE_3D||re===n.TEXTURE_2D_ARRAY?n.texImage3D(He,0,n.RGBA,1,1,Be,0,n.RGBA,n.UNSIGNED_BYTE,tt):n.texImage2D(He+Bt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,tt);return Et}const le={};le[n.TEXTURE_2D]=Q(n.TEXTURE_2D,n.TEXTURE_2D,1),le[n.TEXTURE_CUBE_MAP]=Q(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),le[n.TEXTURE_2D_ARRAY]=Q(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),le[n.TEXTURE_3D]=Q(n.TEXTURE_3D,n.TEXTURE_3D,1,1),r.setClear(0,0,0,1),s.setClear(1),o.setClear(0),pe(n.DEPTH_TEST),s.setFunc(Lp),ke(!1),Me(bM),pe(n.CULL_FACE),Se(Ca);function pe(re){u[re]!==!0&&(n.enable(re),u[re]=!0)}function ae(re){u[re]!==!1&&(n.disable(re),u[re]=!1)}function Te(re,He){return c[re]!==He?(n.bindFramebuffer(re,He),c[re]=He,re===n.DRAW_FRAMEBUFFER&&(c[n.FRAMEBUFFER]=He),re===n.FRAMEBUFFER&&(c[n.DRAW_FRAMEBUFFER]=He),!0):!1}function Pe(re,He){let Oe=h,Be=!1;if(re){Oe=f.get(He),Oe===void 0&&(Oe=[],f.set(He,Oe));const tt=re.textures;if(Oe.length!==tt.length||Oe[0]!==n.COLOR_ATTACHMENT0){for(let Et=0,Bt=tt.length;Et<Bt;Et++)Oe[Et]=n.COLOR_ATTACHMENT0+Et;Oe.length=tt.length,Be=!0}}else Oe[0]!==n.BACK&&(Oe[0]=n.BACK,Be=!0);Be&&n.drawBuffers(Oe)}function Ae(re){return m!==re?(n.useProgram(re),m=re,!0):!1}const We={[dl]:n.FUNC_ADD,[sL]:n.FUNC_SUBTRACT,[oL]:n.FUNC_REVERSE_SUBTRACT};We[aL]=n.MIN,We[lL]=n.MAX;const z={[uL]:n.ZERO,[cL]:n.ONE,[fL]:n.SRC_COLOR,[fy]:n.SRC_ALPHA,[vL]:n.SRC_ALPHA_SATURATE,[mL]:n.DST_COLOR,[dL]:n.DST_ALPHA,[hL]:n.ONE_MINUS_SRC_COLOR,[hy]:n.ONE_MINUS_SRC_ALPHA,[gL]:n.ONE_MINUS_DST_COLOR,[pL]:n.ONE_MINUS_DST_ALPHA,[yL]:n.CONSTANT_COLOR,[xL]:n.ONE_MINUS_CONSTANT_COLOR,[_L]:n.CONSTANT_ALPHA,[wL]:n.ONE_MINUS_CONSTANT_ALPHA};function Se(re,He,Oe,Be,tt,Et,Bt,en,yn,Wt){if(re===Ca){v===!0&&(ae(n.BLEND),v=!1);return}if(v===!1&&(pe(n.BLEND),v=!0),re!==rL){if(re!==g||Wt!==R){if((x!==dl||w!==dl)&&(n.blendEquation(n.FUNC_ADD),x=dl,w=dl),Wt)switch(re){case ju:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case AM:n.blendFunc(n.ONE,n.ONE);break;case CM:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case DM:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",re);break}else switch(re){case ju:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case AM:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case CM:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case DM:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",re);break}y=null,_=null,E=null,C=null,M.set(0,0,0),T=0,g=re,R=Wt}return}tt=tt||He,Et=Et||Oe,Bt=Bt||Be,(He!==x||tt!==w)&&(n.blendEquationSeparate(We[He],We[tt]),x=He,w=tt),(Oe!==y||Be!==_||Et!==E||Bt!==C)&&(n.blendFuncSeparate(z[Oe],z[Be],z[Et],z[Bt]),y=Oe,_=Be,E=Et,C=Bt),(en.equals(M)===!1||yn!==T)&&(n.blendColor(en.r,en.g,en.b,yn),M.copy(en),T=yn),g=re,R=!1}function De(re,He){re.side===Bo?ae(n.CULL_FACE):pe(n.CULL_FACE);let Oe=re.side===Rr;He&&(Oe=!Oe),ke(Oe),re.blending===ju&&re.transparent===!1?Se(Ca):Se(re.blending,re.blendEquation,re.blendSrc,re.blendDst,re.blendEquationAlpha,re.blendSrcAlpha,re.blendDstAlpha,re.blendColor,re.blendAlpha,re.premultipliedAlpha),s.setFunc(re.depthFunc),s.setTest(re.depthTest),s.setMask(re.depthWrite),r.setMask(re.colorWrite);const Be=re.stencilWrite;o.setTest(Be),Be&&(o.setMask(re.stencilWriteMask),o.setFunc(re.stencilFunc,re.stencilRef,re.stencilFuncMask),o.setOp(re.stencilFail,re.stencilZFail,re.stencilZPass)),Ge(re.polygonOffset,re.polygonOffsetFactor,re.polygonOffsetUnits),re.alphaToCoverage===!0?pe(n.SAMPLE_ALPHA_TO_COVERAGE):ae(n.SAMPLE_ALPHA_TO_COVERAGE)}function ke(re){A!==re&&(re?n.frontFace(n.CW):n.frontFace(n.CCW),A=re)}function Me(re){re!==tL?(pe(n.CULL_FACE),re!==D&&(re===bM?n.cullFace(n.BACK):re===nL?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ae(n.CULL_FACE),D=re}function Qe(re){re!==I&&($&&n.lineWidth(re),I=re)}function Ge(re,He,Oe){re?(pe(n.POLYGON_OFFSET_FILL),(L!==He||H!==Oe)&&(n.polygonOffset(He,Oe),L=He,H=Oe)):ae(n.POLYGON_OFFSET_FILL)}function Ze(re){re?pe(n.SCISSOR_TEST):ae(n.SCISSOR_TEST)}function Y(re){re===void 0&&(re=n.TEXTURE0+k-1),N!==re&&(n.activeTexture(re),N=re)}function B(re,He,Oe){Oe===void 0&&(N===null?Oe=n.TEXTURE0+k-1:Oe=N);let Be=W[Oe];Be===void 0&&(Be={type:void 0,texture:void 0},W[Oe]=Be),(Be.type!==re||Be.texture!==He)&&(N!==Oe&&(n.activeTexture(Oe),N=Oe),n.bindTexture(re,He||le[re]),Be.type=re,Be.texture=He)}function we(){const re=W[N];re!==void 0&&re.type!==void 0&&(n.bindTexture(re.type,null),re.type=void 0,re.texture=void 0)}function U(){try{n.compressedTexImage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function q(){try{n.compressedTexImage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Z(){try{n.texSubImage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function he(){try{n.texSubImage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function fe(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function ue(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Ne(){try{n.texStorage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function ge(){try{n.texStorage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Ee(){try{n.texImage2D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function Le(){try{n.texImage3D.apply(n,arguments)}catch(re){console.error("THREE.WebGLState:",re)}}function nt(re){te.equals(re)===!1&&(n.scissor(re.x,re.y,re.z,re.w),te.copy(re))}function Ye(re){ce.equals(re)===!1&&(n.viewport(re.x,re.y,re.z,re.w),ce.copy(re))}function ne(re,He){let Oe=l.get(He);Oe===void 0&&(Oe=new WeakMap,l.set(He,Oe));let Be=Oe.get(re);Be===void 0&&(Be=n.getUniformBlockIndex(He,re.name),Oe.set(re,Be))}function Re(re,He){const Be=l.get(He).get(re);a.get(He)!==Be&&(n.uniformBlockBinding(He,Be,re.__bindingPointIndex),a.set(He,Be))}function et(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},N=null,W={},c={},f=new WeakMap,h=[],m=null,v=!1,g=null,x=null,y=null,_=null,w=null,E=null,C=null,M=new mt(0,0,0),T=0,R=!1,A=null,D=null,I=null,L=null,H=null,te.set(0,0,n.canvas.width,n.canvas.height),ce.set(0,0,n.canvas.width,n.canvas.height),r.reset(),s.reset(),o.reset()}return{buffers:{color:r,depth:s,stencil:o},enable:pe,disable:ae,bindFramebuffer:Te,drawBuffers:Pe,useProgram:Ae,setBlending:Se,setMaterial:De,setFlipSided:ke,setCullFace:Me,setLineWidth:Qe,setPolygonOffset:Ge,setScissorTest:Ze,activeTexture:Y,bindTexture:B,unbindTexture:we,compressedTexImage2D:U,compressedTexImage3D:q,texImage2D:Ee,texImage3D:Le,updateUBOMapping:ne,uniformBlockBinding:Re,texStorage2D:Ne,texStorage3D:ge,texSubImage2D:Z,texSubImage3D:he,compressedTexSubImage2D:fe,compressedTexSubImage3D:ue,scissor:nt,viewport:Ye,reset:et}}function cj(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function fj(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function hj(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function NM(n,e,t,i){const r=dj(i);switch(t){case _b:return n*e;case Sb:return n*e;case Mb:return n*e*2;case Bx:return n*e/r.components*r.byteLength;case gm:return n*e/r.components*r.byteLength;case Eb:return n*e*2/r.components*r.byteLength;case Ux:return n*e*2/r.components*r.byteLength;case wb:return n*e*3/r.components*r.byteLength;case pr:return n*e*4/r.components*r.byteLength;case kx:return n*e*4/r.components*r.byteLength;case ap:case lp:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case up:case cp:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case py:case gy:return Math.max(n,16)*Math.max(e,8)/4;case dy:case my:return Math.max(n,8)*Math.max(e,8)/2;case vy:case yy:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case xy:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case _y:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case wy:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case Sy:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case My:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Ey:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case by:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case Ay:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Cy:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case Dy:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case Ty:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Py:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Ry:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Iy:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case Fy:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case fp:case Ny:case Ly:return Math.ceil(n/4)*Math.ceil(e/4)*16;case bb:case Oy:return Math.ceil(n/4)*Math.ceil(e/4)*8;case zy:case By:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function dj(n){switch(n){case go:case vb:return{byteLength:1,components:1};case mh:case yb:case gc:return{byteLength:2,components:1};case Ox:case zx:return{byteLength:2,components:4};case Oa:case Lx:case Tr:return{byteLength:4,components:1};case xb:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const pj={contain:cj,cover:fj,fill:hj,getByteLength:NM};function mj(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new Fe,c=new WeakMap;let f;const h=new WeakMap;let m=!1;try{m=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function v(Y,B){return m?new OffscreenCanvas(Y,B):qp("canvas")}function g(Y,B,we){let U=1;const q=Ze(Y);if((q.width>we||q.height>we)&&(U=we/Math.max(q.width,q.height)),U<1)if(typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&Y instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&Y instanceof ImageBitmap||typeof VideoFrame<"u"&&Y instanceof VideoFrame){const Z=Math.floor(U*q.width),he=Math.floor(U*q.height);f===void 0&&(f=v(Z,he));const fe=B?v(Z,he):f;return fe.width=Z,fe.height=he,fe.getContext("2d").drawImage(Y,0,0,Z,he),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+q.width+"x"+q.height+") to ("+Z+"x"+he+")."),fe}else return"data"in Y&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+q.width+"x"+q.height+")."),Y;return Y}function x(Y){return Y.generateMipmaps&&Y.minFilter!==Oi&&Y.minFilter!==ai}function y(Y){n.generateMipmap(Y)}function _(Y,B,we,U,q=!1){if(Y!==null){if(n[Y]!==void 0)return n[Y];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+Y+"'")}let Z=B;if(B===n.RED&&(we===n.FLOAT&&(Z=n.R32F),we===n.HALF_FLOAT&&(Z=n.R16F),we===n.UNSIGNED_BYTE&&(Z=n.R8)),B===n.RED_INTEGER&&(we===n.UNSIGNED_BYTE&&(Z=n.R8UI),we===n.UNSIGNED_SHORT&&(Z=n.R16UI),we===n.UNSIGNED_INT&&(Z=n.R32UI),we===n.BYTE&&(Z=n.R8I),we===n.SHORT&&(Z=n.R16I),we===n.INT&&(Z=n.R32I)),B===n.RG&&(we===n.FLOAT&&(Z=n.RG32F),we===n.HALF_FLOAT&&(Z=n.RG16F),we===n.UNSIGNED_BYTE&&(Z=n.RG8)),B===n.RG_INTEGER&&(we===n.UNSIGNED_BYTE&&(Z=n.RG8UI),we===n.UNSIGNED_SHORT&&(Z=n.RG16UI),we===n.UNSIGNED_INT&&(Z=n.RG32UI),we===n.BYTE&&(Z=n.RG8I),we===n.SHORT&&(Z=n.RG16I),we===n.INT&&(Z=n.RG32I)),B===n.RGB&&we===n.UNSIGNED_INT_5_9_9_9_REV&&(Z=n.RGB9_E5),B===n.RGBA){const he=q?Hp:vn.getTransfer(U);we===n.FLOAT&&(Z=n.RGBA32F),we===n.HALF_FLOAT&&(Z=n.RGBA16F),we===n.UNSIGNED_BYTE&&(Z=he===Cn?n.SRGB8_ALPHA8:n.RGBA8),we===n.UNSIGNED_SHORT_4_4_4_4&&(Z=n.RGBA4),we===n.UNSIGNED_SHORT_5_5_5_1&&(Z=n.RGB5_A1)}return(Z===n.R16F||Z===n.R32F||Z===n.RG16F||Z===n.RG32F||Z===n.RGBA16F||Z===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Z}function w(Y,B){let we;return Y?B===null||B===Oa||B===rc?we=n.DEPTH24_STENCIL8:B===Tr?we=n.DEPTH32F_STENCIL8:B===mh&&(we=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):B===null||B===Oa||B===rc?we=n.DEPTH_COMPONENT24:B===Tr?we=n.DEPTH_COMPONENT32F:B===mh&&(we=n.DEPTH_COMPONENT16),we}function E(Y,B){return x(Y)===!0||Y.isFramebufferTexture&&Y.minFilter!==Oi&&Y.minFilter!==ai?Math.log2(Math.max(B.width,B.height))+1:Y.mipmaps!==void 0&&Y.mipmaps.length>0?Y.mipmaps.length:Y.isCompressedTexture&&Array.isArray(Y.image)?B.mipmaps.length:1}function C(Y){const B=Y.target;B.removeEventListener("dispose",C),T(B),B.isVideoTexture&&c.delete(B)}function M(Y){const B=Y.target;B.removeEventListener("dispose",M),A(B)}function T(Y){const B=i.get(Y);if(B.__webglInit===void 0)return;const we=Y.source,U=h.get(we);if(U){const q=U[B.__cacheKey];q.usedTimes--,q.usedTimes===0&&R(Y),Object.keys(U).length===0&&h.delete(we)}i.remove(Y)}function R(Y){const B=i.get(Y);n.deleteTexture(B.__webglTexture);const we=Y.source,U=h.get(we);delete U[B.__cacheKey],o.memory.textures--}function A(Y){const B=i.get(Y);if(Y.depthTexture&&Y.depthTexture.dispose(),Y.isWebGLCubeRenderTarget)for(let U=0;U<6;U++){if(Array.isArray(B.__webglFramebuffer[U]))for(let q=0;q<B.__webglFramebuffer[U].length;q++)n.deleteFramebuffer(B.__webglFramebuffer[U][q]);else n.deleteFramebuffer(B.__webglFramebuffer[U]);B.__webglDepthbuffer&&n.deleteRenderbuffer(B.__webglDepthbuffer[U])}else{if(Array.isArray(B.__webglFramebuffer))for(let U=0;U<B.__webglFramebuffer.length;U++)n.deleteFramebuffer(B.__webglFramebuffer[U]);else n.deleteFramebuffer(B.__webglFramebuffer);if(B.__webglDepthbuffer&&n.deleteRenderbuffer(B.__webglDepthbuffer),B.__webglMultisampledFramebuffer&&n.deleteFramebuffer(B.__webglMultisampledFramebuffer),B.__webglColorRenderbuffer)for(let U=0;U<B.__webglColorRenderbuffer.length;U++)B.__webglColorRenderbuffer[U]&&n.deleteRenderbuffer(B.__webglColorRenderbuffer[U]);B.__webglDepthRenderbuffer&&n.deleteRenderbuffer(B.__webglDepthRenderbuffer)}const we=Y.textures;for(let U=0,q=we.length;U<q;U++){const Z=i.get(we[U]);Z.__webglTexture&&(n.deleteTexture(Z.__webglTexture),o.memory.textures--),i.remove(we[U])}i.remove(Y)}let D=0;function I(){D=0}function L(){const Y=D;return Y>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+Y+" texture units while this GPU supports only "+r.maxTextures),D+=1,Y}function H(Y){const B=[];return B.push(Y.wrapS),B.push(Y.wrapT),B.push(Y.wrapR||0),B.push(Y.magFilter),B.push(Y.minFilter),B.push(Y.anisotropy),B.push(Y.internalFormat),B.push(Y.format),B.push(Y.type),B.push(Y.generateMipmaps),B.push(Y.premultiplyAlpha),B.push(Y.flipY),B.push(Y.unpackAlignment),B.push(Y.colorSpace),B.join()}function k(Y,B){const we=i.get(Y);if(Y.isVideoTexture&&Qe(Y),Y.isRenderTargetTexture===!1&&Y.version>0&&we.__version!==Y.version){const U=Y.image;if(U===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(U.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ce(we,Y,B);return}}t.bindTexture(n.TEXTURE_2D,we.__webglTexture,n.TEXTURE0+B)}function $(Y,B){const we=i.get(Y);if(Y.version>0&&we.__version!==Y.version){ce(we,Y,B);return}t.bindTexture(n.TEXTURE_2D_ARRAY,we.__webglTexture,n.TEXTURE0+B)}function G(Y,B){const we=i.get(Y);if(Y.version>0&&we.__version!==Y.version){ce(we,Y,B);return}t.bindTexture(n.TEXTURE_3D,we.__webglTexture,n.TEXTURE0+B)}function J(Y,B){const we=i.get(Y);if(Y.version>0&&we.__version!==Y.version){Q(we,Y,B);return}t.bindTexture(n.TEXTURE_CUBE_MAP,we.__webglTexture,n.TEXTURE0+B)}const N={[ic]:n.REPEAT,[zs]:n.CLAMP_TO_EDGE,[Bp]:n.MIRRORED_REPEAT},W={[Oi]:n.NEAREST,[gb]:n.NEAREST_MIPMAP_NEAREST,[Lf]:n.NEAREST_MIPMAP_LINEAR,[ai]:n.LINEAR,[op]:n.LINEAR_MIPMAP_NEAREST,[ko]:n.LINEAR_MIPMAP_LINEAR},X={[GL]:n.NEVER,[ZL]:n.ALWAYS,[jL]:n.LESS,[Cb]:n.LEQUAL,[qL]:n.EQUAL,[YL]:n.GEQUAL,[XL]:n.GREATER,[$L]:n.NOTEQUAL};function ee(Y,B){if(B.type===Tr&&e.has("OES_texture_float_linear")===!1&&(B.magFilter===ai||B.magFilter===op||B.magFilter===Lf||B.magFilter===ko||B.minFilter===ai||B.minFilter===op||B.minFilter===Lf||B.minFilter===ko)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri(Y,n.TEXTURE_WRAP_S,N[B.wrapS]),n.texParameteri(Y,n.TEXTURE_WRAP_T,N[B.wrapT]),(Y===n.TEXTURE_3D||Y===n.TEXTURE_2D_ARRAY)&&n.texParameteri(Y,n.TEXTURE_WRAP_R,N[B.wrapR]),n.texParameteri(Y,n.TEXTURE_MAG_FILTER,W[B.magFilter]),n.texParameteri(Y,n.TEXTURE_MIN_FILTER,W[B.minFilter]),B.compareFunction&&(n.texParameteri(Y,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(Y,n.TEXTURE_COMPARE_FUNC,X[B.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(B.magFilter===Oi||B.minFilter!==Lf&&B.minFilter!==ko||B.type===Tr&&e.has("OES_texture_float_linear")===!1)return;if(B.anisotropy>1||i.get(B).__currentAnisotropy){const we=e.get("EXT_texture_filter_anisotropic");n.texParameterf(Y,we.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,r.getMaxAnisotropy())),i.get(B).__currentAnisotropy=B.anisotropy}}}function te(Y,B){let we=!1;Y.__webglInit===void 0&&(Y.__webglInit=!0,B.addEventListener("dispose",C));const U=B.source;let q=h.get(U);q===void 0&&(q={},h.set(U,q));const Z=H(B);if(Z!==Y.__cacheKey){q[Z]===void 0&&(q[Z]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,we=!0),q[Z].usedTimes++;const he=q[Y.__cacheKey];he!==void 0&&(q[Y.__cacheKey].usedTimes--,he.usedTimes===0&&R(B)),Y.__cacheKey=Z,Y.__webglTexture=q[Z].texture}return we}function ce(Y,B,we){let U=n.TEXTURE_2D;(B.isDataArrayTexture||B.isCompressedArrayTexture)&&(U=n.TEXTURE_2D_ARRAY),B.isData3DTexture&&(U=n.TEXTURE_3D);const q=te(Y,B),Z=B.source;t.bindTexture(U,Y.__webglTexture,n.TEXTURE0+we);const he=i.get(Z);if(Z.version!==he.__version||q===!0){t.activeTexture(n.TEXTURE0+we);const fe=vn.getPrimaries(vn.workingColorSpace),ue=B.colorSpace===ya?null:vn.getPrimaries(B.colorSpace),Ne=B.colorSpace===ya||fe===ue?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,B.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,B.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Ne);let ge=g(B.image,!1,r.maxTextureSize);ge=Ge(B,ge);const Ee=s.convert(B.format,B.colorSpace),Le=s.convert(B.type);let nt=_(B.internalFormat,Ee,Le,B.colorSpace,B.isVideoTexture);ee(U,B);let Ye;const ne=B.mipmaps,Re=B.isVideoTexture!==!0,et=he.__version===void 0||q===!0,re=Z.dataReady,He=E(B,ge);if(B.isDepthTexture)nt=w(B.format===sc,B.type),et&&(Re?t.texStorage2D(n.TEXTURE_2D,1,nt,ge.width,ge.height):t.texImage2D(n.TEXTURE_2D,0,nt,ge.width,ge.height,0,Ee,Le,null));else if(B.isDataTexture)if(ne.length>0){Re&&et&&t.texStorage2D(n.TEXTURE_2D,He,nt,ne[0].width,ne[0].height);for(let Oe=0,Be=ne.length;Oe<Be;Oe++)Ye=ne[Oe],Re?re&&t.texSubImage2D(n.TEXTURE_2D,Oe,0,0,Ye.width,Ye.height,Ee,Le,Ye.data):t.texImage2D(n.TEXTURE_2D,Oe,nt,Ye.width,Ye.height,0,Ee,Le,Ye.data);B.generateMipmaps=!1}else Re?(et&&t.texStorage2D(n.TEXTURE_2D,He,nt,ge.width,ge.height),re&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,ge.width,ge.height,Ee,Le,ge.data)):t.texImage2D(n.TEXTURE_2D,0,nt,ge.width,ge.height,0,Ee,Le,ge.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){Re&&et&&t.texStorage3D(n.TEXTURE_2D_ARRAY,He,nt,ne[0].width,ne[0].height,ge.depth);for(let Oe=0,Be=ne.length;Oe<Be;Oe++)if(Ye=ne[Oe],B.format!==pr)if(Ee!==null)if(Re){if(re)if(B.layerUpdates.size>0){const tt=NM(Ye.width,Ye.height,B.format,B.type);for(const Et of B.layerUpdates){const Bt=Ye.data.subarray(Et*tt/Ye.data.BYTES_PER_ELEMENT,(Et+1)*tt/Ye.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Oe,0,0,Et,Ye.width,Ye.height,1,Ee,Bt,0,0)}B.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Oe,0,0,0,Ye.width,Ye.height,ge.depth,Ee,Ye.data,0,0)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Oe,nt,Ye.width,Ye.height,ge.depth,0,Ye.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Re?re&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,Oe,0,0,0,Ye.width,Ye.height,ge.depth,Ee,Le,Ye.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Oe,nt,Ye.width,Ye.height,ge.depth,0,Ee,Le,Ye.data)}else{Re&&et&&t.texStorage2D(n.TEXTURE_2D,He,nt,ne[0].width,ne[0].height);for(let Oe=0,Be=ne.length;Oe<Be;Oe++)Ye=ne[Oe],B.format!==pr?Ee!==null?Re?re&&t.compressedTexSubImage2D(n.TEXTURE_2D,Oe,0,0,Ye.width,Ye.height,Ee,Ye.data):t.compressedTexImage2D(n.TEXTURE_2D,Oe,nt,Ye.width,Ye.height,0,Ye.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Re?re&&t.texSubImage2D(n.TEXTURE_2D,Oe,0,0,Ye.width,Ye.height,Ee,Le,Ye.data):t.texImage2D(n.TEXTURE_2D,Oe,nt,Ye.width,Ye.height,0,Ee,Le,Ye.data)}else if(B.isDataArrayTexture)if(Re){if(et&&t.texStorage3D(n.TEXTURE_2D_ARRAY,He,nt,ge.width,ge.height,ge.depth),re)if(B.layerUpdates.size>0){const Oe=NM(ge.width,ge.height,B.format,B.type);for(const Be of B.layerUpdates){const tt=ge.data.subarray(Be*Oe/ge.data.BYTES_PER_ELEMENT,(Be+1)*Oe/ge.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Be,ge.width,ge.height,1,Ee,Le,tt)}B.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,ge.width,ge.height,ge.depth,Ee,Le,ge.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,nt,ge.width,ge.height,ge.depth,0,Ee,Le,ge.data);else if(B.isData3DTexture)Re?(et&&t.texStorage3D(n.TEXTURE_3D,He,nt,ge.width,ge.height,ge.depth),re&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,ge.width,ge.height,ge.depth,Ee,Le,ge.data)):t.texImage3D(n.TEXTURE_3D,0,nt,ge.width,ge.height,ge.depth,0,Ee,Le,ge.data);else if(B.isFramebufferTexture){if(et)if(Re)t.texStorage2D(n.TEXTURE_2D,He,nt,ge.width,ge.height);else{let Oe=ge.width,Be=ge.height;for(let tt=0;tt<He;tt++)t.texImage2D(n.TEXTURE_2D,tt,nt,Oe,Be,0,Ee,Le,null),Oe>>=1,Be>>=1}}else if(ne.length>0){if(Re&&et){const Oe=Ze(ne[0]);t.texStorage2D(n.TEXTURE_2D,He,nt,Oe.width,Oe.height)}for(let Oe=0,Be=ne.length;Oe<Be;Oe++)Ye=ne[Oe],Re?re&&t.texSubImage2D(n.TEXTURE_2D,Oe,0,0,Ee,Le,Ye):t.texImage2D(n.TEXTURE_2D,Oe,nt,Ee,Le,Ye);B.generateMipmaps=!1}else if(Re){if(et){const Oe=Ze(ge);t.texStorage2D(n.TEXTURE_2D,He,nt,Oe.width,Oe.height)}re&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Ee,Le,ge)}else t.texImage2D(n.TEXTURE_2D,0,nt,Ee,Le,ge);x(B)&&y(U),he.__version=Z.version,B.onUpdate&&B.onUpdate(B)}Y.__version=B.version}function Q(Y,B,we){if(B.image.length!==6)return;const U=te(Y,B),q=B.source;t.bindTexture(n.TEXTURE_CUBE_MAP,Y.__webglTexture,n.TEXTURE0+we);const Z=i.get(q);if(q.version!==Z.__version||U===!0){t.activeTexture(n.TEXTURE0+we);const he=vn.getPrimaries(vn.workingColorSpace),fe=B.colorSpace===ya?null:vn.getPrimaries(B.colorSpace),ue=B.colorSpace===ya||he===fe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,B.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,B.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,ue);const Ne=B.isCompressedTexture||B.image[0].isCompressedTexture,ge=B.image[0]&&B.image[0].isDataTexture,Ee=[];for(let Be=0;Be<6;Be++)!Ne&&!ge?Ee[Be]=g(B.image[Be],!0,r.maxCubemapSize):Ee[Be]=ge?B.image[Be].image:B.image[Be],Ee[Be]=Ge(B,Ee[Be]);const Le=Ee[0],nt=s.convert(B.format,B.colorSpace),Ye=s.convert(B.type),ne=_(B.internalFormat,nt,Ye,B.colorSpace),Re=B.isVideoTexture!==!0,et=Z.__version===void 0||U===!0,re=q.dataReady;let He=E(B,Le);ee(n.TEXTURE_CUBE_MAP,B);let Oe;if(Ne){Re&&et&&t.texStorage2D(n.TEXTURE_CUBE_MAP,He,ne,Le.width,Le.height);for(let Be=0;Be<6;Be++){Oe=Ee[Be].mipmaps;for(let tt=0;tt<Oe.length;tt++){const Et=Oe[tt];B.format!==pr?nt!==null?Re?re&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,tt,0,0,Et.width,Et.height,nt,Et.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,tt,ne,Et.width,Et.height,0,Et.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Re?re&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,tt,0,0,Et.width,Et.height,nt,Ye,Et.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,tt,ne,Et.width,Et.height,0,nt,Ye,Et.data)}}}else{if(Oe=B.mipmaps,Re&&et){Oe.length>0&&He++;const Be=Ze(Ee[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,He,ne,Be.width,Be.height)}for(let Be=0;Be<6;Be++)if(ge){Re?re&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,0,0,Ee[Be].width,Ee[Be].height,nt,Ye,Ee[Be].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,ne,Ee[Be].width,Ee[Be].height,0,nt,Ye,Ee[Be].data);for(let tt=0;tt<Oe.length;tt++){const Bt=Oe[tt].image[Be].image;Re?re&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,tt+1,0,0,Bt.width,Bt.height,nt,Ye,Bt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,tt+1,ne,Bt.width,Bt.height,0,nt,Ye,Bt.data)}}else{Re?re&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,0,0,nt,Ye,Ee[Be]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,0,ne,nt,Ye,Ee[Be]);for(let tt=0;tt<Oe.length;tt++){const Et=Oe[tt];Re?re&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,tt+1,0,0,nt,Ye,Et.image[Be]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Be,tt+1,ne,nt,Ye,Et.image[Be])}}}x(B)&&y(n.TEXTURE_CUBE_MAP),Z.__version=q.version,B.onUpdate&&B.onUpdate(B)}Y.__version=B.version}function le(Y,B,we,U,q,Z){const he=s.convert(we.format,we.colorSpace),fe=s.convert(we.type),ue=_(we.internalFormat,he,fe,we.colorSpace);if(!i.get(B).__hasExternalTextures){const ge=Math.max(1,B.width>>Z),Ee=Math.max(1,B.height>>Z);q===n.TEXTURE_3D||q===n.TEXTURE_2D_ARRAY?t.texImage3D(q,Z,ue,ge,Ee,B.depth,0,he,fe,null):t.texImage2D(q,Z,ue,ge,Ee,0,he,fe,null)}t.bindFramebuffer(n.FRAMEBUFFER,Y),Me(B)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,U,q,i.get(we).__webglTexture,0,ke(B)):(q===n.TEXTURE_2D||q>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&q<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,U,q,i.get(we).__webglTexture,Z),t.bindFramebuffer(n.FRAMEBUFFER,null)}function pe(Y,B,we){if(n.bindRenderbuffer(n.RENDERBUFFER,Y),B.depthBuffer){const U=B.depthTexture,q=U&&U.isDepthTexture?U.type:null,Z=w(B.stencilBuffer,q),he=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,fe=ke(B);Me(B)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,fe,Z,B.width,B.height):we?n.renderbufferStorageMultisample(n.RENDERBUFFER,fe,Z,B.width,B.height):n.renderbufferStorage(n.RENDERBUFFER,Z,B.width,B.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,he,n.RENDERBUFFER,Y)}else{const U=B.textures;for(let q=0;q<U.length;q++){const Z=U[q],he=s.convert(Z.format,Z.colorSpace),fe=s.convert(Z.type),ue=_(Z.internalFormat,he,fe,Z.colorSpace),Ne=ke(B);we&&Me(B)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ne,ue,B.width,B.height):Me(B)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ne,ue,B.width,B.height):n.renderbufferStorage(n.RENDERBUFFER,ue,B.width,B.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ae(Y,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,Y),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(B.depthTexture).__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),k(B.depthTexture,0);const U=i.get(B.depthTexture).__webglTexture,q=ke(B);if(B.depthTexture.format===qu)Me(B)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,U,0,q):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,U,0);else if(B.depthTexture.format===sc)Me(B)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,U,0,q):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,U,0);else throw new Error("Unknown depthTexture format")}function Te(Y){const B=i.get(Y),we=Y.isWebGLCubeRenderTarget===!0;if(Y.depthTexture&&!B.__autoAllocateDepthBuffer){if(we)throw new Error("target.depthTexture not supported in Cube render targets");ae(B.__webglFramebuffer,Y)}else if(we){B.__webglDepthbuffer=[];for(let U=0;U<6;U++)t.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer[U]),B.__webglDepthbuffer[U]=n.createRenderbuffer(),pe(B.__webglDepthbuffer[U],Y,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer),B.__webglDepthbuffer=n.createRenderbuffer(),pe(B.__webglDepthbuffer,Y,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function Pe(Y,B,we){const U=i.get(Y);B!==void 0&&le(U.__webglFramebuffer,Y,Y.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),we!==void 0&&Te(Y)}function Ae(Y){const B=Y.texture,we=i.get(Y),U=i.get(B);Y.addEventListener("dispose",M);const q=Y.textures,Z=Y.isWebGLCubeRenderTarget===!0,he=q.length>1;if(he||(U.__webglTexture===void 0&&(U.__webglTexture=n.createTexture()),U.__version=B.version,o.memory.textures++),Z){we.__webglFramebuffer=[];for(let fe=0;fe<6;fe++)if(B.mipmaps&&B.mipmaps.length>0){we.__webglFramebuffer[fe]=[];for(let ue=0;ue<B.mipmaps.length;ue++)we.__webglFramebuffer[fe][ue]=n.createFramebuffer()}else we.__webglFramebuffer[fe]=n.createFramebuffer()}else{if(B.mipmaps&&B.mipmaps.length>0){we.__webglFramebuffer=[];for(let fe=0;fe<B.mipmaps.length;fe++)we.__webglFramebuffer[fe]=n.createFramebuffer()}else we.__webglFramebuffer=n.createFramebuffer();if(he)for(let fe=0,ue=q.length;fe<ue;fe++){const Ne=i.get(q[fe]);Ne.__webglTexture===void 0&&(Ne.__webglTexture=n.createTexture(),o.memory.textures++)}if(Y.samples>0&&Me(Y)===!1){we.__webglMultisampledFramebuffer=n.createFramebuffer(),we.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,we.__webglMultisampledFramebuffer);for(let fe=0;fe<q.length;fe++){const ue=q[fe];we.__webglColorRenderbuffer[fe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,we.__webglColorRenderbuffer[fe]);const Ne=s.convert(ue.format,ue.colorSpace),ge=s.convert(ue.type),Ee=_(ue.internalFormat,Ne,ge,ue.colorSpace,Y.isXRRenderTarget===!0),Le=ke(Y);n.renderbufferStorageMultisample(n.RENDERBUFFER,Le,Ee,Y.width,Y.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+fe,n.RENDERBUFFER,we.__webglColorRenderbuffer[fe])}n.bindRenderbuffer(n.RENDERBUFFER,null),Y.depthBuffer&&(we.__webglDepthRenderbuffer=n.createRenderbuffer(),pe(we.__webglDepthRenderbuffer,Y,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(Z){t.bindTexture(n.TEXTURE_CUBE_MAP,U.__webglTexture),ee(n.TEXTURE_CUBE_MAP,B);for(let fe=0;fe<6;fe++)if(B.mipmaps&&B.mipmaps.length>0)for(let ue=0;ue<B.mipmaps.length;ue++)le(we.__webglFramebuffer[fe][ue],Y,B,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+fe,ue);else le(we.__webglFramebuffer[fe],Y,B,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+fe,0);x(B)&&y(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(he){for(let fe=0,ue=q.length;fe<ue;fe++){const Ne=q[fe],ge=i.get(Ne);t.bindTexture(n.TEXTURE_2D,ge.__webglTexture),ee(n.TEXTURE_2D,Ne),le(we.__webglFramebuffer,Y,Ne,n.COLOR_ATTACHMENT0+fe,n.TEXTURE_2D,0),x(Ne)&&y(n.TEXTURE_2D)}t.unbindTexture()}else{let fe=n.TEXTURE_2D;if((Y.isWebGL3DRenderTarget||Y.isWebGLArrayRenderTarget)&&(fe=Y.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(fe,U.__webglTexture),ee(fe,B),B.mipmaps&&B.mipmaps.length>0)for(let ue=0;ue<B.mipmaps.length;ue++)le(we.__webglFramebuffer[ue],Y,B,n.COLOR_ATTACHMENT0,fe,ue);else le(we.__webglFramebuffer,Y,B,n.COLOR_ATTACHMENT0,fe,0);x(B)&&y(fe),t.unbindTexture()}Y.depthBuffer&&Te(Y)}function We(Y){const B=Y.textures;for(let we=0,U=B.length;we<U;we++){const q=B[we];if(x(q)){const Z=Y.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,he=i.get(q).__webglTexture;t.bindTexture(Z,he),y(Z),t.unbindTexture()}}}const z=[],Se=[];function De(Y){if(Y.samples>0){if(Me(Y)===!1){const B=Y.textures,we=Y.width,U=Y.height;let q=n.COLOR_BUFFER_BIT;const Z=Y.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,he=i.get(Y),fe=B.length>1;if(fe)for(let ue=0;ue<B.length;ue++)t.bindFramebuffer(n.FRAMEBUFFER,he.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ue,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,he.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ue,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,he.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,he.__webglFramebuffer);for(let ue=0;ue<B.length;ue++){if(Y.resolveDepthBuffer&&(Y.depthBuffer&&(q|=n.DEPTH_BUFFER_BIT),Y.stencilBuffer&&Y.resolveStencilBuffer&&(q|=n.STENCIL_BUFFER_BIT)),fe){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,he.__webglColorRenderbuffer[ue]);const Ne=i.get(B[ue]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Ne,0)}n.blitFramebuffer(0,0,we,U,0,0,we,U,q,n.NEAREST),l===!0&&(z.length=0,Se.length=0,z.push(n.COLOR_ATTACHMENT0+ue),Y.depthBuffer&&Y.resolveDepthBuffer===!1&&(z.push(Z),Se.push(Z),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Se)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,z))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),fe)for(let ue=0;ue<B.length;ue++){t.bindFramebuffer(n.FRAMEBUFFER,he.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ue,n.RENDERBUFFER,he.__webglColorRenderbuffer[ue]);const Ne=i.get(B[ue]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,he.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ue,n.TEXTURE_2D,Ne,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,he.__webglMultisampledFramebuffer)}else if(Y.depthBuffer&&Y.resolveDepthBuffer===!1&&l){const B=Y.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[B])}}}function ke(Y){return Math.min(r.maxSamples,Y.samples)}function Me(Y){const B=i.get(Y);return Y.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function Qe(Y){const B=o.render.frame;c.get(Y)!==B&&(c.set(Y,B),Y.update())}function Ge(Y,B){const we=Y.colorSpace,U=Y.format,q=Y.type;return Y.isCompressedTexture===!0||Y.isVideoTexture===!0||we!==ka&&we!==ya&&(vn.getTransfer(we)===Cn?(U!==pr||q!==go)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",we)),B}function Ze(Y){return typeof HTMLImageElement<"u"&&Y instanceof HTMLImageElement?(u.width=Y.naturalWidth||Y.width,u.height=Y.naturalHeight||Y.height):typeof VideoFrame<"u"&&Y instanceof VideoFrame?(u.width=Y.displayWidth,u.height=Y.displayHeight):(u.width=Y.width,u.height=Y.height),u}this.allocateTextureUnit=L,this.resetTextureUnits=I,this.setTexture2D=k,this.setTexture2DArray=$,this.setTexture3D=G,this.setTextureCube=J,this.rebindTextures=Pe,this.setupRenderTarget=Ae,this.updateRenderTargetMipmap=We,this.updateMultisampleRenderTarget=De,this.setupDepthRenderbuffer=Te,this.setupFrameBufferTexture=le,this.useMultisampledRTT=Me}function fO(n,e){function t(i,r=ya){let s;const o=vn.getTransfer(r);if(i===go)return n.UNSIGNED_BYTE;if(i===Ox)return n.UNSIGNED_SHORT_4_4_4_4;if(i===zx)return n.UNSIGNED_SHORT_5_5_5_1;if(i===xb)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===vb)return n.BYTE;if(i===yb)return n.SHORT;if(i===mh)return n.UNSIGNED_SHORT;if(i===Lx)return n.INT;if(i===Oa)return n.UNSIGNED_INT;if(i===Tr)return n.FLOAT;if(i===gc)return n.HALF_FLOAT;if(i===_b)return n.ALPHA;if(i===wb)return n.RGB;if(i===pr)return n.RGBA;if(i===Sb)return n.LUMINANCE;if(i===Mb)return n.LUMINANCE_ALPHA;if(i===qu)return n.DEPTH_COMPONENT;if(i===sc)return n.DEPTH_STENCIL;if(i===Bx)return n.RED;if(i===gm)return n.RED_INTEGER;if(i===Eb)return n.RG;if(i===Ux)return n.RG_INTEGER;if(i===kx)return n.RGBA_INTEGER;if(i===ap||i===lp||i===up||i===cp)if(o===Cn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===ap)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===lp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===up)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===cp)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===ap)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===lp)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===up)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===cp)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===dy||i===py||i===my||i===gy)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===dy)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===py)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===my)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===gy)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===vy||i===yy||i===xy)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===vy||i===yy)return o===Cn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===xy)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===_y||i===wy||i===Sy||i===My||i===Ey||i===by||i===Ay||i===Cy||i===Dy||i===Ty||i===Py||i===Ry||i===Iy||i===Fy)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===_y)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===wy)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Sy)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===My)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Ey)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===by)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Ay)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Cy)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Dy)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Ty)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Py)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Ry)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Iy)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Fy)return o===Cn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===fp||i===Ny||i===Ly)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===fp)return o===Cn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===Ny)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===Ly)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===bb||i===Oy||i===zy||i===By)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===fp)return s.COMPRESSED_RED_RGTC1_EXT;if(i===Oy)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===zy)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===By)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===rc?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}class hO extends oi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Bf extends fn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const gj={type:"move"};class Fw{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Bf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Bf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new j,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new j),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Bf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new j,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new j),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const g of e.hand.values()){const x=t.getJointPose(g,i),y=this._getHandJoint(u,g);x!==null&&(y.matrix.fromArray(x.transform.matrix),y.matrix.decompose(y.position,y.rotation,y.scale),y.matrixWorldNeedsUpdate=!0,y.jointRadius=x.radius),y.visible=x!==null}const c=u.joints["index-finger-tip"],f=u.joints["thumb-tip"],h=c.position.distanceTo(f.position),m=.02,v=.005;u.inputState.pinching&&h>m+v?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&h<=m-v&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(gj)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Bf;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const vj=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,yj=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class xj{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new jn,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Ws({vertexShader:vj,fragmentShader:yj,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new hi(new Nh(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class _j extends Ko{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,u=null,c=null,f=null,h=null,m=null,v=null;const g=new xj,x=t.getContextAttributes();let y=null,_=null;const w=[],E=[],C=new Fe;let M=null;const T=new oi;T.layers.enable(1),T.viewport=new sn;const R=new oi;R.layers.enable(2),R.viewport=new sn;const A=[T,R],D=new hO;D.layers.enable(1),D.layers.enable(2);let I=null,L=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Q){let le=w[Q];return le===void 0&&(le=new Fw,w[Q]=le),le.getTargetRaySpace()},this.getControllerGrip=function(Q){let le=w[Q];return le===void 0&&(le=new Fw,w[Q]=le),le.getGripSpace()},this.getHand=function(Q){let le=w[Q];return le===void 0&&(le=new Fw,w[Q]=le),le.getHandSpace()};function H(Q){const le=E.indexOf(Q.inputSource);if(le===-1)return;const pe=w[le];pe!==void 0&&(pe.update(Q.inputSource,Q.frame,u||o),pe.dispatchEvent({type:Q.type,data:Q.inputSource}))}function k(){r.removeEventListener("select",H),r.removeEventListener("selectstart",H),r.removeEventListener("selectend",H),r.removeEventListener("squeeze",H),r.removeEventListener("squeezestart",H),r.removeEventListener("squeezeend",H),r.removeEventListener("end",k),r.removeEventListener("inputsourceschange",$);for(let Q=0;Q<w.length;Q++){const le=E[Q];le!==null&&(E[Q]=null,w[Q].disconnect(le))}I=null,L=null,g.reset(),e.setRenderTarget(y),m=null,h=null,f=null,r=null,_=null,ce.stop(),i.isPresenting=!1,e.setPixelRatio(M),e.setSize(C.width,C.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Q){s=Q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Q){a=Q,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(Q){u=Q},this.getBaseLayer=function(){return h!==null?h:m},this.getBinding=function(){return f},this.getFrame=function(){return v},this.getSession=function(){return r},this.setSession=async function(Q){if(r=Q,r!==null){if(y=e.getRenderTarget(),r.addEventListener("select",H),r.addEventListener("selectstart",H),r.addEventListener("selectend",H),r.addEventListener("squeeze",H),r.addEventListener("squeezestart",H),r.addEventListener("squeezeend",H),r.addEventListener("end",k),r.addEventListener("inputsourceschange",$),x.xrCompatible!==!0&&await t.makeXRCompatible(),M=e.getPixelRatio(),e.getSize(C),r.renderState.layers===void 0){const le={antialias:x.antialias,alpha:!0,depth:x.depth,stencil:x.stencil,framebufferScaleFactor:s};m=new XRWebGLLayer(r,t,le),r.updateRenderState({baseLayer:m}),e.setPixelRatio(1),e.setSize(m.framebufferWidth,m.framebufferHeight,!1),_=new Vs(m.framebufferWidth,m.framebufferHeight,{format:pr,type:go,colorSpace:e.outputColorSpace,stencilBuffer:x.stencil})}else{let le=null,pe=null,ae=null;x.depth&&(ae=x.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,le=x.stencil?sc:qu,pe=x.stencil?rc:Oa);const Te={colorFormat:t.RGBA8,depthFormat:ae,scaleFactor:s};f=new XRWebGLBinding(r,t),h=f.createProjectionLayer(Te),r.updateRenderState({layers:[h]}),e.setPixelRatio(1),e.setSize(h.textureWidth,h.textureHeight,!1),_=new Vs(h.textureWidth,h.textureHeight,{format:pr,type:go,depthTexture:new Gx(h.textureWidth,h.textureHeight,pe,void 0,void 0,void 0,void 0,void 0,void 0,le),stencilBuffer:x.stencil,colorSpace:e.outputColorSpace,samples:x.antialias?4:0,resolveDepthBuffer:h.ignoreDepthValues===!1})}_.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await r.requestReferenceSpace(a),ce.setContext(r),ce.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return g.getDepthTexture()};function $(Q){for(let le=0;le<Q.removed.length;le++){const pe=Q.removed[le],ae=E.indexOf(pe);ae>=0&&(E[ae]=null,w[ae].disconnect(pe))}for(let le=0;le<Q.added.length;le++){const pe=Q.added[le];let ae=E.indexOf(pe);if(ae===-1){for(let Pe=0;Pe<w.length;Pe++)if(Pe>=E.length){E.push(pe),ae=Pe;break}else if(E[Pe]===null){E[Pe]=pe,ae=Pe;break}if(ae===-1)break}const Te=w[ae];Te&&Te.connect(pe)}}const G=new j,J=new j;function N(Q,le,pe){G.setFromMatrixPosition(le.matrixWorld),J.setFromMatrixPosition(pe.matrixWorld);const ae=G.distanceTo(J),Te=le.projectionMatrix.elements,Pe=pe.projectionMatrix.elements,Ae=Te[14]/(Te[10]-1),We=Te[14]/(Te[10]+1),z=(Te[9]+1)/Te[5],Se=(Te[9]-1)/Te[5],De=(Te[8]-1)/Te[0],ke=(Pe[8]+1)/Pe[0],Me=Ae*De,Qe=Ae*ke,Ge=ae/(-De+ke),Ze=Ge*-De;le.matrixWorld.decompose(Q.position,Q.quaternion,Q.scale),Q.translateX(Ze),Q.translateZ(Ge),Q.matrixWorld.compose(Q.position,Q.quaternion,Q.scale),Q.matrixWorldInverse.copy(Q.matrixWorld).invert();const Y=Ae+Ge,B=We+Ge,we=Me-Ze,U=Qe+(ae-Ze),q=z*We/B*Y,Z=Se*We/B*Y;Q.projectionMatrix.makePerspective(we,U,q,Z,Y,B),Q.projectionMatrixInverse.copy(Q.projectionMatrix).invert()}function W(Q,le){le===null?Q.matrixWorld.copy(Q.matrix):Q.matrixWorld.multiplyMatrices(le.matrixWorld,Q.matrix),Q.matrixWorldInverse.copy(Q.matrixWorld).invert()}this.updateCamera=function(Q){if(r===null)return;g.texture!==null&&(Q.near=g.depthNear,Q.far=g.depthFar),D.near=R.near=T.near=Q.near,D.far=R.far=T.far=Q.far,(I!==D.near||L!==D.far)&&(r.updateRenderState({depthNear:D.near,depthFar:D.far}),I=D.near,L=D.far,T.near=I,T.far=L,R.near=I,R.far=L,T.updateProjectionMatrix(),R.updateProjectionMatrix(),Q.updateProjectionMatrix());const le=Q.parent,pe=D.cameras;W(D,le);for(let ae=0;ae<pe.length;ae++)W(pe[ae],le);pe.length===2?N(D,T,R):D.projectionMatrix.copy(T.projectionMatrix),X(Q,D,le)};function X(Q,le,pe){pe===null?Q.matrix.copy(le.matrixWorld):(Q.matrix.copy(pe.matrixWorld),Q.matrix.invert(),Q.matrix.multiply(le.matrixWorld)),Q.matrix.decompose(Q.position,Q.quaternion,Q.scale),Q.updateMatrixWorld(!0),Q.projectionMatrix.copy(le.projectionMatrix),Q.projectionMatrixInverse.copy(le.projectionMatrixInverse),Q.isPerspectiveCamera&&(Q.fov=gh*2*Math.atan(1/Q.projectionMatrix.elements[5]),Q.zoom=1)}this.getCamera=function(){return D},this.getFoveation=function(){if(!(h===null&&m===null))return l},this.setFoveation=function(Q){l=Q,h!==null&&(h.fixedFoveation=Q),m!==null&&m.fixedFoveation!==void 0&&(m.fixedFoveation=Q)},this.hasDepthSensing=function(){return g.texture!==null},this.getDepthSensingMesh=function(){return g.getMesh(D)};let ee=null;function te(Q,le){if(c=le.getViewerPose(u||o),v=le,c!==null){const pe=c.views;m!==null&&(e.setRenderTargetFramebuffer(_,m.framebuffer),e.setRenderTarget(_));let ae=!1;pe.length!==D.cameras.length&&(D.cameras.length=0,ae=!0);for(let Pe=0;Pe<pe.length;Pe++){const Ae=pe[Pe];let We=null;if(m!==null)We=m.getViewport(Ae);else{const Se=f.getViewSubImage(h,Ae);We=Se.viewport,Pe===0&&(e.setRenderTargetTextures(_,Se.colorTexture,h.ignoreDepthValues?void 0:Se.depthStencilTexture),e.setRenderTarget(_))}let z=A[Pe];z===void 0&&(z=new oi,z.layers.enable(Pe),z.viewport=new sn,A[Pe]=z),z.matrix.fromArray(Ae.transform.matrix),z.matrix.decompose(z.position,z.quaternion,z.scale),z.projectionMatrix.fromArray(Ae.projectionMatrix),z.projectionMatrixInverse.copy(z.projectionMatrix).invert(),z.viewport.set(We.x,We.y,We.width,We.height),Pe===0&&(D.matrix.copy(z.matrix),D.matrix.decompose(D.position,D.quaternion,D.scale)),ae===!0&&D.cameras.push(z)}const Te=r.enabledFeatures;if(Te&&Te.includes("depth-sensing")){const Pe=f.getDepthInformation(pe[0]);Pe&&Pe.isValid&&Pe.texture&&g.init(e,Pe,r.renderState)}}for(let pe=0;pe<w.length;pe++){const ae=E[pe],Te=w[pe];ae!==null&&Te!==void 0&&Te.update(ae,le,u||o)}ee&&ee(Q,le),le.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:le}),v=null}const ce=new oO;ce.setAnimationLoop(te),this.setAnimationLoop=function(Q){ee=Q},this.dispose=function(){}}}const cu=new gs,wj=new zt;function Sj(n,e){function t(x,y){x.matrixAutoUpdate===!0&&x.updateMatrix(),y.value.copy(x.matrix)}function i(x,y){y.color.getRGB(x.fogColor.value,iO(n)),y.isFog?(x.fogNear.value=y.near,x.fogFar.value=y.far):y.isFogExp2&&(x.fogDensity.value=y.density)}function r(x,y,_,w,E){y.isMeshBasicMaterial||y.isMeshLambertMaterial?s(x,y):y.isMeshToonMaterial?(s(x,y),f(x,y)):y.isMeshPhongMaterial?(s(x,y),c(x,y)):y.isMeshStandardMaterial?(s(x,y),h(x,y),y.isMeshPhysicalMaterial&&m(x,y,E)):y.isMeshMatcapMaterial?(s(x,y),v(x,y)):y.isMeshDepthMaterial?s(x,y):y.isMeshDistanceMaterial?(s(x,y),g(x,y)):y.isMeshNormalMaterial?s(x,y):y.isLineBasicMaterial?(o(x,y),y.isLineDashedMaterial&&a(x,y)):y.isPointsMaterial?l(x,y,_,w):y.isSpriteMaterial?u(x,y):y.isShadowMaterial?(x.color.value.copy(y.color),x.opacity.value=y.opacity):y.isShaderMaterial&&(y.uniformsNeedUpdate=!1)}function s(x,y){x.opacity.value=y.opacity,y.color&&x.diffuse.value.copy(y.color),y.emissive&&x.emissive.value.copy(y.emissive).multiplyScalar(y.emissiveIntensity),y.map&&(x.map.value=y.map,t(y.map,x.mapTransform)),y.alphaMap&&(x.alphaMap.value=y.alphaMap,t(y.alphaMap,x.alphaMapTransform)),y.bumpMap&&(x.bumpMap.value=y.bumpMap,t(y.bumpMap,x.bumpMapTransform),x.bumpScale.value=y.bumpScale,y.side===Rr&&(x.bumpScale.value*=-1)),y.normalMap&&(x.normalMap.value=y.normalMap,t(y.normalMap,x.normalMapTransform),x.normalScale.value.copy(y.normalScale),y.side===Rr&&x.normalScale.value.negate()),y.displacementMap&&(x.displacementMap.value=y.displacementMap,t(y.displacementMap,x.displacementMapTransform),x.displacementScale.value=y.displacementScale,x.displacementBias.value=y.displacementBias),y.emissiveMap&&(x.emissiveMap.value=y.emissiveMap,t(y.emissiveMap,x.emissiveMapTransform)),y.specularMap&&(x.specularMap.value=y.specularMap,t(y.specularMap,x.specularMapTransform)),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest);const _=e.get(y),w=_.envMap,E=_.envMapRotation;w&&(x.envMap.value=w,cu.copy(E),cu.x*=-1,cu.y*=-1,cu.z*=-1,w.isCubeTexture&&w.isRenderTargetTexture===!1&&(cu.y*=-1,cu.z*=-1),x.envMapRotation.value.setFromMatrix4(wj.makeRotationFromEuler(cu)),x.flipEnvMap.value=w.isCubeTexture&&w.isRenderTargetTexture===!1?-1:1,x.reflectivity.value=y.reflectivity,x.ior.value=y.ior,x.refractionRatio.value=y.refractionRatio),y.lightMap&&(x.lightMap.value=y.lightMap,x.lightMapIntensity.value=y.lightMapIntensity,t(y.lightMap,x.lightMapTransform)),y.aoMap&&(x.aoMap.value=y.aoMap,x.aoMapIntensity.value=y.aoMapIntensity,t(y.aoMap,x.aoMapTransform))}function o(x,y){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,y.map&&(x.map.value=y.map,t(y.map,x.mapTransform))}function a(x,y){x.dashSize.value=y.dashSize,x.totalSize.value=y.dashSize+y.gapSize,x.scale.value=y.scale}function l(x,y,_,w){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,x.size.value=y.size*_,x.scale.value=w*.5,y.map&&(x.map.value=y.map,t(y.map,x.uvTransform)),y.alphaMap&&(x.alphaMap.value=y.alphaMap,t(y.alphaMap,x.alphaMapTransform)),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest)}function u(x,y){x.diffuse.value.copy(y.color),x.opacity.value=y.opacity,x.rotation.value=y.rotation,y.map&&(x.map.value=y.map,t(y.map,x.mapTransform)),y.alphaMap&&(x.alphaMap.value=y.alphaMap,t(y.alphaMap,x.alphaMapTransform)),y.alphaTest>0&&(x.alphaTest.value=y.alphaTest)}function c(x,y){x.specular.value.copy(y.specular),x.shininess.value=Math.max(y.shininess,1e-4)}function f(x,y){y.gradientMap&&(x.gradientMap.value=y.gradientMap)}function h(x,y){x.metalness.value=y.metalness,y.metalnessMap&&(x.metalnessMap.value=y.metalnessMap,t(y.metalnessMap,x.metalnessMapTransform)),x.roughness.value=y.roughness,y.roughnessMap&&(x.roughnessMap.value=y.roughnessMap,t(y.roughnessMap,x.roughnessMapTransform)),y.envMap&&(x.envMapIntensity.value=y.envMapIntensity)}function m(x,y,_){x.ior.value=y.ior,y.sheen>0&&(x.sheenColor.value.copy(y.sheenColor).multiplyScalar(y.sheen),x.sheenRoughness.value=y.sheenRoughness,y.sheenColorMap&&(x.sheenColorMap.value=y.sheenColorMap,t(y.sheenColorMap,x.sheenColorMapTransform)),y.sheenRoughnessMap&&(x.sheenRoughnessMap.value=y.sheenRoughnessMap,t(y.sheenRoughnessMap,x.sheenRoughnessMapTransform))),y.clearcoat>0&&(x.clearcoat.value=y.clearcoat,x.clearcoatRoughness.value=y.clearcoatRoughness,y.clearcoatMap&&(x.clearcoatMap.value=y.clearcoatMap,t(y.clearcoatMap,x.clearcoatMapTransform)),y.clearcoatRoughnessMap&&(x.clearcoatRoughnessMap.value=y.clearcoatRoughnessMap,t(y.clearcoatRoughnessMap,x.clearcoatRoughnessMapTransform)),y.clearcoatNormalMap&&(x.clearcoatNormalMap.value=y.clearcoatNormalMap,t(y.clearcoatNormalMap,x.clearcoatNormalMapTransform),x.clearcoatNormalScale.value.copy(y.clearcoatNormalScale),y.side===Rr&&x.clearcoatNormalScale.value.negate())),y.dispersion>0&&(x.dispersion.value=y.dispersion),y.iridescence>0&&(x.iridescence.value=y.iridescence,x.iridescenceIOR.value=y.iridescenceIOR,x.iridescenceThicknessMinimum.value=y.iridescenceThicknessRange[0],x.iridescenceThicknessMaximum.value=y.iridescenceThicknessRange[1],y.iridescenceMap&&(x.iridescenceMap.value=y.iridescenceMap,t(y.iridescenceMap,x.iridescenceMapTransform)),y.iridescenceThicknessMap&&(x.iridescenceThicknessMap.value=y.iridescenceThicknessMap,t(y.iridescenceThicknessMap,x.iridescenceThicknessMapTransform))),y.transmission>0&&(x.transmission.value=y.transmission,x.transmissionSamplerMap.value=_.texture,x.transmissionSamplerSize.value.set(_.width,_.height),y.transmissionMap&&(x.transmissionMap.value=y.transmissionMap,t(y.transmissionMap,x.transmissionMapTransform)),x.thickness.value=y.thickness,y.thicknessMap&&(x.thicknessMap.value=y.thicknessMap,t(y.thicknessMap,x.thicknessMapTransform)),x.attenuationDistance.value=y.attenuationDistance,x.attenuationColor.value.copy(y.attenuationColor)),y.anisotropy>0&&(x.anisotropyVector.value.set(y.anisotropy*Math.cos(y.anisotropyRotation),y.anisotropy*Math.sin(y.anisotropyRotation)),y.anisotropyMap&&(x.anisotropyMap.value=y.anisotropyMap,t(y.anisotropyMap,x.anisotropyMapTransform))),x.specularIntensity.value=y.specularIntensity,x.specularColor.value.copy(y.specularColor),y.specularColorMap&&(x.specularColorMap.value=y.specularColorMap,t(y.specularColorMap,x.specularColorMapTransform)),y.specularIntensityMap&&(x.specularIntensityMap.value=y.specularIntensityMap,t(y.specularIntensityMap,x.specularIntensityMapTransform))}function v(x,y){y.matcap&&(x.matcap.value=y.matcap)}function g(x,y){const _=e.get(y).light;x.referencePosition.value.setFromMatrixPosition(_.matrixWorld),x.nearDistance.value=_.shadow.camera.near,x.farDistance.value=_.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function Mj(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(_,w){const E=w.program;i.uniformBlockBinding(_,E)}function u(_,w){let E=r[_.id];E===void 0&&(v(_),E=c(_),r[_.id]=E,_.addEventListener("dispose",x));const C=w.program;i.updateUBOMapping(_,C);const M=e.render.frame;s[_.id]!==M&&(h(_),s[_.id]=M)}function c(_){const w=f();_.__bindingPointIndex=w;const E=n.createBuffer(),C=_.__size,M=_.usage;return n.bindBuffer(n.UNIFORM_BUFFER,E),n.bufferData(n.UNIFORM_BUFFER,C,M),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,w,E),E}function f(){for(let _=0;_<a;_++)if(o.indexOf(_)===-1)return o.push(_),_;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function h(_){const w=r[_.id],E=_.uniforms,C=_.__cache;n.bindBuffer(n.UNIFORM_BUFFER,w);for(let M=0,T=E.length;M<T;M++){const R=Array.isArray(E[M])?E[M]:[E[M]];for(let A=0,D=R.length;A<D;A++){const I=R[A];if(m(I,M,A,C)===!0){const L=I.__offset,H=Array.isArray(I.value)?I.value:[I.value];let k=0;for(let $=0;$<H.length;$++){const G=H[$],J=g(G);typeof G=="number"||typeof G=="boolean"?(I.__data[0]=G,n.bufferSubData(n.UNIFORM_BUFFER,L+k,I.__data)):G.isMatrix3?(I.__data[0]=G.elements[0],I.__data[1]=G.elements[1],I.__data[2]=G.elements[2],I.__data[3]=0,I.__data[4]=G.elements[3],I.__data[5]=G.elements[4],I.__data[6]=G.elements[5],I.__data[7]=0,I.__data[8]=G.elements[6],I.__data[9]=G.elements[7],I.__data[10]=G.elements[8],I.__data[11]=0):(G.toArray(I.__data,k),k+=J.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,L,I.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function m(_,w,E,C){const M=_.value,T=w+"_"+E;if(C[T]===void 0)return typeof M=="number"||typeof M=="boolean"?C[T]=M:C[T]=M.clone(),!0;{const R=C[T];if(typeof M=="number"||typeof M=="boolean"){if(R!==M)return C[T]=M,!0}else if(R.equals(M)===!1)return R.copy(M),!0}return!1}function v(_){const w=_.uniforms;let E=0;const C=16;for(let T=0,R=w.length;T<R;T++){const A=Array.isArray(w[T])?w[T]:[w[T]];for(let D=0,I=A.length;D<I;D++){const L=A[D],H=Array.isArray(L.value)?L.value:[L.value];for(let k=0,$=H.length;k<$;k++){const G=H[k],J=g(G),N=E%C;N!==0&&C-N<J.boundary&&(E+=C-N),L.__data=new Float32Array(J.storage/Float32Array.BYTES_PER_ELEMENT),L.__offset=E,E+=J.storage}}}const M=E%C;return M>0&&(E+=C-M),_.__size=E,_.__cache={},this}function g(_){const w={boundary:0,storage:0};return typeof _=="number"||typeof _=="boolean"?(w.boundary=4,w.storage=4):_.isVector2?(w.boundary=8,w.storage=8):_.isVector3||_.isColor?(w.boundary=16,w.storage=12):_.isVector4?(w.boundary=16,w.storage=16):_.isMatrix3?(w.boundary=48,w.storage=48):_.isMatrix4?(w.boundary=64,w.storage=64):_.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",_),w}function x(_){const w=_.target;w.removeEventListener("dispose",x);const E=o.indexOf(w.__bindingPointIndex);o.splice(E,1),n.deleteBuffer(r[w.id]),delete r[w.id],delete s[w.id]}function y(){for(const _ in r)n.deleteBuffer(r[_]);o=[],r={},s={}}return{bind:l,update:u,dispose:y}}class dO{constructor(e={}){const{canvas:t=QL(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:f=!1}=e;this.isWebGLRenderer=!0;let h;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");h=i.getContextAttributes().alpha}else h=o;const m=new Uint32Array(4),v=new Int32Array(4);let g=null,x=null;const y=[],_=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=Is,this.toneMapping=jo,this.toneMappingExposure=1;const w=this;let E=!1,C=0,M=0,T=null,R=-1,A=null;const D=new sn,I=new sn;let L=null;const H=new mt(0);let k=0,$=t.width,G=t.height,J=1,N=null,W=null;const X=new sn(0,0,$,G),ee=new sn(0,0,$,G);let te=!1;const ce=new _m;let Q=!1,le=!1;const pe=new zt,ae=new j,Te=new sn,Pe={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ae=!1;function We(){return T===null?J:1}let z=i;function Se(V,se){return t.getContext(V,se)}try{const V={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${pm}`),t.addEventListener("webglcontextlost",Oe,!1),t.addEventListener("webglcontextrestored",Be,!1),t.addEventListener("webglcontextcreationerror",tt,!1),z===null){const se="webgl2";if(z=Se(se,V),z===null)throw Se(se)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(V){throw console.error("THREE.WebGLRenderer: "+V.message),V}let De,ke,Me,Qe,Ge,Ze,Y,B,we,U,q,Z,he,fe,ue,Ne,ge,Ee,Le,nt,Ye,ne,Re,et;function re(){De=new RW(z),De.init(),ne=new fO(z,De),ke=new bW(z,De,e,ne),Me=new uj(z),Qe=new NW(z),Ge=new KG,Ze=new mj(z,De,Me,Ge,ke,ne,Qe),Y=new CW(w),B=new PW(w),we=new HV(z),Re=new MW(z,we),U=new IW(z,we,Qe,Re),q=new OW(z,U,we,Qe),Le=new LW(z,ke,Ze),Ne=new AW(Ge),Z=new ZG(w,Y,B,De,ke,Re,Ne),he=new Sj(w,Ge),fe=new QG,ue=new sj(De),Ee=new SW(w,Y,B,Me,q,h,l),ge=new lj(w,q,ke),et=new Mj(z,Qe,ke,Me),nt=new EW(z,De,Qe),Ye=new FW(z,De,Qe),Qe.programs=Z.programs,w.capabilities=ke,w.extensions=De,w.properties=Ge,w.renderLists=fe,w.shadowMap=ge,w.state=Me,w.info=Qe}re();const He=new _j(w,z);this.xr=He,this.getContext=function(){return z},this.getContextAttributes=function(){return z.getContextAttributes()},this.forceContextLoss=function(){const V=De.get("WEBGL_lose_context");V&&V.loseContext()},this.forceContextRestore=function(){const V=De.get("WEBGL_lose_context");V&&V.restoreContext()},this.getPixelRatio=function(){return J},this.setPixelRatio=function(V){V!==void 0&&(J=V,this.setSize($,G,!1))},this.getSize=function(V){return V.set($,G)},this.setSize=function(V,se,xe=!0){if(He.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}$=V,G=se,t.width=Math.floor(V*J),t.height=Math.floor(se*J),xe===!0&&(t.style.width=V+"px",t.style.height=se+"px"),this.setViewport(0,0,V,se)},this.getDrawingBufferSize=function(V){return V.set($*J,G*J).floor()},this.setDrawingBufferSize=function(V,se,xe){$=V,G=se,J=xe,t.width=Math.floor(V*xe),t.height=Math.floor(se*xe),this.setViewport(0,0,V,se)},this.getCurrentViewport=function(V){return V.copy(D)},this.getViewport=function(V){return V.copy(X)},this.setViewport=function(V,se,xe,_e){V.isVector4?X.set(V.x,V.y,V.z,V.w):X.set(V,se,xe,_e),Me.viewport(D.copy(X).multiplyScalar(J).round())},this.getScissor=function(V){return V.copy(ee)},this.setScissor=function(V,se,xe,_e){V.isVector4?ee.set(V.x,V.y,V.z,V.w):ee.set(V,se,xe,_e),Me.scissor(I.copy(ee).multiplyScalar(J).round())},this.getScissorTest=function(){return te},this.setScissorTest=function(V){Me.setScissorTest(te=V)},this.setOpaqueSort=function(V){N=V},this.setTransparentSort=function(V){W=V},this.getClearColor=function(V){return V.copy(Ee.getClearColor())},this.setClearColor=function(){Ee.setClearColor.apply(Ee,arguments)},this.getClearAlpha=function(){return Ee.getClearAlpha()},this.setClearAlpha=function(){Ee.setClearAlpha.apply(Ee,arguments)},this.clear=function(V=!0,se=!0,xe=!0){let _e=0;if(V){let de=!1;if(T!==null){const je=T.texture.format;de=je===kx||je===Ux||je===gm}if(de){const je=T.texture.type,lt=je===go||je===Oa||je===mh||je===rc||je===Ox||je===zx,ct=Ee.getClearColor(),$e=Ee.getClearAlpha(),ht=ct.r,Mt=ct.g,gt=ct.b;lt?(m[0]=ht,m[1]=Mt,m[2]=gt,m[3]=$e,z.clearBufferuiv(z.COLOR,0,m)):(v[0]=ht,v[1]=Mt,v[2]=gt,v[3]=$e,z.clearBufferiv(z.COLOR,0,v))}else _e|=z.COLOR_BUFFER_BIT}se&&(_e|=z.DEPTH_BUFFER_BIT),xe&&(_e|=z.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),z.clear(_e)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Oe,!1),t.removeEventListener("webglcontextrestored",Be,!1),t.removeEventListener("webglcontextcreationerror",tt,!1),fe.dispose(),ue.dispose(),Ge.dispose(),Y.dispose(),B.dispose(),q.dispose(),Re.dispose(),et.dispose(),Z.dispose(),He.dispose(),He.removeEventListener("sessionstart",Nn),He.removeEventListener("sessionend",Wa),Kr.stop()};function Oe(V){V.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),E=!0}function Be(){console.log("THREE.WebGLRenderer: Context Restored."),E=!1;const V=Qe.autoReset,se=ge.enabled,xe=ge.autoUpdate,_e=ge.needsUpdate,de=ge.type;re(),Qe.autoReset=V,ge.enabled=se,ge.autoUpdate=xe,ge.needsUpdate=_e,ge.type=de}function tt(V){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",V.statusMessage)}function Et(V){const se=V.target;se.removeEventListener("dispose",Et),Bt(se)}function Bt(V){en(V),Ge.remove(V)}function en(V){const se=Ge.get(V).programs;se!==void 0&&(se.forEach(function(xe){Z.releaseProgram(xe)}),V.isShaderMaterial&&Z.releaseShaderCache(V))}this.renderBufferDirect=function(V,se,xe,_e,de,je){se===null&&(se=Pe);const lt=de.isMesh&&de.matrixWorld.determinant()<0,ct=kt(V,se,xe,_e,de);Me.setMaterial(_e,lt);let $e=xe.index,ht=1;if(_e.wireframe===!0){if($e=U.getWireframeAttribute(xe),$e===void 0)return;ht=2}const Mt=xe.drawRange,gt=xe.attributes.position;let Gt=Mt.start*ht,an=(Mt.start+Mt.count)*ht;je!==null&&(Gt=Math.max(Gt,je.start*ht),an=Math.min(an,(je.start+je.count)*ht)),$e!==null?(Gt=Math.max(Gt,0),an=Math.min(an,$e.count)):gt!=null&&(Gt=Math.max(Gt,0),an=Math.min(an,gt.count));const on=an-Gt;if(on<0||on===1/0)return;Re.setup(de,_e,ct,xe,$e);let wt,ut=nt;if($e!==null&&(wt=we.get($e),ut=Ye,ut.setIndex(wt)),de.isMesh)_e.wireframe===!0?(Me.setLineWidth(_e.wireframeLinewidth*We()),ut.setMode(z.LINES)):ut.setMode(z.TRIANGLES);else if(de.isLine){let Ke=_e.linewidth;Ke===void 0&&(Ke=1),Me.setLineWidth(Ke*We()),de.isLineSegments?ut.setMode(z.LINES):de.isLineLoop?ut.setMode(z.LINE_LOOP):ut.setMode(z.LINE_STRIP)}else de.isPoints?ut.setMode(z.POINTS):de.isSprite&&ut.setMode(z.TRIANGLES);if(de.isBatchedMesh)if(de._multiDrawInstances!==null)ut.renderMultiDrawInstances(de._multiDrawStarts,de._multiDrawCounts,de._multiDrawCount,de._multiDrawInstances);else if(De.get("WEBGL_multi_draw"))ut.renderMultiDraw(de._multiDrawStarts,de._multiDrawCounts,de._multiDrawCount);else{const Ke=de._multiDrawStarts,Ft=de._multiDrawCounts,Dt=de._multiDrawCount,xn=$e?we.get($e).bytesPerElement:1,er=Ge.get(_e).currentProgram.getUniforms();for(let pi=0;pi<Dt;pi++)er.setValue(z,"_gl_DrawID",pi),ut.render(Ke[pi]/xn,Ft[pi])}else if(de.isInstancedMesh)ut.renderInstances(Gt,on,de.count);else if(xe.isInstancedBufferGeometry){const Ke=xe._maxInstanceCount!==void 0?xe._maxInstanceCount:1/0,Ft=Math.min(xe.instanceCount,Ke);ut.renderInstances(Gt,on,Ft)}else ut.render(Gt,on)};function yn(V,se,xe){V.transparent===!0&&V.side===Bo&&V.forceSinglePass===!1?(V.side=Rr,V.needsUpdate=!0,vt(V,se,xe),V.side=Na,V.needsUpdate=!0,vt(V,se,xe),V.side=Bo):vt(V,se,xe)}this.compile=function(V,se,xe=null){xe===null&&(xe=V),x=ue.get(xe),x.init(se),_.push(x),xe.traverseVisible(function(de){de.isLight&&de.layers.test(se.layers)&&(x.pushLight(de),de.castShadow&&x.pushShadow(de))}),V!==xe&&V.traverseVisible(function(de){de.isLight&&de.layers.test(se.layers)&&(x.pushLight(de),de.castShadow&&x.pushShadow(de))}),x.setupLights();const _e=new Set;return V.traverse(function(de){const je=de.material;if(je)if(Array.isArray(je))for(let lt=0;lt<je.length;lt++){const ct=je[lt];yn(ct,xe,de),_e.add(ct)}else yn(je,xe,de),_e.add(je)}),_.pop(),x=null,_e},this.compileAsync=function(V,se,xe=null){const _e=this.compile(V,se,xe);return new Promise(de=>{function je(){if(_e.forEach(function(lt){Ge.get(lt).currentProgram.isReady()&&_e.delete(lt)}),_e.size===0){de(V);return}setTimeout(je,10)}De.get("KHR_parallel_shader_compile")!==null?je():setTimeout(je,10)})};let Wt=null;function Un(V){Wt&&Wt(V)}function Nn(){Kr.stop()}function Wa(){Kr.start()}const Kr=new oO;Kr.setAnimationLoop(Un),typeof self<"u"&&Kr.setContext(self),this.setAnimationLoop=function(V){Wt=V,He.setAnimationLoop(V),V===null?Kr.stop():Kr.start()},He.addEventListener("sessionstart",Nn),He.addEventListener("sessionend",Wa),this.render=function(V,se){if(se!==void 0&&se.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(E===!0)return;if(V.matrixWorldAutoUpdate===!0&&V.updateMatrixWorld(),se.parent===null&&se.matrixWorldAutoUpdate===!0&&se.updateMatrixWorld(),He.enabled===!0&&He.isPresenting===!0&&(He.cameraAutoUpdate===!0&&He.updateCamera(se),se=He.getCamera()),V.isScene===!0&&V.onBeforeRender(w,V,se,T),x=ue.get(V,_.length),x.init(se),_.push(x),pe.multiplyMatrices(se.projectionMatrix,se.matrixWorldInverse),ce.setFromProjectionMatrix(pe),le=this.localClippingEnabled,Q=Ne.init(this.clippingPlanes,le),g=fe.get(V,y.length),g.init(),y.push(g),He.enabled===!0&&He.isPresenting===!0){const je=w.xr.getDepthSensingMesh();je!==null&&oe(je,se,-1/0,w.sortObjects)}oe(V,se,0,w.sortObjects),g.finish(),w.sortObjects===!0&&g.sort(N,W),Ae=He.enabled===!1||He.isPresenting===!1||He.hasDepthSensing()===!1,Ae&&Ee.addToRenderList(g,V),this.info.render.frame++,Q===!0&&Ne.beginShadows();const xe=x.state.shadowsArray;ge.render(xe,V,se),Q===!0&&Ne.endShadows(),this.info.autoReset===!0&&this.info.reset();const _e=g.opaque,de=g.transmissive;if(x.setupLights(),se.isArrayCamera){const je=se.cameras;if(de.length>0)for(let lt=0,ct=je.length;lt<ct;lt++){const $e=je[lt];be(_e,de,V,$e)}Ae&&Ee.render(V);for(let lt=0,ct=je.length;lt<ct;lt++){const $e=je[lt];ve(g,V,$e,$e.viewport)}}else de.length>0&&be(_e,de,V,se),Ae&&Ee.render(V),ve(g,V,se);T!==null&&(Ze.updateMultisampleRenderTarget(T),Ze.updateRenderTargetMipmap(T)),V.isScene===!0&&V.onAfterRender(w,V,se),Re.resetDefaultState(),R=-1,A=null,_.pop(),_.length>0?(x=_[_.length-1],Q===!0&&Ne.setGlobalState(w.clippingPlanes,x.state.camera)):x=null,y.pop(),y.length>0?g=y[y.length-1]:g=null};function oe(V,se,xe,_e){if(V.visible===!1)return;if(V.layers.test(se.layers)){if(V.isGroup)xe=V.renderOrder;else if(V.isLOD)V.autoUpdate===!0&&V.update(se);else if(V.isLight)x.pushLight(V),V.castShadow&&x.pushShadow(V);else if(V.isSprite){if(!V.frustumCulled||ce.intersectsSprite(V)){_e&&Te.setFromMatrixPosition(V.matrixWorld).applyMatrix4(pe);const lt=q.update(V),ct=V.material;ct.visible&&g.push(V,lt,ct,xe,Te.z,null)}}else if((V.isMesh||V.isLine||V.isPoints)&&(!V.frustumCulled||ce.intersectsObject(V))){const lt=q.update(V),ct=V.material;if(_e&&(V.boundingSphere!==void 0?(V.boundingSphere===null&&V.computeBoundingSphere(),Te.copy(V.boundingSphere.center)):(lt.boundingSphere===null&&lt.computeBoundingSphere(),Te.copy(lt.boundingSphere.center)),Te.applyMatrix4(V.matrixWorld).applyMatrix4(pe)),Array.isArray(ct)){const $e=lt.groups;for(let ht=0,Mt=$e.length;ht<Mt;ht++){const gt=$e[ht],Gt=ct[gt.materialIndex];Gt&&Gt.visible&&g.push(V,lt,Gt,xe,Te.z,gt)}}else ct.visible&&g.push(V,lt,ct,xe,Te.z,null)}}const je=V.children;for(let lt=0,ct=je.length;lt<ct;lt++)oe(je[lt],se,xe,_e)}function ve(V,se,xe,_e){const de=V.opaque,je=V.transmissive,lt=V.transparent;x.setupLightsView(xe),Q===!0&&Ne.setGlobalState(w.clippingPlanes,xe),_e&&Me.viewport(D.copy(_e)),de.length>0&&Ue(de,se,xe),je.length>0&&Ue(je,se,xe),lt.length>0&&Ue(lt,se,xe),Me.buffers.depth.setTest(!0),Me.buffers.depth.setMask(!0),Me.buffers.color.setMask(!0),Me.setPolygonOffset(!1)}function be(V,se,xe,_e){if((xe.isScene===!0?xe.overrideMaterial:null)!==null)return;x.state.transmissionRenderTarget[_e.id]===void 0&&(x.state.transmissionRenderTarget[_e.id]=new Vs(1,1,{generateMipmaps:!0,type:De.has("EXT_color_buffer_half_float")||De.has("EXT_color_buffer_float")?gc:go,minFilter:ko,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:vn.workingColorSpace}));const je=x.state.transmissionRenderTarget[_e.id],lt=_e.viewport||D;je.setSize(lt.z,lt.w);const ct=w.getRenderTarget();w.setRenderTarget(je),w.getClearColor(H),k=w.getClearAlpha(),k<1&&w.setClearColor(16777215,.5),Ae?Ee.render(xe):w.clear();const $e=w.toneMapping;w.toneMapping=jo;const ht=_e.viewport;if(_e.viewport!==void 0&&(_e.viewport=void 0),x.setupLightsView(_e),Q===!0&&Ne.setGlobalState(w.clippingPlanes,_e),Ue(V,xe,_e),Ze.updateMultisampleRenderTarget(je),Ze.updateRenderTargetMipmap(je),De.has("WEBGL_multisampled_render_to_texture")===!1){let Mt=!1;for(let gt=0,Gt=se.length;gt<Gt;gt++){const an=se[gt],on=an.object,wt=an.geometry,ut=an.material,Ke=an.group;if(ut.side===Bo&&on.layers.test(_e.layers)){const Ft=ut.side;ut.side=Rr,ut.needsUpdate=!0,at(on,xe,_e,wt,ut,Ke),ut.side=Ft,ut.needsUpdate=!0,Mt=!0}}Mt===!0&&(Ze.updateMultisampleRenderTarget(je),Ze.updateRenderTargetMipmap(je))}w.setRenderTarget(ct),w.setClearColor(H,k),ht!==void 0&&(_e.viewport=ht),w.toneMapping=$e}function Ue(V,se,xe){const _e=se.isScene===!0?se.overrideMaterial:null;for(let de=0,je=V.length;de<je;de++){const lt=V[de],ct=lt.object,$e=lt.geometry,ht=_e===null?lt.material:_e,Mt=lt.group;ct.layers.test(xe.layers)&&at(ct,se,xe,$e,ht,Mt)}}function at(V,se,xe,_e,de,je){V.onBeforeRender(w,se,xe,_e,de,je),V.modelViewMatrix.multiplyMatrices(xe.matrixWorldInverse,V.matrixWorld),V.normalMatrix.getNormalMatrix(V.modelViewMatrix),de.transparent===!0&&de.side===Bo&&de.forceSinglePass===!1?(de.side=Rr,de.needsUpdate=!0,w.renderBufferDirect(xe,se,_e,de,V,je),de.side=Na,de.needsUpdate=!0,w.renderBufferDirect(xe,se,_e,de,V,je),de.side=Bo):w.renderBufferDirect(xe,se,_e,de,V,je),V.onAfterRender(w,se,xe,_e,de,je)}function vt(V,se,xe){se.isScene!==!0&&(se=Pe);const _e=Ge.get(V),de=x.state.lights,je=x.state.shadowsArray,lt=de.state.version,ct=Z.getParameters(V,de.state,je,se,xe),$e=Z.getProgramCacheKey(ct);let ht=_e.programs;_e.environment=V.isMeshStandardMaterial?se.environment:null,_e.fog=se.fog,_e.envMap=(V.isMeshStandardMaterial?B:Y).get(V.envMap||_e.environment),_e.envMapRotation=_e.environment!==null&&V.envMap===null?se.environmentRotation:V.envMapRotation,ht===void 0&&(V.addEventListener("dispose",Et),ht=new Map,_e.programs=ht);let Mt=ht.get($e);if(Mt!==void 0){if(_e.currentProgram===Mt&&_e.lightsStateVersion===lt)return rt(V,ct),Mt}else ct.uniforms=Z.getUniforms(V),V.onBeforeCompile(ct,w),Mt=Z.acquireProgram(ct,$e),ht.set($e,Mt),_e.uniforms=ct.uniforms;const gt=_e.uniforms;return(!V.isShaderMaterial&&!V.isRawShaderMaterial||V.clipping===!0)&&(gt.clippingPlanes=Ne.uniform),rt(V,ct),_e.needsLights=At(V),_e.lightsStateVersion=lt,_e.needsLights&&(gt.ambientLightColor.value=de.state.ambient,gt.lightProbe.value=de.state.probe,gt.directionalLights.value=de.state.directional,gt.directionalLightShadows.value=de.state.directionalShadow,gt.spotLights.value=de.state.spot,gt.spotLightShadows.value=de.state.spotShadow,gt.rectAreaLights.value=de.state.rectArea,gt.ltc_1.value=de.state.rectAreaLTC1,gt.ltc_2.value=de.state.rectAreaLTC2,gt.pointLights.value=de.state.point,gt.pointLightShadows.value=de.state.pointShadow,gt.hemisphereLights.value=de.state.hemi,gt.directionalShadowMap.value=de.state.directionalShadowMap,gt.directionalShadowMatrix.value=de.state.directionalShadowMatrix,gt.spotShadowMap.value=de.state.spotShadowMap,gt.spotLightMatrix.value=de.state.spotLightMatrix,gt.spotLightMap.value=de.state.spotLightMap,gt.pointShadowMap.value=de.state.pointShadowMap,gt.pointShadowMatrix.value=de.state.pointShadowMatrix),_e.currentProgram=Mt,_e.uniformsList=null,Mt}function Rt(V){if(V.uniformsList===null){const se=V.currentProgram.getUniforms();V.uniformsList=R0.seqWithValue(se.seq,V.uniforms)}return V.uniformsList}function rt(V,se){const xe=Ge.get(V);xe.outputColorSpace=se.outputColorSpace,xe.batching=se.batching,xe.batchingColor=se.batchingColor,xe.instancing=se.instancing,xe.instancingColor=se.instancingColor,xe.instancingMorph=se.instancingMorph,xe.skinning=se.skinning,xe.morphTargets=se.morphTargets,xe.morphNormals=se.morphNormals,xe.morphColors=se.morphColors,xe.morphTargetsCount=se.morphTargetsCount,xe.numClippingPlanes=se.numClippingPlanes,xe.numIntersection=se.numClipIntersection,xe.vertexAlphas=se.vertexAlphas,xe.vertexTangents=se.vertexTangents,xe.toneMapping=se.toneMapping}function kt(V,se,xe,_e,de){se.isScene!==!0&&(se=Pe),Ze.resetTextureUnits();const je=se.fog,lt=_e.isMeshStandardMaterial?se.environment:null,ct=T===null?w.outputColorSpace:T.isXRRenderTarget===!0?T.texture.colorSpace:ka,$e=(_e.isMeshStandardMaterial?B:Y).get(_e.envMap||lt),ht=_e.vertexColors===!0&&!!xe.attributes.color&&xe.attributes.color.itemSize===4,Mt=!!xe.attributes.tangent&&(!!_e.normalMap||_e.anisotropy>0),gt=!!xe.morphAttributes.position,Gt=!!xe.morphAttributes.normal,an=!!xe.morphAttributes.color;let on=jo;_e.toneMapped&&(T===null||T.isXRRenderTarget===!0)&&(on=w.toneMapping);const wt=xe.morphAttributes.position||xe.morphAttributes.normal||xe.morphAttributes.color,ut=wt!==void 0?wt.length:0,Ke=Ge.get(_e),Ft=x.state.lights;if(Q===!0&&(le===!0||V!==A)){const ki=V===A&&_e.id===R;Ne.setState(_e,V,ki)}let Dt=!1;_e.version===Ke.__version?(Ke.needsLights&&Ke.lightsStateVersion!==Ft.state.version||Ke.outputColorSpace!==ct||de.isBatchedMesh&&Ke.batching===!1||!de.isBatchedMesh&&Ke.batching===!0||de.isBatchedMesh&&Ke.batchingColor===!0&&de.colorTexture===null||de.isBatchedMesh&&Ke.batchingColor===!1&&de.colorTexture!==null||de.isInstancedMesh&&Ke.instancing===!1||!de.isInstancedMesh&&Ke.instancing===!0||de.isSkinnedMesh&&Ke.skinning===!1||!de.isSkinnedMesh&&Ke.skinning===!0||de.isInstancedMesh&&Ke.instancingColor===!0&&de.instanceColor===null||de.isInstancedMesh&&Ke.instancingColor===!1&&de.instanceColor!==null||de.isInstancedMesh&&Ke.instancingMorph===!0&&de.morphTexture===null||de.isInstancedMesh&&Ke.instancingMorph===!1&&de.morphTexture!==null||Ke.envMap!==$e||_e.fog===!0&&Ke.fog!==je||Ke.numClippingPlanes!==void 0&&(Ke.numClippingPlanes!==Ne.numPlanes||Ke.numIntersection!==Ne.numIntersection)||Ke.vertexAlphas!==ht||Ke.vertexTangents!==Mt||Ke.morphTargets!==gt||Ke.morphNormals!==Gt||Ke.morphColors!==an||Ke.toneMapping!==on||Ke.morphTargetsCount!==ut)&&(Dt=!0):(Dt=!0,Ke.__version=_e.version);let xn=Ke.currentProgram;Dt===!0&&(xn=vt(_e,se,de));let er=!1,pi=!1,Ti=!1;const Ln=xn.getUniforms(),Xs=Ke.uniforms;if(Me.useProgram(xn.program)&&(er=!0,pi=!0,Ti=!0),_e.id!==R&&(R=_e.id,pi=!0),er||A!==V){Ln.setValue(z,"projectionMatrix",V.projectionMatrix),Ln.setValue(z,"viewMatrix",V.matrixWorldInverse);const ki=Ln.map.cameraPosition;ki!==void 0&&ki.setValue(z,ae.setFromMatrixPosition(V.matrixWorld)),ke.logarithmicDepthBuffer&&Ln.setValue(z,"logDepthBufFC",2/(Math.log(V.far+1)/Math.LN2)),(_e.isMeshPhongMaterial||_e.isMeshToonMaterial||_e.isMeshLambertMaterial||_e.isMeshBasicMaterial||_e.isMeshStandardMaterial||_e.isShaderMaterial)&&Ln.setValue(z,"isOrthographic",V.isOrthographicCamera===!0),A!==V&&(A=V,pi=!0,Ti=!0)}if(de.isSkinnedMesh){Ln.setOptional(z,de,"bindMatrix"),Ln.setOptional(z,de,"bindMatrixInverse");const ki=de.skeleton;ki&&(ki.boneTexture===null&&ki.computeBoneTexture(),Ln.setValue(z,"boneTexture",ki.boneTexture,Ze))}de.isBatchedMesh&&(Ln.setOptional(z,de,"batchingTexture"),Ln.setValue(z,"batchingTexture",de._matricesTexture,Ze),Ln.setOptional(z,de,"batchingIdTexture"),Ln.setValue(z,"batchingIdTexture",de._indirectTexture,Ze),Ln.setOptional(z,de,"batchingColorTexture"),de._colorsTexture!==null&&Ln.setValue(z,"batchingColorTexture",de._colorsTexture,Ze));const Rc=xe.morphAttributes;if((Rc.position!==void 0||Rc.normal!==void 0||Rc.color!==void 0)&&Le.update(de,xe,xn),(pi||Ke.receiveShadow!==de.receiveShadow)&&(Ke.receiveShadow=de.receiveShadow,Ln.setValue(z,"receiveShadow",de.receiveShadow)),_e.isMeshGouraudMaterial&&_e.envMap!==null&&(Xs.envMap.value=$e,Xs.flipEnvMap.value=$e.isCubeTexture&&$e.isRenderTargetTexture===!1?-1:1),_e.isMeshStandardMaterial&&_e.envMap===null&&se.environment!==null&&(Xs.envMapIntensity.value=se.environmentIntensity),pi&&(Ln.setValue(z,"toneMappingExposure",w.toneMappingExposure),Ke.needsLights&&bt(Xs,Ti),je&&_e.fog===!0&&he.refreshFogUniforms(Xs,je),he.refreshMaterialUniforms(Xs,_e,J,G,x.state.transmissionRenderTarget[V.id]),R0.upload(z,Rt(Ke),Xs,Ze)),_e.isShaderMaterial&&_e.uniformsNeedUpdate===!0&&(R0.upload(z,Rt(Ke),Xs,Ze),_e.uniformsNeedUpdate=!1),_e.isSpriteMaterial&&Ln.setValue(z,"center",de.center),Ln.setValue(z,"modelViewMatrix",de.modelViewMatrix),Ln.setValue(z,"normalMatrix",de.normalMatrix),Ln.setValue(z,"modelMatrix",de.matrixWorld),_e.isShaderMaterial||_e.isRawShaderMaterial){const ki=_e.uniformsGroups;for(let Ic=0,Jr=ki.length;Ic<Jr;Ic++){const jm=ki[Ic];et.update(jm,xn),et.bind(jm,xn)}}return xn}function bt(V,se){V.ambientLightColor.needsUpdate=se,V.lightProbe.needsUpdate=se,V.directionalLights.needsUpdate=se,V.directionalLightShadows.needsUpdate=se,V.pointLights.needsUpdate=se,V.pointLightShadows.needsUpdate=se,V.spotLights.needsUpdate=se,V.spotLightShadows.needsUpdate=se,V.rectAreaLights.needsUpdate=se,V.hemisphereLights.needsUpdate=se}function At(V){return V.isMeshLambertMaterial||V.isMeshToonMaterial||V.isMeshPhongMaterial||V.isMeshStandardMaterial||V.isShadowMaterial||V.isShaderMaterial&&V.lights===!0}this.getActiveCubeFace=function(){return C},this.getActiveMipmapLevel=function(){return M},this.getRenderTarget=function(){return T},this.setRenderTargetTextures=function(V,se,xe){Ge.get(V.texture).__webglTexture=se,Ge.get(V.depthTexture).__webglTexture=xe;const _e=Ge.get(V);_e.__hasExternalTextures=!0,_e.__autoAllocateDepthBuffer=xe===void 0,_e.__autoAllocateDepthBuffer||De.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),_e.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(V,se){const xe=Ge.get(V);xe.__webglFramebuffer=se,xe.__useDefaultFramebuffer=se===void 0},this.setRenderTarget=function(V,se=0,xe=0){T=V,C=se,M=xe;let _e=!0,de=null,je=!1,lt=!1;if(V){const $e=Ge.get(V);$e.__useDefaultFramebuffer!==void 0?(Me.bindFramebuffer(z.FRAMEBUFFER,null),_e=!1):$e.__webglFramebuffer===void 0?Ze.setupRenderTarget(V):$e.__hasExternalTextures&&Ze.rebindTextures(V,Ge.get(V.texture).__webglTexture,Ge.get(V.depthTexture).__webglTexture);const ht=V.texture;(ht.isData3DTexture||ht.isDataArrayTexture||ht.isCompressedArrayTexture)&&(lt=!0);const Mt=Ge.get(V).__webglFramebuffer;V.isWebGLCubeRenderTarget?(Array.isArray(Mt[se])?de=Mt[se][xe]:de=Mt[se],je=!0):V.samples>0&&Ze.useMultisampledRTT(V)===!1?de=Ge.get(V).__webglMultisampledFramebuffer:Array.isArray(Mt)?de=Mt[xe]:de=Mt,D.copy(V.viewport),I.copy(V.scissor),L=V.scissorTest}else D.copy(X).multiplyScalar(J).floor(),I.copy(ee).multiplyScalar(J).floor(),L=te;if(Me.bindFramebuffer(z.FRAMEBUFFER,de)&&_e&&Me.drawBuffers(V,de),Me.viewport(D),Me.scissor(I),Me.setScissorTest(L),je){const $e=Ge.get(V.texture);z.framebufferTexture2D(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,z.TEXTURE_CUBE_MAP_POSITIVE_X+se,$e.__webglTexture,xe)}else if(lt){const $e=Ge.get(V.texture),ht=se||0;z.framebufferTextureLayer(z.FRAMEBUFFER,z.COLOR_ATTACHMENT0,$e.__webglTexture,xe||0,ht)}R=-1},this.readRenderTargetPixels=function(V,se,xe,_e,de,je,lt){if(!(V&&V.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ct=Ge.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&lt!==void 0&&(ct=ct[lt]),ct){Me.bindFramebuffer(z.FRAMEBUFFER,ct);try{const $e=V.texture,ht=$e.format,Mt=$e.type;if(!ke.textureFormatReadable(ht)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ke.textureTypeReadable(Mt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}se>=0&&se<=V.width-_e&&xe>=0&&xe<=V.height-de&&z.readPixels(se,xe,_e,de,ne.convert(ht),ne.convert(Mt),je)}finally{const $e=T!==null?Ge.get(T).__webglFramebuffer:null;Me.bindFramebuffer(z.FRAMEBUFFER,$e)}}},this.readRenderTargetPixelsAsync=async function(V,se,xe,_e,de,je,lt){if(!(V&&V.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ct=Ge.get(V).__webglFramebuffer;if(V.isWebGLCubeRenderTarget&&lt!==void 0&&(ct=ct[lt]),ct){Me.bindFramebuffer(z.FRAMEBUFFER,ct);try{const $e=V.texture,ht=$e.format,Mt=$e.type;if(!ke.textureFormatReadable(ht))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ke.textureTypeReadable(Mt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(se>=0&&se<=V.width-_e&&xe>=0&&xe<=V.height-de){const gt=z.createBuffer();z.bindBuffer(z.PIXEL_PACK_BUFFER,gt),z.bufferData(z.PIXEL_PACK_BUFFER,je.byteLength,z.STREAM_READ),z.readPixels(se,xe,_e,de,ne.convert(ht),ne.convert(Mt),0),z.flush();const Gt=z.fenceSync(z.SYNC_GPU_COMMANDS_COMPLETE,0);await hV(z,Gt,4);try{z.bindBuffer(z.PIXEL_PACK_BUFFER,gt),z.getBufferSubData(z.PIXEL_PACK_BUFFER,0,je)}finally{z.deleteBuffer(gt),z.deleteSync(Gt)}return je}}finally{const $e=T!==null?Ge.get(T).__webglFramebuffer:null;Me.bindFramebuffer(z.FRAMEBUFFER,$e)}}},this.copyFramebufferToTexture=function(V,se=null,xe=0){V.isTexture!==!0&&(console.warn("WebGLRenderer: copyFramebufferToTexture function signature has changed."),se=arguments[0]||null,V=arguments[1]);const _e=Math.pow(2,-xe),de=Math.floor(V.image.width*_e),je=Math.floor(V.image.height*_e),lt=se!==null?se.x:0,ct=se!==null?se.y:0;Ze.setTexture2D(V,0),z.copyTexSubImage2D(z.TEXTURE_2D,xe,0,0,lt,ct,de,je),Me.unbindTexture()},this.copyTextureToTexture=function(V,se,xe=null,_e=null,de=0){V.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture function signature has changed."),_e=arguments[0]||null,V=arguments[1],se=arguments[2],de=arguments[3]||0,xe=null);let je,lt,ct,$e,ht,Mt;xe!==null?(je=xe.max.x-xe.min.x,lt=xe.max.y-xe.min.y,ct=xe.min.x,$e=xe.min.y):(je=V.image.width,lt=V.image.height,ct=0,$e=0),_e!==null?(ht=_e.x,Mt=_e.y):(ht=0,Mt=0);const gt=ne.convert(se.format),Gt=ne.convert(se.type);Ze.setTexture2D(se,0),z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,se.flipY),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,se.premultiplyAlpha),z.pixelStorei(z.UNPACK_ALIGNMENT,se.unpackAlignment);const an=z.getParameter(z.UNPACK_ROW_LENGTH),on=z.getParameter(z.UNPACK_IMAGE_HEIGHT),wt=z.getParameter(z.UNPACK_SKIP_PIXELS),ut=z.getParameter(z.UNPACK_SKIP_ROWS),Ke=z.getParameter(z.UNPACK_SKIP_IMAGES),Ft=V.isCompressedTexture?V.mipmaps[de]:V.image;z.pixelStorei(z.UNPACK_ROW_LENGTH,Ft.width),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,Ft.height),z.pixelStorei(z.UNPACK_SKIP_PIXELS,ct),z.pixelStorei(z.UNPACK_SKIP_ROWS,$e),V.isDataTexture?z.texSubImage2D(z.TEXTURE_2D,de,ht,Mt,je,lt,gt,Gt,Ft.data):V.isCompressedTexture?z.compressedTexSubImage2D(z.TEXTURE_2D,de,ht,Mt,Ft.width,Ft.height,gt,Ft.data):z.texSubImage2D(z.TEXTURE_2D,de,ht,Mt,je,lt,gt,Gt,Ft),z.pixelStorei(z.UNPACK_ROW_LENGTH,an),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,on),z.pixelStorei(z.UNPACK_SKIP_PIXELS,wt),z.pixelStorei(z.UNPACK_SKIP_ROWS,ut),z.pixelStorei(z.UNPACK_SKIP_IMAGES,Ke),de===0&&se.generateMipmaps&&z.generateMipmap(z.TEXTURE_2D),Me.unbindTexture()},this.copyTextureToTexture3D=function(V,se,xe=null,_e=null,de=0){V.isTexture!==!0&&(console.warn("WebGLRenderer: copyTextureToTexture3D function signature has changed."),xe=arguments[0]||null,_e=arguments[1]||null,V=arguments[2],se=arguments[3],de=arguments[4]||0);let je,lt,ct,$e,ht,Mt,gt,Gt,an;const on=V.isCompressedTexture?V.mipmaps[de]:V.image;xe!==null?(je=xe.max.x-xe.min.x,lt=xe.max.y-xe.min.y,ct=xe.max.z-xe.min.z,$e=xe.min.x,ht=xe.min.y,Mt=xe.min.z):(je=on.width,lt=on.height,ct=on.depth,$e=0,ht=0,Mt=0),_e!==null?(gt=_e.x,Gt=_e.y,an=_e.z):(gt=0,Gt=0,an=0);const wt=ne.convert(se.format),ut=ne.convert(se.type);let Ke;if(se.isData3DTexture)Ze.setTexture3D(se,0),Ke=z.TEXTURE_3D;else if(se.isDataArrayTexture||se.isCompressedArrayTexture)Ze.setTexture2DArray(se,0),Ke=z.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}z.pixelStorei(z.UNPACK_FLIP_Y_WEBGL,se.flipY),z.pixelStorei(z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,se.premultiplyAlpha),z.pixelStorei(z.UNPACK_ALIGNMENT,se.unpackAlignment);const Ft=z.getParameter(z.UNPACK_ROW_LENGTH),Dt=z.getParameter(z.UNPACK_IMAGE_HEIGHT),xn=z.getParameter(z.UNPACK_SKIP_PIXELS),er=z.getParameter(z.UNPACK_SKIP_ROWS),pi=z.getParameter(z.UNPACK_SKIP_IMAGES);z.pixelStorei(z.UNPACK_ROW_LENGTH,on.width),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,on.height),z.pixelStorei(z.UNPACK_SKIP_PIXELS,$e),z.pixelStorei(z.UNPACK_SKIP_ROWS,ht),z.pixelStorei(z.UNPACK_SKIP_IMAGES,Mt),V.isDataTexture||V.isData3DTexture?z.texSubImage3D(Ke,de,gt,Gt,an,je,lt,ct,wt,ut,on.data):se.isCompressedArrayTexture?z.compressedTexSubImage3D(Ke,de,gt,Gt,an,je,lt,ct,wt,on.data):z.texSubImage3D(Ke,de,gt,Gt,an,je,lt,ct,wt,ut,on),z.pixelStorei(z.UNPACK_ROW_LENGTH,Ft),z.pixelStorei(z.UNPACK_IMAGE_HEIGHT,Dt),z.pixelStorei(z.UNPACK_SKIP_PIXELS,xn),z.pixelStorei(z.UNPACK_SKIP_ROWS,er),z.pixelStorei(z.UNPACK_SKIP_IMAGES,pi),de===0&&se.generateMipmaps&&z.generateMipmap(Ke),Me.unbindTexture()},this.initRenderTarget=function(V){Ge.get(V).__webglFramebuffer===void 0&&Ze.setupRenderTarget(V)},this.initTexture=function(V){V.isCubeTexture?Ze.setTextureCube(V,0):V.isData3DTexture?Ze.setTexture3D(V,0):V.isDataArrayTexture||V.isCompressedArrayTexture?Ze.setTexture2DArray(V,0):Ze.setTexture2D(V,0),Me.unbindTexture()},this.resetState=function(){C=0,M=0,T=null,Me.reset(),Re.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Ho}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=e===Vx?"display-p3":"srgb",t.unpackColorSpace=vn.workingColorSpace===vm?"display-p3":"srgb"}}class qx{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new mt(e),this.density=t}clone(){return new qx(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Xx{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new mt(e),this.near=t,this.far=i}clone(){return new Xx(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Hy extends fn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new gs,this.environmentIntensity=1,this.environmentRotation=new gs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class $x{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=Gp,this._updateRange={offset:0,count:-1},this.updateRanges=[],this.version=0,this.uuid=ps()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}get updateRange(){return Tb("THREE.InterleavedBuffer: updateRange() is deprecated and will be removed in r169. Use addUpdateRange() instead."),this._updateRange}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ps()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ps()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Mr=new j;class fs{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Mr.fromBufferAttribute(this,t),Mr.applyMatrix4(e),this.setXYZ(t,Mr.x,Mr.y,Mr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Mr.fromBufferAttribute(this,t),Mr.applyNormalMatrix(e),this.setXYZ(t,Mr.x,Mr.y,Mr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Mr.fromBufferAttribute(this,t),Mr.transformDirection(e),this.setXYZ(t,Mr.x,Mr.y,Mr.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Dr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Yt(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Yt(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Yt(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Yt(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Yt(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Dr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Dr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Dr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Dr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Yt(t,this.array),i=Yt(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Yt(t,this.array),i=Yt(i,this.array),r=Yt(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Yt(t,this.array),i=Yt(i,this.array),r=Yt(r,this.array),s=Yt(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new Mn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new fs(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class Ob extends Qi{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new mt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let cf;const Ad=new j,ff=new j,hf=new j,df=new Fe,Cd=new Fe,pO=new zt,Ev=new j,Dd=new j,bv=new j,V2=new Fe,Nw=new Fe,W2=new Fe;class mO extends fn{constructor(e=new Ob){if(super(),this.isSprite=!0,this.type="Sprite",cf===void 0){cf=new Kt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new $x(t,5);cf.setIndex([0,1,2,0,2,3]),cf.setAttribute("position",new fs(i,3,0,!1)),cf.setAttribute("uv",new fs(i,2,3,!1))}this.geometry=cf,this.material=e,this.center=new Fe(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),ff.setFromMatrixScale(this.matrixWorld),pO.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),hf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&ff.multiplyScalar(-hf.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Av(Ev.set(-.5,-.5,0),hf,o,ff,r,s),Av(Dd.set(.5,-.5,0),hf,o,ff,r,s),Av(bv.set(.5,.5,0),hf,o,ff,r,s),V2.set(0,0),Nw.set(1,0),W2.set(1,1);let a=e.ray.intersectTriangle(Ev,Dd,bv,!1,Ad);if(a===null&&(Av(Dd.set(-.5,.5,0),hf,o,ff,r,s),Nw.set(0,1),a=e.ray.intersectTriangle(Ev,bv,Dd,!1,Ad),a===null))return;const l=e.ray.origin.distanceTo(Ad);l<e.near||l>e.far||t.push({distance:l,point:Ad.clone(),uv:us.getInterpolation(Ad,Ev,Dd,bv,V2,Nw,W2,new Fe),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Av(n,e,t,i,r,s){df.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Cd.x=s*df.x-r*df.y,Cd.y=r*df.x+s*df.y):Cd.copy(df),n.copy(e),n.x+=Cd.x,n.y+=Cd.y,n.applyMatrix4(pO)}const Cv=new j,G2=new j;class gO extends fn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Cv.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Cv);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Cv.setFromMatrixPosition(e.matrixWorld),G2.setFromMatrixPosition(this.matrixWorld);const i=Cv.distanceTo(G2)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const j2=new j,q2=new sn,X2=new sn,Ej=new j,$2=new zt,Dv=new j,Lw=new Ui,Y2=new zt,Ow=new vc;class vO extends hi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=TM,this.bindMatrix=new zt,this.bindMatrixInverse=new zt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Bi),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Dv),this.boundingBox.expandByPoint(Dv)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ui),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Dv),this.boundingSphere.expandByPoint(Dv)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Lw.copy(this.boundingSphere),Lw.applyMatrix4(r),e.ray.intersectsSphere(Lw)!==!1&&(Y2.copy(r).invert(),Ow.copy(e.ray).applyMatrix4(Y2),!(this.boundingBox!==null&&Ow.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Ow)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new sn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===TM?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===zL?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;q2.fromBufferAttribute(r.attributes.skinIndex,e),X2.fromBufferAttribute(r.attributes.skinWeight,e),j2.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=X2.getComponent(s);if(o!==0){const a=q2.getComponent(s);$2.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(Ej.copy(j2).applyMatrix4($2),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class zb extends fn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class qo extends jn{constructor(e=null,t=1,i=1,r,s,o,a,l,u=Oi,c=Oi,f,h){super(null,o,a,l,u,c,r,s,f,h),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const Z2=new zt,bj=new zt;class Yx{constructor(e=[],t=[]){this.uuid=ps(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new zt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new zt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:bj;Z2.multiplyMatrices(a,t[s]),Z2.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Yx(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new qo(t,e,e,pr,Tr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new zb),this.bones.push(o),this.boneInverses.push(new zt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class yh extends Mn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const pf=new zt,K2=new zt,Tv=[],J2=new Bi,Aj=new zt,Td=new hi,Pd=new Ui;class yO extends hi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new yh(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Aj)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Bi),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,pf),J2.copy(e.boundingBox).applyMatrix4(pf),this.boundingBox.union(J2)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ui),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,pf),Pd.copy(e.boundingSphere).applyMatrix4(pf),this.boundingSphere.union(Pd)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Td.geometry=this.geometry,Td.material=this.material,Td.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Pd.copy(this.boundingSphere),Pd.applyMatrix4(i),e.ray.intersectsSphere(Pd)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,pf),K2.multiplyMatrices(i,pf),Td.matrixWorld=K2,Td.raycast(e,Tv);for(let o=0,a=Tv.length;o<a;o++){const l=Tv[o];l.instanceId=s,l.object=this,t.push(l)}Tv.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new yh(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new qo(new Float32Array(r*this.count),r,this.count,Bx,Tr));const s=this.morphTexture.source.data.data;let o=0;for(let u=0;u<i.length;u++)o+=i[u];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function Cj(n,e){return n.z-e.z}function Dj(n,e){return e.z-n.z}class Tj{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i){const r=this.pool,s=this.list;this.index>=r.length&&r.push({start:-1,count:-1,z:-1,index:-1});const o=r[this.index];s.push(o),this.index++,o.start=e.start,o.count=e.count,o.z=t,o.index=i}reset(){this.list.length=0,this.index=0}}const sl=new zt,zw=new zt,Pj=new zt,Rj=new mt(1,1,1),Q2=new zt,Bw=new _m,Pv=new Bi,fu=new Ui,Rd=new j,eP=new j,Ij=new j,Uw=new Tj,ur=new hi,Rv=[];function Fj(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}class xO extends hi{get maxInstanceCount(){return this._maxInstanceCount}constructor(e,t,i=t*2,r){super(new Kt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._drawInfo=[],this._drawRanges=[],this._reservedRanges=[],this._bounds=[],this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._geometryInitialized=!1,this._geometryCount=0,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._visibilityChanged=!0,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new qo(t,e,e,pr,Tr);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new qo(t,e,e,gm,Oa);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxIndexCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new qo(t,e,e,pr,Tr);i.colorSpace=vn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:u}=o,c=new a.constructor(i*l),f=new Mn(c,l,u);t.setAttribute(s,f)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new Mn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Bi);const e=this._geometryCount,t=this.boundingBox,i=this._drawInfo;t.makeEmpty();for(let r=0;r<e;r++){if(i[r].active===!1)continue;const s=i[r].geometryIndex;this.getMatrixAt(r,sl),this.getBoundingBoxAt(s,Pv).applyMatrix4(sl),t.union(Pv)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ui);const e=this.boundingSphere,t=this._drawInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,sl),this.getBoundingSphereAt(s,fu).applyMatrix4(sl),e.union(fu)}}addInstance(e){if(this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");this._drawInfo.push({visible:!0,active:!0,geometryIndex:e});const t=this._drawInfo.length-1,i=this._matricesTexture,r=i.image.data;Pj.toArray(r,t*16),i.needsUpdate=!0;const s=this._colorsTexture;return s&&(Rj.toArray(s.image.data,t*4),s.needsUpdate=!0),t}addGeometry(e,t=-1,i=-1){if(this._initializeGeometry(e),this._validateGeometry(e),this._drawInfo.length>=this._maxInstanceCount)throw new Error("BatchedMesh: Maximum item count reached.");const r={vertexStart:-1,vertexCount:-1,indexStart:-1,indexCount:-1};let s=null;const o=this._reservedRanges,a=this._drawRanges,l=this._bounds;this._geometryCount!==0&&(s=o[o.length-1]),t===-1?r.vertexCount=e.getAttribute("position").count:r.vertexCount=t,s===null?r.vertexStart=0:r.vertexStart=s.vertexStart+s.vertexCount;const u=e.getIndex(),c=u!==null;if(c&&(i===-1?r.indexCount=u.count:r.indexCount=i,s===null?r.indexStart=0:r.indexStart=s.indexStart+s.indexCount),r.indexStart!==-1&&r.indexStart+r.indexCount>this._maxIndexCount||r.vertexStart+r.vertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");const f=this._geometryCount;return this._geometryCount++,o.push(r),a.push({start:c?r.indexStart:r.vertexStart,count:-1}),l.push({boxInitialized:!1,box:new Bi,sphereInitialized:!1,sphere:new Ui}),this.setGeometryAt(f,e),f}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._reservedRanges[e];if(r&&o.count>a.indexCount||t.attributes.position.count>a.vertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.vertexCount;for(const m in i.attributes){const v=t.getAttribute(m),g=i.getAttribute(m);Fj(v,g,l);const x=v.itemSize;for(let y=v.count,_=u;y<_;y++){const w=l+y;for(let E=0;E<x;E++)g.setComponent(w,E,0)}g.needsUpdate=!0,g.addUpdateRange(l*x,u*x)}if(r){const m=a.indexStart;for(let v=0;v<o.count;v++)s.setX(m+v,l+o.getX(v));for(let v=o.count,g=a.indexCount;v<g;v++)s.setX(m+v,l);s.needsUpdate=!0,s.addUpdateRange(m,a.indexCount)}const c=this._bounds[e];t.boundingBox!==null?(c.box.copy(t.boundingBox),c.boxInitialized=!0):c.boxInitialized=!1,t.boundingSphere!==null?(c.sphere.copy(t.boundingSphere),c.sphereInitialized=!0):c.sphereInitialized=!1;const f=this._drawRanges[e],h=t.getAttribute("position");return f.count=r?o.count:h.count,this._visibilityChanged=!0,e}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this._bounds[e],r=i.box,s=this.geometry;if(i.boxInitialized===!1){r.makeEmpty();const o=s.index,a=s.attributes.position,l=this._drawRanges[e];for(let u=l.start,c=l.start+l.count;u<c;u++){let f=u;o&&(f=o.getX(f)),r.expandByPoint(Rd.fromBufferAttribute(a,f))}i.boxInitialized=!0}return t.copy(r),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this._bounds[e],r=i.sphere,s=this.geometry;if(i.sphereInitialized===!1){r.makeEmpty(),this.getBoundingBoxAt(e,Pv),Pv.getCenter(r.center);const o=s.index,a=s.attributes.position,l=this._drawRanges[e];let u=0;for(let c=l.start,f=l.start+l.count;c<f;c++){let h=c;o&&(h=o.getX(h)),Rd.fromBufferAttribute(a,h),u=Math.max(u,r.center.distanceToSquared(Rd))}r.radius=Math.sqrt(u),i.sphereInitialized=!0}return t.copy(r),t}setMatrixAt(e,t){const i=this._drawInfo,r=this._matricesTexture,s=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._drawInfo,r=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?null:t.fromArray(r,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const i=this._colorsTexture,r=this._colorsTexture.image.data,s=this._drawInfo;return e>=s.length||s[e].active===!1?this:(t.toArray(r,e*4),i.needsUpdate=!0,this)}getColorAt(e,t){const i=this._colorsTexture.image.data,r=this._drawInfo;return e>=r.length||r[e].active===!1?null:t.fromArray(i,e*4)}setVisibleAt(e,t){const i=this._drawInfo;return e>=i.length||i[e].active===!1||i[e].visible===t?this:(i[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._drawInfo;return e>=t.length||t[e].active===!1?!1:t[e].visible}raycast(e,t){const i=this._drawInfo,r=this._drawRanges,s=this.matrixWorld,o=this.geometry;ur.material=this.material,ur.geometry.index=o.index,ur.geometry.attributes=o.attributes,ur.geometry.boundingBox===null&&(ur.geometry.boundingBox=new Bi),ur.geometry.boundingSphere===null&&(ur.geometry.boundingSphere=new Ui);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const u=i[a].geometryIndex,c=r[u];ur.geometry.setDrawRange(c.start,c.count),this.getMatrixAt(a,ur.matrixWorld).premultiply(s),this.getBoundingBoxAt(u,ur.geometry.boundingBox),this.getBoundingSphereAt(u,ur.geometry.boundingSphere),ur.raycast(e,Rv);for(let f=0,h=Rv.length;f<h;f++){const m=Rv[f];m.object=this,m.batchId=a,t.push(m)}Rv.length=0}ur.material=null,ur.geometry.index=null,ur.geometry.attributes={},ur.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._drawRanges=e._drawRanges.map(t=>({...t})),this._reservedRanges=e._reservedRanges.map(t=>({...t})),this._drawInfo=e._drawInfo.map(t=>({...t})),this._bounds=e._bounds.map(t=>({boxInitialized:t.boxInitialized,box:t.box.clone(),sphereInitialized:t.sphereInitialized,sphere:t.sphere.clone()})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._drawInfo,u=this._multiDrawStarts,c=this._multiDrawCounts,f=this._drawRanges,h=this.perObjectFrustumCulled,m=this._indirectTexture,v=m.image.data;h&&(Q2.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),Bw.setFromProjectionMatrix(Q2,e.coordinateSystem));let g=0;if(this.sortObjects){zw.copy(this.matrixWorld).invert(),Rd.setFromMatrixPosition(i.matrixWorld).applyMatrix4(zw),eP.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(zw);for(let _=0,w=l.length;_<w;_++)if(l[_].visible&&l[_].active){const E=l[_].geometryIndex;this.getMatrixAt(_,sl),this.getBoundingSphereAt(E,fu).applyMatrix4(sl);let C=!1;if(h&&(C=!Bw.intersectsSphere(fu)),!C){const M=Ij.subVectors(fu.center,Rd).dot(eP);Uw.push(f[E],M,_)}}const x=Uw.list,y=this.customSort;y===null?x.sort(s.transparent?Dj:Cj):y.call(this,x,i);for(let _=0,w=x.length;_<w;_++){const E=x[_];u[g]=E.start*a,c[g]=E.count,v[g]=E.index,g++}Uw.reset()}else for(let x=0,y=l.length;x<y;x++)if(l[x].visible&&l[x].active){const _=l[x].geometryIndex;let w=!1;if(h&&(this.getMatrixAt(x,sl),this.getBoundingSphereAt(_,fu).applyMatrix4(sl),w=!Bw.intersectsSphere(fu)),!w){const E=f[_];u[g]=E.start*a,c[g]=E.count,v[g]=x,g++}}m.needsUpdate=!0,this._multiDrawCount=g,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Lr extends Qi{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new mt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Vy=new j,Wy=new j,tP=new zt,Id=new vc,Iv=new Ui,kw=new j,nP=new j;let Fl=class extends fn{constructor(e=new Kt,t=new Lr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)Vy.fromBufferAttribute(t,r-1),Wy.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Vy.distanceTo(Wy);e.setAttribute("lineDistance",new _t(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Iv.copy(i.boundingSphere),Iv.applyMatrix4(r),Iv.radius+=s,e.ray.intersectsSphere(Iv)===!1)return;tP.copy(r).invert(),Id.copy(e.ray).applyMatrix4(tP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,c=i.index,h=i.attributes.position;if(c!==null){const m=Math.max(0,o.start),v=Math.min(c.count,o.start+o.count);for(let g=m,x=v-1;g<x;g+=u){const y=c.getX(g),_=c.getX(g+1),w=Fv(this,e,Id,l,y,_);w&&t.push(w)}if(this.isLineLoop){const g=c.getX(v-1),x=c.getX(m),y=Fv(this,e,Id,l,g,x);y&&t.push(y)}}else{const m=Math.max(0,o.start),v=Math.min(h.count,o.start+o.count);for(let g=m,x=v-1;g<x;g+=u){const y=Fv(this,e,Id,l,g,g+1);y&&t.push(y)}if(this.isLineLoop){const g=Fv(this,e,Id,l,v-1,m);g&&t.push(g)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function Fv(n,e,t,i,r,s){const o=n.geometry.attributes.position;if(Vy.fromBufferAttribute(o,r),Wy.fromBufferAttribute(o,s),t.distanceSqToSegment(Vy,Wy,kw,nP)>i)return;kw.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(kw);if(!(l<e.near||l>e.far))return{distance:l,point:nP.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,object:n}}const iP=new j,rP=new j;class Jo extends Fl{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)iP.fromBufferAttribute(t,r),rP.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+iP.distanceTo(rP);e.setAttribute("lineDistance",new _t(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class _O extends Fl{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Bb extends Qi{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new mt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const sP=new zt,LM=new vc,Nv=new Ui,Lv=new j;class wO extends fn{constructor(e=new Kt,t=new Bb){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Nv.copy(i.boundingSphere),Nv.applyMatrix4(r),Nv.radius+=s,e.ray.intersectsSphere(Nv)===!1)return;sP.copy(r).invert(),LM.copy(e.ray).applyMatrix4(sP);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=i.index,f=i.attributes.position;if(u!==null){const h=Math.max(0,o.start),m=Math.min(u.count,o.start+o.count);for(let v=h,g=m;v<g;v++){const x=u.getX(v);Lv.fromBufferAttribute(f,x),oP(Lv,x,l,r,e,t,this)}}else{const h=Math.max(0,o.start),m=Math.min(f.count,o.start+o.count);for(let v=h,g=m;v<g;v++)Lv.fromBufferAttribute(f,v),oP(Lv,v,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function oP(n,e,t,i,r,s,o){const a=LM.distanceSqToPoint(n);if(a<t){const l=new j;LM.closestPointToPoint(n,l),l.applyMatrix4(i);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,object:o})}}class Nj extends jn{constructor(e,t,i,r,s,o,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:ai,this.magFilter=s!==void 0?s:ai,this.generateMipmaps=!1;const c=this;function f(){c.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class Lj extends jn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Oi,this.minFilter=Oi,this.generateMipmaps=!1,this.needsUpdate=!0}}class Zx extends jn{constructor(e,t,i,r,s,o,a,l,u,c,f,h){super(null,o,a,l,u,c,r,s,f,h),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class Oj extends Zx{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=zs,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class zj extends Zx{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,La),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class Bj extends jn{constructor(e,t,i,r,s,o,a,l,u){super(e,t,i,r,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}let _o=class{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=i[r]-o,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const c=i[r],h=i[r+1]-c,m=(o-c)/h;return(r+m)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Fe:new j);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new j,r=[],s=[],o=[],a=new j,l=new zt;for(let m=0;m<=e;m++){const v=m/e;r[m]=this.getTangentAt(v,new j)}s[0]=new j,o[0]=new j;let u=Number.MAX_VALUE;const c=Math.abs(r[0].x),f=Math.abs(r[0].y),h=Math.abs(r[0].z);c<=u&&(u=c,i.set(1,0,0)),f<=u&&(u=f,i.set(0,1,0)),h<=u&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let m=1;m<=e;m++){if(s[m]=s[m-1].clone(),o[m]=o[m-1].clone(),a.crossVectors(r[m-1],r[m]),a.length()>Number.EPSILON){a.normalize();const v=Math.acos(si(r[m-1].dot(r[m]),-1,1));s[m].applyMatrix4(l.makeRotationAxis(a,v))}o[m].crossVectors(r[m],s[m])}if(t===!0){let m=Math.acos(si(s[0].dot(s[e]),-1,1));m/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(m=-m);for(let v=1;v<=e;v++)s[v].applyMatrix4(l.makeRotationAxis(r[v],m*v)),o[v].crossVectors(r[v],s[v])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}};class Kx extends _o{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new Fe){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),f=Math.sin(this.aRotation),h=l-this.aX,m=u-this.aY;l=h*c-m*f+this.aX,u=h*f+m*c+this.aY}return i.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class SO extends Kx{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function Ub(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){r(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,c,f){let h=(o-s)/u-(a-s)/(u+c)+(a-o)/c,m=(a-o)/c-(l-o)/(c+f)+(l-a)/f;h*=c,m*=c,r(o,a,h,m)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const Ov=new j,Hw=new Ub,Vw=new Ub,Ww=new Ub;class kb extends _o{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new j){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,c;this.closed||a>0?u=r[(a-1)%s]:(Ov.subVectors(r[0],r[1]).add(r[0]),u=Ov);const f=r[a%s],h=r[(a+1)%s];if(this.closed||a+2<s?c=r[(a+2)%s]:(Ov.subVectors(r[s-1],r[s-2]).add(r[s-1]),c=Ov),this.curveType==="centripetal"||this.curveType==="chordal"){const m=this.curveType==="chordal"?.5:.25;let v=Math.pow(u.distanceToSquared(f),m),g=Math.pow(f.distanceToSquared(h),m),x=Math.pow(h.distanceToSquared(c),m);g<1e-4&&(g=1),v<1e-4&&(v=g),x<1e-4&&(x=g),Hw.initNonuniformCatmullRom(u.x,f.x,h.x,c.x,v,g,x),Vw.initNonuniformCatmullRom(u.y,f.y,h.y,c.y,v,g,x),Ww.initNonuniformCatmullRom(u.z,f.z,h.z,c.z,v,g,x)}else this.curveType==="catmullrom"&&(Hw.initCatmullRom(u.x,f.x,h.x,c.x,this.tension),Vw.initCatmullRom(u.y,f.y,h.y,c.y,this.tension),Ww.initCatmullRom(u.z,f.z,h.z,c.z,this.tension));return i.set(Hw.calc(l),Vw.calc(l),Ww.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new j().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function aP(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function Uj(n,e){const t=1-n;return t*t*e}function kj(n,e){return 2*(1-n)*n*e}function Hj(n,e){return n*n*e}function dp(n,e,t,i){return Uj(n,e)+kj(n,t)+Hj(n,i)}function Vj(n,e){const t=1-n;return t*t*t*e}function Wj(n,e){const t=1-n;return 3*t*t*n*e}function Gj(n,e){return 3*(1-n)*n*n*e}function jj(n,e){return n*n*n*e}function pp(n,e,t,i,r){return Vj(n,e)+Wj(n,t)+Gj(n,i)+jj(n,r)}class Hb extends _o{constructor(e=new Fe,t=new Fe,i=new Fe,r=new Fe){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Fe){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(pp(e,r.x,s.x,o.x,a.x),pp(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class MO extends _o{constructor(e=new j,t=new j,i=new j,r=new j){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new j){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(pp(e,r.x,s.x,o.x,a.x),pp(e,r.y,s.y,o.y,a.y),pp(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Vb extends _o{constructor(e=new Fe,t=new Fe){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Fe){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Fe){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class EO extends _o{constructor(e=new j,t=new j){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new j){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new j){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Wb extends _o{constructor(e=new Fe,t=new Fe,i=new Fe){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Fe){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(dp(e,r.x,s.x,o.x),dp(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Gb extends _o{constructor(e=new j,t=new j,i=new j){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new j){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(dp(e,r.x,s.x,o.x),dp(e,r.y,s.y,o.y),dp(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class jb extends _o{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Fe){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],u=r[o],c=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(aP(a,l.x,u.x,c.x,f.x),aP(a,l.y,u.y,c.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Fe().fromArray(r))}return this}}var Gy=Object.freeze({__proto__:null,ArcCurve:SO,CatmullRomCurve3:kb,CubicBezierCurve:Hb,CubicBezierCurve3:MO,EllipseCurve:Kx,LineCurve:Vb,LineCurve3:EO,QuadraticBezierCurve:Wb,QuadraticBezierCurve3:Gb,SplineCurve:jb});class bO extends _o{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new Gy[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const c=l[u];i&&i.equals(c)||(t.push(c),i=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new Gy[r.type]().fromJSON(r))}return this}}class Xp extends bO{constructor(e){super(),this.type="Path",this.currentPoint=new Fe,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Vb(this.currentPoint.clone(),new Fe(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new Wb(this.currentPoint.clone(),new Fe(e,t),new Fe(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new Hb(this.currentPoint.clone(),new Fe(e,t),new Fe(i,r),new Fe(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new jb(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const u=new Kx(e,t,i,r,s,o,a,l);if(this.curves.length>0){const f=u.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class wm extends Kt{constructor(e=[new Fe(0,-.5),new Fe(.5,0),new Fe(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=si(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],c=1/t,f=new j,h=new Fe,m=new j,v=new j,g=new j;let x=0,y=0;for(let _=0;_<=e.length-1;_++)switch(_){case 0:x=e[_+1].x-e[_].x,y=e[_+1].y-e[_].y,m.x=y*1,m.y=-x,m.z=y*0,g.copy(m),m.normalize(),l.push(m.x,m.y,m.z);break;case e.length-1:l.push(g.x,g.y,g.z);break;default:x=e[_+1].x-e[_].x,y=e[_+1].y-e[_].y,m.x=y*1,m.y=-x,m.z=y*0,v.copy(m),m.x+=g.x,m.y+=g.y,m.z+=g.z,m.normalize(),l.push(m.x,m.y,m.z),g.copy(v)}for(let _=0;_<=t;_++){const w=i+_*c*r,E=Math.sin(w),C=Math.cos(w);for(let M=0;M<=e.length-1;M++){f.x=e[M].x*E,f.y=e[M].y,f.z=e[M].x*C,o.push(f.x,f.y,f.z),h.x=_/t,h.y=M/(e.length-1),a.push(h.x,h.y);const T=l[3*M+0]*E,R=l[3*M+1],A=l[3*M+0]*C;u.push(T,R,A)}}for(let _=0;_<t;_++)for(let w=0;w<e.length-1;w++){const E=w+_*e.length,C=E,M=E+e.length,T=E+e.length+1,R=E+1;s.push(C,M,R),s.push(T,R,M)}this.setIndex(s),this.setAttribute("position",new _t(o,3)),this.setAttribute("uv",new _t(a,2)),this.setAttribute("normal",new _t(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new wm(e.points,e.segments,e.phiStart,e.phiLength)}}class Jx extends wm{constructor(e=1,t=1,i=4,r=8){const s=new Xp;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new Jx(e.radius,e.length,e.capSegments,e.radialSegments)}}class Qx extends Kt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new j,c=new Fe;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,h=3;f<=t;f++,h+=3){const m=i+f/t*r;u.x=e*Math.cos(m),u.y=e*Math.sin(m),o.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(o[h]/e+1)/2,c.y=(o[h+1]/e+1)/2,l.push(c.x,c.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new _t(o,3)),this.setAttribute("normal",new _t(a,3)),this.setAttribute("uv",new _t(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qx(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Oh extends Kt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const c=[],f=[],h=[],m=[];let v=0;const g=[],x=i/2;let y=0;_(),o===!1&&(e>0&&w(!0),t>0&&w(!1)),this.setIndex(c),this.setAttribute("position",new _t(f,3)),this.setAttribute("normal",new _t(h,3)),this.setAttribute("uv",new _t(m,2));function _(){const E=new j,C=new j;let M=0;const T=(t-e)/i;for(let R=0;R<=s;R++){const A=[],D=R/s,I=D*(t-e)+e;for(let L=0;L<=r;L++){const H=L/r,k=H*l+a,$=Math.sin(k),G=Math.cos(k);C.x=I*$,C.y=-D*i+x,C.z=I*G,f.push(C.x,C.y,C.z),E.set($,T,G).normalize(),h.push(E.x,E.y,E.z),m.push(H,1-D),A.push(v++)}g.push(A)}for(let R=0;R<r;R++)for(let A=0;A<s;A++){const D=g[A][R],I=g[A+1][R],L=g[A+1][R+1],H=g[A][R+1];c.push(D,I,H),c.push(I,L,H),M+=6}u.addGroup(y,M,0),y+=M}function w(E){const C=v,M=new Fe,T=new j;let R=0;const A=E===!0?e:t,D=E===!0?1:-1;for(let L=1;L<=r;L++)f.push(0,x*D,0),h.push(0,D,0),m.push(.5,.5),v++;const I=v;for(let L=0;L<=r;L++){const k=L/r*l+a,$=Math.cos(k),G=Math.sin(k);T.x=A*G,T.y=x*D,T.z=A*$,f.push(T.x,T.y,T.z),h.push(0,D,0),M.x=$*.5+.5,M.y=G*.5*D+.5,m.push(M.x,M.y),v++}for(let L=0;L<r;L++){const H=C+L,k=I+L;E===!0?c.push(k,k+1,H):c.push(k+1,k,H),R+=3}u.addGroup(y,R,E===!0?1:2),y+=R}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Oh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class e_ extends Oh{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new e_(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class jl extends Kt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),u(i),c(),this.setAttribute("position",new _t(s,3)),this.setAttribute("normal",new _t(s.slice(),3)),this.setAttribute("uv",new _t(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(_){const w=new j,E=new j,C=new j;for(let M=0;M<t.length;M+=3)m(t[M+0],w),m(t[M+1],E),m(t[M+2],C),l(w,E,C,_)}function l(_,w,E,C){const M=C+1,T=[];for(let R=0;R<=M;R++){T[R]=[];const A=_.clone().lerp(E,R/M),D=w.clone().lerp(E,R/M),I=M-R;for(let L=0;L<=I;L++)L===0&&R===M?T[R][L]=A:T[R][L]=A.clone().lerp(D,L/I)}for(let R=0;R<M;R++)for(let A=0;A<2*(M-R)-1;A++){const D=Math.floor(A/2);A%2===0?(h(T[R][D+1]),h(T[R+1][D]),h(T[R][D])):(h(T[R][D+1]),h(T[R+1][D+1]),h(T[R+1][D]))}}function u(_){const w=new j;for(let E=0;E<s.length;E+=3)w.x=s[E+0],w.y=s[E+1],w.z=s[E+2],w.normalize().multiplyScalar(_),s[E+0]=w.x,s[E+1]=w.y,s[E+2]=w.z}function c(){const _=new j;for(let w=0;w<s.length;w+=3){_.x=s[w+0],_.y=s[w+1],_.z=s[w+2];const E=x(_)/2/Math.PI+.5,C=y(_)/Math.PI+.5;o.push(E,1-C)}v(),f()}function f(){for(let _=0;_<o.length;_+=6){const w=o[_+0],E=o[_+2],C=o[_+4],M=Math.max(w,E,C),T=Math.min(w,E,C);M>.9&&T<.1&&(w<.2&&(o[_+0]+=1),E<.2&&(o[_+2]+=1),C<.2&&(o[_+4]+=1))}}function h(_){s.push(_.x,_.y,_.z)}function m(_,w){const E=_*3;w.x=e[E+0],w.y=e[E+1],w.z=e[E+2]}function v(){const _=new j,w=new j,E=new j,C=new j,M=new Fe,T=new Fe,R=new Fe;for(let A=0,D=0;A<s.length;A+=9,D+=6){_.set(s[A+0],s[A+1],s[A+2]),w.set(s[A+3],s[A+4],s[A+5]),E.set(s[A+6],s[A+7],s[A+8]),M.set(o[D+0],o[D+1]),T.set(o[D+2],o[D+3]),R.set(o[D+4],o[D+5]),C.copy(_).add(w).add(E).divideScalar(3);const I=x(C);g(M,D+0,_,I),g(T,D+2,w,I),g(R,D+4,E,I)}}function g(_,w,E,C){C<0&&_.x===1&&(o[w]=_.x-1),E.x===0&&E.z===0&&(o[w]=C/2/Math.PI+.5)}function x(_){return Math.atan2(_.z,-_.x)}function y(_){return Math.atan2(-_.y,Math.sqrt(_.x*_.x+_.z*_.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new jl(e.vertices,e.indices,e.radius,e.details)}}class t_ extends jl{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new t_(e.radius,e.detail)}}const zv=new j,Bv=new j,Gw=new j,Uv=new us;class AO extends Kt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Xu*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],c=["a","b","c"],f=new Array(3),h={},m=[];for(let v=0;v<l;v+=3){o?(u[0]=o.getX(v),u[1]=o.getX(v+1),u[2]=o.getX(v+2)):(u[0]=v,u[1]=v+1,u[2]=v+2);const{a:g,b:x,c:y}=Uv;if(g.fromBufferAttribute(a,u[0]),x.fromBufferAttribute(a,u[1]),y.fromBufferAttribute(a,u[2]),Uv.getNormal(Gw),f[0]=`${Math.round(g.x*r)},${Math.round(g.y*r)},${Math.round(g.z*r)}`,f[1]=`${Math.round(x.x*r)},${Math.round(x.y*r)},${Math.round(x.z*r)}`,f[2]=`${Math.round(y.x*r)},${Math.round(y.y*r)},${Math.round(y.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let _=0;_<3;_++){const w=(_+1)%3,E=f[_],C=f[w],M=Uv[c[_]],T=Uv[c[w]],R=`${E}_${C}`,A=`${C}_${E}`;A in h&&h[A]?(Gw.dot(h[A].normal)<=s&&(m.push(M.x,M.y,M.z),m.push(T.x,T.y,T.z)),h[A]=null):R in h||(h[R]={index0:u[_],index1:u[w],normal:Gw.clone()})}}for(const v in h)if(h[v]){const{index0:g,index1:x}=h[v];zv.fromBufferAttribute(a,g),Bv.fromBufferAttribute(a,x),m.push(zv.x,zv.y,zv.z),m.push(Bv.x,Bv.y,Bv.z)}this.setAttribute("position",new _t(m,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}let Yu=class extends Xp{constructor(e){super(e),this.uuid=ps(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new Xp().fromJSON(r))}return this}};const qj={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=CO(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u,c,f,h,m;if(i&&(s=Kj(n,e,s,t)),n.length>80*t){a=u=n[0],l=c=n[1];for(let v=t;v<r;v+=t)f=n[v],h=n[v+1],f<a&&(a=f),h<l&&(l=h),f>u&&(u=f),h>c&&(c=h);m=Math.max(u-a,c-l),m=m!==0?32767/m:0}return $p(s,o,t,a,l,m,0),o}};function CO(n,e,t,i,r){let s,o;if(r===lq(n,e,t,i)>0)for(s=e;s<t;s+=i)o=lP(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=lP(s,n[s],n[s+1],o);return o&&n_(o,o.next)&&(Zp(o),o=o.next),o}function oc(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(n_(t,t.next)||Zn(t.prev,t,t.next)===0)){if(Zp(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function $p(n,e,t,i,r,s,o){if(!n)return;!o&&s&&nq(n,i,r,s);let a=n,l,u;for(;n.prev!==n.next;){if(l=n.prev,u=n.next,s?$j(n,i,r,s):Xj(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(u.i/t|0),Zp(n),n=u.next,a=u.next;continue}if(n=u,n===a){o?o===1?(n=Yj(oc(n),e,t),$p(n,e,t,i,r,s,2)):o===2&&Zj(n,e,t,i,r,s):$p(oc(n),e,t,i,r,s,1);break}}}function Xj(n){const e=n.prev,t=n,i=n.next;if(Zn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,u=i.y,c=r<s?r<o?r:o:s<o?s:o,f=a<l?a<u?a:u:l<u?l:u,h=r>s?r>o?r:o:s>o?s:o,m=a>l?a>u?a:u:l>u?l:u;let v=i.next;for(;v!==e;){if(v.x>=c&&v.x<=h&&v.y>=f&&v.y<=m&&Uf(r,a,s,l,o,u,v.x,v.y)&&Zn(v.prev,v,v.next)>=0)return!1;v=v.next}return!0}function $j(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Zn(r,s,o)>=0)return!1;const a=r.x,l=s.x,u=o.x,c=r.y,f=s.y,h=o.y,m=a<l?a<u?a:u:l<u?l:u,v=c<f?c<h?c:h:f<h?f:h,g=a>l?a>u?a:u:l>u?l:u,x=c>f?c>h?c:h:f>h?f:h,y=OM(m,v,e,t,i),_=OM(g,x,e,t,i);let w=n.prevZ,E=n.nextZ;for(;w&&w.z>=y&&E&&E.z<=_;){if(w.x>=m&&w.x<=g&&w.y>=v&&w.y<=x&&w!==r&&w!==o&&Uf(a,c,l,f,u,h,w.x,w.y)&&Zn(w.prev,w,w.next)>=0||(w=w.prevZ,E.x>=m&&E.x<=g&&E.y>=v&&E.y<=x&&E!==r&&E!==o&&Uf(a,c,l,f,u,h,E.x,E.y)&&Zn(E.prev,E,E.next)>=0))return!1;E=E.nextZ}for(;w&&w.z>=y;){if(w.x>=m&&w.x<=g&&w.y>=v&&w.y<=x&&w!==r&&w!==o&&Uf(a,c,l,f,u,h,w.x,w.y)&&Zn(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;E&&E.z<=_;){if(E.x>=m&&E.x<=g&&E.y>=v&&E.y<=x&&E!==r&&E!==o&&Uf(a,c,l,f,u,h,E.x,E.y)&&Zn(E.prev,E,E.next)>=0)return!1;E=E.nextZ}return!0}function Yj(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!n_(r,s)&&DO(r,i,i.next,s)&&Yp(r,s)&&Yp(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),Zp(i),Zp(i.next),i=n=s),i=i.next}while(i!==n);return oc(i)}function Zj(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&sq(o,a)){let l=TO(o,a);o=oc(o,o.next),l=oc(l,l.next),$p(o,e,t,i,r,s,0),$p(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function Kj(n,e,t,i){const r=[];let s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,u=CO(n,a,l,i,!1),u===u.next&&(u.steiner=!0),r.push(rq(u));for(r.sort(Jj),s=0;s<r.length;s++)t=Qj(r[s],t);return t}function Jj(n,e){return n.x-e.x}function Qj(n,e){const t=eq(n,e);if(!t)return e;const i=TO(t,n);return oc(i,i.next),oc(t,t.next)}function eq(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const h=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(h<=s&&h>i&&(i=h,r=t.x<t.next.x?t:t.next,h===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,u=r.y;let c=1/0,f;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&Uf(o<u?s:i,o,l,u,o<u?i:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),Yp(t,n)&&(f<c||f===c&&(t.x>r.x||t.x===r.x&&tq(r,t)))&&(r=t,c=f)),t=t.next;while(t!==a);return r}function tq(n,e){return Zn(n.prev,n,e.prev)<0&&Zn(e.next,n,n.next)<0}function nq(n,e,t,i){let r=n;do r.z===0&&(r.z=OM(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,iq(r)}function iq(n){let e,t,i,r,s,o,a,l,u=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<u&&(a++,i=i.nextZ,!!i);e++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,u*=2}while(o>1);return n}function OM(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function rq(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Uf(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function sq(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!oq(n,e)&&(Yp(n,e)&&Yp(e,n)&&aq(n,e)&&(Zn(n.prev,n,e.prev)||Zn(n,e.prev,e))||n_(n,e)&&Zn(n.prev,n,n.next)>0&&Zn(e.prev,e,e.next)>0)}function Zn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function n_(n,e){return n.x===e.x&&n.y===e.y}function DO(n,e,t,i){const r=Hv(Zn(n,e,t)),s=Hv(Zn(n,e,i)),o=Hv(Zn(t,i,n)),a=Hv(Zn(t,i,e));return!!(r!==s&&o!==a||r===0&&kv(n,t,e)||s===0&&kv(n,i,e)||o===0&&kv(t,n,i)||a===0&&kv(t,e,i))}function kv(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Hv(n){return n>0?1:n<0?-1:0}function oq(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&DO(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function Yp(n,e){return Zn(n.prev,n,n.next)<0?Zn(n,e,n.next)>=0&&Zn(n,n.prev,e)>=0:Zn(n,e,n.prev)<0||Zn(n,n.next,e)<0}function aq(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function TO(n,e){const t=new zM(n.i,n.x,n.y),i=new zM(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function lP(n,e,t,i){const r=new zM(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Zp(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function zM(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function lq(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Xo{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Xo.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];uP(e),cP(i,e);let o=e.length;t.forEach(uP);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,cP(i,t[l]);const a=qj.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function uP(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function cP(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class i_ extends Kt{constructor(e=new Yu([new Fe(.5,.5),new Fe(-.5,.5),new Fe(-.5,-.5),new Fe(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new _t(r,3)),this.setAttribute("uv",new _t(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let h=t.bevelEnabled!==void 0?t.bevelEnabled:!0,m=t.bevelThickness!==void 0?t.bevelThickness:.2,v=t.bevelSize!==void 0?t.bevelSize:m-.1,g=t.bevelOffset!==void 0?t.bevelOffset:0,x=t.bevelSegments!==void 0?t.bevelSegments:3;const y=t.extrudePath,_=t.UVGenerator!==void 0?t.UVGenerator:uq;let w,E=!1,C,M,T,R;y&&(w=y.getSpacedPoints(c),E=!0,h=!1,C=y.computeFrenetFrames(c,!1),M=new j,T=new j,R=new j),h||(x=0,m=0,v=0,g=0);const A=a.extractPoints(u);let D=A.shape;const I=A.holes;if(!Xo.isClockWise(D)){D=D.reverse();for(let z=0,Se=I.length;z<Se;z++){const De=I[z];Xo.isClockWise(De)&&(I[z]=De.reverse())}}const H=Xo.triangulateShape(D,I),k=D;for(let z=0,Se=I.length;z<Se;z++){const De=I[z];D=D.concat(De)}function $(z,Se,De){return Se||console.error("THREE.ExtrudeGeometry: vec does not exist"),z.clone().addScaledVector(Se,De)}const G=D.length,J=H.length;function N(z,Se,De){let ke,Me,Qe;const Ge=z.x-Se.x,Ze=z.y-Se.y,Y=De.x-z.x,B=De.y-z.y,we=Ge*Ge+Ze*Ze,U=Ge*B-Ze*Y;if(Math.abs(U)>Number.EPSILON){const q=Math.sqrt(we),Z=Math.sqrt(Y*Y+B*B),he=Se.x-Ze/q,fe=Se.y+Ge/q,ue=De.x-B/Z,Ne=De.y+Y/Z,ge=((ue-he)*B-(Ne-fe)*Y)/(Ge*B-Ze*Y);ke=he+Ge*ge-z.x,Me=fe+Ze*ge-z.y;const Ee=ke*ke+Me*Me;if(Ee<=2)return new Fe(ke,Me);Qe=Math.sqrt(Ee/2)}else{let q=!1;Ge>Number.EPSILON?Y>Number.EPSILON&&(q=!0):Ge<-Number.EPSILON?Y<-Number.EPSILON&&(q=!0):Math.sign(Ze)===Math.sign(B)&&(q=!0),q?(ke=-Ze,Me=Ge,Qe=Math.sqrt(we)):(ke=Ge,Me=Ze,Qe=Math.sqrt(we/2))}return new Fe(ke/Qe,Me/Qe)}const W=[];for(let z=0,Se=k.length,De=Se-1,ke=z+1;z<Se;z++,De++,ke++)De===Se&&(De=0),ke===Se&&(ke=0),W[z]=N(k[z],k[De],k[ke]);const X=[];let ee,te=W.concat();for(let z=0,Se=I.length;z<Se;z++){const De=I[z];ee=[];for(let ke=0,Me=De.length,Qe=Me-1,Ge=ke+1;ke<Me;ke++,Qe++,Ge++)Qe===Me&&(Qe=0),Ge===Me&&(Ge=0),ee[ke]=N(De[ke],De[Qe],De[Ge]);X.push(ee),te=te.concat(ee)}for(let z=0;z<x;z++){const Se=z/x,De=m*Math.cos(Se*Math.PI/2),ke=v*Math.sin(Se*Math.PI/2)+g;for(let Me=0,Qe=k.length;Me<Qe;Me++){const Ge=$(k[Me],W[Me],ke);ae(Ge.x,Ge.y,-De)}for(let Me=0,Qe=I.length;Me<Qe;Me++){const Ge=I[Me];ee=X[Me];for(let Ze=0,Y=Ge.length;Ze<Y;Ze++){const B=$(Ge[Ze],ee[Ze],ke);ae(B.x,B.y,-De)}}}const ce=v+g;for(let z=0;z<G;z++){const Se=h?$(D[z],te[z],ce):D[z];E?(T.copy(C.normals[0]).multiplyScalar(Se.x),M.copy(C.binormals[0]).multiplyScalar(Se.y),R.copy(w[0]).add(T).add(M),ae(R.x,R.y,R.z)):ae(Se.x,Se.y,0)}for(let z=1;z<=c;z++)for(let Se=0;Se<G;Se++){const De=h?$(D[Se],te[Se],ce):D[Se];E?(T.copy(C.normals[z]).multiplyScalar(De.x),M.copy(C.binormals[z]).multiplyScalar(De.y),R.copy(w[z]).add(T).add(M),ae(R.x,R.y,R.z)):ae(De.x,De.y,f/c*z)}for(let z=x-1;z>=0;z--){const Se=z/x,De=m*Math.cos(Se*Math.PI/2),ke=v*Math.sin(Se*Math.PI/2)+g;for(let Me=0,Qe=k.length;Me<Qe;Me++){const Ge=$(k[Me],W[Me],ke);ae(Ge.x,Ge.y,f+De)}for(let Me=0,Qe=I.length;Me<Qe;Me++){const Ge=I[Me];ee=X[Me];for(let Ze=0,Y=Ge.length;Ze<Y;Ze++){const B=$(Ge[Ze],ee[Ze],ke);E?ae(B.x,B.y+w[c-1].y,w[c-1].x+De):ae(B.x,B.y,f+De)}}}Q(),le();function Q(){const z=r.length/3;if(h){let Se=0,De=G*Se;for(let ke=0;ke<J;ke++){const Me=H[ke];Te(Me[2]+De,Me[1]+De,Me[0]+De)}Se=c+x*2,De=G*Se;for(let ke=0;ke<J;ke++){const Me=H[ke];Te(Me[0]+De,Me[1]+De,Me[2]+De)}}else{for(let Se=0;Se<J;Se++){const De=H[Se];Te(De[2],De[1],De[0])}for(let Se=0;Se<J;Se++){const De=H[Se];Te(De[0]+G*c,De[1]+G*c,De[2]+G*c)}}i.addGroup(z,r.length/3-z,0)}function le(){const z=r.length/3;let Se=0;pe(k,Se),Se+=k.length;for(let De=0,ke=I.length;De<ke;De++){const Me=I[De];pe(Me,Se),Se+=Me.length}i.addGroup(z,r.length/3-z,1)}function pe(z,Se){let De=z.length;for(;--De>=0;){const ke=De;let Me=De-1;Me<0&&(Me=z.length-1);for(let Qe=0,Ge=c+x*2;Qe<Ge;Qe++){const Ze=G*Qe,Y=G*(Qe+1),B=Se+ke+Ze,we=Se+Me+Ze,U=Se+Me+Y,q=Se+ke+Y;Pe(B,we,U,q)}}}function ae(z,Se,De){l.push(z),l.push(Se),l.push(De)}function Te(z,Se,De){Ae(z),Ae(Se),Ae(De);const ke=r.length/3,Me=_.generateTopUV(i,r,ke-3,ke-2,ke-1);We(Me[0]),We(Me[1]),We(Me[2])}function Pe(z,Se,De,ke){Ae(z),Ae(Se),Ae(ke),Ae(Se),Ae(De),Ae(ke);const Me=r.length/3,Qe=_.generateSideWallUV(i,r,Me-6,Me-3,Me-2,Me-1);We(Qe[0]),We(Qe[1]),We(Qe[3]),We(Qe[1]),We(Qe[2]),We(Qe[3])}function Ae(z){r.push(l[z*3+0]),r.push(l[z*3+1]),r.push(l[z*3+2])}function We(z){s.push(z.x),s.push(z.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return cq(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new Gy[r.type]().fromJSON(r)),new i_(i,e.options)}}const uq={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],u=e[r*3],c=e[r*3+1];return[new Fe(s,o),new Fe(a,l),new Fe(u,c)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[i*3],c=e[i*3+1],f=e[i*3+2],h=e[r*3],m=e[r*3+1],v=e[r*3+2],g=e[s*3],x=e[s*3+1],y=e[s*3+2];return Math.abs(a-c)<Math.abs(o-u)?[new Fe(o,1-l),new Fe(u,1-f),new Fe(h,1-v),new Fe(g,1-y)]:[new Fe(a,1-l),new Fe(c,1-f),new Fe(m,1-v),new Fe(x,1-y)]}};function cq(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class r_ extends jl{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new r_(e.radius,e.detail)}}class Sm extends jl{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Sm(e.radius,e.detail)}}class s_ extends Kt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],u=[],c=[];let f=e;const h=(t-e)/r,m=new j,v=new Fe;for(let g=0;g<=r;g++){for(let x=0;x<=i;x++){const y=s+x/i*o;m.x=f*Math.cos(y),m.y=f*Math.sin(y),l.push(m.x,m.y,m.z),u.push(0,0,1),v.x=(m.x/t+1)/2,v.y=(m.y/t+1)/2,c.push(v.x,v.y)}f+=h}for(let g=0;g<r;g++){const x=g*(i+1);for(let y=0;y<i;y++){const _=y+x,w=_,E=_+i+1,C=_+i+2,M=_+1;a.push(w,E,M),a.push(E,C,M)}}this.setIndex(a),this.setAttribute("position",new _t(l,3)),this.setAttribute("normal",new _t(u,3)),this.setAttribute("uv",new _t(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new s_(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class o_ extends Kt{constructor(e=new Yu([new Fe(0,.5),new Fe(-.5,-.5),new Fe(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new _t(r,3)),this.setAttribute("normal",new _t(s,3)),this.setAttribute("uv",new _t(o,2));function u(c){const f=r.length/3,h=c.extractPoints(t);let m=h.shape;const v=h.holes;Xo.isClockWise(m)===!1&&(m=m.reverse());for(let x=0,y=v.length;x<y;x++){const _=v[x];Xo.isClockWise(_)===!0&&(v[x]=_.reverse())}const g=Xo.triangulateShape(m,v);for(let x=0,y=v.length;x<y;x++){const _=v[x];m=m.concat(_)}for(let x=0,y=m.length;x<y;x++){const _=m[x];r.push(_.x,_.y,0),s.push(0,0,1),o.push(_.x,_.y)}for(let x=0,y=g.length;x<y;x++){const _=g[x],w=_[0]+f,E=_[1]+f,C=_[2]+f;i.push(w,E,C),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return fq(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new o_(i,e.curveSegments)}}function fq(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Mm extends Kt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let u=0;const c=[],f=new j,h=new j,m=[],v=[],g=[],x=[];for(let y=0;y<=i;y++){const _=[],w=y/i;let E=0;y===0&&o===0?E=.5/t:y===i&&l===Math.PI&&(E=-.5/t);for(let C=0;C<=t;C++){const M=C/t;f.x=-e*Math.cos(r+M*s)*Math.sin(o+w*a),f.y=e*Math.cos(o+w*a),f.z=e*Math.sin(r+M*s)*Math.sin(o+w*a),v.push(f.x,f.y,f.z),h.copy(f).normalize(),g.push(h.x,h.y,h.z),x.push(M+E,1-w),_.push(u++)}c.push(_)}for(let y=0;y<i;y++)for(let _=0;_<t;_++){const w=c[y][_+1],E=c[y][_],C=c[y+1][_],M=c[y+1][_+1];(y!==0||o>0)&&m.push(w,E,M),(y!==i-1||l<Math.PI)&&m.push(E,C,M)}this.setIndex(m),this.setAttribute("position",new _t(v,3)),this.setAttribute("normal",new _t(g,3)),this.setAttribute("uv",new _t(x,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mm(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class a_ extends jl{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new a_(e.radius,e.detail)}}class l_ extends Kt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],u=[],c=new j,f=new j,h=new j;for(let m=0;m<=i;m++)for(let v=0;v<=r;v++){const g=v/r*s,x=m/i*Math.PI*2;f.x=(e+t*Math.cos(x))*Math.cos(g),f.y=(e+t*Math.cos(x))*Math.sin(g),f.z=t*Math.sin(x),a.push(f.x,f.y,f.z),c.x=e*Math.cos(g),c.y=e*Math.sin(g),h.subVectors(f,c).normalize(),l.push(h.x,h.y,h.z),u.push(v/r),u.push(m/i)}for(let m=1;m<=i;m++)for(let v=1;v<=r;v++){const g=(r+1)*m+v-1,x=(r+1)*(m-1)+v-1,y=(r+1)*(m-1)+v,_=(r+1)*m+v;o.push(g,x,_),o.push(x,y,_)}this.setIndex(o),this.setAttribute("position",new _t(a,3)),this.setAttribute("normal",new _t(l,3)),this.setAttribute("uv",new _t(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new l_(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class u_ extends Kt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],u=[],c=[],f=new j,h=new j,m=new j,v=new j,g=new j,x=new j,y=new j;for(let w=0;w<=i;++w){const E=w/i*s*Math.PI*2;_(E,s,o,e,m),_(E+.01,s,o,e,v),x.subVectors(v,m),y.addVectors(v,m),g.crossVectors(x,y),y.crossVectors(g,x),g.normalize(),y.normalize();for(let C=0;C<=r;++C){const M=C/r*Math.PI*2,T=-t*Math.cos(M),R=t*Math.sin(M);f.x=m.x+(T*y.x+R*g.x),f.y=m.y+(T*y.y+R*g.y),f.z=m.z+(T*y.z+R*g.z),l.push(f.x,f.y,f.z),h.subVectors(f,m).normalize(),u.push(h.x,h.y,h.z),c.push(w/i),c.push(C/r)}}for(let w=1;w<=i;w++)for(let E=1;E<=r;E++){const C=(r+1)*(w-1)+(E-1),M=(r+1)*w+(E-1),T=(r+1)*w+E,R=(r+1)*(w-1)+E;a.push(C,M,R),a.push(M,T,R)}this.setIndex(a),this.setAttribute("position",new _t(l,3)),this.setAttribute("normal",new _t(u,3)),this.setAttribute("uv",new _t(c,2));function _(w,E,C,M,T){const R=Math.cos(w),A=Math.sin(w),D=C/E*w,I=Math.cos(D);T.x=M*(2+I)*.5*R,T.y=M*(2+I)*A*.5,T.z=M*Math.sin(D)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new u_(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Em extends Kt{constructor(e=new Gb(new j(-1,-1,0),new j(-1,1,0),new j(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new j,l=new j,u=new Fe;let c=new j;const f=[],h=[],m=[],v=[];g(),this.setIndex(v),this.setAttribute("position",new _t(f,3)),this.setAttribute("normal",new _t(h,3)),this.setAttribute("uv",new _t(m,2));function g(){for(let w=0;w<t;w++)x(w);x(s===!1?t:0),_(),y()}function x(w){c=e.getPointAt(w/t,c);const E=o.normals[w],C=o.binormals[w];for(let M=0;M<=r;M++){const T=M/r*Math.PI*2,R=Math.sin(T),A=-Math.cos(T);l.x=A*E.x+R*C.x,l.y=A*E.y+R*C.y,l.z=A*E.z+R*C.z,l.normalize(),h.push(l.x,l.y,l.z),a.x=c.x+i*l.x,a.y=c.y+i*l.y,a.z=c.z+i*l.z,f.push(a.x,a.y,a.z)}}function y(){for(let w=1;w<=t;w++)for(let E=1;E<=r;E++){const C=(r+1)*(w-1)+(E-1),M=(r+1)*w+(E-1),T=(r+1)*w+E,R=(r+1)*(w-1)+E;v.push(C,M,R),v.push(M,T,R)}}function _(){for(let w=0;w<=t;w++)for(let E=0;E<=r;E++)u.x=w/t,u.y=E/r,m.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Em(new Gy[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class qb extends Kt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new j,s=new j;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const f=l[u],h=f.start,m=f.count;for(let v=h,g=h+m;v<g;v+=3)for(let x=0;x<3;x++){const y=a.getX(v+x),_=a.getX(v+(x+1)%3);r.fromBufferAttribute(o,y),s.fromBufferAttribute(o,_),fP(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const c=3*a+u,f=3*a+(u+1)%3;r.fromBufferAttribute(o,c),s.fromBufferAttribute(o,f),fP(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new _t(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function fP(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var hP=Object.freeze({__proto__:null,BoxGeometry:yc,CapsuleGeometry:Jx,CircleGeometry:Qx,ConeGeometry:e_,CylinderGeometry:Oh,DodecahedronGeometry:t_,EdgesGeometry:AO,ExtrudeGeometry:i_,IcosahedronGeometry:r_,LatheGeometry:wm,OctahedronGeometry:Sm,PlaneGeometry:Nh,PolyhedronGeometry:jl,RingGeometry:s_,ShapeGeometry:o_,SphereGeometry:Mm,TetrahedronGeometry:a_,TorusGeometry:l_,TorusKnotGeometry:u_,TubeGeometry:Em,WireframeGeometry:qb});class PO extends Qi{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new mt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class RO extends Ws{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class Xb extends Qi{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new mt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gl,this.normalScale=new Fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class IO extends Xb{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Fe(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return si(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new mt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new mt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new mt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class FO extends Qi{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new mt(16777215),this.specular=new mt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gl,this.normalScale=new Fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gs,this.combine=mm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class NO extends Qi{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new mt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gl,this.normalScale=new Fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class LO extends Qi{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gl,this.normalScale=new Fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class OO extends Qi{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new mt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new mt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gl,this.normalScale=new Fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new gs,this.combine=mm,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class zO extends Qi{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new mt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Gl,this.normalScale=new Fe(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class BO extends Lr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ou(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function UO(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function kO(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function BM(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function $b(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function hq(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),f=[],h=[];for(let m=0;m<u.times.length;++m){const v=u.times[m]*r;if(!(v<t||v>=i)){f.push(u.times[m]);for(let g=0;g<c;++g)h.push(u.values[m*c+g])}}f.length!==0&&(u.times=Ou(f,u.times.constructor),u.values=Ou(h,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function dq(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=n.tracks.find(function(y){return y.name===a.name&&y.ValueTypeName===l});if(u===void 0)continue;let c=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=f/3);let h=0;const m=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(h=m/3);const v=a.times.length-1;let g;if(s<=a.times[0]){const y=c,_=f-c;g=a.values.slice(y,_)}else if(s>=a.times[v]){const y=v*f+c,_=y+f-c;g=a.values.slice(y,_)}else{const y=a.createInterpolant(),_=c,w=f-c;y.evaluate(s),g=y.resultBuffer.slice(_,w)}l==="quaternion"&&new mr().fromArray(g).normalize().conjugate().toArray(g);const x=u.times.length;for(let y=0;y<x;++y){const _=y*m+h;if(l==="quaternion")mr.multiplyQuaternionsFlat(u.values,_,g,0,u.values,_);else{const w=m-h*2;for(let E=0;E<w;++E)u.values[_+E]-=g[E]}}}return n.blendMode=Ab,n}const pq={convertArray:Ou,isTypedArray:UO,getKeyframeOrder:kO,sortedArray:BM,flattenJSON:$b,subclip:hq,makeClipAdditive:dq};class bm{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class HO extends bm{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Fu,endingEnd:Fu}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Nu:s=e,a=2*t-i;break;case kp:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Nu:o=e,l=2*i-t;break;case kp:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const u=(i-t)*.5,c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-i),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=this._offsetPrev,f=this._offsetNext,h=this._weightPrev,m=this._weightNext,v=(i-t)/(r-t),g=v*v,x=g*v,y=-h*x+2*h*g-h*v,_=(1+h)*x+(-1.5-2*h)*g+(-.5+h)*v+1,w=(-1-m)*x+(1.5+m)*g+.5*v,E=m*x-m*g;for(let C=0;C!==a;++C)s[C]=y*o[c+C]+_*o[u+C]+w*o[l+C]+E*o[f+C];return s}}class Yb extends bm{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=(i-t)/(r-t),f=1-c;for(let h=0;h!==a;++h)s[h]=o[u+h]*f+o[l+h]*c;return s}}class VO extends bm{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class wo{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ou(t,this.TimeBufferType),this.values=Ou(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Ou(e.times,Array),values:Ou(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new VO(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Yb(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new HO(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Up:t=this.InterpolantFactoryMethodDiscrete;break;case Uy:t=this.InterpolantFactoryMethodLinear;break;case P0:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Up;case this.InterpolantFactoryMethodLinear:return Uy;case this.InterpolantFactoryMethodSmooth:return P0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&UO(r))for(let a=0,l=r.length;a!==l;++a){const u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===P0,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],c=e[a+1];if(u!==c&&(a!==1||u!==e[0]))if(r)l=!0;else{const f=a*i,h=f-i,m=f+i;for(let v=0;v!==i;++v){const g=t[f+v];if(g!==t[h+v]||g!==t[m+v]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*i,h=o*i;for(let m=0;m!==i;++m)t[h+m]=t[f+m]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,u=0;u!==i;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}wo.prototype.TimeBufferType=Float32Array;wo.prototype.ValueBufferType=Float32Array;wo.prototype.DefaultInterpolation=Uy;class xc extends wo{constructor(e,t,i){super(e,t,i)}}xc.prototype.ValueTypeName="bool";xc.prototype.ValueBufferType=Array;xc.prototype.DefaultInterpolation=Up;xc.prototype.InterpolantFactoryMethodLinear=void 0;xc.prototype.InterpolantFactoryMethodSmooth=void 0;class Zb extends wo{}Zb.prototype.ValueTypeName="color";class Kp extends wo{}Kp.prototype.ValueTypeName="number";class WO extends bm{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let u=e*a;for(let c=u+a;u!==c;u+=4)mr.slerpFlat(s,0,o,u-a,o,u,l);return s}}class Am extends wo{InterpolantFactoryMethodLinear(e){return new WO(this.times,this.values,this.getValueSize(),e)}}Am.prototype.ValueTypeName="quaternion";Am.prototype.InterpolantFactoryMethodSmooth=void 0;class _c extends wo{constructor(e,t,i){super(e,t,i)}}_c.prototype.ValueTypeName="string";_c.prototype.ValueBufferType=Array;_c.prototype.DefaultInterpolation=Up;_c.prototype.InterpolantFactoryMethodLinear=void 0;_c.prototype.InterpolantFactoryMethodSmooth=void 0;class Jp extends wo{}Jp.prototype.ValueTypeName="vector";class Qp{constructor(e="",t=-1,i=[],r=Hx){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=ps(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(gq(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(wo.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const c=kO(l);l=BM(l,1,c),u=BM(u,1,c),!r&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new Kp(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],c=u.name.match(s);if(c&&c.length>1){const f=c[1];let h=r[f];h||(r[f]=h=[]),h.push(u)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,h,m,v,g){if(m.length!==0){const x=[],y=[];$b(m,x,y,v),x.length!==0&&g.push(new f(h,x,y))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let f=0;f<u.length;f++){const h=u[f].keys;if(!(!h||h.length===0))if(h[0].morphTargets){const m={};let v;for(v=0;v<h.length;v++)if(h[v].morphTargets)for(let g=0;g<h[v].morphTargets.length;g++)m[h[v].morphTargets[g]]=-1;for(const g in m){const x=[],y=[];for(let _=0;_!==h[v].morphTargets.length;++_){const w=h[v];x.push(w.time),y.push(w.morphTarget===g?1:0)}r.push(new Kp(".morphTargetInfluence["+g+"]",x,y))}l=m.length*o}else{const m=".bones["+t[f].name+"]";i(Jp,m+".position",h,"pos",r),i(Am,m+".quaternion",h,"rot",r),i(Jp,m+".scale",h,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function mq(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return Kp;case"vector":case"vector2":case"vector3":case"vector4":return Jp;case"color":return Zb;case"quaternion":return Am;case"bool":case"boolean":return xc;case"string":return _c}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function gq(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=mq(n.type);if(n.times===void 0){const t=[],i=[];$b(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ma={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class Kb{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(c){a++,s===!1&&r.onStart!==void 0&&r.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,r.onProgress!==void 0&&r.onProgress(c,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(c){r.onError!==void 0&&r.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,f){return u.push(c,f),this},this.removeHandler=function(c){const f=u.indexOf(c);return f!==-1&&u.splice(f,2),this},this.getHandler=function(c){for(let f=0,h=u.length;f<h;f+=2){const m=u[f],v=u[f+1];if(m.global&&(m.lastIndex=0),m.test(c))return v}return null}}}const GO=new Kb;class $r{constructor(e){this.manager=e!==void 0?e:GO,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}$r.DEFAULT_MATERIAL_NAME="__DEFAULT";const fa={};class vq extends Error{constructor(e,t){super(e),this.response=t}}class za extends $r{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Ma.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(fa[e]!==void 0){fa[e].push({onLoad:t,onProgress:i,onError:r});return}fa[e]=[],fa[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=fa[e],f=u.body.getReader(),h=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),m=h?parseInt(h):0,v=m!==0;let g=0;const x=new ReadableStream({start(y){_();function _(){f.read().then(({done:w,value:E})=>{if(w)y.close();else{g+=E.byteLength;const C=new ProgressEvent("progress",{lengthComputable:v,loaded:g,total:m});for(let M=0,T=c.length;M<T;M++){const R=c[M];R.onProgress&&R.onProgress(C)}y.enqueue(E),_()}},w=>{y.error(w)})}}});return new Response(x)}else throw new vq(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return u.json();default:if(a===void 0)return u.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),h=f&&f[1]?f[1].toLowerCase():void 0,m=new TextDecoder(h);return u.arrayBuffer().then(v=>m.decode(v))}}}).then(u=>{Ma.add(e,u);const c=fa[e];delete fa[e];for(let f=0,h=c.length;f<h;f++){const m=c[f];m.onLoad&&m.onLoad(u)}}).catch(u=>{const c=fa[e];if(c===void 0)throw this.manager.itemError(e),u;delete fa[e];for(let f=0,h=c.length;f<h;f++){const m=c[f];m.onError&&m.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class yq extends $r{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new za(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=Qp.parse(e[i]);t.push(r)}return t}}class xq extends $r{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new Zx,l=new za(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(f){l.load(e[f],function(h){const m=s.parse(h,!0);o[f]={width:m.width,height:m.height,format:m.format,mipmaps:m.mipmaps},u+=1,u===6&&(m.mipmapCount===1&&(a.minFilter=ai),a.image=o,a.format=m.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let f=0,h=e.length;f<h;++f)c(f);else l.load(e,function(f){const h=s.parse(f,!0);if(h.isCubemap){const m=h.mipmaps.length/h.mipmapCount;for(let v=0;v<m;v++){o[v]={mipmaps:[]};for(let g=0;g<h.mipmapCount;g++)o[v].mipmaps.push(h.mipmaps[v*h.mipmapCount+g]),o[v].format=h.format,o[v].width=h.width,o[v].height=h.height}a.image=o}else a.image.width=h.width,a.image.height=h.height,a.mipmaps=h.mipmaps;h.mipmapCount===1&&(a.minFilter=ai),a.format=h.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class em extends $r{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ma.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=qp("img");function l(){c(),Ma.add(e,this),t&&t(this),s.manager.itemEnd(e)}function u(f){c(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class _q extends $r{constructor(e){super(e)}load(e,t,i,r){const s=new xm;s.colorSpace=Is;const o=new em(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(c){s.images[u]=c,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class wq extends $r{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new qo,a=new za(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(c){if(r!==void 0)r(c);else{console.error(c);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:zs,o.wrapT=u.wrapT!==void 0?u.wrapT:zs,o.magFilter=u.magFilter!==void 0?u.magFilter:ai,o.minFilter=u.minFilter!==void 0?u.minFilter:ai,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(o.colorSpace=u.colorSpace),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=ko),u.mipmapCount===1&&(o.minFilter=ai),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},i,r),o}}class c_ extends $r{constructor(e){super(e)}load(e,t,i,r){const s=new jn,o=new em(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class ql extends fn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new mt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class jO extends ql{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(fn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new mt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const jw=new zt,dP=new j,pP=new j;class Jb{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Fe(512,512),this.map=null,this.mapPass=null,this.matrix=new zt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new _m,this._frameExtents=new Fe(1,1),this._viewportCount=1,this._viewports=[new sn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;dP.setFromMatrixPosition(e.matrixWorld),t.position.copy(dP),pP.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(pP),t.updateMatrixWorld(),jw.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(jw),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(jw)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class Sq extends Jb{constructor(){super(new oi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=gh*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class qO extends ql{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(fn.DEFAULT_UP),this.updateMatrix(),this.target=new fn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new Sq}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const mP=new zt,Fd=new j,qw=new j;class Mq extends Jb{constructor(){super(new oi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Fe(4,2),this._viewportCount=6,this._viewports=[new sn(2,1,1,1),new sn(0,1,1,1),new sn(3,1,1,1),new sn(1,1,1,1),new sn(3,0,1,1),new sn(1,0,1,1)],this._cubeDirections=[new j(1,0,0),new j(-1,0,0),new j(0,0,1),new j(0,0,-1),new j(0,1,0),new j(0,-1,0)],this._cubeUps=[new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,1,0),new j(0,0,1),new j(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Fd.setFromMatrixPosition(e.matrixWorld),i.position.copy(Fd),qw.copy(i.position),qw.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(qw),i.updateMatrixWorld(),r.makeTranslation(-Fd.x,-Fd.y,-Fd.z),mP.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(mP)}}class XO extends ql{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new Mq}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class Eq extends Jb{constructor(){super(new Sa(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class $O extends ql{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(fn.DEFAULT_UP),this.updateMatrix(),this.target=new fn,this.shadow=new Eq}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class YO extends ql{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class ZO extends ql{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class KO{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new j)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class JO extends ql{constructor(e=new KO,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class f_ extends $r{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new za(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=f_.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new mt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new mt().setHex(o.value);break;case"v2":r.uniforms[s].value=new Fe().fromArray(o.value);break;case"v3":r.uniforms[s].value=new j().fromArray(o.value);break;case"v4":r.uniforms[s].value=new sn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new $t().fromArray(o.value);break;case"m4":r.uniforms[s].value=new zt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Fe().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Fe().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:PO,SpriteMaterial:Ob,RawShaderMaterial:RO,ShaderMaterial:Ws,PointsMaterial:Bb,MeshPhysicalMaterial:IO,MeshStandardMaterial:Xb,MeshPhongMaterial:FO,MeshToonMaterial:NO,MeshNormalMaterial:LO,MeshLambertMaterial:OO,MeshDepthMaterial:Nb,MeshDistanceMaterial:Lb,MeshBasicMaterial:Ha,MeshMatcapMaterial:zO,LineDashedMaterial:BO,LineBasicMaterial:Lr,Material:Qi};return new t[e]}}class UM{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class Qb extends Kt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class QO extends $r{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new za(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(m,v){if(t[v]!==void 0)return t[v];const x=m.interleavedBuffers[v],y=s(m,x.buffer),_=Of(x.type,y),w=new $x(_,x.stride);return w.uuid=x.uuid,t[v]=w,w}function s(m,v){if(i[v]!==void 0)return i[v];const x=m.arrayBuffers[v],y=new Uint32Array(x).buffer;return i[v]=y,y}const o=e.isInstancedBufferGeometry?new Qb:new Kt,a=e.data.index;if(a!==void 0){const m=Of(a.type,a.array);o.setIndex(new Mn(m,1))}const l=e.data.attributes;for(const m in l){const v=l[m];let g;if(v.isInterleavedBufferAttribute){const x=r(e.data,v.data);g=new fs(x,v.itemSize,v.offset,v.normalized)}else{const x=Of(v.type,v.array),y=v.isInstancedBufferAttribute?yh:Mn;g=new y(x,v.itemSize,v.normalized)}v.name!==void 0&&(g.name=v.name),v.usage!==void 0&&g.setUsage(v.usage),o.setAttribute(m,g)}const u=e.data.morphAttributes;if(u)for(const m in u){const v=u[m],g=[];for(let x=0,y=v.length;x<y;x++){const _=v[x];let w;if(_.isInterleavedBufferAttribute){const E=r(e.data,_.data);w=new fs(E,_.itemSize,_.offset,_.normalized)}else{const E=Of(_.type,_.array);w=new Mn(E,_.itemSize,_.normalized)}_.name!==void 0&&(w.name=_.name),g.push(w)}o.morphAttributes[m]=g}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let m=0,v=f.length;m!==v;++m){const g=f[m];o.addGroup(g.start,g.count,g.materialIndex)}const h=e.data.boundingSphere;if(h!==void 0){const m=new j;h.center!==void 0&&m.fromArray(h.center),o.boundingSphere=new Ui(m,h.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class bq extends $r{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?UM.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new za(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(f){r!==void 0&&r(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?UM.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new za(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,i),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),this.bindLightTargets(u),t!==void 0){let f=!1;for(const h in o)if(o[h].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Yu().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Yx().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new QO;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in hP?a=hP[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new f_;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=Qp.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:i.resourcePath+u;return o(c)}else return l.data?{data:Of(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new Kb(t);s=new em(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const f=e[u],h=f.url;if(Array.isArray(h)){const m=[];for(let v=0,g=h.length;v<g;v++){const x=h[v],y=a(x);y!==null&&(y instanceof HTMLImageElement?m.push(y):m.push(new qo(y.data,y.width,y.height)))}r[f.uuid]=new Lu(m)}else{const m=a(f.url);r[f.uuid]=new Lu(m)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:Of(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new em(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const c=[];for(let f=0,h=u.length;f<h;f++){const m=u[f],v=await s(m);v!==null&&(v instanceof HTMLImageElement?c.push(v):c.push(new qo(v.data,v.width,v.height)))}i[l.uuid]=new Lu(c)}else{const c=await s(l.url);i[l.uuid]=new Lu(c)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let c;Array.isArray(u)?(c=new xm,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new qo:c=new jn,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=a.uuid,a.name!==void 0&&(c.name=a.name),a.mapping!==void 0&&(c.mapping=i(a.mapping,Aq)),a.channel!==void 0&&(c.channel=a.channel),a.offset!==void 0&&c.offset.fromArray(a.offset),a.repeat!==void 0&&c.repeat.fromArray(a.repeat),a.center!==void 0&&c.center.fromArray(a.center),a.rotation!==void 0&&(c.rotation=a.rotation),a.wrap!==void 0&&(c.wrapS=i(a.wrap[0],gP),c.wrapT=i(a.wrap[1],gP)),a.format!==void 0&&(c.format=a.format),a.internalFormat!==void 0&&(c.internalFormat=a.internalFormat),a.type!==void 0&&(c.type=a.type),a.colorSpace!==void 0&&(c.colorSpace=a.colorSpace),a.minFilter!==void 0&&(c.minFilter=i(a.minFilter,vP)),a.magFilter!==void 0&&(c.magFilter=i(a.magFilter,vP)),a.anisotropy!==void 0&&(c.anisotropy=a.anisotropy),a.flipY!==void 0&&(c.flipY=a.flipY),a.generateMipmaps!==void 0&&(c.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(c.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(c.compareFunction=a.compareFunction),a.userData!==void 0&&(c.userData=a.userData),r[a.uuid]=c}return r}parseObject(e,t,i,r,s){let o;function a(h){return t[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",h),t[h]}function l(h){if(h!==void 0){if(Array.isArray(h)){const m=[];for(let v=0,g=h.length;v<g;v++){const x=h[v];i[x]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",x),m.push(i[x])}return m}return i[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",h),i[h]}}function u(h){return r[h]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",h),r[h]}let c,f;switch(e.type){case"Scene":o=new Hy,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new mt(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Xx(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new qx(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new oi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new Sa(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new YO(e.color,e.intensity);break;case"DirectionalLight":o=new $O(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new XO(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new ZO(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new qO(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new jO(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new JO().fromJSON(e);break;case"SkinnedMesh":c=a(e.geometry),f=l(e.material),o=new vO(c,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":c=a(e.geometry),f=l(e.material),o=new hi(c,f);break;case"InstancedMesh":c=a(e.geometry),f=l(e.material);const h=e.count,m=e.instanceMatrix,v=e.instanceColor;o=new yO(c,f,h),o.instanceMatrix=new yh(new Float32Array(m.array),16),v!==void 0&&(o.instanceColor=new yh(new Float32Array(v.array),v.itemSize));break;case"BatchedMesh":c=a(e.geometry),f=l(e.material),o=new xO(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=c,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(g=>{const x=new Bi;x.min.fromArray(g.boxMin),x.max.fromArray(g.boxMax);const y=new Ui;return y.radius=g.sphereRadius,y.center.fromArray(g.sphereCenter),{boxInitialized:g.boxInitialized,box:x,sphereInitialized:g.sphereInitialized,sphere:y}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=u(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=u(e.colorsTexture.uuid));break;case"LOD":o=new gO;break;case"Line":o=new Fl(a(e.geometry),l(e.material));break;case"LineLoop":o=new _O(a(e.geometry),l(e.material));break;case"LineSegments":o=new Jo(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new wO(a(e.geometry),l(e.material));break;case"Sprite":o=new mO(l(e.material));break;case"Group":o=new Bf;break;case"Bone":o=new zb;break;default:o=new fn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const h=e.children;for(let m=0;m<h.length;m++)o.add(this.parseObject(h[m],t,i,r,s))}if(e.animations!==void 0){const h=e.animations;for(let m=0;m<h.length;m++){const v=h[m];o.animations.push(s[v])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const h=e.levels;for(let m=0;m<h.length;m++){const v=h[m],g=o.getObjectByProperty("uuid",v.object);g!==void 0&&o.addLevel(g,v.distance,v.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new fn}})}}const Aq={UVMapping:Nx,CubeReflectionMapping:La,CubeRefractionMapping:Il,EquirectangularReflectionMapping:Op,EquirectangularRefractionMapping:zp,CubeUVReflectionMapping:Fh},gP={RepeatWrapping:ic,ClampToEdgeWrapping:zs,MirroredRepeatWrapping:Bp},vP={NearestFilter:Oi,NearestMipmapNearestFilter:gb,NearestMipmapLinearFilter:Lf,LinearFilter:ai,LinearMipmapNearestFilter:op,LinearMipmapLinearFilter:ko};class Cq extends $r{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ma.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(u=>{t&&t(u),s.manager.itemEnd(e)}).catch(u=>{r&&r(u)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return Ma.add(e,u),t&&t(u),s.manager.itemEnd(e),u}).catch(function(u){r&&r(u),Ma.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Ma.add(e,l),s.manager.itemStart(e)}}let Vv;class eA{static getContext(){return Vv===void 0&&(Vv=new(window.AudioContext||window.webkitAudioContext)),Vv}static setContext(e){Vv=e}}class Dq extends $r{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new za(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);eA.getContext().decodeAudioData(u,function(f){t(f)}).catch(a)}catch(u){a(u)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const yP=new zt,xP=new zt,hu=new zt;class Tq{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new oi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new oi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,hu.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Xu*t.fov*.5)/t.zoom;let a,l;xP.elements[12]=-r,yP.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,hu.elements[0]=2*t.near/(l-a),hu.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(hu),a=-o*t.aspect-s,l=o*t.aspect-s,hu.elements[0]=2*t.near/(l-a),hu.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(hu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(xP),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(yP)}}class tA{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=_P(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=_P();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function _P(){return(typeof performance>"u"?Date:performance).now()}const du=new j,wP=new mr,Pq=new j,pu=new j;class Rq extends fn{constructor(){super(),this.type="AudioListener",this.context=eA.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new tA}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(du,wP,Pq),pu.set(0,0,-1).applyQuaternion(wP),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(du.x,r),t.positionY.linearRampToValueAtTime(du.y,r),t.positionZ.linearRampToValueAtTime(du.z,r),t.forwardX.linearRampToValueAtTime(pu.x,r),t.forwardY.linearRampToValueAtTime(pu.y,r),t.forwardZ.linearRampToValueAtTime(pu.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(du.x,du.y,du.z),t.setOrientation(pu.x,pu.y,pu.z,i.x,i.y,i.z)}}class ez extends fn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const mu=new j,SP=new mr,Iq=new j,gu=new j;class Fq extends ez{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(mu,SP,Iq),gu.set(0,0,1).applyQuaternion(SP);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(mu.x,i),t.positionY.linearRampToValueAtTime(mu.y,i),t.positionZ.linearRampToValueAtTime(mu.z,i),t.orientationX.linearRampToValueAtTime(gu.x,i),t.orientationY.linearRampToValueAtTime(gu.y,i),t.orientationZ.linearRampToValueAtTime(gu.z,i)}else t.setPosition(mu.x,mu.y,mu.z),t.setOrientation(gu.x,gu.y,gu.z)}}class Nq{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class tz{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){mr.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;mr.multiplyQuaternionsFlat(e,o,e,t,e,i),mr.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const nA="\\[\\]\\.:\\/",Lq=new RegExp("["+nA+"]","g"),iA="[^"+nA+"]",Oq="[^"+nA.replace("\\.","")+"]",zq=/((?:WC+[\/:])*)/.source.replace("WC",iA),Bq=/(WCOD+)?/.source.replace("WCOD",Oq),Uq=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",iA),kq=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",iA),Hq=new RegExp("^"+zq+Bq+Uq+kq+"$"),Vq=["material","materials","bones","map"];class Wq{constructor(e,t,i){const r=i||ln.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class ln{constructor(e,t,i){this.path=t,this.parsedPath=i||ln.parseTrackName(t),this.node=ln.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new ln.Composite(e,t,i):new ln(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(Lq,"")}static parseTrackName(e){const t=Hq.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);Vq.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=ln.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let u=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[r];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}ln.Composite=Wq;ln.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};ln.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};ln.prototype.GetterByBindingType=[ln.prototype._getValue_direct,ln.prototype._getValue_array,ln.prototype._getValue_arrayElement,ln.prototype._getValue_toArray];ln.prototype.SetterByBindingTypeAndVersioning=[[ln.prototype._setValue_direct,ln.prototype._setValue_direct_setNeedsUpdate,ln.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[ln.prototype._setValue_array,ln.prototype._setValue_array_setNeedsUpdate,ln.prototype._setValue_array_setMatrixWorldNeedsUpdate],[ln.prototype._setValue_arrayElement,ln.prototype._setValue_arrayElement_setNeedsUpdate,ln.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[ln.prototype._setValue_fromArray,ln.prototype._setValue_fromArray_setNeedsUpdate,ln.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class Gq{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ps(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let c=0,f=arguments.length;c!==f;++c){const h=arguments[c],m=h.uuid;let v=t[m];if(v===void 0){v=l++,t[m]=v,e.push(h);for(let g=0,x=o;g!==x;++g)s[g].push(new ln(h,i[g],r[g]))}else if(v<u){a=e[v];const g=--u,x=e[g];t[x.uuid]=v,e[v]=x,t[m]=g,e[g]=h;for(let y=0,_=o;y!==_;++y){const w=s[y],E=w[g];let C=w[v];w[v]=E,C===void 0&&(C=new ln(h,i[y],r[y])),w[g]=C}}else e[v]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,c=t[u];if(c!==void 0&&c>=s){const f=s++,h=e[f];t[h.uuid]=c,e[c]=h,t[u]=f,e[f]=l;for(let m=0,v=r;m!==v;++m){const g=i[m],x=g[f],y=g[c];g[c]=x,g[f]=y}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],c=u.uuid,f=t[c];if(f!==void 0)if(delete t[c],f<s){const h=--s,m=e[h],v=--o,g=e[v];t[m.uuid]=f,e[f]=m,t[g.uuid]=h,e[h]=g,e.pop();for(let x=0,y=r;x!==y;++x){const _=i[x],w=_[h],E=_[v];_[f]=w,_[h]=E,_.pop()}}else{const h=--o,m=e[h];h>0&&(t[m.uuid]=f),e[f]=m,e.pop();for(let v=0,g=r;v!==g;++v){const x=i[v];x[f]=x[h],x.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,f=new Array(u);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(f);for(let h=c,m=l.length;h!==m;++h){const v=l[h];f[h]=new ln(v,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class nz{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Fu,endingEnd:Fu};for(let u=0;u!==o;++u){const c=s[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=UL,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+i,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case Ab:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(o),u[c].accumulateAdditive(a);break;case Hx:default:for(let c=0,f=l.length;c!==f;++c)l[c].evaluate(o),u[c].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===kL;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===BL){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Nu,r.endingEnd=Nu):(e?r.endingStart=this.zeroSlopeAtStart?Nu:Fu:r.endingStart=kp,t?r.endingEnd=this.zeroSlopeAtEnd?Nu:Fu:r.endingEnd=kp)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const jq=new Float32Array(1);class qq extends Ko{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let f=0;f!==s;++f){const h=r[f],m=h.name;let v=c[m];if(v!==void 0)++v.referenceCount,o[f]=v;else{if(v=o[f],v!==void 0){v._cacheIndex===null&&(++v.referenceCount,this._addInactiveBinding(v,l,m));continue}const g=t&&t._propertyBindings[f].binding.parsedPath;v=new tz(ln.create(i,m,g),h.ValueTypeName,h.getValueSize()),++v.referenceCount,this._addInactiveBinding(v,l,m),o[f]=v}a[f].resultBuffer=v.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,h=(e._localRoot||this._root).uuid;delete f[h],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new Yb(new Float32Array(2),new Float32Array(2),1,jq),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?Qp.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Hx),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===i)return f;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const c=new nz(this,o,t,i);return this._bindAction(c,u),this._addInactiveAction(c,a,s),c}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?Qp.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==i;++u)t[u]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const c=u._cacheIndex,f=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,f._cacheIndex=c,t[c]=f,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class rA{constructor(e){this.value=e}clone(){return new rA(this.value.clone===void 0?this.value:this.value.clone())}}let Xq=0;class $q extends Ko{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:Xq++}),this.name="",this.usage=Gp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class jy extends $x{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class Yq{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const MP=new zt;class iz{constructor(e,t,i=0,r=1/0){this.ray=new vc(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new $u,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return MP.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(MP),this}intersectObject(e,t=!0,i=[]){return kM(e,this,i,t),i.sort(EP),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)kM(e[r],this,i,t);return i.sort(EP),i}}function EP(n,e){return n.distance-e.distance}function kM(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)kM(s[o],e,t,!0)}}class HM{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(si(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class Zq{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const bP=new Fe;class Kq{constructor(e=new Fe(1/0,1/0),t=new Fe(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=bP.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,bP).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const AP=new j,Wv=new j;class rz{constructor(e=new j,t=new j){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){AP.subVectors(e,this.start),Wv.subVectors(this.end,this.start);const i=Wv.dot(Wv);let s=Wv.dot(AP)/i;return t&&(s=si(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const CP=new j;class Jq extends fn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Kt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,c=a/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}i.setAttribute("position",new _t(r,3));const s=new Lr({fog:!1,toneMapped:!1});this.cone=new Jo(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),CP.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(CP),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const ol=new j,Gv=new zt,Xw=new zt;class Qq extends Jo{constructor(e){const t=sz(e),i=new Kt,r=[],s=[],o=new mt(0,0,1),a=new mt(0,1,0);for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new _t(r,3)),i.setAttribute("color",new _t(s,3));const l=new Lr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");Xw.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(Gv.multiplyMatrices(Xw,a.matrixWorld),ol.setFromMatrixPosition(Gv),r.setXYZ(o,ol.x,ol.y,ol.z),Gv.multiplyMatrices(Xw,a.parent.matrixWorld),ol.setFromMatrixPosition(Gv),r.setXYZ(o+1,ol.x,ol.y,ol.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function sz(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,sz(n.children[t]));return e}class eX extends hi{constructor(e,t,i){const r=new Mm(t,4,2),s=new Ha({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const tX=new j,DP=new mt,TP=new mt;class nX extends fn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Sm(t);r.rotateY(Math.PI*.5),this.material=new Ha({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new Mn(o,3)),this.add(new hi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");DP.copy(this.light.color),TP.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?DP:TP;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(tX.setFromMatrixPosition(this.light.matrixWorld).negate())}}class iX extends Jo{constructor(e=10,t=10,i=4473924,r=8947848){i=new mt(i),r=new mt(r);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let h=0,m=0,v=-a;h<=t;h++,v+=o){l.push(-a,0,v,a,0,v),l.push(v,0,-a,v,0,a);const g=h===s?i:r;g.toArray(u,m),m+=3,g.toArray(u,m),m+=3,g.toArray(u,m),m+=3,g.toArray(u,m),m+=3}const c=new Kt;c.setAttribute("position",new _t(l,3)),c.setAttribute("color",new _t(u,3));const f=new Lr({vertexColors:!0,toneMapped:!1});super(c,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class rX extends Jo{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new mt(s),o=new mt(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const h=f/t*(Math.PI*2),m=Math.sin(h)*e,v=Math.cos(h)*e;a.push(0,0,0),a.push(m,0,v);const g=f&1?s:o;l.push(g.r,g.g,g.b),l.push(g.r,g.g,g.b)}for(let f=0;f<i;f++){const h=f&1?s:o,m=e-e/i*f;for(let v=0;v<r;v++){let g=v/r*(Math.PI*2),x=Math.sin(g)*m,y=Math.cos(g)*m;a.push(x,0,y),l.push(h.r,h.g,h.b),g=(v+1)/r*(Math.PI*2),x=Math.sin(g)*m,y=Math.cos(g)*m,a.push(x,0,y),l.push(h.r,h.g,h.b)}}const u=new Kt;u.setAttribute("position",new _t(a,3)),u.setAttribute("color",new _t(l,3));const c=new Lr({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const PP=new j,jv=new j,RP=new j;class sX extends fn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Kt;r.setAttribute("position",new _t([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Lr({fog:!1,toneMapped:!1});this.lightPlane=new Fl(r,s),this.add(this.lightPlane),r=new Kt,r.setAttribute("position",new _t([0,0,0,0,0,1],3)),this.targetLine=new Fl(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),PP.setFromMatrixPosition(this.light.matrixWorld),jv.setFromMatrixPosition(this.light.target.matrixWorld),RP.subVectors(jv,PP),this.lightPlane.lookAt(jv),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(jv),this.targetLine.scale.z=RP.length()}}const qv=new j,ti=new ym;class oX extends Jo{constructor(e){const t=new Kt,i=new Lr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(v,g){l(v),l(g)}function l(v){r.push(0,0,0),s.push(0,0,0),o[v]===void 0&&(o[v]=[]),o[v].push(r.length/3-1)}t.setAttribute("position",new _t(r,3)),t.setAttribute("color",new _t(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new mt(16755200),c=new mt(16711680),f=new mt(43775),h=new mt(16777215),m=new mt(3355443);this.setColors(u,c,f,h,m)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;ti.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),ci("c",t,e,ti,0,0,-1),ci("t",t,e,ti,0,0,1),ci("n1",t,e,ti,-i,-r,-1),ci("n2",t,e,ti,i,-r,-1),ci("n3",t,e,ti,-i,r,-1),ci("n4",t,e,ti,i,r,-1),ci("f1",t,e,ti,-i,-r,1),ci("f2",t,e,ti,i,-r,1),ci("f3",t,e,ti,-i,r,1),ci("f4",t,e,ti,i,r,1),ci("u1",t,e,ti,i*.7,r*1.1,-1),ci("u2",t,e,ti,-i*.7,r*1.1,-1),ci("u3",t,e,ti,0,r*2,-1),ci("cf1",t,e,ti,-i,0,1),ci("cf2",t,e,ti,i,0,1),ci("cf3",t,e,ti,0,-r,1),ci("cf4",t,e,ti,0,r,1),ci("cn1",t,e,ti,-i,0,-1),ci("cn2",t,e,ti,i,0,-1),ci("cn3",t,e,ti,0,-r,-1),ci("cn4",t,e,ti,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ci(n,e,t,i,r,s,o){qv.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,c=a.length;u<c;u++)l.setXYZ(a[u],qv.x,qv.y,qv.z)}}const Xv=new Bi;class aX extends Jo{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Kt;s.setIndex(new Mn(i,1)),s.setAttribute("position",new Mn(r,3)),super(s,new Lr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Xv.setFromObject(this.object),Xv.isEmpty())return;const t=Xv.min,i=Xv.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class lX extends Jo{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Kt;s.setIndex(new Mn(i,1)),s.setAttribute("position",new _t(r,3)),super(s,new Lr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class uX extends Fl{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Kt;o.setAttribute("position",new _t(s,3)),o.computeBoundingSphere(),super(o,new Lr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Kt;l.setAttribute("position",new _t(a,3)),l.computeBoundingSphere(),this.add(new hi(l,new Ha({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const IP=new j;let $v,$w;class cX extends fn{constructor(e=new j(0,0,1),t=new j(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",$v===void 0&&($v=new Kt,$v.setAttribute("position",new _t([0,0,0,0,1,0],3)),$w=new Oh(0,.5,1,5,1),$w.translate(0,-.5,0)),this.position.copy(t),this.line=new Fl($v,new Lr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new hi($w,new Ha({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{IP.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(IP,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class fX extends Jo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Kt;r.setAttribute("position",new _t(t,3)),r.setAttribute("color",new _t(i,3));const s=new Lr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new mt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class hX{constructor(){this.type="ShapePath",this.color=new mt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new Xp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(y){const _=[];for(let w=0,E=y.length;w<E;w++){const C=y[w],M=new Yu;M.curves=C.curves,_.push(M)}return _}function i(y,_){const w=_.length;let E=!1;for(let C=w-1,M=0;M<w;C=M++){let T=_[C],R=_[M],A=R.x-T.x,D=R.y-T.y;if(Math.abs(D)>Number.EPSILON){if(D<0&&(T=_[M],A=-A,R=_[C],D=-D),y.y<T.y||y.y>R.y)continue;if(y.y===T.y){if(y.x===T.x)return!0}else{const I=D*(y.x-T.x)-A*(y.y-T.y);if(I===0)return!0;if(I<0)continue;E=!E}}else{if(y.y!==T.y)continue;if(R.x<=y.x&&y.x<=T.x||T.x<=y.x&&y.x<=R.x)return!0}}return E}const r=Xo.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new Yu,l.curves=a.curves,u.push(l),u;let c=!r(s[0].getPoints());c=e?!c:c;const f=[],h=[];let m=[],v=0,g;h[v]=void 0,m[v]=[];for(let y=0,_=s.length;y<_;y++)a=s[y],g=a.getPoints(),o=r(g),o=e?!o:o,o?(!c&&h[v]&&v++,h[v]={s:new Yu,p:g},h[v].s.curves=a.curves,c&&v++,m[v]=[]):m[v].push({h:a,p:g[0]});if(!h[0])return t(s);if(h.length>1){let y=!1,_=0;for(let w=0,E=h.length;w<E;w++)f[w]=[];for(let w=0,E=h.length;w<E;w++){const C=m[w];for(let M=0;M<C.length;M++){const T=C[M];let R=!0;for(let A=0;A<h.length;A++)i(T.p,h[A].p)&&(w!==A&&_++,R?(R=!1,f[A].push(T)):y=!0);R&&f[w].push(T)}}_>0&&y===!1&&(m=f)}let x;for(let y=0,_=h.length;y<_;y++){l=h[y].s,u.push(l),x=m[y];for(let w=0,E=x.length;w<E;w++)l.holes.push(x[w].h)}return u}}class dX extends Vs{constructor(e=1,t=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:pm}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=pm);const pX=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:mb,AddEquation:dl,AddOperation:PL,AdditiveAnimationBlendMode:Ab,AdditiveBlending:AM,AgXToneMapping:LL,AlphaFormat:_b,AlwaysCompare:ZL,AlwaysDepth:ML,AlwaysStencilFunc:PM,AmbientLight:YO,AnimationAction:nz,AnimationClip:Qp,AnimationLoader:yq,AnimationMixer:qq,AnimationObjectGroup:Gq,AnimationUtils:pq,ArcCurve:SO,ArrayCamera:hO,ArrowHelper:cX,AttachedBindMode:TM,Audio:ez,AudioAnalyser:Nq,AudioContext:eA,AudioListener:Rq,AudioLoader:Dq,AxesHelper:fX,BackSide:Rr,BasicDepthPacking:HL,BasicShadowMap:iL,BatchedMesh:xO,Bone:zb,BooleanKeyframeTrack:xc,Box2:Kq,Box3:Bi,Box3Helper:lX,BoxGeometry:yc,BoxHelper:aX,BufferAttribute:Mn,BufferGeometry:Kt,BufferGeometryLoader:QO,ByteType:vb,Cache:Ma,Camera:ym,CameraHelper:oX,CanvasTexture:Bj,CapsuleGeometry:Jx,CatmullRomCurve3:kb,CineonToneMapping:FL,CircleGeometry:Qx,ClampToEdgeWrapping:zs,Clock:tA,Color:mt,ColorKeyframeTrack:Zb,ColorManagement:vn,CompressedArrayTexture:Oj,CompressedCubeTexture:zj,CompressedTexture:Zx,CompressedTextureLoader:xq,ConeGeometry:e_,ConstantAlphaFactor:_L,ConstantColorFactor:yL,CubeCamera:rO,CubeReflectionMapping:La,CubeRefractionMapping:Il,CubeTexture:xm,CubeTextureLoader:_q,CubeUVReflectionMapping:Fh,CubicBezierCurve:Hb,CubicBezierCurve3:MO,CubicInterpolant:HO,CullFaceBack:bM,CullFaceFront:nL,CullFaceFrontBack:vH,CullFaceNone:tL,Curve:_o,CurvePath:bO,CustomBlending:rL,CustomToneMapping:NL,CylinderGeometry:Oh,Cylindrical:Zq,Data3DTexture:Pb,DataArrayTexture:Wx,DataTexture:qo,DataTextureLoader:wq,DataUtils:CV,DecrementStencilOp:TH,DecrementWrapStencilOp:RH,DefaultLoadingManager:GO,DepthFormat:qu,DepthStencilFormat:sc,DepthTexture:Gx,DetachedBindMode:zL,DirectionalLight:$O,DirectionalLightHelper:sX,DiscreteInterpolant:VO,DisplayP3ColorSpace:Vx,DodecahedronGeometry:t_,DoubleSide:Bo,DstAlphaFactor:dL,DstColorFactor:mL,DynamicCopyUsage:qH,DynamicDrawUsage:kH,DynamicReadUsage:WH,EdgesGeometry:AO,EllipseCurve:Kx,EqualCompare:qL,EqualDepth:bL,EqualStencilFunc:LH,EquirectangularReflectionMapping:Op,EquirectangularRefractionMapping:zp,Euler:gs,EventDispatcher:Ko,ExtrudeGeometry:i_,FileLoader:za,Float16BufferAttribute:FV,Float32BufferAttribute:_t,FloatType:Tr,Fog:Xx,FogExp2:qx,FramebufferTexture:Lj,FrontSide:Na,Frustum:_m,GLBufferAttribute:Yq,GLSL1:$H,GLSL3:RM,GreaterCompare:XL,GreaterDepth:CL,GreaterEqualCompare:YL,GreaterEqualDepth:AL,GreaterEqualStencilFunc:UH,GreaterStencilFunc:zH,GridHelper:iX,Group:Bf,HalfFloatType:gc,HemisphereLight:jO,HemisphereLightHelper:nX,IcosahedronGeometry:r_,ImageBitmapLoader:Cq,ImageLoader:em,ImageUtils:eO,IncrementStencilOp:DH,IncrementWrapStencilOp:PH,InstancedBufferAttribute:yh,InstancedBufferGeometry:Qb,InstancedInterleavedBuffer:jy,InstancedMesh:yO,Int16BufferAttribute:RV,Int32BufferAttribute:IV,Int8BufferAttribute:DV,IntType:Lx,InterleavedBuffer:$x,InterleavedBufferAttribute:fs,Interpolant:bm,InterpolateDiscrete:Up,InterpolateLinear:Uy,InterpolateSmooth:P0,InvertStencilOp:IH,KeepStencilOp:Mu,KeyframeTrack:wo,LOD:gO,LatheGeometry:wm,Layers:$u,LessCompare:jL,LessDepth:EL,LessEqualCompare:Cb,LessEqualDepth:Lp,LessEqualStencilFunc:OH,LessStencilFunc:NH,Light:ql,LightProbe:JO,Line:Fl,Line3:rz,LineBasicMaterial:Lr,LineCurve:Vb,LineCurve3:EO,LineDashedMaterial:BO,LineLoop:_O,LineSegments:Jo,LinearDisplayP3ColorSpace:vm,LinearFilter:ai,LinearInterpolant:Yb,LinearMipMapLinearFilter:wH,LinearMipMapNearestFilter:_H,LinearMipmapLinearFilter:ko,LinearMipmapNearestFilter:op,LinearSRGBColorSpace:ka,LinearToneMapping:RL,LinearTransfer:Hp,Loader:$r,LoaderUtils:UM,LoadingManager:Kb,LoopOnce:BL,LoopPingPong:kL,LoopRepeat:UL,LuminanceAlphaFormat:Mb,LuminanceFormat:Sb,MOUSE:ma,Material:Qi,MaterialLoader:f_,MathUtils:KL,Matrix3:$t,Matrix4:zt,MaxEquation:lL,Mesh:hi,MeshBasicMaterial:Ha,MeshDepthMaterial:Nb,MeshDistanceMaterial:Lb,MeshLambertMaterial:OO,MeshMatcapMaterial:zO,MeshNormalMaterial:LO,MeshPhongMaterial:FO,MeshPhysicalMaterial:IO,MeshStandardMaterial:Xb,MeshToonMaterial:NO,MinEquation:aL,MirroredRepeatWrapping:Bp,MixOperation:TL,MultiplyBlending:DM,MultiplyOperation:mm,NearestFilter:Oi,NearestMipMapLinearFilter:xH,NearestMipMapNearestFilter:yH,NearestMipmapLinearFilter:Lf,NearestMipmapNearestFilter:gb,NeutralToneMapping:OL,NeverCompare:GL,NeverDepth:SL,NeverStencilFunc:FH,NoBlending:Ca,NoColorSpace:ya,NoToneMapping:jo,NormalAnimationBlendMode:Hx,NormalBlending:ju,NotEqualCompare:$L,NotEqualDepth:DL,NotEqualStencilFunc:BH,NumberKeyframeTrack:Kp,Object3D:fn,ObjectLoader:bq,ObjectSpaceNormalMap:WL,OctahedronGeometry:Sm,OneFactor:cL,OneMinusConstantAlphaFactor:wL,OneMinusConstantColorFactor:xL,OneMinusDstAlphaFactor:pL,OneMinusDstColorFactor:gL,OneMinusSrcAlphaFactor:hy,OneMinusSrcColorFactor:hL,OrthographicCamera:Sa,P3Primaries:Wp,PCFShadowMap:Fx,PCFSoftShadowMap:sp,PMREMGenerator:IM,Path:Xp,PerspectiveCamera:oi,Plane:va,PlaneGeometry:Nh,PlaneHelper:uX,PointLight:XO,PointLightHelper:eX,Points:wO,PointsMaterial:Bb,PolarGridHelper:rX,PolyhedronGeometry:jl,PositionalAudio:Fq,PropertyBinding:ln,PropertyMixer:tz,QuadraticBezierCurve:Wb,QuadraticBezierCurve3:Gb,Quaternion:mr,QuaternionKeyframeTrack:Am,QuaternionLinearInterpolant:WO,RED_GREEN_RGTC2_Format:zy,RED_RGTC1_Format:bb,REVISION:pm,RGBADepthPacking:VL,RGBAFormat:pr,RGBAIntegerFormat:kx,RGBA_ASTC_10x10_Format:Ry,RGBA_ASTC_10x5_Format:Dy,RGBA_ASTC_10x6_Format:Ty,RGBA_ASTC_10x8_Format:Py,RGBA_ASTC_12x10_Format:Iy,RGBA_ASTC_12x12_Format:Fy,RGBA_ASTC_4x4_Format:_y,RGBA_ASTC_5x4_Format:wy,RGBA_ASTC_5x5_Format:Sy,RGBA_ASTC_6x5_Format:My,RGBA_ASTC_6x6_Format:Ey,RGBA_ASTC_8x5_Format:by,RGBA_ASTC_8x6_Format:Ay,RGBA_ASTC_8x8_Format:Cy,RGBA_BPTC_Format:fp,RGBA_ETC2_EAC_Format:xy,RGBA_PVRTC_2BPPV1_Format:gy,RGBA_PVRTC_4BPPV1_Format:my,RGBA_S3TC_DXT1_Format:lp,RGBA_S3TC_DXT3_Format:up,RGBA_S3TC_DXT5_Format:cp,RGBFormat:wb,RGBIntegerFormat:SH,RGB_BPTC_SIGNED_Format:Ny,RGB_BPTC_UNSIGNED_Format:Ly,RGB_ETC1_Format:vy,RGB_ETC2_Format:yy,RGB_PVRTC_2BPPV1_Format:py,RGB_PVRTC_4BPPV1_Format:dy,RGB_S3TC_DXT1_Format:ap,RGFormat:Eb,RGIntegerFormat:Ux,RawShaderMaterial:RO,Ray:vc,Raycaster:iz,Rec709Primaries:Vp,RectAreaLight:ZO,RedFormat:Bx,RedIntegerFormat:gm,ReinhardToneMapping:IL,RenderTarget:tO,RepeatWrapping:ic,ReplaceStencilOp:CH,ReverseSubtractEquation:oL,RingGeometry:s_,SIGNED_RED_GREEN_RGTC2_Format:By,SIGNED_RED_RGTC1_Format:Oy,SRGBColorSpace:Is,SRGBTransfer:Cn,Scene:Hy,ShaderChunk:Zt,ShaderLib:oo,ShaderMaterial:Ws,ShadowMaterial:PO,Shape:Yu,ShapeGeometry:o_,ShapePath:hX,ShapeUtils:Xo,ShortType:yb,Skeleton:Yx,SkeletonHelper:Qq,SkinnedMesh:vO,Source:Lu,Sphere:Ui,SphereGeometry:Mm,Spherical:HM,SphericalHarmonics3:KO,SplineCurve:jb,SpotLight:qO,SpotLightHelper:Jq,Sprite:mO,SpriteMaterial:Ob,SrcAlphaFactor:fy,SrcAlphaSaturateFactor:vL,SrcColorFactor:fL,StaticCopyUsage:jH,StaticDrawUsage:Gp,StaticReadUsage:VH,StereoCamera:Tq,StreamCopyUsage:XH,StreamDrawUsage:HH,StreamReadUsage:GH,StringKeyframeTrack:_c,SubtractEquation:sL,SubtractiveBlending:CM,TOUCH:ga,TangentSpaceNormalMap:Gl,TetrahedronGeometry:a_,Texture:jn,TextureLoader:c_,TextureUtils:pj,TorusGeometry:l_,TorusKnotGeometry:u_,Triangle:us,TriangleFanDrawMode:bH,TriangleStripDrawMode:EH,TrianglesDrawMode:MH,TubeGeometry:Em,UVMapping:Nx,Uint16BufferAttribute:Rb,Uint32BufferAttribute:Ib,Uint8BufferAttribute:TV,Uint8ClampedBufferAttribute:PV,Uniform:rA,UniformsGroup:$q,UniformsLib:ft,UniformsUtils:ky,UnsignedByteType:go,UnsignedInt248Type:rc,UnsignedInt5999Type:xb,UnsignedIntType:Oa,UnsignedShort4444Type:Ox,UnsignedShort5551Type:zx,UnsignedShortType:mh,VSMShadowMap:to,Vector2:Fe,Vector3:j,Vector4:sn,VectorKeyframeTrack:Jp,VideoTexture:Nj,WebGL3DRenderTarget:vV,WebGLArrayRenderTarget:gV,WebGLCoordinateSystem:Ho,WebGLCubeRenderTarget:sO,WebGLMultipleRenderTargets:dX,WebGLRenderTarget:Vs,WebGLRenderer:dO,WebGLUtils:fO,WebGPUCoordinateSystem:jp,WireframeGeometry:qb,WrapAroundEnding:kp,ZeroCurvatureEnding:Fu,ZeroFactor:uL,ZeroSlopeEnding:Nu,ZeroStencilOp:AH,createCanvasElement:QL},Symbol.toStringTag,{value:"Module"}));var oz={exports:{}},wc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */wc.ConcurrentRoot=1;wc.ContinuousEventPriority=4;wc.DefaultEventPriority=16;wc.DiscreteEventPriority=1;wc.IdleEventPriority=536870912;wc.LegacyRoot=0;oz.exports=wc;var kf=oz.exports;function mX(n){let e;const t=new Set,i=(u,c)=>{const f=typeof u=="function"?u(e):u;if(f!==e){const h=e;e=c?f:Object.assign({},e,f),t.forEach(m=>m(e,h))}},r=()=>e,s=(u,c=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let h=c(e);function m(){const v=c(e);if(!f(h,v)){const g=h;u(h=v,g)}}return t.add(m),()=>t.delete(m)},l={setState:i,getState:r,subscribe:(u,c,f)=>c||f?s(u,c,f):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=n(i,r,l),l}const gX=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),FP=gX?ie.useEffect:ie.useLayoutEffect;function vX(n){const e=typeof n=="function"?mX(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=ie.useReducer(x=>x+1,0),o=e.getState(),a=ie.useRef(o),l=ie.useRef(i),u=ie.useRef(r),c=ie.useRef(!1),f=ie.useRef();f.current===void 0&&(f.current=i(o));let h,m=!1;(a.current!==o||l.current!==i||u.current!==r||c.current)&&(h=i(o),m=!r(f.current,h)),FP(()=>{m&&(f.current=h),a.current=o,l.current=i,u.current=r,c.current=!1});const v=ie.useRef(o);FP(()=>{const x=()=>{try{const _=e.getState(),w=l.current(_);u.current(f.current,w)||(a.current=_,f.current=w,s())}catch{c.current=!0,s()}},y=e.subscribe(x);return e.getState()!==v.current&&x(),y},[]);const g=m?h:f.current;return ie.useDebugValue(g),g};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var az={exports:{}},Yw={exports:{}},Zw={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NP;function yX(){return NP||(NP=1,function(n){function e(N,W){var X=N.length;N.push(W);e:for(;0<X;){var ee=X-1>>>1,te=N[ee];if(0<r(te,W))N[ee]=W,N[X]=te,X=ee;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var W=N[0],X=N.pop();if(X!==W){N[0]=X;e:for(var ee=0,te=N.length,ce=te>>>1;ee<ce;){var Q=2*(ee+1)-1,le=N[Q],pe=Q+1,ae=N[pe];if(0>r(le,X))pe<te&&0>r(ae,le)?(N[ee]=ae,N[pe]=X,ee=pe):(N[ee]=le,N[Q]=X,ee=Q);else if(pe<te&&0>r(ae,X))N[ee]=ae,N[pe]=X,ee=pe;else break e}}return W}function r(N,W){var X=N.sortIndex-W.sortIndex;return X!==0?X:N.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,h=3,m=!1,v=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(N){for(var W=t(u);W!==null;){if(W.callback===null)i(u);else if(W.startTime<=N)i(u),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(u)}}function E(N){if(g=!1,w(N),!v)if(t(l)!==null)v=!0,G(C);else{var W=t(u);W!==null&&J(E,W.startTime-N)}}function C(N,W){v=!1,g&&(g=!1,y(R),R=-1),m=!0;var X=h;try{for(w(W),f=t(l);f!==null&&(!(f.expirationTime>W)||N&&!I());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,h=f.priorityLevel;var te=ee(f.expirationTime<=W);W=n.unstable_now(),typeof te=="function"?f.callback=te:f===t(l)&&i(l),w(W)}else i(l);f=t(l)}if(f!==null)var ce=!0;else{var Q=t(u);Q!==null&&J(E,Q.startTime-W),ce=!1}return ce}finally{f=null,h=X,m=!1}}var M=!1,T=null,R=-1,A=5,D=-1;function I(){return!(n.unstable_now()-D<A)}function L(){if(T!==null){var N=n.unstable_now();D=N;var W=!0;try{W=T(!0,N)}finally{W?H():(M=!1,T=null)}}else M=!1}var H;if(typeof _=="function")H=function(){_(L)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,$=k.port2;k.port1.onmessage=L,H=function(){$.postMessage(null)}}else H=function(){x(L,0)};function G(N){T=N,M||(M=!0,H())}function J(N,W){R=x(function(){N(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,G(C))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(h){case 1:case 2:case 3:var W=3;break;default:W=h}var X=h;h=W;try{return N()}finally{h=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,W){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var X=h;h=N;try{return W()}finally{h=X}},n.unstable_scheduleCallback=function(N,W,X){var ee=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ee+X:ee):X=ee,N){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=X+te,N={id:c++,callback:W,priorityLevel:N,startTime:X,expirationTime:te,sortIndex:-1},X>ee?(N.sortIndex=X,e(u,N),t(l)===null&&N===t(u)&&(g?(y(R),R=-1):g=!0,J(E,X-ee))):(N.sortIndex=te,e(l,N),v||m||(v=!0,G(C))),N},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(N){var W=h;return function(){var X=h;h=W;try{return N.apply(this,arguments)}finally{h=X}}}}(Zw)),Zw}var LP;function xX(){return LP||(LP=1,Yw.exports=yX()),Yw.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _X=function(e){var t={},i=ie,r=xX(),s=Object.assign;function o(d){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+d,S=1;S<arguments.length;S++)p+="&args[]="+encodeURIComponent(arguments[S]);return"Minified React error #"+d+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),h=Symbol.for("react.profiler"),m=Symbol.for("react.provider"),v=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),y=Symbol.for("react.suspense_list"),_=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.for("react.offscreen"),C=Symbol.iterator;function M(d){return d===null||typeof d!="object"?null:(d=C&&d[C]||d["@@iterator"],typeof d=="function"?d:null)}function T(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case c:return"Fragment";case u:return"Portal";case h:return"Profiler";case f:return"StrictMode";case x:return"Suspense";case y:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case v:return(d.displayName||"Context")+".Consumer";case m:return(d._context.displayName||"Context")+".Provider";case g:var p=d.render;return d=d.displayName,d||(d=p.displayName||p.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case _:return p=d.displayName||null,p!==null?p:T(d.type)||"Memo";case w:p=d._payload,d=d._init;try{return T(d(p))}catch{}}return null}function R(d){var p=d.type;switch(d.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=p.render,d=d.displayName||d.name||"",p.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return T(p);case 8:return p===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function A(d){var p=d,S=d;if(d.alternate)for(;p.return;)p=p.return;else{d=p;do p=d,p.flags&4098&&(S=p.return),d=p.return;while(d)}return p.tag===3?S:null}function D(d){if(A(d)!==d)throw Error(o(188))}function I(d){var p=d.alternate;if(!p){if(p=A(d),p===null)throw Error(o(188));return p!==d?null:d}for(var S=d,b=p;;){var P=S.return;if(P===null)break;var F=P.alternate;if(F===null){if(b=P.return,b!==null){S=b;continue}break}if(P.child===F.child){for(F=P.child;F;){if(F===S)return D(P),d;if(F===b)return D(P),p;F=F.sibling}throw Error(o(188))}if(S.return!==b.return)S=P,b=F;else{for(var K=!1,me=P.child;me;){if(me===S){K=!0,S=P,b=F;break}if(me===b){K=!0,b=P,S=F;break}me=me.sibling}if(!K){for(me=F.child;me;){if(me===S){K=!0,S=F,b=P;break}if(me===b){K=!0,b=F,S=P;break}me=me.sibling}if(!K)throw Error(o(189))}}if(S.alternate!==b)throw Error(o(190))}if(S.tag!==3)throw Error(o(188));return S.stateNode.current===S?d:p}function L(d){return d=I(d),d!==null?H(d):null}function H(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var p=H(d);if(p!==null)return p;d=d.sibling}return null}function k(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){if(d.tag!==4){var p=k(d);if(p!==null)return p}d=d.sibling}return null}var $=Array.isArray,G=e.getPublicInstance,J=e.getRootHostContext,N=e.getChildHostContext,W=e.prepareForCommit,X=e.resetAfterCommit,ee=e.createInstance,te=e.appendInitialChild,ce=e.finalizeInitialChildren,Q=e.prepareUpdate,le=e.shouldSetTextContent,pe=e.createTextInstance,ae=e.scheduleTimeout,Te=e.cancelTimeout,Pe=e.noTimeout,Ae=e.isPrimaryRenderer,We=e.supportsMutation,z=e.supportsPersistence,Se=e.supportsHydration,De=e.getInstanceFromNode,ke=e.preparePortalMount,Me=e.getCurrentEventPriority,Qe=e.detachDeletedInstance,Ge=e.supportsMicrotasks,Ze=e.scheduleMicrotask,Y=e.supportsTestSelectors,B=e.findFiberRoot,we=e.getBoundingRect,U=e.getTextContent,q=e.isHiddenSubtree,Z=e.matchAccessibilityRole,he=e.setFocusIfFocusable,fe=e.setupIntersectionObserver,ue=e.appendChild,Ne=e.appendChildToContainer,ge=e.commitTextUpdate,Ee=e.commitMount,Le=e.commitUpdate,nt=e.insertBefore,Ye=e.insertInContainerBefore,ne=e.removeChild,Re=e.removeChildFromContainer,et=e.resetTextContent,re=e.hideInstance,He=e.hideTextInstance,Oe=e.unhideInstance,Be=e.unhideTextInstance,tt=e.clearContainer,Et=e.cloneInstance,Bt=e.createContainerChildSet,en=e.appendChildToContainerChildSet,yn=e.finalizeContainerChildren,Wt=e.replaceContainerChildren,Un=e.cloneHiddenInstance,Nn=e.cloneHiddenTextInstance,Wa=e.canHydrateInstance,Kr=e.canHydrateTextInstance,oe=e.canHydrateSuspenseInstance,ve=e.isSuspenseInstancePending,be=e.isSuspenseInstanceFallback,Ue=e.registerSuspenseInstanceRetry,at=e.getNextHydratableSibling,vt=e.getFirstHydratableChild,Rt=e.getFirstHydratableChildWithinContainer,rt=e.getFirstHydratableChildWithinSuspenseInstance,kt=e.hydrateInstance,bt=e.hydrateTextInstance,At=e.hydrateSuspenseInstance,V=e.getNextHydratableInstanceAfterSuspenseInstance,se=e.commitHydratedContainer,xe=e.commitHydratedSuspenseInstance,_e=e.clearSuspenseBoundary,de=e.clearSuspenseBoundaryFromContainer,je=e.shouldDeleteUnhydratedTailInstances,lt=e.didNotMatchHydratedContainerTextInstance,ct=e.didNotMatchHydratedTextInstance,$e;function ht(d){if($e===void 0)try{throw Error()}catch(S){var p=S.stack.trim().match(/\n( *(at )?)/);$e=p&&p[1]||""}return`
`+$e+d}var Mt=!1;function gt(d,p){if(!d||Mt)return"";Mt=!0;var S=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(it){var b=it}Reflect.construct(d,[],p)}else{try{p.call()}catch(it){b=it}d.call(p.prototype)}else{try{throw Error()}catch(it){b=it}d()}}catch(it){if(it&&b&&typeof it.stack=="string"){for(var P=it.stack.split(`
`),F=b.stack.split(`
`),K=P.length-1,me=F.length-1;1<=K&&0<=me&&P[K]!==F[me];)me--;for(;1<=K&&0<=me;K--,me--)if(P[K]!==F[me]){if(K!==1||me!==1)do if(K--,me--,0>me||P[K]!==F[me]){var ze=`
`+P[K].replace(" at new "," at ");return d.displayName&&ze.includes("<anonymous>")&&(ze=ze.replace("<anonymous>",d.displayName)),ze}while(1<=K&&0<=me);break}}}finally{Mt=!1,Error.prepareStackTrace=S}return(d=d?d.displayName||d.name:"")?ht(d):""}var Gt=Object.prototype.hasOwnProperty,an=[],on=-1;function wt(d){return{current:d}}function ut(d){0>on||(d.current=an[on],an[on]=null,on--)}function Ke(d,p){on++,an[on]=d.current,d.current=p}var Ft={},Dt=wt(Ft),xn=wt(!1),er=Ft;function pi(d,p){var S=d.type.contextTypes;if(!S)return Ft;var b=d.stateNode;if(b&&b.__reactInternalMemoizedUnmaskedChildContext===p)return b.__reactInternalMemoizedMaskedChildContext;var P={},F;for(F in S)P[F]=p[F];return b&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=p,d.__reactInternalMemoizedMaskedChildContext=P),P}function Ti(d){return d=d.childContextTypes,d!=null}function Ln(){ut(xn),ut(Dt)}function Xs(d,p,S){if(Dt.current!==Ft)throw Error(o(168));Ke(Dt,p),Ke(xn,S)}function Rc(d,p,S){var b=d.stateNode;if(p=p.childContextTypes,typeof b.getChildContext!="function")return S;b=b.getChildContext();for(var P in b)if(!(P in p))throw Error(o(108,R(d)||"Unknown",P));return s({},S,b)}function ki(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Ft,er=Dt.current,Ke(Dt,d),Ke(xn,xn.current),!0}function Ic(d,p,S){var b=d.stateNode;if(!b)throw Error(o(169));S?(d=Rc(d,p,er),b.__reactInternalMemoizedMergedChildContext=d,ut(xn),ut(Dt),Ke(Dt,d)):ut(xn),Ke(xn,S)}var Jr=Math.clz32?Math.clz32:OU,jm=Math.log,LU=Math.LN2;function OU(d){return d>>>=0,d===0?32:31-(jm(d)/LU|0)|0}var qm=64,Xm=4194304;function jh(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function $m(d,p){var S=d.pendingLanes;if(S===0)return 0;var b=0,P=d.suspendedLanes,F=d.pingedLanes,K=S&268435455;if(K!==0){var me=K&~P;me!==0?b=jh(me):(F&=K,F!==0&&(b=jh(F)))}else K=S&~P,K!==0?b=jh(K):F!==0&&(b=jh(F));if(b===0)return 0;if(p!==0&&p!==b&&!(p&P)&&(P=b&-b,F=p&-p,P>=F||P===16&&(F&4194240)!==0))return p;if(b&4&&(b|=S&16),p=d.entangledLanes,p!==0)for(d=d.entanglements,p&=b;0<p;)S=31-Jr(p),P=1<<S,b|=d[S],p&=~P;return b}function zU(d,p){switch(d){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function BU(d,p){for(var S=d.suspendedLanes,b=d.pingedLanes,P=d.expirationTimes,F=d.pendingLanes;0<F;){var K=31-Jr(F),me=1<<K,ze=P[K];ze===-1?(!(me&S)||me&b)&&(P[K]=zU(me,p)):ze<=p&&(d.expiredLanes|=me),F&=~me}}function A_(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function C_(d){for(var p=[],S=0;31>S;S++)p.push(d);return p}function qh(d,p,S){d.pendingLanes|=p,p!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,p=31-Jr(p),d[p]=S}function UU(d,p){var S=d.pendingLanes&~p;d.pendingLanes=p,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=p,d.mutableReadLanes&=p,d.entangledLanes&=p,p=d.entanglements;var b=d.eventTimes;for(d=d.expirationTimes;0<S;){var P=31-Jr(S),F=1<<P;p[P]=0,b[P]=-1,d[P]=-1,S&=~F}}function D_(d,p){var S=d.entangledLanes|=p;for(d=d.entanglements;S;){var b=31-Jr(S),P=1<<b;P&p|d[b]&p&&(d[b]|=p),S&=~P}}var hn=0;function BA(d){return d&=-d,1<d?4<d?d&268435455?16:536870912:4:1}var T_=r.unstable_scheduleCallback,UA=r.unstable_cancelCallback,kU=r.unstable_shouldYield,HU=r.unstable_requestPaint,Pi=r.unstable_now,P_=r.unstable_ImmediatePriority,VU=r.unstable_UserBlockingPriority,R_=r.unstable_NormalPriority,WU=r.unstable_IdlePriority,Ym=null,Eo=null;function GU(d){if(Eo&&typeof Eo.onCommitFiberRoot=="function")try{Eo.onCommitFiberRoot(Ym,d,void 0,(d.current.flags&128)===128)}catch{}}function jU(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var bo=typeof Object.is=="function"?Object.is:jU,ea=null,Zm=!1,I_=!1;function kA(d){ea===null?ea=[d]:ea.push(d)}function qU(d){Zm=!0,kA(d)}function Ao(){if(!I_&&ea!==null){I_=!0;var d=0,p=hn;try{var S=ea;for(hn=1;d<S.length;d++){var b=S[d];do b=b(!0);while(b!==null)}ea=null,Zm=!1}catch(P){throw ea!==null&&(ea=ea.slice(d+1)),T_(P_,Ao),P}finally{hn=p,I_=!1}}return null}var XU=a.ReactCurrentBatchConfig;function Km(d,p){if(bo(d,p))return!0;if(typeof d!="object"||d===null||typeof p!="object"||p===null)return!1;var S=Object.keys(d),b=Object.keys(p);if(S.length!==b.length)return!1;for(b=0;b<S.length;b++){var P=S[b];if(!Gt.call(p,P)||!bo(d[P],p[P]))return!1}return!0}function $U(d){switch(d.tag){case 5:return ht(d.type);case 16:return ht("Lazy");case 13:return ht("Suspense");case 19:return ht("SuspenseList");case 0:case 2:case 15:return d=gt(d.type,!1),d;case 11:return d=gt(d.type.render,!1),d;case 1:return d=gt(d.type,!0),d;default:return""}}function $s(d,p){if(d&&d.defaultProps){p=s({},p),d=d.defaultProps;for(var S in d)p[S]===void 0&&(p[S]=d[S]);return p}return p}var Jm=wt(null),Qm=null,Fc=null,F_=null;function N_(){F_=Fc=Qm=null}function HA(d,p,S){Ae?(Ke(Jm,p._currentValue),p._currentValue=S):(Ke(Jm,p._currentValue2),p._currentValue2=S)}function L_(d){var p=Jm.current;ut(Jm),Ae?d._currentValue=p:d._currentValue2=p}function O_(d,p,S){for(;d!==null;){var b=d.alternate;if((d.childLanes&p)!==p?(d.childLanes|=p,b!==null&&(b.childLanes|=p)):b!==null&&(b.childLanes&p)!==p&&(b.childLanes|=p),d===S)break;d=d.return}}function Nc(d,p){Qm=d,F_=Fc=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.lanes&p&&(ts=!0),d.firstContext=null)}function _s(d){var p=Ae?d._currentValue:d._currentValue2;if(F_!==d)if(d={context:d,memoizedValue:p,next:null},Fc===null){if(Qm===null)throw Error(o(308));Fc=d,Qm.dependencies={lanes:0,firstContext:d}}else Fc=Fc.next=d;return p}var Co=null,Ga=!1;function z_(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function VA(d,p){d=d.updateQueue,p.updateQueue===d&&(p.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function ta(d,p){return{eventTime:d,lane:p,tag:0,payload:null,callback:null,next:null}}function ja(d,p){var S=d.updateQueue;S!==null&&(S=S.shared,mi!==null&&d.mode&1&&!(Qt&2)?(d=S.interleaved,d===null?(p.next=p,Co===null?Co=[S]:Co.push(S)):(p.next=d.next,d.next=p),S.interleaved=p):(d=S.pending,d===null?p.next=p:(p.next=d.next,d.next=p),S.pending=p))}function eg(d,p,S){if(p=p.updateQueue,p!==null&&(p=p.shared,(S&4194240)!==0)){var b=p.lanes;b&=d.pendingLanes,S|=b,p.lanes=S,D_(d,S)}}function WA(d,p){var S=d.updateQueue,b=d.alternate;if(b!==null&&(b=b.updateQueue,S===b)){var P=null,F=null;if(S=S.firstBaseUpdate,S!==null){do{var K={eventTime:S.eventTime,lane:S.lane,tag:S.tag,payload:S.payload,callback:S.callback,next:null};F===null?P=F=K:F=F.next=K,S=S.next}while(S!==null);F===null?P=F=p:F=F.next=p}else P=F=p;S={baseState:b.baseState,firstBaseUpdate:P,lastBaseUpdate:F,shared:b.shared,effects:b.effects},d.updateQueue=S;return}d=S.lastBaseUpdate,d===null?S.firstBaseUpdate=p:d.next=p,S.lastBaseUpdate=p}function tg(d,p,S,b){var P=d.updateQueue;Ga=!1;var F=P.firstBaseUpdate,K=P.lastBaseUpdate,me=P.shared.pending;if(me!==null){P.shared.pending=null;var ze=me,it=ze.next;ze.next=null,K===null?F=it:K.next=it,K=ze;var xt=d.alternate;xt!==null&&(xt=xt.updateQueue,me=xt.lastBaseUpdate,me!==K&&(me===null?xt.firstBaseUpdate=it:me.next=it,xt.lastBaseUpdate=ze))}if(F!==null){var jt=P.baseState;K=0,xt=it=ze=null,me=F;do{var Lt=me.lane,En=me.eventTime;if((b&Lt)===Lt){xt!==null&&(xt=xt.next={eventTime:En,lane:0,tag:me.tag,payload:me.payload,callback:me.callback,next:null});e:{var Tt=d,rr=me;switch(Lt=p,En=S,rr.tag){case 1:if(Tt=rr.payload,typeof Tt=="function"){jt=Tt.call(En,jt,Lt);break e}jt=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=rr.payload,Lt=typeof Tt=="function"?Tt.call(En,jt,Lt):Tt,Lt==null)break e;jt=s({},jt,Lt);break e;case 2:Ga=!0}}me.callback!==null&&me.lane!==0&&(d.flags|=64,Lt=P.effects,Lt===null?P.effects=[me]:Lt.push(me))}else En={eventTime:En,lane:Lt,tag:me.tag,payload:me.payload,callback:me.callback,next:null},xt===null?(it=xt=En,ze=jt):xt=xt.next=En,K|=Lt;if(me=me.next,me===null){if(me=P.shared.pending,me===null)break;Lt=me,me=Lt.next,Lt.next=null,P.lastBaseUpdate=Lt,P.shared.pending=null}}while(!0);if(xt===null&&(ze=jt),P.baseState=ze,P.firstBaseUpdate=it,P.lastBaseUpdate=xt,p=P.shared.interleaved,p!==null){P=p;do K|=P.lane,P=P.next;while(P!==p)}else F===null&&(P.shared.lanes=0);Wc|=K,d.lanes=K,d.memoizedState=jt}}function GA(d,p,S){if(d=p.effects,p.effects=null,d!==null)for(p=0;p<d.length;p++){var b=d[p],P=b.callback;if(P!==null){if(b.callback=null,b=S,typeof P!="function")throw Error(o(191,P));P.call(b)}}}var jA=new i.Component().refs;function B_(d,p,S,b){p=d.memoizedState,S=S(b,p),S=S==null?p:s({},p,S),d.memoizedState=S,d.lanes===0&&(d.updateQueue.baseState=S)}var ng={isMounted:function(d){return(d=d._reactInternals)?A(d)===d:!1},enqueueSetState:function(d,p,S){d=d._reactInternals;var b=Sr(),P=$a(d),F=ta(b,P);F.payload=p,S!=null&&(F.callback=S),ja(d,F),p=bs(d,P,b),p!==null&&eg(p,d,P)},enqueueReplaceState:function(d,p,S){d=d._reactInternals;var b=Sr(),P=$a(d),F=ta(b,P);F.tag=1,F.payload=p,S!=null&&(F.callback=S),ja(d,F),p=bs(d,P,b),p!==null&&eg(p,d,P)},enqueueForceUpdate:function(d,p){d=d._reactInternals;var S=Sr(),b=$a(d),P=ta(S,b);P.tag=2,p!=null&&(P.callback=p),ja(d,P),p=bs(d,b,S),p!==null&&eg(p,d,b)}};function qA(d,p,S,b,P,F,K){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(b,F,K):p.prototype&&p.prototype.isPureReactComponent?!Km(S,b)||!Km(P,F):!0}function XA(d,p,S){var b=!1,P=Ft,F=p.contextType;return typeof F=="object"&&F!==null?F=_s(F):(P=Ti(p)?er:Dt.current,b=p.contextTypes,F=(b=b!=null)?pi(d,P):Ft),p=new p(S,F),d.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=ng,d.stateNode=p,p._reactInternals=d,b&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=P,d.__reactInternalMemoizedMaskedChildContext=F),p}function $A(d,p,S,b){d=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(S,b),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(S,b),p.state!==d&&ng.enqueueReplaceState(p,p.state,null)}function U_(d,p,S,b){var P=d.stateNode;P.props=S,P.state=d.memoizedState,P.refs=jA,z_(d);var F=p.contextType;typeof F=="object"&&F!==null?P.context=_s(F):(F=Ti(p)?er:Dt.current,P.context=pi(d,F)),P.state=d.memoizedState,F=p.getDerivedStateFromProps,typeof F=="function"&&(B_(d,p,F,S),P.state=d.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(p=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),p!==P.state&&ng.enqueueReplaceState(P,P.state,null),tg(d,S,P,b),P.state=d.memoizedState),typeof P.componentDidMount=="function"&&(d.flags|=4194308)}var Lc=[],Oc=0,ig=null,rg=0,ws=[],Ss=0,Zl=null,na=1,ia="";function Kl(d,p){Lc[Oc++]=rg,Lc[Oc++]=ig,ig=d,rg=p}function YA(d,p,S){ws[Ss++]=na,ws[Ss++]=ia,ws[Ss++]=Zl,Zl=d;var b=na;d=ia;var P=32-Jr(b)-1;b&=~(1<<P),S+=1;var F=32-Jr(p)+P;if(30<F){var K=P-P%5;F=(b&(1<<K)-1).toString(32),b>>=K,P-=K,na=1<<32-Jr(p)+P|S<<P|b,ia=F+d}else na=1<<F|S<<P|b,ia=d}function k_(d){d.return!==null&&(Kl(d,1),YA(d,1,0))}function H_(d){for(;d===ig;)ig=Lc[--Oc],Lc[Oc]=null,rg=Lc[--Oc],Lc[Oc]=null;for(;d===Zl;)Zl=ws[--Ss],ws[Ss]=null,ia=ws[--Ss],ws[Ss]=null,na=ws[--Ss],ws[Ss]=null}var Qr=null,es=null,kn=!1,Xh=!1,Ys=null;function ZA(d,p){var S=As(5,null,null,0);S.elementType="DELETED",S.stateNode=p,S.return=d,p=d.deletions,p===null?(d.deletions=[S],d.flags|=16):p.push(S)}function KA(d,p){switch(d.tag){case 5:return p=Wa(p,d.type,d.pendingProps),p!==null?(d.stateNode=p,Qr=d,es=vt(p),!0):!1;case 6:return p=Kr(p,d.pendingProps),p!==null?(d.stateNode=p,Qr=d,es=null,!0):!1;case 13:if(p=oe(p),p!==null){var S=Zl!==null?{id:na,overflow:ia}:null;return d.memoizedState={dehydrated:p,treeContext:S,retryLane:1073741824},S=As(18,null,null,0),S.stateNode=p,S.return=d,d.child=S,Qr=d,es=null,!0}return!1;default:return!1}}function V_(d){return(d.mode&1)!==0&&(d.flags&128)===0}function W_(d){if(kn){var p=es;if(p){var S=p;if(!KA(d,p)){if(V_(d))throw Error(o(418));p=at(S);var b=Qr;p&&KA(d,p)?ZA(b,S):(d.flags=d.flags&-4097|2,kn=!1,Qr=d)}}else{if(V_(d))throw Error(o(418));d.flags=d.flags&-4097|2,kn=!1,Qr=d}}}function JA(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Qr=d}function $h(d){if(!Se||d!==Qr)return!1;if(!kn)return JA(d),kn=!0,!1;if(d.tag!==3&&(d.tag!==5||je(d.type)&&!le(d.type,d.memoizedProps))){var p=es;if(p){if(V_(d)){for(d=es;d;)d=at(d);throw Error(o(418))}for(;p;)ZA(d,p),p=at(p)}}if(JA(d),d.tag===13){if(!Se)throw Error(o(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));es=V(d)}else es=Qr?at(d.stateNode):null;return!0}function zc(){Se&&(es=Qr=null,Xh=kn=!1)}function G_(d){Ys===null?Ys=[d]:Ys.push(d)}function Yh(d,p,S){if(d=S.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(S._owner){if(S=S._owner,S){if(S.tag!==1)throw Error(o(309));var b=S.stateNode}if(!b)throw Error(o(147,d));var P=b,F=""+d;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===F?p.ref:(p=function(K){var me=P.refs;me===jA&&(me=P.refs={}),K===null?delete me[F]:me[F]=K},p._stringRef=F,p)}if(typeof d!="string")throw Error(o(284));if(!S._owner)throw Error(o(290,d))}return d}function sg(d,p){throw d=Object.prototype.toString.call(p),Error(o(31,d==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":d))}function QA(d){var p=d._init;return p(d._payload)}function eC(d){function p(Ce,ye){if(d){var Ie=Ce.deletions;Ie===null?(Ce.deletions=[ye],Ce.flags|=16):Ie.push(ye)}}function S(Ce,ye){if(!d)return null;for(;ye!==null;)p(Ce,ye),ye=ye.sibling;return null}function b(Ce,ye){for(Ce=new Map;ye!==null;)ye.key!==null?Ce.set(ye.key,ye):Ce.set(ye.index,ye),ye=ye.sibling;return Ce}function P(Ce,ye){return Ce=Za(Ce,ye),Ce.index=0,Ce.sibling=null,Ce}function F(Ce,ye,Ie){return Ce.index=Ie,d?(Ie=Ce.alternate,Ie!==null?(Ie=Ie.index,Ie<ye?(Ce.flags|=2,ye):Ie):(Ce.flags|=2,ye)):(Ce.flags|=1048576,ye)}function K(Ce){return d&&Ce.alternate===null&&(Ce.flags|=2),Ce}function me(Ce,ye,Ie,pt){return ye===null||ye.tag!==6?(ye=C1(Ie,Ce.mode,pt),ye.return=Ce,ye):(ye=P(ye,Ie),ye.return=Ce,ye)}function ze(Ce,ye,Ie,pt){var Ct=Ie.type;return Ct===c?xt(Ce,ye,Ie.props.children,pt,Ie.key):ye!==null&&(ye.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===w&&QA(Ct)===ye.type)?(pt=P(ye,Ie.props),pt.ref=Yh(Ce,ye,Ie),pt.return=Ce,pt):(pt=Og(Ie.type,Ie.key,Ie.props,null,Ce.mode,pt),pt.ref=Yh(Ce,ye,Ie),pt.return=Ce,pt)}function it(Ce,ye,Ie,pt){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Ie.containerInfo||ye.stateNode.implementation!==Ie.implementation?(ye=D1(Ie,Ce.mode,pt),ye.return=Ce,ye):(ye=P(ye,Ie.children||[]),ye.return=Ce,ye)}function xt(Ce,ye,Ie,pt,Ct){return ye===null||ye.tag!==7?(ye=ru(Ie,Ce.mode,pt,Ct),ye.return=Ce,ye):(ye=P(ye,Ie),ye.return=Ce,ye)}function jt(Ce,ye,Ie){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return ye=C1(""+ye,Ce.mode,Ie),ye.return=Ce,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case l:return Ie=Og(ye.type,ye.key,ye.props,null,Ce.mode,Ie),Ie.ref=Yh(Ce,null,ye),Ie.return=Ce,Ie;case u:return ye=D1(ye,Ce.mode,Ie),ye.return=Ce,ye;case w:var pt=ye._init;return jt(Ce,pt(ye._payload),Ie)}if($(ye)||M(ye))return ye=ru(ye,Ce.mode,Ie,null),ye.return=Ce,ye;sg(Ce,ye)}return null}function Lt(Ce,ye,Ie,pt){var Ct=ye!==null?ye.key:null;if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return Ct!==null?null:me(Ce,ye,""+Ie,pt);if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case l:return Ie.key===Ct?ze(Ce,ye,Ie,pt):null;case u:return Ie.key===Ct?it(Ce,ye,Ie,pt):null;case w:return Ct=Ie._init,Lt(Ce,ye,Ct(Ie._payload),pt)}if($(Ie)||M(Ie))return Ct!==null?null:xt(Ce,ye,Ie,pt,null);sg(Ce,Ie)}return null}function En(Ce,ye,Ie,pt,Ct){if(typeof pt=="string"&&pt!==""||typeof pt=="number")return Ce=Ce.get(Ie)||null,me(ye,Ce,""+pt,Ct);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case l:return Ce=Ce.get(pt.key===null?Ie:pt.key)||null,ze(ye,Ce,pt,Ct);case u:return Ce=Ce.get(pt.key===null?Ie:pt.key)||null,it(ye,Ce,pt,Ct);case w:var Jt=pt._init;return En(Ce,ye,Ie,Jt(pt._payload),Ct)}if($(pt)||M(pt))return Ce=Ce.get(Ie)||null,xt(ye,Ce,pt,Ct,null);sg(ye,pt)}return null}function Tt(Ce,ye,Ie,pt){for(var Ct=null,Jt=null,qt=ye,dn=ye=0,Ii=null;qt!==null&&dn<Ie.length;dn++){qt.index>dn?(Ii=qt,qt=null):Ii=qt.sibling;var pn=Lt(Ce,qt,Ie[dn],pt);if(pn===null){qt===null&&(qt=Ii);break}d&&qt&&pn.alternate===null&&p(Ce,qt),ye=F(pn,ye,dn),Jt===null?Ct=pn:Jt.sibling=pn,Jt=pn,qt=Ii}if(dn===Ie.length)return S(Ce,qt),kn&&Kl(Ce,dn),Ct;if(qt===null){for(;dn<Ie.length;dn++)qt=jt(Ce,Ie[dn],pt),qt!==null&&(ye=F(qt,ye,dn),Jt===null?Ct=qt:Jt.sibling=qt,Jt=qt);return kn&&Kl(Ce,dn),Ct}for(qt=b(Ce,qt);dn<Ie.length;dn++)Ii=En(qt,Ce,dn,Ie[dn],pt),Ii!==null&&(d&&Ii.alternate!==null&&qt.delete(Ii.key===null?dn:Ii.key),ye=F(Ii,ye,dn),Jt===null?Ct=Ii:Jt.sibling=Ii,Jt=Ii);return d&&qt.forEach(function(Ka){return p(Ce,Ka)}),kn&&Kl(Ce,dn),Ct}function rr(Ce,ye,Ie,pt){var Ct=M(Ie);if(typeof Ct!="function")throw Error(o(150));if(Ie=Ct.call(Ie),Ie==null)throw Error(o(151));for(var Jt=Ct=null,qt=ye,dn=ye=0,Ii=null,pn=Ie.next();qt!==null&&!pn.done;dn++,pn=Ie.next()){qt.index>dn?(Ii=qt,qt=null):Ii=qt.sibling;var Ka=Lt(Ce,qt,pn.value,pt);if(Ka===null){qt===null&&(qt=Ii);break}d&&qt&&Ka.alternate===null&&p(Ce,qt),ye=F(Ka,ye,dn),Jt===null?Ct=Ka:Jt.sibling=Ka,Jt=Ka,qt=Ii}if(pn.done)return S(Ce,qt),kn&&Kl(Ce,dn),Ct;if(qt===null){for(;!pn.done;dn++,pn=Ie.next())pn=jt(Ce,pn.value,pt),pn!==null&&(ye=F(pn,ye,dn),Jt===null?Ct=pn:Jt.sibling=pn,Jt=pn);return kn&&Kl(Ce,dn),Ct}for(qt=b(Ce,qt);!pn.done;dn++,pn=Ie.next())pn=En(qt,Ce,dn,pn.value,pt),pn!==null&&(d&&pn.alternate!==null&&qt.delete(pn.key===null?dn:pn.key),ye=F(pn,ye,dn),Jt===null?Ct=pn:Jt.sibling=pn,Jt=pn);return d&&qt.forEach(function(Ek){return p(Ce,Ek)}),kn&&Kl(Ce,dn),Ct}function Cs(Ce,ye,Ie,pt){if(typeof Ie=="object"&&Ie!==null&&Ie.type===c&&Ie.key===null&&(Ie=Ie.props.children),typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case l:e:{for(var Ct=Ie.key,Jt=ye;Jt!==null;){if(Jt.key===Ct){if(Ct=Ie.type,Ct===c){if(Jt.tag===7){S(Ce,Jt.sibling),ye=P(Jt,Ie.props.children),ye.return=Ce,Ce=ye;break e}}else if(Jt.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===w&&QA(Ct)===Jt.type){S(Ce,Jt.sibling),ye=P(Jt,Ie.props),ye.ref=Yh(Ce,Jt,Ie),ye.return=Ce,Ce=ye;break e}S(Ce,Jt);break}else p(Ce,Jt);Jt=Jt.sibling}Ie.type===c?(ye=ru(Ie.props.children,Ce.mode,pt,Ie.key),ye.return=Ce,Ce=ye):(pt=Og(Ie.type,Ie.key,Ie.props,null,Ce.mode,pt),pt.ref=Yh(Ce,ye,Ie),pt.return=Ce,Ce=pt)}return K(Ce);case u:e:{for(Jt=Ie.key;ye!==null;){if(ye.key===Jt)if(ye.tag===4&&ye.stateNode.containerInfo===Ie.containerInfo&&ye.stateNode.implementation===Ie.implementation){S(Ce,ye.sibling),ye=P(ye,Ie.children||[]),ye.return=Ce,Ce=ye;break e}else{S(Ce,ye);break}else p(Ce,ye);ye=ye.sibling}ye=D1(Ie,Ce.mode,pt),ye.return=Ce,Ce=ye}return K(Ce);case w:return Jt=Ie._init,Cs(Ce,ye,Jt(Ie._payload),pt)}if($(Ie))return Tt(Ce,ye,Ie,pt);if(M(Ie))return rr(Ce,ye,Ie,pt);sg(Ce,Ie)}return typeof Ie=="string"&&Ie!==""||typeof Ie=="number"?(Ie=""+Ie,ye!==null&&ye.tag===6?(S(Ce,ye.sibling),ye=P(ye,Ie),ye.return=Ce,Ce=ye):(S(Ce,ye),ye=C1(Ie,Ce.mode,pt),ye.return=Ce,Ce=ye),K(Ce)):S(Ce,ye)}return Cs}var Bc=eC(!0),tC=eC(!1),Zh={},Ms=wt(Zh),Kh=wt(Zh),Uc=wt(Zh);function Do(d){if(d===Zh)throw Error(o(174));return d}function j_(d,p){Ke(Uc,p),Ke(Kh,d),Ke(Ms,Zh),d=J(p),ut(Ms),Ke(Ms,d)}function kc(){ut(Ms),ut(Kh),ut(Uc)}function nC(d){var p=Do(Uc.current),S=Do(Ms.current);p=N(S,d.type,p),S!==p&&(Ke(Kh,d),Ke(Ms,p))}function q_(d){Kh.current===d&&(ut(Ms),ut(Kh))}var qn=wt(0);function og(d){for(var p=d;p!==null;){if(p.tag===13){var S=p.memoizedState;if(S!==null&&(S=S.dehydrated,S===null||ve(S)||be(S)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var X_=[];function $_(){for(var d=0;d<X_.length;d++){var p=X_[d];Ae?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}X_.length=0}var ag=a.ReactCurrentDispatcher,Es=a.ReactCurrentBatchConfig,Hc=0,ei=null,tr=null,Ri=null,lg=!1,Jh=!1,Qh=0,YU=0;function nr(){throw Error(o(321))}function Y_(d,p){if(p===null)return!1;for(var S=0;S<p.length&&S<d.length;S++)if(!bo(d[S],p[S]))return!1;return!0}function Z_(d,p,S,b,P,F){if(Hc=F,ei=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,ag.current=d===null||d.memoizedState===null?QU:ek,d=S(b,P),Jh){F=0;do{if(Jh=!1,Qh=0,25<=F)throw Error(o(301));F+=1,Ri=tr=null,p.updateQueue=null,ag.current=tk,d=S(b,P)}while(Jh)}if(ag.current=dg,p=tr!==null&&tr.next!==null,Hc=0,Ri=tr=ei=null,lg=!1,p)throw Error(o(300));return d}function K_(){var d=Qh!==0;return Qh=0,d}function ra(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ri===null?ei.memoizedState=Ri=d:Ri=Ri.next=d,Ri}function To(){if(tr===null){var d=ei.alternate;d=d!==null?d.memoizedState:null}else d=tr.next;var p=Ri===null?ei.memoizedState:Ri.next;if(p!==null)Ri=p,tr=d;else{if(d===null)throw Error(o(310));tr=d,d={memoizedState:tr.memoizedState,baseState:tr.baseState,baseQueue:tr.baseQueue,queue:tr.queue,next:null},Ri===null?ei.memoizedState=Ri=d:Ri=Ri.next=d}return Ri}function Jl(d,p){return typeof p=="function"?p(d):p}function ug(d){var p=To(),S=p.queue;if(S===null)throw Error(o(311));S.lastRenderedReducer=d;var b=tr,P=b.baseQueue,F=S.pending;if(F!==null){if(P!==null){var K=P.next;P.next=F.next,F.next=K}b.baseQueue=P=F,S.pending=null}if(P!==null){F=P.next,b=b.baseState;var me=K=null,ze=null,it=F;do{var xt=it.lane;if((Hc&xt)===xt)ze!==null&&(ze=ze.next={lane:0,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null}),b=it.hasEagerState?it.eagerState:d(b,it.action);else{var jt={lane:xt,action:it.action,hasEagerState:it.hasEagerState,eagerState:it.eagerState,next:null};ze===null?(me=ze=jt,K=b):ze=ze.next=jt,ei.lanes|=xt,Wc|=xt}it=it.next}while(it!==null&&it!==F);ze===null?K=b:ze.next=me,bo(b,p.memoizedState)||(ts=!0),p.memoizedState=b,p.baseState=K,p.baseQueue=ze,S.lastRenderedState=b}if(d=S.interleaved,d!==null){P=d;do F=P.lane,ei.lanes|=F,Wc|=F,P=P.next;while(P!==d)}else P===null&&(S.lanes=0);return[p.memoizedState,S.dispatch]}function cg(d){var p=To(),S=p.queue;if(S===null)throw Error(o(311));S.lastRenderedReducer=d;var b=S.dispatch,P=S.pending,F=p.memoizedState;if(P!==null){S.pending=null;var K=P=P.next;do F=d(F,K.action),K=K.next;while(K!==P);bo(F,p.memoizedState)||(ts=!0),p.memoizedState=F,p.baseQueue===null&&(p.baseState=F),S.lastRenderedState=F}return[F,b]}function iC(){}function rC(d,p){var S=ei,b=To(),P=p(),F=!bo(b.memoizedState,P);if(F&&(b.memoizedState=P,ts=!0),b=b.queue,td(aC.bind(null,S,b,d),[d]),b.getSnapshot!==p||F||Ri!==null&&Ri.memoizedState.tag&1){if(S.flags|=2048,ed(9,oC.bind(null,S,b,P,p),void 0,null),mi===null)throw Error(o(349));Hc&30||sC(S,p,P)}return P}function sC(d,p,S){d.flags|=16384,d={getSnapshot:p,value:S},p=ei.updateQueue,p===null?(p={lastEffect:null,stores:null},ei.updateQueue=p,p.stores=[d]):(S=p.stores,S===null?p.stores=[d]:S.push(d))}function oC(d,p,S,b){p.value=S,p.getSnapshot=b,lC(p)&&bs(d,1,-1)}function aC(d,p,S){return S(function(){lC(p)&&bs(d,1,-1)})}function lC(d){var p=d.getSnapshot;d=d.value;try{var S=p();return!bo(d,S)}catch{return!0}}function J_(d){var p=ra();return typeof d=="function"&&(d=d()),p.memoizedState=p.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jl,lastRenderedState:d},p.queue=d,d=d.dispatch=JU.bind(null,ei,d),[p.memoizedState,d]}function ed(d,p,S,b){return d={tag:d,create:p,destroy:S,deps:b,next:null},p=ei.updateQueue,p===null?(p={lastEffect:null,stores:null},ei.updateQueue=p,p.lastEffect=d.next=d):(S=p.lastEffect,S===null?p.lastEffect=d.next=d:(b=S.next,S.next=d,d.next=b,p.lastEffect=d)),d}function uC(){return To().memoizedState}function fg(d,p,S,b){var P=ra();ei.flags|=d,P.memoizedState=ed(1|p,S,void 0,b===void 0?null:b)}function hg(d,p,S,b){var P=To();b=b===void 0?null:b;var F=void 0;if(tr!==null){var K=tr.memoizedState;if(F=K.destroy,b!==null&&Y_(b,K.deps)){P.memoizedState=ed(p,S,F,b);return}}ei.flags|=d,P.memoizedState=ed(1|p,S,F,b)}function Q_(d,p){return fg(8390656,8,d,p)}function td(d,p){return hg(2048,8,d,p)}function cC(d,p){return hg(4,2,d,p)}function fC(d,p){return hg(4,4,d,p)}function hC(d,p){if(typeof p=="function")return d=d(),p(d),function(){p(null)};if(p!=null)return d=d(),p.current=d,function(){p.current=null}}function dC(d,p,S){return S=S!=null?S.concat([d]):null,hg(4,4,hC.bind(null,p,d),S)}function e1(){}function pC(d,p){var S=To();p=p===void 0?null:p;var b=S.memoizedState;return b!==null&&p!==null&&Y_(p,b[1])?b[0]:(S.memoizedState=[d,p],d)}function mC(d,p){var S=To();p=p===void 0?null:p;var b=S.memoizedState;return b!==null&&p!==null&&Y_(p,b[1])?b[0]:(d=d(),S.memoizedState=[d,p],d)}function ZU(d,p){var S=hn;hn=S!==0&&4>S?S:4,d(!0);var b=Es.transition;Es.transition={};try{d(!1),p()}finally{hn=S,Es.transition=b}}function gC(){return To().memoizedState}function KU(d,p,S){var b=$a(d);S={lane:b,action:S,hasEagerState:!1,eagerState:null,next:null},vC(d)?yC(p,S):(xC(d,p,S),S=Sr(),d=bs(d,b,S),d!==null&&_C(d,p,b))}function JU(d,p,S){var b=$a(d),P={lane:b,action:S,hasEagerState:!1,eagerState:null,next:null};if(vC(d))yC(p,P);else{xC(d,p,P);var F=d.alternate;if(d.lanes===0&&(F===null||F.lanes===0)&&(F=p.lastRenderedReducer,F!==null))try{var K=p.lastRenderedState,me=F(K,S);if(P.hasEagerState=!0,P.eagerState=me,bo(me,K))return}catch{}finally{}S=Sr(),d=bs(d,b,S),d!==null&&_C(d,p,b)}}function vC(d){var p=d.alternate;return d===ei||p!==null&&p===ei}function yC(d,p){Jh=lg=!0;var S=d.pending;S===null?p.next=p:(p.next=S.next,S.next=p),d.pending=p}function xC(d,p,S){mi!==null&&d.mode&1&&!(Qt&2)?(d=p.interleaved,d===null?(S.next=S,Co===null?Co=[p]:Co.push(p)):(S.next=d.next,d.next=S),p.interleaved=S):(d=p.pending,d===null?S.next=S:(S.next=d.next,d.next=S),p.pending=S)}function _C(d,p,S){if(S&4194240){var b=p.lanes;b&=d.pendingLanes,S|=b,p.lanes=S,D_(d,S)}}var dg={readContext:_s,useCallback:nr,useContext:nr,useEffect:nr,useImperativeHandle:nr,useInsertionEffect:nr,useLayoutEffect:nr,useMemo:nr,useReducer:nr,useRef:nr,useState:nr,useDebugValue:nr,useDeferredValue:nr,useTransition:nr,useMutableSource:nr,useSyncExternalStore:nr,useId:nr,unstable_isNewReconciler:!1},QU={readContext:_s,useCallback:function(d,p){return ra().memoizedState=[d,p===void 0?null:p],d},useContext:_s,useEffect:Q_,useImperativeHandle:function(d,p,S){return S=S!=null?S.concat([d]):null,fg(4194308,4,hC.bind(null,p,d),S)},useLayoutEffect:function(d,p){return fg(4194308,4,d,p)},useInsertionEffect:function(d,p){return fg(4,2,d,p)},useMemo:function(d,p){var S=ra();return p=p===void 0?null:p,d=d(),S.memoizedState=[d,p],d},useReducer:function(d,p,S){var b=ra();return p=S!==void 0?S(p):p,b.memoizedState=b.baseState=p,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:p},b.queue=d,d=d.dispatch=KU.bind(null,ei,d),[b.memoizedState,d]},useRef:function(d){var p=ra();return d={current:d},p.memoizedState=d},useState:J_,useDebugValue:e1,useDeferredValue:function(d){var p=J_(d),S=p[0],b=p[1];return Q_(function(){var P=Es.transition;Es.transition={};try{b(d)}finally{Es.transition=P}},[d]),S},useTransition:function(){var d=J_(!1),p=d[0];return d=ZU.bind(null,d[1]),ra().memoizedState=d,[p,d]},useMutableSource:function(){},useSyncExternalStore:function(d,p,S){var b=ei,P=ra();if(kn){if(S===void 0)throw Error(o(407));S=S()}else{if(S=p(),mi===null)throw Error(o(349));Hc&30||sC(b,p,S)}P.memoizedState=S;var F={value:S,getSnapshot:p};return P.queue=F,Q_(aC.bind(null,b,F,d),[d]),b.flags|=2048,ed(9,oC.bind(null,b,F,S,p),void 0,null),S},useId:function(){var d=ra(),p=mi.identifierPrefix;if(kn){var S=ia,b=na;S=(b&~(1<<32-Jr(b)-1)).toString(32)+S,p=":"+p+"R"+S,S=Qh++,0<S&&(p+="H"+S.toString(32)),p+=":"}else S=YU++,p=":"+p+"r"+S.toString(32)+":";return d.memoizedState=p},unstable_isNewReconciler:!1},ek={readContext:_s,useCallback:pC,useContext:_s,useEffect:td,useImperativeHandle:dC,useInsertionEffect:cC,useLayoutEffect:fC,useMemo:mC,useReducer:ug,useRef:uC,useState:function(){return ug(Jl)},useDebugValue:e1,useDeferredValue:function(d){var p=ug(Jl),S=p[0],b=p[1];return td(function(){var P=Es.transition;Es.transition={};try{b(d)}finally{Es.transition=P}},[d]),S},useTransition:function(){var d=ug(Jl)[0],p=To().memoizedState;return[d,p]},useMutableSource:iC,useSyncExternalStore:rC,useId:gC,unstable_isNewReconciler:!1},tk={readContext:_s,useCallback:pC,useContext:_s,useEffect:td,useImperativeHandle:dC,useInsertionEffect:cC,useLayoutEffect:fC,useMemo:mC,useReducer:cg,useRef:uC,useState:function(){return cg(Jl)},useDebugValue:e1,useDeferredValue:function(d){var p=cg(Jl),S=p[0],b=p[1];return td(function(){var P=Es.transition;Es.transition={};try{b(d)}finally{Es.transition=P}},[d]),S},useTransition:function(){var d=cg(Jl)[0],p=To().memoizedState;return[d,p]},useMutableSource:iC,useSyncExternalStore:rC,useId:gC,unstable_isNewReconciler:!1};function t1(d,p){try{var S="",b=p;do S+=$U(b),b=b.return;while(b);var P=S}catch(F){P=`
Error generating stack: `+F.message+`
`+F.stack}return{value:d,source:p,stack:P}}function n1(d,p){try{console.error(p.value)}catch(S){setTimeout(function(){throw S})}}var nk=typeof WeakMap=="function"?WeakMap:Map;function wC(d,p,S){S=ta(-1,S),S.tag=3,S.payload={element:null};var b=p.value;return S.callback=function(){Tg||(Tg=!0,_1=b),n1(d,p)},S}function SC(d,p,S){S=ta(-1,S),S.tag=3;var b=d.type.getDerivedStateFromError;if(typeof b=="function"){var P=p.value;S.payload=function(){return b(P)},S.callback=function(){n1(d,p)}}var F=d.stateNode;return F!==null&&typeof F.componentDidCatch=="function"&&(S.callback=function(){n1(d,p),typeof b!="function"&&(qa===null?qa=new Set([this]):qa.add(this));var K=p.stack;this.componentDidCatch(p.value,{componentStack:K!==null?K:""})}),S}function MC(d,p,S){var b=d.pingCache;if(b===null){b=d.pingCache=new nk;var P=new Set;b.set(p,P)}else P=b.get(p),P===void 0&&(P=new Set,b.set(p,P));P.has(S)||(P.add(S),d=gk.bind(null,d,p,S),p.then(d,d))}function EC(d){do{var p;if((p=d.tag===13)&&(p=d.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return d;d=d.return}while(d!==null);return null}function bC(d,p,S,b,P){return d.mode&1?(d.flags|=65536,d.lanes=P,d):(d===p?d.flags|=65536:(d.flags|=128,S.flags|=131072,S.flags&=-52805,S.tag===1&&(S.alternate===null?S.tag=17:(p=ta(-1,1),p.tag=2,ja(S,p))),S.lanes|=1),d)}function Po(d){d.flags|=4}function AC(d,p){if(d!==null&&d.child===p.child)return!0;if(p.flags&16)return!1;for(d=p.child;d!==null;){if(d.flags&12854||d.subtreeFlags&12854)return!1;d=d.sibling}return!0}var nd,id,pg,mg;if(We)nd=function(d,p){for(var S=p.child;S!==null;){if(S.tag===5||S.tag===6)te(d,S.stateNode);else if(S.tag!==4&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===p)break;for(;S.sibling===null;){if(S.return===null||S.return===p)return;S=S.return}S.sibling.return=S.return,S=S.sibling}},id=function(){},pg=function(d,p,S,b,P){if(d=d.memoizedProps,d!==b){var F=p.stateNode,K=Do(Ms.current);S=Q(F,S,d,b,P,K),(p.updateQueue=S)&&Po(p)}},mg=function(d,p,S,b){S!==b&&Po(p)};else if(z){nd=function(d,p,S,b){for(var P=p.child;P!==null;){if(P.tag===5){var F=P.stateNode;S&&b&&(F=Un(F,P.type,P.memoizedProps,P)),te(d,F)}else if(P.tag===6)F=P.stateNode,S&&b&&(F=Nn(F,P.memoizedProps,P)),te(d,F);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)F=P.child,F!==null&&(F.return=P),nd(d,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===p)break;for(;P.sibling===null;){if(P.return===null||P.return===p)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};var CC=function(d,p,S,b){for(var P=p.child;P!==null;){if(P.tag===5){var F=P.stateNode;S&&b&&(F=Un(F,P.type,P.memoizedProps,P)),en(d,F)}else if(P.tag===6)F=P.stateNode,S&&b&&(F=Nn(F,P.memoizedProps,P)),en(d,F);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)F=P.child,F!==null&&(F.return=P),CC(d,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===p)break;for(;P.sibling===null;){if(P.return===null||P.return===p)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};id=function(d,p){var S=p.stateNode;if(!AC(d,p)){d=S.containerInfo;var b=Bt(d);CC(b,p,!1,!1),S.pendingChildren=b,Po(p),yn(d,b)}},pg=function(d,p,S,b,P){var F=d.stateNode,K=d.memoizedProps;if((d=AC(d,p))&&K===b)p.stateNode=F;else{var me=p.stateNode,ze=Do(Ms.current),it=null;K!==b&&(it=Q(me,S,K,b,P,ze)),d&&it===null?p.stateNode=F:(F=Et(F,it,S,K,b,p,d,me),ce(F,S,b,P,ze)&&Po(p),p.stateNode=F,d?Po(p):nd(F,p,!1,!1))}},mg=function(d,p,S,b){S!==b?(d=Do(Uc.current),S=Do(Ms.current),p.stateNode=pe(b,d,S,p),Po(p)):p.stateNode=d.stateNode}}else id=function(){},pg=function(){},mg=function(){};function rd(d,p){if(!kn)switch(d.tailMode){case"hidden":p=d.tail;for(var S=null;p!==null;)p.alternate!==null&&(S=p),p=p.sibling;S===null?d.tail=null:S.sibling=null;break;case"collapsed":S=d.tail;for(var b=null;S!==null;)S.alternate!==null&&(b=S),S=S.sibling;b===null?p||d.tail===null?d.tail=null:d.tail.sibling=null:b.sibling=null}}function ir(d){var p=d.alternate!==null&&d.alternate.child===d.child,S=0,b=0;if(p)for(var P=d.child;P!==null;)S|=P.lanes|P.childLanes,b|=P.subtreeFlags&14680064,b|=P.flags&14680064,P.return=d,P=P.sibling;else for(P=d.child;P!==null;)S|=P.lanes|P.childLanes,b|=P.subtreeFlags,b|=P.flags,P.return=d,P=P.sibling;return d.subtreeFlags|=b,d.childLanes=S,p}function ik(d,p,S){var b=p.pendingProps;switch(H_(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ir(p),null;case 1:return Ti(p.type)&&Ln(),ir(p),null;case 3:return b=p.stateNode,kc(),ut(xn),ut(Dt),$_(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(d===null||d.child===null)&&($h(p)?Po(p):d===null||d.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,Ys!==null&&(M1(Ys),Ys=null))),id(d,p),ir(p),null;case 5:q_(p),S=Do(Uc.current);var P=p.type;if(d!==null&&p.stateNode!=null)pg(d,p,P,b,S),d.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!b){if(p.stateNode===null)throw Error(o(166));return ir(p),null}if(d=Do(Ms.current),$h(p)){if(!Se)throw Error(o(175));d=kt(p.stateNode,p.type,p.memoizedProps,S,d,p,!Xh),p.updateQueue=d,d!==null&&Po(p)}else{var F=ee(P,b,S,d,p);nd(F,p,!1,!1),p.stateNode=F,ce(F,P,b,S,d)&&Po(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return ir(p),null;case 6:if(d&&p.stateNode!=null)mg(d,p,d.memoizedProps,b);else{if(typeof b!="string"&&p.stateNode===null)throw Error(o(166));if(d=Do(Uc.current),S=Do(Ms.current),$h(p)){if(!Se)throw Error(o(176));if(d=p.stateNode,b=p.memoizedProps,(S=bt(d,b,p,!Xh))&&(P=Qr,P!==null))switch(F=(P.mode&1)!==0,P.tag){case 3:lt(P.stateNode.containerInfo,d,b,F);break;case 5:ct(P.type,P.memoizedProps,P.stateNode,d,b,F)}S&&Po(p)}else p.stateNode=pe(b,d,S,p)}return ir(p),null;case 13:if(ut(qn),b=p.memoizedState,kn&&es!==null&&p.mode&1&&!(p.flags&128)){for(d=es;d;)d=at(d);return zc(),p.flags|=98560,p}if(b!==null&&b.dehydrated!==null){if(b=$h(p),d===null){if(!b)throw Error(o(318));if(!Se)throw Error(o(344));if(d=p.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));At(d,p)}else zc(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;return ir(p),null}return Ys!==null&&(M1(Ys),Ys=null),p.flags&128?(p.lanes=S,p):(b=b!==null,S=!1,d===null?$h(p):S=d.memoizedState!==null,b&&!S&&(p.child.flags|=8192,p.mode&1&&(d===null||qn.current&1?Mi===0&&(Mi=3):b1())),p.updateQueue!==null&&(p.flags|=4),ir(p),null);case 4:return kc(),id(d,p),d===null&&ke(p.stateNode.containerInfo),ir(p),null;case 10:return L_(p.type._context),ir(p),null;case 17:return Ti(p.type)&&Ln(),ir(p),null;case 19:if(ut(qn),P=p.memoizedState,P===null)return ir(p),null;if(b=(p.flags&128)!==0,F=P.rendering,F===null)if(b)rd(P,!1);else{if(Mi!==0||d!==null&&d.flags&128)for(d=p.child;d!==null;){if(F=og(d),F!==null){for(p.flags|=128,rd(P,!1),d=F.updateQueue,d!==null&&(p.updateQueue=d,p.flags|=4),p.subtreeFlags=0,d=S,b=p.child;b!==null;)S=b,P=d,S.flags&=14680066,F=S.alternate,F===null?(S.childLanes=0,S.lanes=P,S.child=null,S.subtreeFlags=0,S.memoizedProps=null,S.memoizedState=null,S.updateQueue=null,S.dependencies=null,S.stateNode=null):(S.childLanes=F.childLanes,S.lanes=F.lanes,S.child=F.child,S.subtreeFlags=0,S.deletions=null,S.memoizedProps=F.memoizedProps,S.memoizedState=F.memoizedState,S.updateQueue=F.updateQueue,S.type=F.type,P=F.dependencies,S.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),b=b.sibling;return Ke(qn,qn.current&1|2),p.child}d=d.sibling}P.tail!==null&&Pi()>x1&&(p.flags|=128,b=!0,rd(P,!1),p.lanes=4194304)}else{if(!b)if(d=og(F),d!==null){if(p.flags|=128,b=!0,d=d.updateQueue,d!==null&&(p.updateQueue=d,p.flags|=4),rd(P,!0),P.tail===null&&P.tailMode==="hidden"&&!F.alternate&&!kn)return ir(p),null}else 2*Pi()-P.renderingStartTime>x1&&S!==1073741824&&(p.flags|=128,b=!0,rd(P,!1),p.lanes=4194304);P.isBackwards?(F.sibling=p.child,p.child=F):(d=P.last,d!==null?d.sibling=F:p.child=F,P.last=F)}return P.tail!==null?(p=P.tail,P.rendering=p,P.tail=p.sibling,P.renderingStartTime=Pi(),p.sibling=null,d=qn.current,Ke(qn,b?d&1|2:d&1),p):(ir(p),null);case 22:case 23:return E1(),b=p.memoizedState!==null,d!==null&&d.memoizedState!==null!==b&&(p.flags|=8192),b&&p.mode&1?ns&1073741824&&(ir(p),We&&p.subtreeFlags&6&&(p.flags|=8192)):ir(p),null;case 24:return null;case 25:return null}throw Error(o(156,p.tag))}var rk=a.ReactCurrentOwner,ts=!1;function wr(d,p,S,b){p.child=d===null?tC(p,null,S,b):Bc(p,d.child,S,b)}function DC(d,p,S,b,P){S=S.render;var F=p.ref;return Nc(p,P),b=Z_(d,p,S,b,F,P),S=K_(),d!==null&&!ts?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~P,sa(d,p,P)):(kn&&S&&k_(p),p.flags|=1,wr(d,p,b,P),p.child)}function TC(d,p,S,b,P){if(d===null){var F=S.type;return typeof F=="function"&&!A1(F)&&F.defaultProps===void 0&&S.compare===null&&S.defaultProps===void 0?(p.tag=15,p.type=F,PC(d,p,F,b,P)):(d=Og(S.type,null,b,p,p.mode,P),d.ref=p.ref,d.return=p,p.child=d)}if(F=d.child,!(d.lanes&P)){var K=F.memoizedProps;if(S=S.compare,S=S!==null?S:Km,S(K,b)&&d.ref===p.ref)return sa(d,p,P)}return p.flags|=1,d=Za(F,b),d.ref=p.ref,d.return=p,p.child=d}function PC(d,p,S,b,P){if(d!==null&&Km(d.memoizedProps,b)&&d.ref===p.ref)if(ts=!1,(d.lanes&P)!==0)d.flags&131072&&(ts=!0);else return p.lanes=d.lanes,sa(d,p,P);return i1(d,p,S,b,P)}function RC(d,p,S){var b=p.pendingProps,P=b.children,F=d!==null?d.memoizedState:null;if(b.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null},Ke(Vc,ns),ns|=S;else if(S&1073741824)p.memoizedState={baseLanes:0,cachePool:null},b=F!==null?F.baseLanes:S,Ke(Vc,ns),ns|=b;else return d=F!==null?F.baseLanes|S:S,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:d,cachePool:null},p.updateQueue=null,Ke(Vc,ns),ns|=d,null;else F!==null?(b=F.baseLanes|S,p.memoizedState=null):b=S,Ke(Vc,ns),ns|=b;return wr(d,p,P,S),p.child}function IC(d,p){var S=p.ref;(d===null&&S!==null||d!==null&&d.ref!==S)&&(p.flags|=512,p.flags|=2097152)}function i1(d,p,S,b,P){var F=Ti(S)?er:Dt.current;return F=pi(p,F),Nc(p,P),S=Z_(d,p,S,b,F,P),b=K_(),d!==null&&!ts?(p.updateQueue=d.updateQueue,p.flags&=-2053,d.lanes&=~P,sa(d,p,P)):(kn&&b&&k_(p),p.flags|=1,wr(d,p,S,P),p.child)}function FC(d,p,S,b,P){if(Ti(S)){var F=!0;ki(p)}else F=!1;if(Nc(p,P),p.stateNode===null)d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),XA(p,S,b),U_(p,S,b,P),b=!0;else if(d===null){var K=p.stateNode,me=p.memoizedProps;K.props=me;var ze=K.context,it=S.contextType;typeof it=="object"&&it!==null?it=_s(it):(it=Ti(S)?er:Dt.current,it=pi(p,it));var xt=S.getDerivedStateFromProps,jt=typeof xt=="function"||typeof K.getSnapshotBeforeUpdate=="function";jt||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(me!==b||ze!==it)&&$A(p,K,b,it),Ga=!1;var Lt=p.memoizedState;K.state=Lt,tg(p,b,K,P),ze=p.memoizedState,me!==b||Lt!==ze||xn.current||Ga?(typeof xt=="function"&&(B_(p,S,xt,b),ze=p.memoizedState),(me=Ga||qA(p,S,me,b,Lt,ze,it))?(jt||typeof K.UNSAFE_componentWillMount!="function"&&typeof K.componentWillMount!="function"||(typeof K.componentWillMount=="function"&&K.componentWillMount(),typeof K.UNSAFE_componentWillMount=="function"&&K.UNSAFE_componentWillMount()),typeof K.componentDidMount=="function"&&(p.flags|=4194308)):(typeof K.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=b,p.memoizedState=ze),K.props=b,K.state=ze,K.context=it,b=me):(typeof K.componentDidMount=="function"&&(p.flags|=4194308),b=!1)}else{K=p.stateNode,VA(d,p),me=p.memoizedProps,it=p.type===p.elementType?me:$s(p.type,me),K.props=it,jt=p.pendingProps,Lt=K.context,ze=S.contextType,typeof ze=="object"&&ze!==null?ze=_s(ze):(ze=Ti(S)?er:Dt.current,ze=pi(p,ze));var En=S.getDerivedStateFromProps;(xt=typeof En=="function"||typeof K.getSnapshotBeforeUpdate=="function")||typeof K.UNSAFE_componentWillReceiveProps!="function"&&typeof K.componentWillReceiveProps!="function"||(me!==jt||Lt!==ze)&&$A(p,K,b,ze),Ga=!1,Lt=p.memoizedState,K.state=Lt,tg(p,b,K,P);var Tt=p.memoizedState;me!==jt||Lt!==Tt||xn.current||Ga?(typeof En=="function"&&(B_(p,S,En,b),Tt=p.memoizedState),(it=Ga||qA(p,S,it,b,Lt,Tt,ze)||!1)?(xt||typeof K.UNSAFE_componentWillUpdate!="function"&&typeof K.componentWillUpdate!="function"||(typeof K.componentWillUpdate=="function"&&K.componentWillUpdate(b,Tt,ze),typeof K.UNSAFE_componentWillUpdate=="function"&&K.UNSAFE_componentWillUpdate(b,Tt,ze)),typeof K.componentDidUpdate=="function"&&(p.flags|=4),typeof K.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof K.componentDidUpdate!="function"||me===d.memoizedProps&&Lt===d.memoizedState||(p.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||me===d.memoizedProps&&Lt===d.memoizedState||(p.flags|=1024),p.memoizedProps=b,p.memoizedState=Tt),K.props=b,K.state=Tt,K.context=ze,b=it):(typeof K.componentDidUpdate!="function"||me===d.memoizedProps&&Lt===d.memoizedState||(p.flags|=4),typeof K.getSnapshotBeforeUpdate!="function"||me===d.memoizedProps&&Lt===d.memoizedState||(p.flags|=1024),b=!1)}return r1(d,p,S,b,F,P)}function r1(d,p,S,b,P,F){IC(d,p);var K=(p.flags&128)!==0;if(!b&&!K)return P&&Ic(p,S,!1),sa(d,p,F);b=p.stateNode,rk.current=p;var me=K&&typeof S.getDerivedStateFromError!="function"?null:b.render();return p.flags|=1,d!==null&&K?(p.child=Bc(p,d.child,null,F),p.child=Bc(p,null,me,F)):wr(d,p,me,F),p.memoizedState=b.state,P&&Ic(p,S,!0),p.child}function NC(d){var p=d.stateNode;p.pendingContext?Xs(d,p.pendingContext,p.pendingContext!==p.context):p.context&&Xs(d,p.context,!1),j_(d,p.containerInfo)}function LC(d,p,S,b,P){return zc(),G_(P),p.flags|=256,wr(d,p,S,b),p.child}var gg={dehydrated:null,treeContext:null,retryLane:0};function vg(d){return{baseLanes:d,cachePool:null}}function OC(d,p,S){var b=p.pendingProps,P=qn.current,F=!1,K=(p.flags&128)!==0,me;if((me=K)||(me=d!==null&&d.memoizedState===null?!1:(P&2)!==0),me?(F=!0,p.flags&=-129):(d===null||d.memoizedState!==null)&&(P|=1),Ke(qn,P&1),d===null)return W_(p),d=p.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?(p.mode&1?be(d)?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(P=b.children,d=b.fallback,F?(b=p.mode,F=p.child,P={mode:"hidden",children:P},!(b&1)&&F!==null?(F.childLanes=0,F.pendingProps=P):F=zg(P,b,0,null),d=ru(d,b,S,null),F.return=p,d.return=p,F.sibling=d,p.child=F,p.child.memoizedState=vg(S),p.memoizedState=gg,d):s1(p,P));if(P=d.memoizedState,P!==null){if(me=P.dehydrated,me!==null){if(K)return p.flags&256?(p.flags&=-257,yg(d,p,S,Error(o(422)))):p.memoizedState!==null?(p.child=d.child,p.flags|=128,null):(F=b.fallback,P=p.mode,b=zg({mode:"visible",children:b.children},P,0,null),F=ru(F,P,S,null),F.flags|=2,b.return=p,F.return=p,b.sibling=F,p.child=b,p.mode&1&&Bc(p,d.child,null,S),p.child.memoizedState=vg(S),p.memoizedState=gg,F);if(!(p.mode&1))p=yg(d,p,S,null);else if(be(me))p=yg(d,p,S,Error(o(419)));else if(b=(S&d.childLanes)!==0,ts||b){if(b=mi,b!==null){switch(S&-S){case 4:F=2;break;case 16:F=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:F=32;break;case 536870912:F=268435456;break;default:F=0}b=F&(b.suspendedLanes|S)?0:F,b!==0&&b!==P.retryLane&&(P.retryLane=b,bs(d,b,-1))}b1(),p=yg(d,p,S,Error(o(421)))}else ve(me)?(p.flags|=128,p.child=d.child,p=vk.bind(null,d),Ue(me,p),p=null):(S=P.treeContext,Se&&(es=rt(me),Qr=p,kn=!0,Ys=null,Xh=!1,S!==null&&(ws[Ss++]=na,ws[Ss++]=ia,ws[Ss++]=Zl,na=S.id,ia=S.overflow,Zl=p)),p=s1(p,p.pendingProps.children),p.flags|=4096);return p}return F?(b=BC(d,p,b.children,b.fallback,S),F=p.child,P=d.child.memoizedState,F.memoizedState=P===null?vg(S):{baseLanes:P.baseLanes|S,cachePool:null},F.childLanes=d.childLanes&~S,p.memoizedState=gg,b):(S=zC(d,p,b.children,S),p.memoizedState=null,S)}return F?(b=BC(d,p,b.children,b.fallback,S),F=p.child,P=d.child.memoizedState,F.memoizedState=P===null?vg(S):{baseLanes:P.baseLanes|S,cachePool:null},F.childLanes=d.childLanes&~S,p.memoizedState=gg,b):(S=zC(d,p,b.children,S),p.memoizedState=null,S)}function s1(d,p){return p=zg({mode:"visible",children:p},d.mode,0,null),p.return=d,d.child=p}function zC(d,p,S,b){var P=d.child;return d=P.sibling,S=Za(P,{mode:"visible",children:S}),!(p.mode&1)&&(S.lanes=b),S.return=p,S.sibling=null,d!==null&&(b=p.deletions,b===null?(p.deletions=[d],p.flags|=16):b.push(d)),p.child=S}function BC(d,p,S,b,P){var F=p.mode;d=d.child;var K=d.sibling,me={mode:"hidden",children:S};return!(F&1)&&p.child!==d?(S=p.child,S.childLanes=0,S.pendingProps=me,p.deletions=null):(S=Za(d,me),S.subtreeFlags=d.subtreeFlags&14680064),K!==null?b=Za(K,b):(b=ru(b,F,P,null),b.flags|=2),b.return=p,S.return=p,S.sibling=b,p.child=S,b}function yg(d,p,S,b){return b!==null&&G_(b),Bc(p,d.child,null,S),d=s1(p,p.pendingProps.children),d.flags|=2,p.memoizedState=null,d}function UC(d,p,S){d.lanes|=p;var b=d.alternate;b!==null&&(b.lanes|=p),O_(d.return,p,S)}function o1(d,p,S,b,P){var F=d.memoizedState;F===null?d.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:b,tail:S,tailMode:P}:(F.isBackwards=p,F.rendering=null,F.renderingStartTime=0,F.last=b,F.tail=S,F.tailMode=P)}function kC(d,p,S){var b=p.pendingProps,P=b.revealOrder,F=b.tail;if(wr(d,p,b.children,S),b=qn.current,b&2)b=b&1|2,p.flags|=128;else{if(d!==null&&d.flags&128)e:for(d=p.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&UC(d,S,p);else if(d.tag===19)UC(d,S,p);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===p)break e;for(;d.sibling===null;){if(d.return===null||d.return===p)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}b&=1}if(Ke(qn,b),!(p.mode&1))p.memoizedState=null;else switch(P){case"forwards":for(S=p.child,P=null;S!==null;)d=S.alternate,d!==null&&og(d)===null&&(P=S),S=S.sibling;S=P,S===null?(P=p.child,p.child=null):(P=S.sibling,S.sibling=null),o1(p,!1,P,S,F);break;case"backwards":for(S=null,P=p.child,p.child=null;P!==null;){if(d=P.alternate,d!==null&&og(d)===null){p.child=P;break}d=P.sibling,P.sibling=S,S=P,P=d}o1(p,!0,S,null,F);break;case"together":o1(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function sa(d,p,S){if(d!==null&&(p.dependencies=d.dependencies),Wc|=p.lanes,!(S&p.childLanes))return null;if(d!==null&&p.child!==d.child)throw Error(o(153));if(p.child!==null){for(d=p.child,S=Za(d,d.pendingProps),p.child=S,S.return=p;d.sibling!==null;)d=d.sibling,S=S.sibling=Za(d,d.pendingProps),S.return=p;S.sibling=null}return p.child}function sk(d,p,S){switch(p.tag){case 3:NC(p),zc();break;case 5:nC(p);break;case 1:Ti(p.type)&&ki(p);break;case 4:j_(p,p.stateNode.containerInfo);break;case 10:HA(p,p.type._context,p.memoizedProps.value);break;case 13:var b=p.memoizedState;if(b!==null)return b.dehydrated!==null?(Ke(qn,qn.current&1),p.flags|=128,null):S&p.child.childLanes?OC(d,p,S):(Ke(qn,qn.current&1),d=sa(d,p,S),d!==null?d.sibling:null);Ke(qn,qn.current&1);break;case 19:if(b=(S&p.childLanes)!==0,d.flags&128){if(b)return kC(d,p,S);p.flags|=128}var P=p.memoizedState;if(P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),Ke(qn,qn.current),b)break;return null;case 22:case 23:return p.lanes=0,RC(d,p,S)}return sa(d,p,S)}function ok(d,p){switch(H_(p),p.tag){case 1:return Ti(p.type)&&Ln(),d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 3:return kc(),ut(xn),ut(Dt),$_(),d=p.flags,d&65536&&!(d&128)?(p.flags=d&-65537|128,p):null;case 5:return q_(p),null;case 13:if(ut(qn),d=p.memoizedState,d!==null&&d.dehydrated!==null){if(p.alternate===null)throw Error(o(340));zc()}return d=p.flags,d&65536?(p.flags=d&-65537|128,p):null;case 19:return ut(qn),null;case 4:return kc(),null;case 10:return L_(p.type._context),null;case 22:case 23:return E1(),null;case 24:return null;default:return null}}var xg=!1,Ql=!1,ak=typeof WeakSet=="function"?WeakSet:Set,dt=null;function _g(d,p){var S=d.ref;if(S!==null)if(typeof S=="function")try{S(null)}catch(b){Ur(d,p,b)}else S.current=null}function a1(d,p,S){try{S()}catch(b){Ur(d,p,b)}}var HC=!1;function lk(d,p){for(W(d.containerInfo),dt=p;dt!==null;)if(d=dt,p=d.child,(d.subtreeFlags&1028)!==0&&p!==null)p.return=d,dt=p;else for(;dt!==null;){d=dt;try{var S=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(S!==null){var b=S.memoizedProps,P=S.memoizedState,F=d.stateNode,K=F.getSnapshotBeforeUpdate(d.elementType===d.type?b:$s(d.type,b),P);F.__reactInternalSnapshotBeforeUpdate=K}break;case 3:We&&tt(d.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(me){Ur(d,d.return,me)}if(p=d.sibling,p!==null){p.return=d.return,dt=p;break}dt=d.return}return S=HC,HC=!1,S}function eu(d,p,S){var b=p.updateQueue;if(b=b!==null?b.lastEffect:null,b!==null){var P=b=b.next;do{if((P.tag&d)===d){var F=P.destroy;P.destroy=void 0,F!==void 0&&a1(p,S,F)}P=P.next}while(P!==b)}}function sd(d,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var S=p=p.next;do{if((S.tag&d)===d){var b=S.create;S.destroy=b()}S=S.next}while(S!==p)}}function l1(d){var p=d.ref;if(p!==null){var S=d.stateNode;switch(d.tag){case 5:d=G(S);break;default:d=S}typeof p=="function"?p(d):p.current=d}}function VC(d,p,S){if(Eo&&typeof Eo.onCommitFiberUnmount=="function")try{Eo.onCommitFiberUnmount(Ym,p)}catch{}switch(p.tag){case 0:case 11:case 14:case 15:if(d=p.updateQueue,d!==null&&(d=d.lastEffect,d!==null)){var b=d=d.next;do{var P=b,F=P.destroy;P=P.tag,F!==void 0&&(P&2||P&4)&&a1(p,S,F),b=b.next}while(b!==d)}break;case 1:if(_g(p,S),d=p.stateNode,typeof d.componentWillUnmount=="function")try{d.props=p.memoizedProps,d.state=p.memoizedState,d.componentWillUnmount()}catch(K){Ur(p,S,K)}break;case 5:_g(p,S);break;case 4:We?$C(d,p,S):z&&z&&(p=p.stateNode.containerInfo,S=Bt(p),Wt(p,S))}}function WC(d,p,S){for(var b=p;;)if(VC(d,b,S),b.child===null||We&&b.tag===4){if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return;b=b.return}b.sibling.return=b.return,b=b.sibling}else b.child.return=b,b=b.child}function GC(d){var p=d.alternate;p!==null&&(d.alternate=null,GC(p)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(p=d.stateNode,p!==null&&Qe(p)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function jC(d){return d.tag===5||d.tag===3||d.tag===4}function qC(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||jC(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function XC(d){if(We){e:{for(var p=d.return;p!==null;){if(jC(p))break e;p=p.return}throw Error(o(160))}var S=p;switch(S.tag){case 5:p=S.stateNode,S.flags&32&&(et(p),S.flags&=-33),S=qC(d),c1(d,S,p);break;case 3:case 4:p=S.stateNode.containerInfo,S=qC(d),u1(d,S,p);break;default:throw Error(o(161))}}}function u1(d,p,S){var b=d.tag;if(b===5||b===6)d=d.stateNode,p?Ye(S,d,p):Ne(S,d);else if(b!==4&&(d=d.child,d!==null))for(u1(d,p,S),d=d.sibling;d!==null;)u1(d,p,S),d=d.sibling}function c1(d,p,S){var b=d.tag;if(b===5||b===6)d=d.stateNode,p?nt(S,d,p):ue(S,d);else if(b!==4&&(d=d.child,d!==null))for(c1(d,p,S),d=d.sibling;d!==null;)c1(d,p,S),d=d.sibling}function $C(d,p,S){for(var b=p,P=!1,F,K;;){if(!P){P=b.return;e:for(;;){if(P===null)throw Error(o(160));switch(F=P.stateNode,P.tag){case 5:K=!1;break e;case 3:F=F.containerInfo,K=!0;break e;case 4:F=F.containerInfo,K=!0;break e}P=P.return}P=!0}if(b.tag===5||b.tag===6)WC(d,b,S),K?Re(F,b.stateNode):ne(F,b.stateNode);else if(b.tag===18)K?de(F,b.stateNode):_e(F,b.stateNode);else if(b.tag===4){if(b.child!==null){F=b.stateNode.containerInfo,K=!0,b.child.return=b,b=b.child;continue}}else if(VC(d,b,S),b.child!==null){b.child.return=b,b=b.child;continue}if(b===p)break;for(;b.sibling===null;){if(b.return===null||b.return===p)return;b=b.return,b.tag===4&&(P=!1)}b.sibling.return=b.return,b=b.sibling}}function f1(d,p){if(We){switch(p.tag){case 0:case 11:case 14:case 15:eu(3,p,p.return),sd(3,p),eu(5,p,p.return);return;case 1:return;case 5:var S=p.stateNode;if(S!=null){var b=p.memoizedProps;d=d!==null?d.memoizedProps:b;var P=p.type,F=p.updateQueue;p.updateQueue=null,F!==null&&Le(S,F,P,d,b,p)}return;case 6:if(p.stateNode===null)throw Error(o(162));S=p.memoizedProps,ge(p.stateNode,d!==null?d.memoizedProps:S,S);return;case 3:Se&&d!==null&&d.memoizedState.isDehydrated&&se(p.stateNode.containerInfo);return;case 12:return;case 13:wg(p);return;case 19:wg(p);return;case 17:return}throw Error(o(163))}switch(p.tag){case 0:case 11:case 14:case 15:eu(3,p,p.return),sd(3,p),eu(5,p,p.return);return;case 12:return;case 13:wg(p);return;case 19:wg(p);return;case 3:Se&&d!==null&&d.memoizedState.isDehydrated&&se(p.stateNode.containerInfo);break;case 22:case 23:return}e:if(z){switch(p.tag){case 1:case 5:case 6:break e;case 3:case 4:p=p.stateNode,Wt(p.containerInfo,p.pendingChildren);break e}throw Error(o(163))}}function wg(d){var p=d.updateQueue;if(p!==null){d.updateQueue=null;var S=d.stateNode;S===null&&(S=d.stateNode=new ak),p.forEach(function(b){var P=yk.bind(null,d,b);S.has(b)||(S.add(b),b.then(P,P))})}}function uk(d,p){for(dt=p;dt!==null;){p=dt;var S=p.deletions;if(S!==null)for(var b=0;b<S.length;b++){var P=S[b];try{var F=d;We?$C(F,P,p):WC(F,P,p);var K=P.alternate;K!==null&&(K.return=null),P.return=null}catch(Ct){Ur(P,p,Ct)}}if(S=p.child,p.subtreeFlags&12854&&S!==null)S.return=p,dt=S;else for(;dt!==null;){p=dt;try{var me=p.flags;if(me&32&&We&&et(p.stateNode),me&512){var ze=p.alternate;if(ze!==null){var it=ze.ref;it!==null&&(typeof it=="function"?it(null):it.current=null)}}if(me&8192)switch(p.tag){case 13:if(p.memoizedState!==null){var xt=p.alternate;(xt===null||xt.memoizedState===null)&&(y1=Pi())}break;case 22:var jt=p.memoizedState!==null,Lt=p.alternate,En=Lt!==null&&Lt.memoizedState!==null;if(S=p,We){e:if(b=S,P=jt,F=null,We)for(var Tt=b;;){if(Tt.tag===5){if(F===null){F=Tt;var rr=Tt.stateNode;P?re(rr):Oe(Tt.stateNode,Tt.memoizedProps)}}else if(Tt.tag===6){if(F===null){var Cs=Tt.stateNode;P?He(Cs):Be(Cs,Tt.memoizedProps)}}else if((Tt.tag!==22&&Tt.tag!==23||Tt.memoizedState===null||Tt===b)&&Tt.child!==null){Tt.child.return=Tt,Tt=Tt.child;continue}if(Tt===b)break;for(;Tt.sibling===null;){if(Tt.return===null||Tt.return===b)break e;F===Tt&&(F=null),Tt=Tt.return}F===Tt&&(F=null),Tt.sibling.return=Tt.return,Tt=Tt.sibling}}if(jt&&!En&&S.mode&1){dt=S;for(var Ce=S.child;Ce!==null;){for(S=dt=Ce;dt!==null;){b=dt;var ye=b.child;switch(b.tag){case 0:case 11:case 14:case 15:eu(4,b,b.return);break;case 1:_g(b,b.return);var Ie=b.stateNode;if(typeof Ie.componentWillUnmount=="function"){var pt=b.return;try{Ie.props=b.memoizedProps,Ie.state=b.memoizedState,Ie.componentWillUnmount()}catch(Ct){Ur(b,pt,Ct)}}break;case 5:_g(b,b.return);break;case 22:if(b.memoizedState!==null){KC(S);continue}}ye!==null?(ye.return=b,dt=ye):KC(S)}Ce=Ce.sibling}}}switch(me&4102){case 2:XC(p),p.flags&=-3;break;case 6:XC(p),p.flags&=-3,f1(p.alternate,p);break;case 4096:p.flags&=-4097;break;case 4100:p.flags&=-4097,f1(p.alternate,p);break;case 4:f1(p.alternate,p)}}catch(Ct){Ur(p,p.return,Ct)}if(S=p.sibling,S!==null){S.return=p.return,dt=S;break}dt=p.return}}}function ck(d,p,S){dt=d,YC(d)}function YC(d,p,S){for(var b=(d.mode&1)!==0;dt!==null;){var P=dt,F=P.child;if(P.tag===22&&b){var K=P.memoizedState!==null||xg;if(!K){var me=P.alternate,ze=me!==null&&me.memoizedState!==null||Ql;me=xg;var it=Ql;if(xg=K,(Ql=ze)&&!it)for(dt=P;dt!==null;)K=dt,ze=K.child,K.tag===22&&K.memoizedState!==null?JC(P):ze!==null?(ze.return=K,dt=ze):JC(P);for(;F!==null;)dt=F,YC(F),F=F.sibling;dt=P,xg=me,Ql=it}ZC(d)}else P.subtreeFlags&8772&&F!==null?(F.return=P,dt=F):ZC(d)}}function ZC(d){for(;dt!==null;){var p=dt;if(p.flags&8772){var S=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:Ql||sd(5,p);break;case 1:var b=p.stateNode;if(p.flags&4&&!Ql)if(S===null)b.componentDidMount();else{var P=p.elementType===p.type?S.memoizedProps:$s(p.type,S.memoizedProps);b.componentDidUpdate(P,S.memoizedState,b.__reactInternalSnapshotBeforeUpdate)}var F=p.updateQueue;F!==null&&GA(p,F,b);break;case 3:var K=p.updateQueue;if(K!==null){if(S=null,p.child!==null)switch(p.child.tag){case 5:S=G(p.child.stateNode);break;case 1:S=p.child.stateNode}GA(p,K,S)}break;case 5:var me=p.stateNode;S===null&&p.flags&4&&Ee(me,p.type,p.memoizedProps,p);break;case 6:break;case 4:break;case 12:break;case 13:if(Se&&p.memoizedState===null){var ze=p.alternate;if(ze!==null){var it=ze.memoizedState;if(it!==null){var xt=it.dehydrated;xt!==null&&xe(xt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Ql||p.flags&512&&l1(p)}catch(jt){Ur(p,p.return,jt)}}if(p===d){dt=null;break}if(S=p.sibling,S!==null){S.return=p.return,dt=S;break}dt=p.return}}function KC(d){for(;dt!==null;){var p=dt;if(p===d){dt=null;break}var S=p.sibling;if(S!==null){S.return=p.return,dt=S;break}dt=p.return}}function JC(d){for(;dt!==null;){var p=dt;try{switch(p.tag){case 0:case 11:case 15:var S=p.return;try{sd(4,p)}catch(ze){Ur(p,S,ze)}break;case 1:var b=p.stateNode;if(typeof b.componentDidMount=="function"){var P=p.return;try{b.componentDidMount()}catch(ze){Ur(p,P,ze)}}var F=p.return;try{l1(p)}catch(ze){Ur(p,F,ze)}break;case 5:var K=p.return;try{l1(p)}catch(ze){Ur(p,K,ze)}}}catch(ze){Ur(p,p.return,ze)}if(p===d){dt=null;break}var me=p.sibling;if(me!==null){me.return=p.return,dt=me;break}dt=p.return}}var Sg=0,Mg=1,Eg=2,bg=3,Ag=4;if(typeof Symbol=="function"&&Symbol.for){var od=Symbol.for;Sg=od("selector.component"),Mg=od("selector.has_pseudo_class"),Eg=od("selector.role"),bg=od("selector.test_id"),Ag=od("selector.text")}function h1(d){var p=De(d);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(o(364));return p}if(d=B(d),d===null)throw Error(o(362));return d.stateNode.current}function d1(d,p){switch(p.$$typeof){case Sg:if(d.type===p.value)return!0;break;case Mg:e:{p=p.value,d=[d,0];for(var S=0;S<d.length;){var b=d[S++],P=d[S++],F=p[P];if(b.tag!==5||!q(b)){for(;F!=null&&d1(b,F);)P++,F=p[P];if(P===p.length){p=!0;break e}else for(b=b.child;b!==null;)d.push(b,P),b=b.sibling}}p=!1}return p;case Eg:if(d.tag===5&&Z(d.stateNode,p.value))return!0;break;case Ag:if((d.tag===5||d.tag===6)&&(d=U(d),d!==null&&0<=d.indexOf(p.value)))return!0;break;case bg:if(d.tag===5&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function p1(d){switch(d.$$typeof){case Sg:return"<"+(T(d.value)||"Unknown")+">";case Mg:return":has("+(p1(d)||"")+")";case Eg:return'[role="'+d.value+'"]';case Ag:return'"'+d.value+'"';case bg:return'[data-testname="'+d.value+'"]';default:throw Error(o(365))}}function QC(d,p){var S=[];d=[d,0];for(var b=0;b<d.length;){var P=d[b++],F=d[b++],K=p[F];if(P.tag!==5||!q(P)){for(;K!=null&&d1(P,K);)F++,K=p[F];if(F===p.length)S.push(P);else for(P=P.child;P!==null;)d.push(P,F),P=P.sibling}}return S}function m1(d,p){if(!Y)throw Error(o(363));d=h1(d),d=QC(d,p),p=[],d=Array.from(d);for(var S=0;S<d.length;){var b=d[S++];if(b.tag===5)q(b)||p.push(b.stateNode);else for(b=b.child;b!==null;)d.push(b),b=b.sibling}return p}var fk=Math.ceil,Cg=a.ReactCurrentDispatcher,g1=a.ReactCurrentOwner,ui=a.ReactCurrentBatchConfig,Qt=0,mi=null,gi=null,Hi=0,ns=0,Vc=wt(0),Mi=0,ad=null,Wc=0,Dg=0,v1=0,ld=null,zr=null,y1=0,x1=1/0;function Gc(){x1=Pi()+500}var Tg=!1,_1=null,qa=null,Pg=!1,Xa=null,Rg=0,ud=0,w1=null,Ig=-1,Fg=0;function Sr(){return Qt&6?Pi():Ig!==-1?Ig:Ig=Pi()}function $a(d){return d.mode&1?Qt&2&&Hi!==0?Hi&-Hi:XU.transition!==null?(Fg===0&&(d=qm,qm<<=1,!(qm&4194240)&&(qm=64),Fg=d),Fg):(d=hn,d!==0?d:Me()):1}function bs(d,p,S){if(50<ud)throw ud=0,w1=null,Error(o(185));var b=Ng(d,p);return b===null?null:(qh(b,p,S),(!(Qt&2)||b!==mi)&&(b===mi&&(!(Qt&2)&&(Dg|=p),Mi===4&&Ya(b,Hi)),Br(b,S),p===1&&Qt===0&&!(d.mode&1)&&(Gc(),Zm&&Ao())),b)}function Ng(d,p){d.lanes|=p;var S=d.alternate;for(S!==null&&(S.lanes|=p),S=d,d=d.return;d!==null;)d.childLanes|=p,S=d.alternate,S!==null&&(S.childLanes|=p),S=d,d=d.return;return S.tag===3?S.stateNode:null}function Br(d,p){var S=d.callbackNode;BU(d,p);var b=$m(d,d===mi?Hi:0);if(b===0)S!==null&&UA(S),d.callbackNode=null,d.callbackPriority=0;else if(p=b&-b,d.callbackPriority!==p){if(S!=null&&UA(S),p===1)d.tag===0?qU(tD.bind(null,d)):kA(tD.bind(null,d)),Ge?Ze(function(){Qt===0&&Ao()}):T_(P_,Ao),S=null;else{switch(BA(b)){case 1:S=P_;break;case 4:S=VU;break;case 16:S=R_;break;case 536870912:S=WU;break;default:S=R_}S=cD(S,eD.bind(null,d))}d.callbackPriority=p,d.callbackNode=S}}function eD(d,p){if(Ig=-1,Fg=0,Qt&6)throw Error(o(327));var S=d.callbackNode;if(iu()&&d.callbackNode!==S)return null;var b=$m(d,d===mi?Hi:0);if(b===0)return null;if(b&30||b&d.expiredLanes||p)p=Lg(d,b);else{p=b;var P=Qt;Qt|=2;var F=rD();(mi!==d||Hi!==p)&&(Gc(),tu(d,p));do try{pk();break}catch(me){iD(d,me)}while(!0);N_(),Cg.current=F,Qt=P,gi!==null?p=0:(mi=null,Hi=0,p=Mi)}if(p!==0){if(p===2&&(P=A_(d),P!==0&&(b=P,p=S1(d,P))),p===1)throw S=ad,tu(d,0),Ya(d,b),Br(d,Pi()),S;if(p===6)Ya(d,b);else{if(P=d.current.alternate,!(b&30)&&!hk(P)&&(p=Lg(d,b),p===2&&(F=A_(d),F!==0&&(b=F,p=S1(d,F))),p===1))throw S=ad,tu(d,0),Ya(d,b),Br(d,Pi()),S;switch(d.finishedWork=P,d.finishedLanes=b,p){case 0:case 1:throw Error(o(345));case 2:nu(d,zr);break;case 3:if(Ya(d,b),(b&130023424)===b&&(p=y1+500-Pi(),10<p)){if($m(d,0)!==0)break;if(P=d.suspendedLanes,(P&b)!==b){Sr(),d.pingedLanes|=d.suspendedLanes&P;break}d.timeoutHandle=ae(nu.bind(null,d,zr),p);break}nu(d,zr);break;case 4:if(Ya(d,b),(b&4194240)===b)break;for(p=d.eventTimes,P=-1;0<b;){var K=31-Jr(b);F=1<<K,K=p[K],K>P&&(P=K),b&=~F}if(b=P,b=Pi()-b,b=(120>b?120:480>b?480:1080>b?1080:1920>b?1920:3e3>b?3e3:4320>b?4320:1960*fk(b/1960))-b,10<b){d.timeoutHandle=ae(nu.bind(null,d,zr),b);break}nu(d,zr);break;case 5:nu(d,zr);break;default:throw Error(o(329))}}}return Br(d,Pi()),d.callbackNode===S?eD.bind(null,d):null}function S1(d,p){var S=ld;return d.current.memoizedState.isDehydrated&&(tu(d,p).flags|=256),d=Lg(d,p),d!==2&&(p=zr,zr=S,p!==null&&M1(p)),d}function M1(d){zr===null?zr=d:zr.push.apply(zr,d)}function hk(d){for(var p=d;;){if(p.flags&16384){var S=p.updateQueue;if(S!==null&&(S=S.stores,S!==null))for(var b=0;b<S.length;b++){var P=S[b],F=P.getSnapshot;P=P.value;try{if(!bo(F(),P))return!1}catch{return!1}}}if(S=p.child,p.subtreeFlags&16384&&S!==null)S.return=p,p=S;else{if(p===d)break;for(;p.sibling===null;){if(p.return===null||p.return===d)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function Ya(d,p){for(p&=~v1,p&=~Dg,d.suspendedLanes|=p,d.pingedLanes&=~p,d=d.expirationTimes;0<p;){var S=31-Jr(p),b=1<<S;d[S]=-1,p&=~b}}function tD(d){if(Qt&6)throw Error(o(327));iu();var p=$m(d,0);if(!(p&1))return Br(d,Pi()),null;var S=Lg(d,p);if(d.tag!==0&&S===2){var b=A_(d);b!==0&&(p=b,S=S1(d,b))}if(S===1)throw S=ad,tu(d,0),Ya(d,p),Br(d,Pi()),S;if(S===6)throw Error(o(345));return d.finishedWork=d.current.alternate,d.finishedLanes=p,nu(d,zr),Br(d,Pi()),null}function nD(d){Xa!==null&&Xa.tag===0&&!(Qt&6)&&iu();var p=Qt;Qt|=1;var S=ui.transition,b=hn;try{if(ui.transition=null,hn=1,d)return d()}finally{hn=b,ui.transition=S,Qt=p,!(Qt&6)&&Ao()}}function E1(){ns=Vc.current,ut(Vc)}function tu(d,p){d.finishedWork=null,d.finishedLanes=0;var S=d.timeoutHandle;if(S!==Pe&&(d.timeoutHandle=Pe,Te(S)),gi!==null)for(S=gi.return;S!==null;){var b=S;switch(H_(b),b.tag){case 1:b=b.type.childContextTypes,b!=null&&Ln();break;case 3:kc(),ut(xn),ut(Dt),$_();break;case 5:q_(b);break;case 4:kc();break;case 13:ut(qn);break;case 19:ut(qn);break;case 10:L_(b.type._context);break;case 22:case 23:E1()}S=S.return}if(mi=d,gi=d=Za(d.current,null),Hi=ns=p,Mi=0,ad=null,v1=Dg=Wc=0,zr=ld=null,Co!==null){for(p=0;p<Co.length;p++)if(S=Co[p],b=S.interleaved,b!==null){S.interleaved=null;var P=b.next,F=S.pending;if(F!==null){var K=F.next;F.next=P,b.next=K}S.pending=b}Co=null}return d}function iD(d,p){do{var S=gi;try{if(N_(),ag.current=dg,lg){for(var b=ei.memoizedState;b!==null;){var P=b.queue;P!==null&&(P.pending=null),b=b.next}lg=!1}if(Hc=0,Ri=tr=ei=null,Jh=!1,Qh=0,g1.current=null,S===null||S.return===null){Mi=1,ad=p,gi=null;break}e:{var F=d,K=S.return,me=S,ze=p;if(p=Hi,me.flags|=32768,ze!==null&&typeof ze=="object"&&typeof ze.then=="function"){var it=ze,xt=me,jt=xt.tag;if(!(xt.mode&1)&&(jt===0||jt===11||jt===15)){var Lt=xt.alternate;Lt?(xt.updateQueue=Lt.updateQueue,xt.memoizedState=Lt.memoizedState,xt.lanes=Lt.lanes):(xt.updateQueue=null,xt.memoizedState=null)}var En=EC(K);if(En!==null){En.flags&=-257,bC(En,K,me,F,p),En.mode&1&&MC(F,it,p),p=En,ze=it;var Tt=p.updateQueue;if(Tt===null){var rr=new Set;rr.add(ze),p.updateQueue=rr}else Tt.add(ze);break e}else{if(!(p&1)){MC(F,it,p),b1();break e}ze=Error(o(426))}}else if(kn&&me.mode&1){var Cs=EC(K);if(Cs!==null){!(Cs.flags&65536)&&(Cs.flags|=256),bC(Cs,K,me,F,p),G_(ze);break e}}F=ze,Mi!==4&&(Mi=2),ld===null?ld=[F]:ld.push(F),ze=t1(ze,me),me=K;do{switch(me.tag){case 3:me.flags|=65536,p&=-p,me.lanes|=p;var Ce=wC(me,ze,p);WA(me,Ce);break e;case 1:F=ze;var ye=me.type,Ie=me.stateNode;if(!(me.flags&128)&&(typeof ye.getDerivedStateFromError=="function"||Ie!==null&&typeof Ie.componentDidCatch=="function"&&(qa===null||!qa.has(Ie)))){me.flags|=65536,p&=-p,me.lanes|=p;var pt=SC(me,F,p);WA(me,pt);break e}}me=me.return}while(me!==null)}oD(S)}catch(Ct){p=Ct,gi===S&&S!==null&&(gi=S=S.return);continue}break}while(!0)}function rD(){var d=Cg.current;return Cg.current=dg,d===null?dg:d}function b1(){(Mi===0||Mi===3||Mi===2)&&(Mi=4),mi===null||!(Wc&268435455)&&!(Dg&268435455)||Ya(mi,Hi)}function Lg(d,p){var S=Qt;Qt|=2;var b=rD();mi===d&&Hi===p||tu(d,p);do try{dk();break}catch(P){iD(d,P)}while(!0);if(N_(),Qt=S,Cg.current=b,gi!==null)throw Error(o(261));return mi=null,Hi=0,Mi}function dk(){for(;gi!==null;)sD(gi)}function pk(){for(;gi!==null&&!kU();)sD(gi)}function sD(d){var p=uD(d.alternate,d,ns);d.memoizedProps=d.pendingProps,p===null?oD(d):gi=p,g1.current=null}function oD(d){var p=d;do{var S=p.alternate;if(d=p.return,p.flags&32768){if(S=ok(S,p),S!==null){S.flags&=32767,gi=S;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Mi=6,gi=null;return}}else if(S=ik(S,p,ns),S!==null){gi=S;return}if(p=p.sibling,p!==null){gi=p;return}gi=p=d}while(p!==null);Mi===0&&(Mi=5)}function nu(d,p){var S=hn,b=ui.transition;try{ui.transition=null,hn=1,mk(d,p,S)}finally{ui.transition=b,hn=S}return null}function mk(d,p,S){do iu();while(Xa!==null);if(Qt&6)throw Error(o(327));var b=d.finishedWork,P=d.finishedLanes;if(b===null)return null;if(d.finishedWork=null,d.finishedLanes=0,b===d.current)throw Error(o(177));d.callbackNode=null,d.callbackPriority=0;var F=b.lanes|b.childLanes;if(UU(d,F),d===mi&&(gi=mi=null,Hi=0),!(b.subtreeFlags&2064)&&!(b.flags&2064)||Pg||(Pg=!0,cD(R_,function(){return iu(),null})),F=(b.flags&15990)!==0,b.subtreeFlags&15990||F){F=ui.transition,ui.transition=null;var K=hn;hn=1;var me=Qt;Qt|=4,g1.current=null,lk(d,b),uk(d,b),X(d.containerInfo),d.current=b,ck(b),HU(),Qt=me,hn=K,ui.transition=F}else d.current=b;if(Pg&&(Pg=!1,Xa=d,Rg=P),F=d.pendingLanes,F===0&&(qa=null),GU(b.stateNode),Br(d,Pi()),p!==null)for(S=d.onRecoverableError,b=0;b<p.length;b++)S(p[b]);if(Tg)throw Tg=!1,d=_1,_1=null,d;return Rg&1&&d.tag!==0&&iu(),F=d.pendingLanes,F&1?d===w1?ud++:(ud=0,w1=d):ud=0,Ao(),null}function iu(){if(Xa!==null){var d=BA(Rg),p=ui.transition,S=hn;try{if(ui.transition=null,hn=16>d?16:d,Xa===null)var b=!1;else{if(d=Xa,Xa=null,Rg=0,Qt&6)throw Error(o(331));var P=Qt;for(Qt|=4,dt=d.current;dt!==null;){var F=dt,K=F.child;if(dt.flags&16){var me=F.deletions;if(me!==null){for(var ze=0;ze<me.length;ze++){var it=me[ze];for(dt=it;dt!==null;){var xt=dt;switch(xt.tag){case 0:case 11:case 15:eu(8,xt,F)}var jt=xt.child;if(jt!==null)jt.return=xt,dt=jt;else for(;dt!==null;){xt=dt;var Lt=xt.sibling,En=xt.return;if(GC(xt),xt===it){dt=null;break}if(Lt!==null){Lt.return=En,dt=Lt;break}dt=En}}}var Tt=F.alternate;if(Tt!==null){var rr=Tt.child;if(rr!==null){Tt.child=null;do{var Cs=rr.sibling;rr.sibling=null,rr=Cs}while(rr!==null)}}dt=F}}if(F.subtreeFlags&2064&&K!==null)K.return=F,dt=K;else e:for(;dt!==null;){if(F=dt,F.flags&2048)switch(F.tag){case 0:case 11:case 15:eu(9,F,F.return)}var Ce=F.sibling;if(Ce!==null){Ce.return=F.return,dt=Ce;break e}dt=F.return}}var ye=d.current;for(dt=ye;dt!==null;){K=dt;var Ie=K.child;if(K.subtreeFlags&2064&&Ie!==null)Ie.return=K,dt=Ie;else e:for(K=ye;dt!==null;){if(me=dt,me.flags&2048)try{switch(me.tag){case 0:case 11:case 15:sd(9,me)}}catch(Ct){Ur(me,me.return,Ct)}if(me===K){dt=null;break e}var pt=me.sibling;if(pt!==null){pt.return=me.return,dt=pt;break e}dt=me.return}}if(Qt=P,Ao(),Eo&&typeof Eo.onPostCommitFiberRoot=="function")try{Eo.onPostCommitFiberRoot(Ym,d)}catch{}b=!0}return b}finally{hn=S,ui.transition=p}}return!1}function aD(d,p,S){p=t1(S,p),p=wC(d,p,1),ja(d,p),p=Sr(),d=Ng(d,1),d!==null&&(qh(d,1,p),Br(d,p))}function Ur(d,p,S){if(d.tag===3)aD(d,d,S);else for(;p!==null;){if(p.tag===3){aD(p,d,S);break}else if(p.tag===1){var b=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof b.componentDidCatch=="function"&&(qa===null||!qa.has(b))){d=t1(S,d),d=SC(p,d,1),ja(p,d),d=Sr(),p=Ng(p,1),p!==null&&(qh(p,1,d),Br(p,d));break}}p=p.return}}function gk(d,p,S){var b=d.pingCache;b!==null&&b.delete(p),p=Sr(),d.pingedLanes|=d.suspendedLanes&S,mi===d&&(Hi&S)===S&&(Mi===4||Mi===3&&(Hi&130023424)===Hi&&500>Pi()-y1?tu(d,0):v1|=S),Br(d,p)}function lD(d,p){p===0&&(d.mode&1?(p=Xm,Xm<<=1,!(Xm&130023424)&&(Xm=4194304)):p=1);var S=Sr();d=Ng(d,p),d!==null&&(qh(d,p,S),Br(d,S))}function vk(d){var p=d.memoizedState,S=0;p!==null&&(S=p.retryLane),lD(d,S)}function yk(d,p){var S=0;switch(d.tag){case 13:var b=d.stateNode,P=d.memoizedState;P!==null&&(S=P.retryLane);break;case 19:b=d.stateNode;break;default:throw Error(o(314))}b!==null&&b.delete(p),lD(d,S)}var uD;uD=function(d,p,S){if(d!==null)if(d.memoizedProps!==p.pendingProps||xn.current)ts=!0;else{if(!(d.lanes&S)&&!(p.flags&128))return ts=!1,sk(d,p,S);ts=!!(d.flags&131072)}else ts=!1,kn&&p.flags&1048576&&YA(p,rg,p.index);switch(p.lanes=0,p.tag){case 2:var b=p.type;d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),d=p.pendingProps;var P=pi(p,Dt.current);Nc(p,S),P=Z_(null,p,b,d,P,S);var F=K_();return p.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,Ti(b)?(F=!0,ki(p)):F=!1,p.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,z_(p),P.updater=ng,p.stateNode=P,P._reactInternals=p,U_(p,b,d,S),p=r1(null,p,b,!0,F,S)):(p.tag=0,kn&&F&&k_(p),wr(null,p,P,S),p=p.child),p;case 16:b=p.elementType;e:{switch(d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),d=p.pendingProps,P=b._init,b=P(b._payload),p.type=b,P=p.tag=_k(b),d=$s(b,d),P){case 0:p=i1(null,p,b,d,S);break e;case 1:p=FC(null,p,b,d,S);break e;case 11:p=DC(null,p,b,d,S);break e;case 14:p=TC(null,p,b,$s(b.type,d),S);break e}throw Error(o(306,b,""))}return p;case 0:return b=p.type,P=p.pendingProps,P=p.elementType===b?P:$s(b,P),i1(d,p,b,P,S);case 1:return b=p.type,P=p.pendingProps,P=p.elementType===b?P:$s(b,P),FC(d,p,b,P,S);case 3:e:{if(NC(p),d===null)throw Error(o(387));b=p.pendingProps,F=p.memoizedState,P=F.element,VA(d,p),tg(p,b,null,S);var K=p.memoizedState;if(b=K.element,Se&&F.isDehydrated)if(F={element:b,isDehydrated:!1,cache:K.cache,transitions:K.transitions},p.updateQueue.baseState=F,p.memoizedState=F,p.flags&256){P=Error(o(423)),p=LC(d,p,b,S,P);break e}else if(b!==P){P=Error(o(424)),p=LC(d,p,b,S,P);break e}else for(Se&&(es=Rt(p.stateNode.containerInfo),Qr=p,kn=!0,Ys=null,Xh=!1),S=tC(p,null,b,S),p.child=S;S;)S.flags=S.flags&-3|4096,S=S.sibling;else{if(zc(),b===P){p=sa(d,p,S);break e}wr(d,p,b,S)}p=p.child}return p;case 5:return nC(p),d===null&&W_(p),b=p.type,P=p.pendingProps,F=d!==null?d.memoizedProps:null,K=P.children,le(b,P)?K=null:F!==null&&le(b,F)&&(p.flags|=32),IC(d,p),wr(d,p,K,S),p.child;case 6:return d===null&&W_(p),null;case 13:return OC(d,p,S);case 4:return j_(p,p.stateNode.containerInfo),b=p.pendingProps,d===null?p.child=Bc(p,null,b,S):wr(d,p,b,S),p.child;case 11:return b=p.type,P=p.pendingProps,P=p.elementType===b?P:$s(b,P),DC(d,p,b,P,S);case 7:return wr(d,p,p.pendingProps,S),p.child;case 8:return wr(d,p,p.pendingProps.children,S),p.child;case 12:return wr(d,p,p.pendingProps.children,S),p.child;case 10:e:{if(b=p.type._context,P=p.pendingProps,F=p.memoizedProps,K=P.value,HA(p,b,K),F!==null)if(bo(F.value,K)){if(F.children===P.children&&!xn.current){p=sa(d,p,S);break e}}else for(F=p.child,F!==null&&(F.return=p);F!==null;){var me=F.dependencies;if(me!==null){K=F.child;for(var ze=me.firstContext;ze!==null;){if(ze.context===b){if(F.tag===1){ze=ta(-1,S&-S),ze.tag=2;var it=F.updateQueue;if(it!==null){it=it.shared;var xt=it.pending;xt===null?ze.next=ze:(ze.next=xt.next,xt.next=ze),it.pending=ze}}F.lanes|=S,ze=F.alternate,ze!==null&&(ze.lanes|=S),O_(F.return,S,p),me.lanes|=S;break}ze=ze.next}}else if(F.tag===10)K=F.type===p.type?null:F.child;else if(F.tag===18){if(K=F.return,K===null)throw Error(o(341));K.lanes|=S,me=K.alternate,me!==null&&(me.lanes|=S),O_(K,S,p),K=F.sibling}else K=F.child;if(K!==null)K.return=F;else for(K=F;K!==null;){if(K===p){K=null;break}if(F=K.sibling,F!==null){F.return=K.return,K=F;break}K=K.return}F=K}wr(d,p,P.children,S),p=p.child}return p;case 9:return P=p.type,b=p.pendingProps.children,Nc(p,S),P=_s(P),b=b(P),p.flags|=1,wr(d,p,b,S),p.child;case 14:return b=p.type,P=$s(b,p.pendingProps),P=$s(b.type,P),TC(d,p,b,P,S);case 15:return PC(d,p,p.type,p.pendingProps,S);case 17:return b=p.type,P=p.pendingProps,P=p.elementType===b?P:$s(b,P),d!==null&&(d.alternate=null,p.alternate=null,p.flags|=2),p.tag=1,Ti(b)?(d=!0,ki(p)):d=!1,Nc(p,S),XA(p,b,P),U_(p,b,P,S),r1(null,p,b,!0,d,S);case 19:return kC(d,p,S);case 22:return RC(d,p,S)}throw Error(o(156,p.tag))};function cD(d,p){return T_(d,p)}function xk(d,p,S,b){this.tag=d,this.key=S,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=b,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function As(d,p,S,b){return new xk(d,p,S,b)}function A1(d){return d=d.prototype,!(!d||!d.isReactComponent)}function _k(d){if(typeof d=="function")return A1(d)?1:0;if(d!=null){if(d=d.$$typeof,d===g)return 11;if(d===_)return 14}return 2}function Za(d,p){var S=d.alternate;return S===null?(S=As(d.tag,p,d.key,d.mode),S.elementType=d.elementType,S.type=d.type,S.stateNode=d.stateNode,S.alternate=d,d.alternate=S):(S.pendingProps=p,S.type=d.type,S.flags=0,S.subtreeFlags=0,S.deletions=null),S.flags=d.flags&14680064,S.childLanes=d.childLanes,S.lanes=d.lanes,S.child=d.child,S.memoizedProps=d.memoizedProps,S.memoizedState=d.memoizedState,S.updateQueue=d.updateQueue,p=d.dependencies,S.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},S.sibling=d.sibling,S.index=d.index,S.ref=d.ref,S}function Og(d,p,S,b,P,F){var K=2;if(b=d,typeof d=="function")A1(d)&&(K=1);else if(typeof d=="string")K=5;else e:switch(d){case c:return ru(S.children,P,F,p);case f:K=8,P|=8;break;case h:return d=As(12,S,p,P|2),d.elementType=h,d.lanes=F,d;case x:return d=As(13,S,p,P),d.elementType=x,d.lanes=F,d;case y:return d=As(19,S,p,P),d.elementType=y,d.lanes=F,d;case E:return zg(S,P,F,p);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case m:K=10;break e;case v:K=9;break e;case g:K=11;break e;case _:K=14;break e;case w:K=16,b=null;break e}throw Error(o(130,d==null?d:typeof d,""))}return p=As(K,S,p,P),p.elementType=d,p.type=b,p.lanes=F,p}function ru(d,p,S,b){return d=As(7,d,b,p),d.lanes=S,d}function zg(d,p,S,b){return d=As(22,d,b,p),d.elementType=E,d.lanes=S,d.stateNode={},d}function C1(d,p,S){return d=As(6,d,null,p),d.lanes=S,d}function D1(d,p,S){return p=As(4,d.children!==null?d.children:[],d.key,p),p.lanes=S,p.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},p}function wk(d,p,S,b,P){this.tag=p,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Pe,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=C_(0),this.expirationTimes=C_(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=C_(0),this.identifierPrefix=b,this.onRecoverableError=P,Se&&(this.mutableSourceEagerHydrationData=null)}function fD(d,p,S,b,P,F,K,me,ze){return d=new wk(d,p,S,me,ze),p===1?(p=1,F===!0&&(p|=8)):p=0,F=As(3,null,null,p),d.current=F,F.stateNode=d,F.memoizedState={element:b,isDehydrated:S,cache:null,transitions:null},z_(F),d}function hD(d){if(!d)return Ft;d=d._reactInternals;e:{if(A(d)!==d||d.tag!==1)throw Error(o(170));var p=d;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(Ti(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(o(171))}if(d.tag===1){var S=d.type;if(Ti(S))return Rc(d,S,p)}return p}function dD(d){var p=d._reactInternals;if(p===void 0)throw typeof d.render=="function"?Error(o(188)):(d=Object.keys(d).join(","),Error(o(268,d)));return d=L(p),d===null?null:d.stateNode}function pD(d,p){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var S=d.retryLane;d.retryLane=S!==0&&S<p?S:p}}function T1(d,p){pD(d,p),(d=d.alternate)&&pD(d,p)}function Sk(d){return d=L(d),d===null?null:d.stateNode}function Mk(){return null}return t.attemptContinuousHydration=function(d){if(d.tag===13){var p=Sr();bs(d,134217728,p),T1(d,134217728)}},t.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var p=Sr(),S=$a(d);bs(d,S,p),T1(d,S)}},t.attemptSynchronousHydration=function(d){switch(d.tag){case 3:var p=d.stateNode;if(p.current.memoizedState.isDehydrated){var S=jh(p.pendingLanes);S!==0&&(D_(p,S|1),Br(p,Pi()),!(Qt&6)&&(Gc(),Ao()))}break;case 13:var b=Sr();nD(function(){return bs(d,1,b)}),T1(d,1)}},t.batchedUpdates=function(d,p){var S=Qt;Qt|=1;try{return d(p)}finally{Qt=S,Qt===0&&(Gc(),Zm&&Ao())}},t.createComponentSelector=function(d){return{$$typeof:Sg,value:d}},t.createContainer=function(d,p,S,b,P,F,K){return fD(d,p,!1,null,S,b,P,F,K)},t.createHasPseudoClassSelector=function(d){return{$$typeof:Mg,value:d}},t.createHydrationContainer=function(d,p,S,b,P,F,K,me,ze){return d=fD(S,b,!0,d,P,F,K,me,ze),d.context=hD(null),S=d.current,b=Sr(),P=$a(S),F=ta(b,P),F.callback=p??null,ja(S,F),d.current.lanes=P,qh(d,P,b),Br(d,b),d},t.createPortal=function(d,p,S){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:b==null?null:""+b,children:d,containerInfo:p,implementation:S}},t.createRoleSelector=function(d){return{$$typeof:Eg,value:d}},t.createTestNameSelector=function(d){return{$$typeof:bg,value:d}},t.createTextSelector=function(d){return{$$typeof:Ag,value:d}},t.deferredUpdates=function(d){var p=hn,S=ui.transition;try{return ui.transition=null,hn=16,d()}finally{hn=p,ui.transition=S}},t.discreteUpdates=function(d,p,S,b,P){var F=hn,K=ui.transition;try{return ui.transition=null,hn=1,d(p,S,b,P)}finally{hn=F,ui.transition=K,Qt===0&&Gc()}},t.findAllNodes=m1,t.findBoundingRects=function(d,p){if(!Y)throw Error(o(363));p=m1(d,p),d=[];for(var S=0;S<p.length;S++)d.push(we(p[S]));for(p=d.length-1;0<p;p--){S=d[p];for(var b=S.x,P=b+S.width,F=S.y,K=F+S.height,me=p-1;0<=me;me--)if(p!==me){var ze=d[me],it=ze.x,xt=it+ze.width,jt=ze.y,Lt=jt+ze.height;if(b>=it&&F>=jt&&P<=xt&&K<=Lt){d.splice(p,1);break}else if(b!==it||S.width!==ze.width||Lt<F||jt>K){if(!(F!==jt||S.height!==ze.height||xt<b||it>P)){it>b&&(ze.width+=it-b,ze.x=b),xt<P&&(ze.width=P-it),d.splice(p,1);break}}else{jt>F&&(ze.height+=jt-F,ze.y=F),Lt<K&&(ze.height=K-jt),d.splice(p,1);break}}}return d},t.findHostInstance=dD,t.findHostInstanceWithNoPortals=function(d){return d=I(d),d=d!==null?k(d):null,d===null?null:d.stateNode},t.findHostInstanceWithWarning=function(d){return dD(d)},t.flushControlled=function(d){var p=Qt;Qt|=1;var S=ui.transition,b=hn;try{ui.transition=null,hn=1,d()}finally{hn=b,ui.transition=S,Qt=p,Qt===0&&(Gc(),Ao())}},t.flushPassiveEffects=iu,t.flushSync=nD,t.focusWithin=function(d,p){if(!Y)throw Error(o(363));for(d=h1(d),p=QC(d,p),p=Array.from(p),d=0;d<p.length;){var S=p[d++];if(!q(S)){if(S.tag===5&&he(S.stateNode))return!0;for(S=S.child;S!==null;)p.push(S),S=S.sibling}}return!1},t.getCurrentUpdatePriority=function(){return hn},t.getFindAllNodesFailureDescription=function(d,p){if(!Y)throw Error(o(363));var S=0,b=[];d=[h1(d),0];for(var P=0;P<d.length;){var F=d[P++],K=d[P++],me=p[K];if((F.tag!==5||!q(F))&&(d1(F,me)&&(b.push(p1(me)),K++,K>S&&(S=K)),K<p.length))for(F=F.child;F!==null;)d.push(F,K),F=F.sibling}if(S<p.length){for(d=[];S<p.length;S++)d.push(p1(p[S]));return`findAllNodes was able to match part of the selector:
  `+(b.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},t.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return G(d.child.stateNode);default:return d.child.stateNode}},t.injectIntoDevTools=function(d){if(d={bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:Sk,findFiberByHostInstance:d.findFiberByHostInstance||Mk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)d=!0;else{try{Ym=p.inject(d),Eo=p}catch{}d=!!p.checkDCE}}return d},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(d,p,S,b){if(!Y)throw Error(o(363));d=m1(d,p);var P=fe(d,S,b).disconnect;return{disconnect:function(){P()}}},t.registerMutableSourceForHydration=function(d,p){var S=p._getVersion;S=S(p._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[p,S]:d.mutableSourceEagerHydrationData.push(p,S)},t.runWithPriority=function(d,p){var S=hn;try{return hn=d,p()}finally{hn=S}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(d,p,S,b){var P=p.current,F=Sr(),K=$a(P);return S=hD(S),p.context===null?p.context=S:p.pendingContext=S,p=ta(F,K),p.payload={element:d},b=b===void 0?null:b,b!==null&&(p.callback=b),ja(P,p),d=bs(P,K,F),d!==null&&eg(d,P,K),K},t};az.exports=_X;var wX=az.exports;const SX=Th(wX);var lz={exports:{}},uz={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(N,W){var X=N.length;N.push(W);e:for(;0<X;){var ee=X-1>>>1,te=N[ee];if(0<r(te,W))N[ee]=W,N[X]=te,X=ee;else break e}}function t(N){return N.length===0?null:N[0]}function i(N){if(N.length===0)return null;var W=N[0],X=N.pop();if(X!==W){N[0]=X;e:for(var ee=0,te=N.length,ce=te>>>1;ee<ce;){var Q=2*(ee+1)-1,le=N[Q],pe=Q+1,ae=N[pe];if(0>r(le,X))pe<te&&0>r(ae,le)?(N[ee]=ae,N[pe]=X,ee=pe):(N[ee]=le,N[Q]=X,ee=Q);else if(pe<te&&0>r(ae,X))N[ee]=ae,N[pe]=X,ee=pe;else break e}}return W}function r(N,W){var X=N.sortIndex-W.sortIndex;return X!==0?X:N.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,f=null,h=3,m=!1,v=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(N){for(var W=t(u);W!==null;){if(W.callback===null)i(u);else if(W.startTime<=N)i(u),W.sortIndex=W.expirationTime,e(l,W);else break;W=t(u)}}function E(N){if(g=!1,w(N),!v)if(t(l)!==null)v=!0,G(C);else{var W=t(u);W!==null&&J(E,W.startTime-N)}}function C(N,W){v=!1,g&&(g=!1,y(R),R=-1),m=!0;var X=h;try{for(w(W),f=t(l);f!==null&&(!(f.expirationTime>W)||N&&!I());){var ee=f.callback;if(typeof ee=="function"){f.callback=null,h=f.priorityLevel;var te=ee(f.expirationTime<=W);W=n.unstable_now(),typeof te=="function"?f.callback=te:f===t(l)&&i(l),w(W)}else i(l);f=t(l)}if(f!==null)var ce=!0;else{var Q=t(u);Q!==null&&J(E,Q.startTime-W),ce=!1}return ce}finally{f=null,h=X,m=!1}}var M=!1,T=null,R=-1,A=5,D=-1;function I(){return!(n.unstable_now()-D<A)}function L(){if(T!==null){var N=n.unstable_now();D=N;var W=!0;try{W=T(!0,N)}finally{W?H():(M=!1,T=null)}}else M=!1}var H;if(typeof _=="function")H=function(){_(L)};else if(typeof MessageChannel<"u"){var k=new MessageChannel,$=k.port2;k.port1.onmessage=L,H=function(){$.postMessage(null)}}else H=function(){x(L,0)};function G(N){T=N,M||(M=!0,H())}function J(N,W){R=x(function(){N(n.unstable_now())},W)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(N){N.callback=null},n.unstable_continueExecution=function(){v||m||(v=!0,G(C))},n.unstable_forceFrameRate=function(N){0>N||125<N?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<N?Math.floor(1e3/N):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(N){switch(h){case 1:case 2:case 3:var W=3;break;default:W=h}var X=h;h=W;try{return N()}finally{h=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(N,W){switch(N){case 1:case 2:case 3:case 4:case 5:break;default:N=3}var X=h;h=N;try{return W()}finally{h=X}},n.unstable_scheduleCallback=function(N,W,X){var ee=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?ee+X:ee):X=ee,N){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=X+te,N={id:c++,callback:W,priorityLevel:N,startTime:X,expirationTime:te,sortIndex:-1},X>ee?(N.sortIndex=X,e(u,N),t(l)===null&&N===t(u)&&(g?(y(R),R=-1):g=!0,J(E,X-ee))):(N.sortIndex=te,e(l,N),v||m||(v=!0,G(C))),N},n.unstable_shouldYield=I,n.unstable_wrapCallback=function(N){var W=h;return function(){var X=h;h=W;try{return N.apply(this,arguments)}finally{h=X}}}})(uz);lz.exports=uz;var OP=lz.exports;const MX=n=>typeof n=="object"&&typeof n.then=="function",zu=[];function cz(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function fz(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of zu)if(cz(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=zu.indexOf(r);s!==-1&&zu.splice(s,1)},promise:(MX(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(zu.push(r),!t)throw r.promise}const EX=(n,e,t)=>fz(n,e,!1,t),bX=(n,e,t)=>void fz(n,e,!0,t),AX=n=>{if(n===void 0||n.length===0)zu.splice(0,zu.length);else{const e=zu.find(t=>cz(n,t.keys,t.equal));e&&e.remove()}},sA={},CX=n=>void Object.assign(sA,n);function DX(n,e){function t(c,{args:f=[],attach:h,...m},v){let g=`${c[0].toUpperCase()}${c.slice(1)}`,x;if(c==="primitive"){if(m.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const y=m.object;x=wf(y,{type:c,root:v,attach:h,primitive:!0})}else{const y=sA[g];if(!y)throw new Error(`R3F: ${g} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");x=wf(new y(...f),{type:c,root:v,attach:h,memoizedProps:{args:f}})}return x.__r3f.attach===void 0&&(x instanceof Kt?x.__r3f.attach="geometry":x instanceof Qi&&(x.__r3f.attach="material")),g!=="inject"&&Qw(x,m),x}function i(c,f){let h=!1;if(f){var m,v;(m=f.__r3f)!=null&&m.attach?Jw(c,f,f.__r3f.attach):f.isObject3D&&c.isObject3D&&(c.add(f),h=!0),h||(v=c.__r3f)==null||v.objects.push(f),f.__r3f||wf(f,{}),f.__r3f.parent=c,WM(f),Sf(f)}}function r(c,f,h){let m=!1;if(f){var v,g;if((v=f.__r3f)!=null&&v.attach)Jw(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){f.parent=c,f.dispatchEvent({type:"added"}),c.dispatchEvent({type:"childadded",child:f});const x=c.children.filter(_=>_!==f),y=x.indexOf(h);c.children=[...x.slice(0,y),f,...x.slice(y)],m=!0}m||(g=c.__r3f)==null||g.objects.push(f),f.__r3f||wf(f,{}),f.__r3f.parent=c,WM(f),Sf(f)}}function s(c,f,h=!1){c&&[...c].forEach(m=>o(f,m,h))}function o(c,f,h){if(f){var m,v,g;if(f.__r3f&&(f.__r3f.parent=null),(m=c.__r3f)!=null&&m.objects&&(c.__r3f.objects=c.__r3f.objects.filter(E=>E!==f)),(v=f.__r3f)!=null&&v.attach)HP(c,f,f.__r3f.attach);else if(f.isObject3D&&c.isObject3D){var x;c.remove(f),(x=f.__r3f)!=null&&x.root&&zX(I0(f),f)}const _=(g=f.__r3f)==null?void 0:g.primitive,w=!_&&(h===void 0?f.dispose!==null:h);if(!_){var y;s((y=f.__r3f)==null?void 0:y.objects,f,w),s(f.children,f,w)}if(delete f.__r3f,w&&f.dispose&&f.type!=="Scene"){const E=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?OP.unstable_scheduleCallback(OP.unstable_IdlePriority,E):E()}Sf(c)}}function a(c,f,h,m){var v;const g=(v=c.__r3f)==null?void 0:v.parent;if(!g)return;const x=t(f,h,c.__r3f.root);if(c.children){for(const y of c.children)y.__r3f&&i(x,y);c.children=c.children.filter(y=>!y.__r3f)}c.__r3f.objects.forEach(y=>i(x,y)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||o(g,c),x.parent&&(x.__r3f.autoRemovedBeforeAppend=!0),i(g,x),x.raycast&&x.__r3f.eventCount&&I0(x).getState().internal.interaction.push(x),[m,m.alternate].forEach(y=>{y!==null&&(y.stateNode=x,y.ref&&(typeof y.ref=="function"?y.ref(x):y.ref.current=x))})}const l=()=>console.warn("Text is not allowed in the R3F tree! This could be stray whitespace or characters.");return{reconciler:SX({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,f)=>{if(!f)return;const h=c.getState().scene;h.__r3f&&(h.__r3f.root=c,i(h,f))},removeChildFromContainer:(c,f)=>{f&&o(c.getState().scene,f)},insertInContainerBefore:(c,f,h)=>{if(!f||!h)return;const m=c.getState().scene;m.__r3f&&r(m,f,h)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var f;return!!((f=c==null?void 0:c.__r3f)!=null?f:{}).handlers},prepareUpdate(c,f,h,m){var v;if(((v=c==null?void 0:c.__r3f)!=null?v:{}).primitive&&m.object&&m.object!==c)return[!0];{const{args:x=[],children:y,..._}=m,{args:w=[],children:E,...C}=h;if(!Array.isArray(x))throw new Error("R3F: the args prop must be an array!");if(x.some((T,R)=>T!==w[R]))return[!0];const M=yz(c,_,C,!0);return M.changes.length?[!1,M]:null}},commitUpdate(c,[f,h],m,v,g,x){f?a(c,m,g,x):Qw(c,h)},commitMount(c,f,h,m){var v;const g=(v=c.__r3f)!=null?v:{};c.raycast&&g.handlers&&g.eventCount&&I0(c).getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>wf(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var f;const{attach:h,parent:m}=(f=c.__r3f)!=null?f:{};h&&m&&HP(m,c,h),c.isObject3D&&(c.visible=!1),Sf(c)},unhideInstance(c,f){var h;const{attach:m,parent:v}=(h=c.__r3f)!=null?h:{};m&&v&&Jw(v,c,m),(c.isObject3D&&f.visible==null||f.visible)&&(c.visible=!0),Sf(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():kf.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Dn.fun(performance.now)?performance.now:Dn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Dn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Dn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:Qw}}var zP,BP;const Kw=n=>"colorSpace"in n||"outputColorSpace"in n,hz=()=>{var n;return(n=sA.ColorManagement)!=null?n:null},dz=n=>n&&n.isOrthographicCamera,TX=n=>n&&n.hasOwnProperty("current"),Cm=typeof window<"u"&&((zP=window.document)!=null&&zP.createElement||((BP=window.navigator)==null?void 0:BP.product)==="ReactNative")?ie.useLayoutEffect:ie.useEffect;function pz(n){const e=ie.useRef(n);return Cm(()=>void(e.current=n),[n]),e}function PX({set:n}){return Cm(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class mz extends ie.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}mz.getDerivedStateFromError=()=>({error:!0});const gz="__default",UP=new Map,RX=n=>n&&!!n.memoized&&!!n.changes;function vz(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Nd=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function I0(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Dn={obj:n=>n===Object(n)&&!Dn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Dn.str(n)||Dn.num(n)||Dn.boo(n))return n===e;const s=Dn.obj(n);if(s&&i==="reference")return n===e;const o=Dn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!Dn.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(Dn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function IX(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function FX(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function wf(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function VM(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const kP=/-\d+$/;function Jw(n,e,t){if(Dn.str(t)){if(kP.test(t)){const s=t.replace(kP,""),{target:o,key:a}=VM(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=VM(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function HP(n,e,t){var i,r;if(Dn.str(t)){const{target:s,key:o}=VM(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function yz(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},u=!1){const c=n.__r3f,f=Object.entries(r),h=[];if(u){const v=Object.keys(l);for(let g=0;g<v.length;g++)r.hasOwnProperty(v[g])||f.unshift([v[g],gz+"remove"])}f.forEach(([v,g])=>{var x;if((x=n.__r3f)!=null&&x.primitive&&v==="object"||Dn.equ(g,l[v]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(v))return h.push([v,g,!0,[]]);let y=[];v.includes("-")&&(y=v.split("-")),h.push([v,g,!1,y]);for(const _ in r){const w=r[_];_.startsWith(`${v}-`)&&h.push([_,w,!1,_.split("-")])}});const m={...r};return c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.args&&(m.args=c.memoizedProps.args),c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.attach&&(m.attach=c.memoizedProps.attach),{memoized:m,changes:h}}const NX=typeof process<"u"&&!1;function Qw(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=RX(e)?e:yz(n,e),l=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let c=0;c<a.length;c++){let[f,h,m,v]=a[c];if(Kw(n)){const _="srgb",w="srgb-linear";f==="encoding"?(f="colorSpace",h=h===3001?_:w):f==="outputEncoding"&&(f="outputColorSpace",h=h===3001?_:w)}let g=n,x=g[f];if(v.length&&(x=v.reduce((y,_)=>y[_],n),!(x&&x.set))){const[y,..._]=v.reverse();g=_.reverse().reduce((w,E)=>w[E],n),f=y}if(h===gz+"remove")if(g.constructor){let y=UP.get(g.constructor);y||(y=new g.constructor,UP.set(g.constructor,y)),h=y[f]}else h=0;if(m&&i)h?i.handlers[f]=h:delete i.handlers[f],i.eventCount=Object.keys(i.handlers).length;else if(x&&x.set&&(x.copy||x instanceof $u)){if(Array.isArray(h))x.fromArray?x.fromArray(h):x.set(...h);else if(x.copy&&h&&h.constructor&&(NX?x.constructor.name===h.constructor.name:x.constructor===h.constructor))x.copy(h);else if(h!==void 0){const y=x instanceof mt;!y&&x.setScalar?x.setScalar(h):x instanceof $u&&h instanceof $u?x.mask=h.mask:x.set(h),!hz()&&s&&!s.linear&&y&&x.convertSRGBToLinear()}}else if(g[f]=h,g[f]instanceof jn&&g[f].format===pr&&g[f].type===go&&s){const y=g[f];Kw(y)&&Kw(s.gl)?y.colorSpace=s.gl.outputColorSpace:y.encoding=s.gl.outputEncoding}Sf(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const c=I0(n).getState().internal,f=c.interaction.indexOf(n);f>-1&&c.interaction.splice(f,1),i.eventCount&&c.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&WM(n),n}function Sf(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function WM(n){n.onUpdate==null||n.onUpdate(n)}function LX(n,e){n.manual||(dz(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Yv(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function OX(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return kf.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return kf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return kf.ContinuousEventPriority;default:return kf.DefaultEventPriority}}function xz(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function zX(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{xz(t.capturedMap,e,i,r)})}function BX(n){function e(l){const{internal:u}=n.getState(),c=l.offsetX-u.initialClick[0],f=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+f*f))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var f;return(f=u.__r3f)==null?void 0:f.handlers["onPointer"+c]}))}function i(l,u){const c=n.getState(),f=new Set,h=[],m=u?u(c.internal.interaction):c.internal.interaction;for(let y=0;y<m.length;y++){const _=Nd(m[y]);_&&(_.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function v(y){const _=Nd(y);if(!_||!_.events.enabled||_.raycaster.camera===null)return[];if(_.raycaster.camera===void 0){var w;_.events.compute==null||_.events.compute(l,_,(w=_.previousRoot)==null?void 0:w.getState()),_.raycaster.camera===void 0&&(_.raycaster.camera=null)}return _.raycaster.camera?_.raycaster.intersectObject(y,!0):[]}let g=m.flatMap(v).sort((y,_)=>{const w=Nd(y.object),E=Nd(_.object);return!w||!E?y.distance-_.distance:E.events.priority-w.events.priority||y.distance-_.distance}).filter(y=>{const _=Yv(y);return f.has(_)?!1:(f.add(_),!0)});c.events.filter&&(g=c.events.filter(g,c));for(const y of g){let _=y.object;for(;_;){var x;(x=_.__r3f)!=null&&x.eventCount&&h.push({...y,eventObject:_}),_=_.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let y of c.internal.capturedMap.get(l.pointerId).values())f.has(Yv(y.intersection))||h.push(y.intersection);return h}function r(l,u,c,f){const h=n.getState();if(l.length){const m={stopped:!1};for(const v of l){const g=Nd(v.object)||h,{raycaster:x,pointer:y,camera:_,internal:w}=g,E=new j(y.x,y.y,0).unproject(_),C=D=>{var I,L;return(I=(L=w.capturedMap.get(D))==null?void 0:L.has(v.eventObject))!=null?I:!1},M=D=>{const I={intersection:v,target:u.target};w.capturedMap.has(D)?w.capturedMap.get(D).set(v.eventObject,I):w.capturedMap.set(D,new Map([[v.eventObject,I]])),u.target.setPointerCapture(D)},T=D=>{const I=w.capturedMap.get(D);I&&xz(w.capturedMap,v.eventObject,I,D)};let R={};for(let D in u){let I=u[D];typeof I!="function"&&(R[D]=I)}let A={...v,...R,pointer:y,intersections:l,stopped:m.stopped,delta:c,unprojectedPoint:E,ray:x.ray,camera:_,stopPropagation(){const D="pointerId"in u&&w.capturedMap.get(u.pointerId);if((!D||D.has(v.eventObject))&&(A.stopped=m.stopped=!0,w.hovered.size&&Array.from(w.hovered.values()).find(I=>I.eventObject===v.eventObject))){const I=l.slice(0,l.indexOf(v));s([...I,v])}},target:{hasPointerCapture:C,setPointerCapture:M,releasePointerCapture:T},currentTarget:{hasPointerCapture:C,setPointerCapture:M,releasePointerCapture:T},nativeEvent:u};if(f(A),m.stopped===!0)break}}return l}function s(l){const{internal:u}=n.getState();for(const c of u.hovered.values())if(!l.length||!l.find(f=>f.object===c.object&&f.index===c.index&&f.instanceId===c.instanceId)){const h=c.eventObject.__r3f,m=h==null?void 0:h.handlers;if(u.hovered.delete(Yv(c)),h!=null&&h.eventCount){const v={...c,intersections:l};m.onPointerOut==null||m.onPointerOut(v),m.onPointerLeave==null||m.onPointerLeave(v)}}}function o(l,u){for(let c=0;c<u.length;c++){const f=u[c].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:c}=n.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),s([]))})}}return function(c){const{onPointerMissed:f,internal:h}=n.getState();h.lastEvent.current=c;const m=l==="onPointerMove",v=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",x=i(c,m?t:void 0),y=v?e(c):0;l==="onPointerDown"&&(h.initialClick=[c.offsetX,c.offsetY],h.initialHits=x.map(w=>w.eventObject)),v&&!x.length&&y<=2&&(o(c,h.interaction),f&&f(c)),m&&s(x);function _(w){const E=w.eventObject,C=E.__r3f,M=C==null?void 0:C.handlers;if(C!=null&&C.eventCount)if(m){if(M.onPointerOver||M.onPointerEnter||M.onPointerOut||M.onPointerLeave){const T=Yv(w),R=h.hovered.get(T);R?R.stopped&&w.stopPropagation():(h.hovered.set(T,w),M.onPointerOver==null||M.onPointerOver(w),M.onPointerEnter==null||M.onPointerEnter(w))}M.onPointerMove==null||M.onPointerMove(w)}else{const T=M[l];T?(!v||h.initialHits.includes(E))&&(o(c,h.interaction.filter(R=>!h.initialHits.includes(R))),T(w)):v&&h.initialHits.includes(E)&&o(c,h.interaction.filter(R=>!h.initialHits.includes(R)))}}r(x,c,y,_)}}return{handlePointer:a}}const _z=n=>!!(n!=null&&n.render),wz=ie.createContext(null),UX=(n,e)=>{const t=vX((a,l)=>{const u=new j,c=new j,f=new j;function h(y=l().camera,_=c,w=l().size){const{width:E,height:C,top:M,left:T}=w,R=E/C;_ instanceof j?f.copy(_):f.set(..._);const A=y.getWorldPosition(u).distanceTo(f);if(dz(y))return{width:E/y.zoom,height:C/y.zoom,top:M,left:T,factor:1,distance:A,aspect:R};{const D=y.fov*Math.PI/180,I=2*Math.tan(D/2)*A,L=I*(E/C);return{width:L,height:I,top:M,left:T,factor:E/L,distance:A,aspect:R}}}let m;const v=y=>a(_=>({performance:{..._.performance,current:y}})),g=new Fe;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(y=1)=>n(l(),y),advance:(y,_)=>e(y,_,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new tA,pointer:g,mouse:g,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const y=l();m&&clearTimeout(m),y.performance.current!==y.performance.min&&v(y.performance.min),m=setTimeout(()=>v(l().performance.max),y.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:h},setEvents:y=>a(_=>({..._,events:{..._.events,...y}})),setSize:(y,_,w,E,C)=>{const M=l().camera,T={width:y,height:_,top:E||0,left:C||0,updateStyle:w};a(R=>({size:T,viewport:{...R.viewport,...h(M,c,T)}}))},setDpr:y=>a(_=>{const w=vz(y);return{viewport:{..._.viewport,dpr:w,initialDpr:_.viewport.initialDpr||w}}}),setFrameloop:(y="always")=>{const _=l().clock;_.stop(),_.elapsedTime=0,y!=="never"&&(_.start(),_.elapsedTime=0),a(()=>({frameloop:y}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:ie.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(y,_,w)=>{const E=l().internal;return E.priority=E.priority+(_>0?1:0),E.subscribers.push({ref:y,priority:_,store:w}),E.subscribers=E.subscribers.sort((C,M)=>C.priority-M.priority),()=>{const C=l().internal;C!=null&&C.subscribers&&(C.priority=C.priority-(_>0?1:0),C.subscribers=C.subscribers.filter(M=>M.ref!==y))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:c,set:f}=t.getState();if(l.width!==r.width||l.height!==r.height||u.dpr!==s){var h;r=l,s=u.dpr,LX(a,l),c.setPixelRatio(u.dpr);const m=(h=l.updateStyle)!=null?h:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,m)}a!==o&&(o=a,f(m=>({viewport:{...m.viewport,...m.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let Zv,kX=new Set,HX=new Set,VX=new Set;function eS(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Ld(n,e){switch(n){case"before":return eS(kX,e);case"after":return eS(HX,e);case"tail":return eS(VX,e)}}let tS,nS;function iS(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),tS=e.internal.subscribers,Zv=0;Zv<tS.length;Zv++)nS=tS[Zv],nS.ref.current(nS.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function WX(n){let e=!1,t=!1,i,r,s;function o(u){r=requestAnimationFrame(o),e=!0,i=0,Ld("before",u),t=!0;for(const f of n.values()){var c;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((c=s.gl.xr)!=null&&c.isPresenting)&&(i+=iS(u,s))}if(t=!1,Ld("after",u),i===0)return Ld("tail",u),e=!1,cancelAnimationFrame(r)}function a(u,c=1){var f;if(!u)return n.forEach(h=>a(h.store.getState(),c));(f=u.gl.xr)!=null&&f.isPresenting||!u.internal.active||u.frameloop==="never"||(c>1?u.internal.frames=Math.min(60,u.internal.frames+c):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(u,c=!0,f,h){if(c&&Ld("before",u),f)iS(u,f,h);else for(const m of n.values())iS(u,m.store.getState());c&&Ld("after",u)}return{loop:o,invalidate:a,advance:l}}function Sz(){const n=ie.useContext(wz);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function _n(n=t=>t,e){return Sz()(n,e)}function Qo(n,e=0){const t=Sz(),i=t.getState().internal.subscribe,r=pz(n);return Cm(()=>i(r,e,t),[e,i,t]),null}const VP=new WeakMap;function Mz(n,e){return function(t,...i){let r=VP.get(t);return r||(r=new t,VP.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((o,a)=>r.load(s,l=>{l.scene&&Object.assign(l,IX(l.scene)),o(l)},e,l=>a(new Error(`Could not load ${s}: ${l==null?void 0:l.message}`))))))}}function Dm(n,e,t,i){const r=Array.isArray(e)?e:[e],s=EX(Mz(t,i),[n,...r],{equal:Dn.equ});return Array.isArray(e)?s:s[0]}Dm.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return bX(Mz(t),[n,...i])};Dm.clear=function(n,e){const t=Array.isArray(e)?e:[e];return AX([n,...t])};const xh=new Map,{invalidate:WP,advance:GP}=WX(xh),{reconciler:qy,applyProps:mf}=DX(xh,OX),gf={objects:"shallow",strict:!1},GX=(n,e)=>{const t=typeof n=="function"?n(e):n;return _z(t)?t:new dO({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function jX(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function qX(n){const e=xh.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||UX(WP,GP),o=t||qy.createContainer(s,kf.ConcurrentRoot,null,!1,null,"",r,null);e||xh.set(n,{fiber:o,store:s});let a,l=!1,u;return{configure(c={}){let{gl:f,size:h,scene:m,events:v,onCreated:g,shadows:x=!1,linear:y=!1,flat:_=!1,legacy:w=!1,orthographic:E=!1,frameloop:C="always",dpr:M=[1,2],performance:T,raycaster:R,camera:A,onPointerMissed:D}=c,I=s.getState(),L=I.gl;I.gl||I.set({gl:L=GX(f,n)});let H=I.raycaster;H||I.set({raycaster:H=new iz});const{params:k,...$}=R||{};if(Dn.equ($,H,gf)||mf(H,{...$}),Dn.equ(k,H.params,gf)||mf(H,{params:{...H.params,...k}}),!I.camera||I.camera===u&&!Dn.equ(u,A,gf)){u=A;const X=A instanceof ym,ee=X?A:E?new Sa(0,0,0,0,.1,1e3):new oi(75,0,.1,1e3);X||(ee.position.z=5,A&&(mf(ee,A),("aspect"in A||"left"in A||"right"in A||"bottom"in A||"top"in A)&&(ee.manual=!0,ee.updateProjectionMatrix())),!I.camera&&!(A!=null&&A.rotation)&&ee.lookAt(0,0,0)),I.set({camera:ee}),H.camera=ee}if(!I.scene){let X;m instanceof Hy?X=m:(X=new Hy,m&&mf(X,m)),I.set({scene:wf(X)})}if(!I.xr){var G;const X=(ce,Q)=>{const le=s.getState();le.frameloop!=="never"&&GP(ce,!0,le,Q)},ee=()=>{const ce=s.getState();ce.gl.xr.enabled=ce.gl.xr.isPresenting,ce.gl.xr.setAnimationLoop(ce.gl.xr.isPresenting?X:null),ce.gl.xr.isPresenting||WP(ce)},te={connect(){const ce=s.getState().gl;ce.xr.addEventListener("sessionstart",ee),ce.xr.addEventListener("sessionend",ee)},disconnect(){const ce=s.getState().gl;ce.xr.removeEventListener("sessionstart",ee),ce.xr.removeEventListener("sessionend",ee)}};typeof((G=L.xr)==null?void 0:G.addEventListener)=="function"&&te.connect(),I.set({xr:te})}if(L.shadowMap){const X=L.shadowMap.enabled,ee=L.shadowMap.type;if(L.shadowMap.enabled=!!x,Dn.boo(x))L.shadowMap.type=sp;else if(Dn.str(x)){var J;const te={basic:iL,percentage:Fx,soft:sp,variance:to};L.shadowMap.type=(J=te[x])!=null?J:sp}else Dn.obj(x)&&Object.assign(L.shadowMap,x);(X!==L.shadowMap.enabled||ee!==L.shadowMap.type)&&(L.shadowMap.needsUpdate=!0)}const N=hz();N&&("enabled"in N?N.enabled=!w:"legacyMode"in N&&(N.legacyMode=w)),l||mf(L,{outputEncoding:y?3e3:3001,toneMapping:_?jo:mb}),I.legacy!==w&&I.set(()=>({legacy:w})),I.linear!==y&&I.set(()=>({linear:y})),I.flat!==_&&I.set(()=>({flat:_})),f&&!Dn.fun(f)&&!_z(f)&&!Dn.equ(f,L,gf)&&mf(L,f),v&&!I.events.handlers&&I.set({events:v(s)});const W=jX(n,h);return Dn.equ(W,I.size,gf)||I.setSize(W.width,W.height,W.updateStyle,W.top,W.left),M&&I.viewport.dpr!==vz(M)&&I.setDpr(M),I.frameloop!==C&&I.setFrameloop(C),I.onPointerMissed||I.set({onPointerMissed:D}),T&&!Dn.equ(T,I.performance,gf)&&I.set(X=>({performance:{...X.performance,...T}})),a=g,l=!0,this},render(c){return l||this.configure(),qy.updateContainer(O.jsx(XX,{store:s,children:c,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){Ez(n)}}}function XX({store:n,children:e,onCreated:t,rootElement:i}){return Cm(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),O.jsx(wz.Provider,{value:n,children:e})}function Ez(n,e){const t=xh.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),qy.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),FX(r),xh.delete(n)}catch{}},500)})}}qy.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:ie.version});function GM(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var c=Date.now()-o;c<e&&c>=0?i=setTimeout(l,e-c):(i=null,t||(a=n.apply(s,r),s=r=null))}var u=function(){s=this,r=arguments,o=Date.now();var c=t&&!i;return i||(i=setTimeout(l,e)),c&&(a=n.apply(s,r),s=r=null),a};return u.clear=function(){i&&(clearTimeout(i),i=null)},u.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},u}GM.debounce=GM;var $X=GM;const jP=Th($X);function YX(n){let{debounce:e,scroll:t,polyfill:i,offsetSize:r}=n===void 0?{debounce:0,scroll:!1,offsetSize:!1}:n;const s=i||(typeof window>"u"?class{}:window.ResizeObserver);if(!s)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[o,a]=ie.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=ie.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:o}),u=e?typeof e=="number"?e:e.scroll:null,c=e?typeof e=="number"?e:e.resize:null,f=ie.useRef(!1);ie.useEffect(()=>(f.current=!0,()=>void(f.current=!1)));const[h,m,v]=ie.useMemo(()=>{const _=()=>{if(!l.current.element)return;const{left:w,top:E,width:C,height:M,bottom:T,right:R,x:A,y:D}=l.current.element.getBoundingClientRect(),I={left:w,top:E,width:C,height:M,bottom:T,right:R,x:A,y:D};l.current.element instanceof HTMLElement&&r&&(I.height=l.current.element.offsetHeight,I.width=l.current.element.offsetWidth),Object.freeze(I),f.current&&!QX(l.current.lastBounds,I)&&a(l.current.lastBounds=I)};return[_,c?jP(_,c):_,u?jP(_,u):_]},[a,r,u,c]);function g(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(_=>_.removeEventListener("scroll",v,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null)}function x(){l.current.element&&(l.current.resizeObserver=new s(v),l.current.resizeObserver.observe(l.current.element),t&&l.current.scrollContainers&&l.current.scrollContainers.forEach(_=>_.addEventListener("scroll",v,{capture:!0,passive:!0})))}const y=_=>{!_||_===l.current.element||(g(),l.current.element=_,l.current.scrollContainers=bz(_),x())};return KX(v,!!t),ZX(m),ie.useEffect(()=>{g(),x()},[t,v,m]),ie.useEffect(()=>g,[]),[y,o,h]}function ZX(n){ie.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function KX(n,e){ie.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function bz(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...bz(n.parentElement)]}const JX=["x","y","top","bottom","left","right","width","height"],QX=(n,e)=>JX.every(t=>n[t]===e[t]);var e$=Object.defineProperty,t$=Object.defineProperties,n$=Object.getOwnPropertyDescriptors,qP=Object.getOwnPropertySymbols,i$=Object.prototype.hasOwnProperty,r$=Object.prototype.propertyIsEnumerable,XP=(n,e,t)=>e in n?e$(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,$P=(n,e)=>{for(var t in e||(e={}))i$.call(e,t)&&XP(n,t,e[t]);if(qP)for(var t of qP(e))r$.call(e,t)&&XP(n,t,e[t]);return n},s$=(n,e)=>t$(n,n$(e)),YP,ZP;typeof window<"u"&&((YP=window.document)!=null&&YP.createElement||((ZP=window.navigator)==null?void 0:ZP.product)==="ReactNative")?ie.useLayoutEffect:ie.useEffect;function Az(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=Az(i,e,t);if(r)return r;i=i.sibling}}function Cz(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const KP=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=KP;return}return KP.apply(this,arguments)};const oA=Cz(ie.createContext(null));class Dz extends ie.Component{render(){return ie.createElement(oA.Provider,{value:this._reactInternals},this.props.children)}}function o$(){const n=ie.useContext(oA);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=ie.useId();return ie.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=Az(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function a$(){const n=o$(),[e]=ie.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==oA&&!e.has(r)&&e.set(r,ie.useContext(Cz(r)))}t=t.return}return e}function l$(){const n=a$();return ie.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>ie.createElement(e,null,ie.createElement(t.Provider,s$($P({},i),{value:n.get(t)}))),e=>ie.createElement(Dz,$P({},e))),[n])}const rS={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function u$(n){const{handlePointer:e}=BX(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(rS).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,u]=rS[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=rS[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}const c$=ie.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=u$,eventSource:a,eventPrefix:l,shadows:u,linear:c,flat:f,legacy:h,orthographic:m,frameloop:v,dpr:g,performance:x,raycaster:y,camera:_,scene:w,onPointerMissed:E,onCreated:C,...M},T){ie.useMemo(()=>CX(pX),[]);const R=l$(),[A,D]=YX({scroll:!0,debounce:{scroll:50,resize:0},...i}),I=ie.useRef(null),L=ie.useRef(null);ie.useImperativeHandle(T,()=>I.current);const H=pz(E),[k,$]=ie.useState(!1),[G,J]=ie.useState(!1);if(k)throw k;if(G)throw G;const N=ie.useRef(null);Cm(()=>{const X=I.current;D.width>0&&D.height>0&&X&&(N.current||(N.current=qX(X)),N.current.configure({gl:s,events:o,shadows:u,linear:c,flat:f,legacy:h,orthographic:m,frameloop:v,dpr:g,performance:x,raycaster:y,camera:_,scene:w,size:D,onPointerMissed:(...ee)=>H.current==null?void 0:H.current(...ee),onCreated:ee=>{ee.events.connect==null||ee.events.connect(a?TX(a)?a.current:a:L.current),l&&ee.setEvents({compute:(te,ce)=>{const Q=te[l+"X"],le=te[l+"Y"];ce.pointer.set(Q/ce.size.width*2-1,-(le/ce.size.height)*2+1),ce.raycaster.setFromCamera(ce.pointer,ce.camera)}}),C==null||C(ee)}}),N.current.render(O.jsx(R,{children:O.jsx(mz,{set:J,children:O.jsx(ie.Suspense,{fallback:O.jsx(PX,{set:$}),children:e})})})))}),ie.useEffect(()=>{const X=I.current;if(X)return()=>Ez(X)},[]);const W=a?"none":"auto";return O.jsx("div",{ref:L,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:W,...r},...M,children:O.jsx("div",{ref:A,style:{width:"100%",height:"100%"},children:O.jsx("canvas",{ref:I,style:{display:"block"},children:t})})})}),f$=ie.forwardRef(function(e,t){return O.jsx(Dz,{children:O.jsx(c$,{...e,ref:t})})}),h_=6371e3,Gs=30,ac=80,Xy=225,Tz="#f60836",Pz="#36f808",Rz="#3479f3";function d_(n,e,t){const i=n.lat*Math.PI/180,r=e.lat*Math.PI/180,s=(e.lat-n.lat)*Math.PI/180,o=(e.lon-n.lon)*Math.PI/180,a=Math.sin(s/2)*Math.sin(s/2)+Math.cos(i)*Math.cos(r)*Math.sin(o/2)*Math.sin(o/2),l=2*Math.atan2(Math.sqrt(a),Math.sqrt(1-a));return t*l/1e3}function h$(n,e){return n.distanceTo(e)}function aA(n,e,t){const i=n*(Math.PI/180),r=-e*(Math.PI/180),s=Math.cos(i)*Math.cos(r)*t,o=Math.sin(i)*t,a=Math.cos(i)*Math.sin(r)*t;return new j(s,o,a)}function JP(n,e){const{x:t,y:i,z:r}=n,s=Math.asin(i/e)*(180/Math.PI),o=-1*Math.atan2(r,t)*(180/Math.PI);return{lat:s,lon:o}}function Kv(){return Math.random()*26-18}function _h(n,e,t){n=new j().copy(n),e=new j().copy(e);const i=Math.acos(n.dot(e));return n.clone().multiplyScalar(Math.sin((1-t)*i)/Math.sin(i)).add(e.clone().multiplyScalar(Math.sin(t*i)/Math.sin(i)))}function Tm(n){return n>5?Tz:n<-5?Rz:Pz}const jM=n=>n.charAt(0).toUpperCase()+n.slice(1);function vo(){return vo=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},vo.apply(null,arguments)}var Iz={relTol:1e-12,absTol:1e-15,matrix:"Matrix",number:"number",numberFallback:"number",precision:64,predictable:!1,randomSeed:null};function bn(n){return typeof n=="number"}function Gn(n){return!n||typeof n!="object"||typeof n.constructor!="function"?!1:n.isBigNumber===!0&&typeof n.constructor.prototype=="object"&&n.constructor.prototype.isBigNumber===!0||typeof n.constructor.isDecimal=="function"&&n.constructor.isDecimal(n)===!0}function d$(n){return typeof n=="bigint"}function lA(n){return n&&typeof n=="object"&&Object.getPrototypeOf(n).isComplex===!0||!1}function uA(n){return n&&typeof n=="object"&&Object.getPrototypeOf(n).isFraction===!0||!1}function Fz(n){return n&&n.constructor.prototype.isUnit===!0||!1}function ao(n){return typeof n=="string"}var Sn=Array.isArray;function In(n){return n&&n.constructor.prototype.isMatrix===!0||!1}function $y(n){return Array.isArray(n)||In(n)}function Nz(n){return n&&n.isDenseMatrix&&n.constructor.prototype.isMatrix===!0||!1}function Lz(n){return n&&n.isSparseMatrix&&n.constructor.prototype.isMatrix===!0||!1}function Oz(n){return n&&n.constructor.prototype.isRange===!0||!1}function cA(n){return n&&n.constructor.prototype.isIndex===!0||!1}function p$(n){return typeof n=="boolean"}function m$(n){return n&&n.constructor.prototype.isResultSet===!0||!1}function g$(n){return n&&n.constructor.prototype.isHelp===!0||!1}function v$(n){return typeof n=="function"}function y$(n){return n instanceof Date}function x$(n){return n instanceof RegExp}function fA(n){return!!(n&&typeof n=="object"&&n.constructor===Object&&!lA(n)&&!uA(n))}function _$(n){return n===null}function w$(n){return n===void 0}function S$(n){return n&&n.isAccessorNode===!0&&n.constructor.prototype.isNode===!0||!1}function M$(n){return n&&n.isArrayNode===!0&&n.constructor.prototype.isNode===!0||!1}function E$(n){return n&&n.isAssignmentNode===!0&&n.constructor.prototype.isNode===!0||!1}function b$(n){return n&&n.isBlockNode===!0&&n.constructor.prototype.isNode===!0||!1}function A$(n){return n&&n.isConditionalNode===!0&&n.constructor.prototype.isNode===!0||!1}function C$(n){return n&&n.isConstantNode===!0&&n.constructor.prototype.isNode===!0||!1}function D$(n){return n&&n.isFunctionAssignmentNode===!0&&n.constructor.prototype.isNode===!0||!1}function T$(n){return n&&n.isFunctionNode===!0&&n.constructor.prototype.isNode===!0||!1}function P$(n){return n&&n.isIndexNode===!0&&n.constructor.prototype.isNode===!0||!1}function R$(n){return n&&n.isNode===!0&&n.constructor.prototype.isNode===!0||!1}function I$(n){return n&&n.isObjectNode===!0&&n.constructor.prototype.isNode===!0||!1}function F$(n){return n&&n.isOperatorNode===!0&&n.constructor.prototype.isNode===!0||!1}function N$(n){return n&&n.isParenthesisNode===!0&&n.constructor.prototype.isNode===!0||!1}function L$(n){return n&&n.isRangeNode===!0&&n.constructor.prototype.isNode===!0||!1}function O$(n){return n&&n.isRelationalNode===!0&&n.constructor.prototype.isNode===!0||!1}function z$(n){return n&&n.isSymbolNode===!0&&n.constructor.prototype.isNode===!0||!1}function B$(n){return n&&n.constructor.prototype.isChain===!0||!1}function Da(n){var e=typeof n;return e==="object"?n===null?"null":Gn(n)?"BigNumber":n.constructor&&n.constructor.name?n.constructor.name:"Object":e}function mn(n){var e=typeof n;if(e==="number"||e==="bigint"||e==="string"||e==="boolean"||n===null||n===void 0)return n;if(typeof n.clone=="function")return n.clone();if(Array.isArray(n))return n.map(function(t){return mn(t)});if(n instanceof Date)return new Date(n.valueOf());if(Gn(n))return n;if(fA(n))return U$(n,mn);throw new TypeError("Cannot clone: unknown type of value (value: ".concat(n,")"))}function U$(n,e){var t={};for(var i in n)tm(n,i)&&(t[i]=e(n[i]));return t}function k$(n,e){for(var t in e)tm(e,t)&&(n[t]=e[t]);return n}function Nl(n,e){var t,i,r;if(Array.isArray(n)){if(!Array.isArray(e)||n.length!==e.length)return!1;for(i=0,r=n.length;i<r;i++)if(!Nl(n[i],e[i]))return!1;return!0}else{if(typeof n=="function")return n===e;if(n instanceof Object){if(Array.isArray(e)||!(e instanceof Object))return!1;for(t in n)if(!(t in e)||!Nl(n[t],e[t]))return!1;for(t in e)if(!(t in n))return!1;return!0}else return n===e}}function tm(n,e){return n&&Object.hasOwnProperty.call(n,e)}function H$(n,e){for(var t={},i=0;i<e.length;i++){var r=e[i],s=n[r];s!==void 0&&(t[r]=s)}return t}var V$=["Matrix","Array"],W$=["number","BigNumber","Fraction"],Or=function(e){if(e)throw new Error(`The global config is readonly. 
Please create a mathjs instance if you want to change the default configuration. 
Example:

  import { create, all } from 'mathjs';
  const mathjs = create(all);
  mathjs.config({ number: 'BigNumber' });
`);return Object.freeze(Iz)};vo(Or,Iz,{MATRIX_OPTIONS:V$,NUMBER_OPTIONS:W$});function QP(){return!0}function Ts(){return!1}function vf(){}const eR="Argument is not a typed-function.";function zz(){function n(U){return typeof U=="object"&&U!==null&&U.constructor===Object}const e=[{name:"number",test:function(U){return typeof U=="number"}},{name:"string",test:function(U){return typeof U=="string"}},{name:"boolean",test:function(U){return typeof U=="boolean"}},{name:"Function",test:function(U){return typeof U=="function"}},{name:"Array",test:Array.isArray},{name:"Date",test:function(U){return U instanceof Date}},{name:"RegExp",test:function(U){return U instanceof RegExp}},{name:"Object",test:n},{name:"null",test:function(U){return U===null}},{name:"undefined",test:function(U){return U===void 0}}],t={name:"any",test:QP,isAny:!0};let i,r,s=0,o={createCount:0};function a(U){const q=i.get(U);if(q)return q;let Z='Unknown type "'+U+'"';const he=U.toLowerCase();let fe;for(fe of r)if(fe.toLowerCase()===he){Z+='. Did you mean "'+fe+'" ?';break}throw new TypeError(Z)}function l(U){let q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"any";const Z=q?a(q).index:r.length,he=[];for(let ue=0;ue<U.length;++ue){if(!U[ue]||typeof U[ue].name!="string"||typeof U[ue].test!="function")throw new TypeError("Object with properties {name: string, test: function} expected");const Ne=U[ue].name;if(i.has(Ne))throw new TypeError('Duplicate type name "'+Ne+'"');he.push(Ne),i.set(Ne,{name:Ne,test:U[ue].test,isAny:U[ue].isAny,index:Z+ue,conversionsTo:[]})}const fe=r.slice(Z);r=r.slice(0,Z).concat(he).concat(fe);for(let ue=Z+he.length;ue<r.length;++ue)i.get(r[ue]).index=ue}function u(){i=new Map,r=[],s=0,l([t],!1)}u(),l(e);function c(){let U;for(U of r)i.get(U).conversionsTo=[];s=0}function f(U){const q=r.filter(Z=>{const he=i.get(Z);return!he.isAny&&he.test(U)});return q.length?q:["any"]}function h(U){return U&&typeof U=="function"&&"_typedFunctionData"in U}function m(U,q,Z){if(!h(U))throw new TypeError(eR);const he=Z&&Z.exact,fe=Array.isArray(q)?q.join(","):q,ue=E(fe),Ne=x(ue);if(!he||Ne in U.signatures){const nt=U._typedFunctionData.signatureMap.get(Ne);if(nt)return nt}const ge=ue.length;let Ee;if(he){Ee=[];let nt;for(nt in U.signatures)Ee.push(U._typedFunctionData.signatureMap.get(nt))}else Ee=U._typedFunctionData.signatures;for(let nt=0;nt<ge;++nt){const Ye=ue[nt],ne=[];let Re;for(Re of Ee){const et=R(Re.params,nt);if(!(!et||Ye.restParam&&!et.restParam)){if(!et.hasAny){const re=w(et);if(Ye.types.some(He=>!re.has(He.name)))continue}ne.push(Re)}}if(Ee=ne,Ee.length===0)break}let Le;for(Le of Ee)if(Le.params.length<=ge)return Le;throw new TypeError("Signature not found (signature: "+(U.name||"unnamed")+"("+x(ue,", ")+"))")}function v(U,q,Z){return m(U,q,Z).implementation}function g(U,q){const Z=a(q);if(Z.test(U))return U;const he=Z.conversionsTo;if(he.length===0)throw new Error("There are no conversions to "+q+" defined.");for(let fe=0;fe<he.length;fe++)if(a(he[fe].from).test(U))return he[fe].convert(U);throw new Error("Cannot convert "+U+" to "+q)}function x(U){let q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:",";return U.map(Z=>Z.name).join(q)}function y(U){const q=U.indexOf("...")===0,he=(q?U.length>3?U.slice(3):"any":U).split("|").map(ge=>a(ge.trim()));let fe=!1,ue=q?"...":"";return{types:he.map(function(ge){return fe=ge.isAny||fe,ue+=ge.name+"|",{name:ge.name,typeIndex:ge.index,test:ge.test,isAny:ge.isAny,conversion:null,conversionIndex:-1}}),name:ue.slice(0,-1),hasAny:fe,hasConversion:!1,restParam:q}}function _(U){const q=U.types.map(Ne=>Ne.name),Z=J(q);let he=U.hasAny,fe=U.name;const ue=Z.map(function(Ne){const ge=a(Ne.from);return he=ge.isAny||he,fe+="|"+Ne.from,{name:Ne.from,typeIndex:ge.index,test:ge.test,isAny:ge.isAny,conversion:Ne,conversionIndex:Ne.index}});return{types:U.types.concat(ue),name:fe,hasAny:he,hasConversion:ue.length>0,restParam:U.restParam}}function w(U){return U.typeSet||(U.typeSet=new Set,U.types.forEach(q=>U.typeSet.add(q.name))),U.typeSet}function E(U){const q=[];if(typeof U!="string")throw new TypeError("Signatures must be strings");const Z=U.trim();if(Z==="")return q;const he=Z.split(",");for(let fe=0;fe<he.length;++fe){const ue=y(he[fe].trim());if(ue.restParam&&fe!==he.length-1)throw new SyntaxError('Unexpected rest parameter "'+he[fe]+'": only allowed for the last parameter');if(ue.types.length===0)return null;q.push(ue)}return q}function C(U){const q=Pe(U);return q?q.restParam:!1}function M(U){if(!U||U.types.length===0)return QP;if(U.types.length===1)return a(U.types[0].name).test;if(U.types.length===2){const q=a(U.types[0].name).test,Z=a(U.types[1].name).test;return function(fe){return q(fe)||Z(fe)}}else{const q=U.types.map(function(Z){return a(Z.name).test});return function(he){for(let fe=0;fe<q.length;fe++)if(q[fe](he))return!0;return!1}}}function T(U){let q,Z,he;if(C(U)){q=Te(U).map(M);const fe=q.length,ue=M(Pe(U)),Ne=function(ge){for(let Ee=fe;Ee<ge.length;Ee++)if(!ue(ge[Ee]))return!1;return!0};return function(Ee){for(let Le=0;Le<q.length;Le++)if(!q[Le](Ee[Le]))return!1;return Ne(Ee)&&Ee.length>=fe+1}}else return U.length===0?function(ue){return ue.length===0}:U.length===1?(Z=M(U[0]),function(ue){return Z(ue[0])&&ue.length===1}):U.length===2?(Z=M(U[0]),he=M(U[1]),function(ue){return Z(ue[0])&&he(ue[1])&&ue.length===2}):(q=U.map(M),function(ue){for(let Ne=0;Ne<q.length;Ne++)if(!q[Ne](ue[Ne]))return!1;return ue.length===q.length})}function R(U,q){return q<U.length?U[q]:C(U)?Pe(U):null}function A(U,q){const Z=R(U,q);return Z?w(Z):new Set}function D(U){return U.conversion===null||U.conversion===void 0}function I(U,q){const Z=new Set;return U.forEach(he=>{const fe=A(he.params,q);let ue;for(ue of fe)Z.add(ue)}),Z.has("any")?["any"]:Array.from(Z)}function L(U,q,Z){let he,fe;const ue=U||"unnamed";let Ne=Z,ge;for(ge=0;ge<q.length;ge++){const Ye=[];if(Ne.forEach(ne=>{const Re=R(ne.params,ge),et=M(Re);(ge<ne.params.length||C(ne.params))&&et(q[ge])&&Ye.push(ne)}),Ye.length===0){if(fe=I(Ne,ge),fe.length>0){const ne=f(q[ge]);return he=new TypeError("Unexpected type of argument in function "+ue+" (expected: "+fe.join(" or ")+", actual: "+ne.join(" | ")+", index: "+ge+")"),he.data={category:"wrongType",fn:ue,index:ge,actual:ne,expected:fe},he}}else Ne=Ye}const Ee=Ne.map(function(Ye){return C(Ye.params)?1/0:Ye.params.length});if(q.length<Math.min.apply(null,Ee))return fe=I(Ne,ge),he=new TypeError("Too few arguments in function "+ue+" (expected: "+fe.join(" or ")+", index: "+q.length+")"),he.data={category:"tooFewArgs",fn:ue,index:q.length,expected:fe},he;const Le=Math.max.apply(null,Ee);if(q.length>Le)return he=new TypeError("Too many arguments in function "+ue+" (expected: "+Le+", actual: "+q.length+")"),he.data={category:"tooManyArgs",fn:ue,index:q.length,expectedLength:Le},he;const nt=[];for(let Ye=0;Ye<q.length;++Ye)nt.push(f(q[Ye]).join("|"));return he=new TypeError('Arguments of type "'+nt.join(", ")+'" do not match any of the defined signatures of function '+ue+"."),he.data={category:"mismatch",actual:nt},he}function H(U){let q=r.length+1;for(let Z=0;Z<U.types.length;Z++)D(U.types[Z])&&(q=Math.min(q,U.types[Z].typeIndex));return q}function k(U){let q=s+1;for(let Z=0;Z<U.types.length;Z++)D(U.types[Z])||(q=Math.min(q,U.types[Z].conversionIndex));return q}function $(U,q){if(U.hasAny){if(!q.hasAny)return 1}else if(q.hasAny)return-1;if(U.restParam){if(!q.restParam)return 1}else if(q.restParam)return-1;if(U.hasConversion){if(!q.hasConversion)return 1}else if(q.hasConversion)return-1;const Z=H(U)-H(q);if(Z<0)return-1;if(Z>0)return 1;const he=k(U)-k(q);return he<0?-1:he>0?1:0}function G(U,q){const Z=U.params,he=q.params,fe=Pe(Z),ue=Pe(he),Ne=C(Z),ge=C(he);if(Ne&&fe.hasAny){if(!ge||!ue.hasAny)return 1}else if(ge&&ue.hasAny)return-1;let Ee=0,Le=0,nt;for(nt of Z)nt.hasAny&&++Ee,nt.hasConversion&&++Le;let Ye=0,ne=0;for(nt of he)nt.hasAny&&++Ye,nt.hasConversion&&++ne;if(Ee!==Ye)return Ee-Ye;if(Ne&&fe.hasConversion){if(!ge||!ue.hasConversion)return 1}else if(ge&&ue.hasConversion)return-1;if(Le!==ne)return Le-ne;if(Ne){if(!ge)return 1}else if(ge)return-1;const Re=(Z.length-he.length)*(Ne?-1:1);if(Re!==0)return Re;const et=[];let re=0;for(let Oe=0;Oe<Z.length;++Oe){const Be=$(Z[Oe],he[Oe]);et.push(Be),re+=Be}if(re!==0)return re;let He;for(He of et)if(He!==0)return He;return 0}function J(U){if(U.length===0)return[];const q=U.map(a);U.length>1&&q.sort((fe,ue)=>fe.index-ue.index);let Z=q[0].conversionsTo;if(U.length===1)return Z;Z=Z.concat([]);const he=new Set(U);for(let fe=1;fe<q.length;++fe){let ue;for(ue of q[fe].conversionsTo)he.has(ue.from)||(Z.push(ue),he.add(ue.from))}return Z}function N(U,q){let Z=q;if(U.some(fe=>fe.hasConversion)){const fe=C(U),ue=U.map(W);Z=function(){const ge=[],Ee=fe?arguments.length-1:arguments.length;for(let Le=0;Le<Ee;Le++)ge[Le]=ue[Le](arguments[Le]);return fe&&(ge[Ee]=arguments[Ee].map(ue[Ee])),q.apply(this,ge)}}let he=Z;if(C(U)){const fe=U.length-1;he=function(){return Z.apply(this,Ae(arguments,0,fe).concat([Ae(arguments,fe)]))}}return he}function W(U){let q,Z,he,fe;const ue=[],Ne=[];switch(U.types.forEach(function(ge){ge.conversion&&(ue.push(a(ge.conversion.from).test),Ne.push(ge.conversion.convert))}),Ne.length){case 0:return function(Ee){return Ee};case 1:return q=ue[0],he=Ne[0],function(Ee){return q(Ee)?he(Ee):Ee};case 2:return q=ue[0],Z=ue[1],he=Ne[0],fe=Ne[1],function(Ee){return q(Ee)?he(Ee):Z(Ee)?fe(Ee):Ee};default:return function(Ee){for(let Le=0;Le<Ne.length;Le++)if(ue[Le](Ee))return Ne[Le](Ee);return Ee}}}function X(U){function q(Z,he,fe){if(he<Z.length){const ue=Z[he];let Ne=[];if(ue.restParam){const ge=ue.types.filter(D);ge.length<ue.types.length&&Ne.push({types:ge,name:"..."+ge.map(Ee=>Ee.name).join("|"),hasAny:ge.some(Ee=>Ee.isAny),hasConversion:!1,restParam:!0}),Ne.push(ue)}else Ne=ue.types.map(function(ge){return{types:[ge],name:ge.name,hasAny:ge.isAny,hasConversion:ge.conversion,restParam:!1}});return z(Ne,function(ge){return q(Z,he+1,fe.concat([ge]))})}else return[fe]}return q(U,0,[])}function ee(U,q){const Z=Math.max(U.length,q.length);for(let ge=0;ge<Z;ge++){const Ee=A(U,ge),Le=A(q,ge);let nt=!1,Ye;for(Ye of Le)if(Ee.has(Ye)){nt=!0;break}if(!nt)return!1}const he=U.length,fe=q.length,ue=C(U),Ne=C(q);return ue?Ne?he===fe:fe>=he:Ne?he>=fe:he===fe}function te(U){return U.map(q=>Qe(q)?ke(q.referToSelf.callback):Me(q)?De(q.referTo.references,q.referTo.callback):q)}function ce(U,q,Z){const he=[];let fe;for(fe of U){let ue=Z[fe];if(typeof ue!="number")throw new TypeError('No definition for referenced signature "'+fe+'"');if(ue=q[ue],typeof ue!="function")return!1;he.push(ue)}return he}function Q(U,q,Z){const he=te(U),fe=new Array(he.length).fill(!1);let ue=!0;for(;ue;){ue=!1;let Ne=!0;for(let ge=0;ge<he.length;++ge){if(fe[ge])continue;const Ee=he[ge];if(Qe(Ee))he[ge]=Ee.referToSelf.callback(Z),he[ge].referToSelf=Ee.referToSelf,fe[ge]=!0,Ne=!1;else if(Me(Ee)){const Le=ce(Ee.referTo.references,he,q);Le?(he[ge]=Ee.referTo.callback.apply(this,Le),he[ge].referTo=Ee.referTo,fe[ge]=!0,Ne=!1):ue=!0}}if(Ne&&ue)throw new SyntaxError("Circular reference detected in resolving typed.referTo")}return he}function le(U){const q=/\bthis(\(|\.signatures\b)/;Object.keys(U).forEach(Z=>{const he=U[Z];if(q.test(he.toString()))throw new SyntaxError("Using `this` to self-reference a function is deprecated since typed-function@3. Use typed.referTo and typed.referToSelf instead.")})}function pe(U,q){if(o.createCount++,Object.keys(q).length===0)throw new SyntaxError("No signatures provided");o.warnAgainstDeprecatedThis&&le(q);const Z=[],he=[],fe={},ue=[];let Ne;for(Ne in q){if(!Object.prototype.hasOwnProperty.call(q,Ne))continue;const $e=E(Ne);if(!$e)continue;Z.forEach(function(Gt){if(ee(Gt,$e))throw new TypeError('Conflicting signatures "'+x(Gt)+'" and "'+x($e)+'".')}),Z.push($e);const ht=he.length;he.push(q[Ne]);const Mt=$e.map(_);let gt;for(gt of X(Mt)){const Gt=x(gt);ue.push({params:gt,name:Gt,fn:ht}),gt.every(an=>!an.hasConversion)&&(fe[Gt]=ht)}}ue.sort(G);const ge=Q(he,fe,ct);let Ee;for(Ee in fe)Object.prototype.hasOwnProperty.call(fe,Ee)&&(fe[Ee]=ge[fe[Ee]]);const Le=[],nt=new Map;for(Ee of ue)nt.has(Ee.name)||(Ee.fn=ge[Ee.fn],Le.push(Ee),nt.set(Ee.name,Ee));const Ye=Le[0]&&Le[0].params.length<=2&&!C(Le[0].params),ne=Le[1]&&Le[1].params.length<=2&&!C(Le[1].params),Re=Le[2]&&Le[2].params.length<=2&&!C(Le[2].params),et=Le[3]&&Le[3].params.length<=2&&!C(Le[3].params),re=Le[4]&&Le[4].params.length<=2&&!C(Le[4].params),He=Le[5]&&Le[5].params.length<=2&&!C(Le[5].params),Oe=Ye&&ne&&Re&&et&&re&&He;for(let $e=0;$e<Le.length;++$e)Le[$e].test=T(Le[$e].params);const Be=Ye?M(Le[0].params[0]):Ts,tt=ne?M(Le[1].params[0]):Ts,Et=Re?M(Le[2].params[0]):Ts,Bt=et?M(Le[3].params[0]):Ts,en=re?M(Le[4].params[0]):Ts,yn=He?M(Le[5].params[0]):Ts,Wt=Ye?M(Le[0].params[1]):Ts,Un=ne?M(Le[1].params[1]):Ts,Nn=Re?M(Le[2].params[1]):Ts,Wa=et?M(Le[3].params[1]):Ts,Kr=re?M(Le[4].params[1]):Ts,oe=He?M(Le[5].params[1]):Ts;for(let $e=0;$e<Le.length;++$e)Le[$e].implementation=N(Le[$e].params,Le[$e].fn);const ve=Ye?Le[0].implementation:vf,be=ne?Le[1].implementation:vf,Ue=Re?Le[2].implementation:vf,at=et?Le[3].implementation:vf,vt=re?Le[4].implementation:vf,Rt=He?Le[5].implementation:vf,rt=Ye?Le[0].params.length:-1,kt=ne?Le[1].params.length:-1,bt=Re?Le[2].params.length:-1,At=et?Le[3].params.length:-1,V=re?Le[4].params.length:-1,se=He?Le[5].params.length:-1,xe=Oe?6:0,_e=Le.length,de=Le.map($e=>$e.test),je=Le.map($e=>$e.implementation),lt=function(){for(let ht=xe;ht<_e;ht++)if(de[ht](arguments))return je[ht].apply(this,arguments);return o.onMismatch(U,arguments,Le)};function ct($e,ht){return arguments.length===rt&&Be($e)&&Wt(ht)?ve.apply(this,arguments):arguments.length===kt&&tt($e)&&Un(ht)?be.apply(this,arguments):arguments.length===bt&&Et($e)&&Nn(ht)?Ue.apply(this,arguments):arguments.length===At&&Bt($e)&&Wa(ht)?at.apply(this,arguments):arguments.length===V&&en($e)&&Kr(ht)?vt.apply(this,arguments):arguments.length===se&&yn($e)&&oe(ht)?Rt.apply(this,arguments):lt.apply(this,arguments)}try{Object.defineProperty(ct,"name",{value:U})}catch{}return ct.signatures=fe,ct._typedFunctionData={signatures:Le,signatureMap:nt},ct}function ae(U,q,Z){throw L(U,q,Z)}function Te(U){return Ae(U,0,U.length-1)}function Pe(U){return U[U.length-1]}function Ae(U,q,Z){return Array.prototype.slice.call(U,q,Z)}function We(U,q){for(let Z=0;Z<U.length;Z++)if(q(U[Z]))return U[Z]}function z(U,q){return Array.prototype.concat.apply([],U.map(q))}function Se(){const U=Te(arguments).map(Z=>x(E(Z))),q=Pe(arguments);if(typeof q!="function")throw new TypeError("Callback function expected as last argument");return De(U,q)}function De(U,q){return{referTo:{references:U,callback:q}}}function ke(U){if(typeof U!="function")throw new TypeError("Callback function expected as first argument");return{referToSelf:{callback:U}}}function Me(U){return U&&typeof U.referTo=="object"&&Array.isArray(U.referTo.references)&&typeof U.referTo.callback=="function"}function Qe(U){return U&&typeof U.referToSelf=="object"&&typeof U.referToSelf.callback=="function"}function Ge(U,q){if(!U)return q;if(q&&q!==U){const Z=new Error("Function names do not match (expected: "+U+", actual: "+q+")");throw Z.data={actual:q,expected:U},Z}return U}function Ze(U){let q;for(const Z in U)Object.prototype.hasOwnProperty.call(U,Z)&&(h(U[Z])||typeof U[Z].signature=="string")&&(q=Ge(q,U[Z].name));return q}function Y(U,q){let Z;for(Z in q)if(Object.prototype.hasOwnProperty.call(q,Z)){if(Z in U&&q[Z]!==U[Z]){const he=new Error('Signature "'+Z+'" is defined twice');throw he.data={signature:Z,sourceFunction:q[Z],destFunction:U[Z]},he}U[Z]=q[Z]}}const B=o;o=function(U){const q=typeof U=="string",Z=q?1:0;let he=q?U:"";const fe={};for(let ue=Z;ue<arguments.length;++ue){const Ne=arguments[ue];let ge={},Ee;if(typeof Ne=="function"?(Ee=Ne.name,typeof Ne.signature=="string"?ge[Ne.signature]=Ne:h(Ne)&&(ge=Ne.signatures)):n(Ne)&&(ge=Ne,q||(Ee=Ze(Ne))),Object.keys(ge).length===0){const Le=new TypeError("Argument to 'typed' at index "+ue+" is not a (typed) function, nor an object with signatures as keys and functions as values.");throw Le.data={index:ue,argument:Ne},Le}q||(he=Ge(he,Ee)),Y(fe,ge)}return pe(he||"",fe)},o.create=zz,o.createCount=B.createCount,o.onMismatch=ae,o.throwMismatchError=ae,o.createError=L,o.clear=u,o.clearConversions=c,o.addTypes=l,o._findType=a,o.referTo=Se,o.referToSelf=ke,o.convert=g,o.findSignature=m,o.find=v,o.isTypedFunction=h,o.warnAgainstDeprecatedThis=!0,o.addType=function(U,q){let Z="any";q!==!1&&i.has("Object")&&(Z="Object"),o.addTypes([U],Z)};function we(U){if(!U||typeof U.from!="string"||typeof U.to!="string"||typeof U.convert!="function")throw new TypeError("Object with properties {from: string, to: string, convert: function} expected");if(U.to===U.from)throw new SyntaxError('Illegal to define conversion from "'+U.from+'" to itself.')}return o.addConversion=function(U){let q=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{override:!1};we(U);const Z=a(U.to),he=Z.conversionsTo.find(fe=>fe.from===U.from);if(he)if(q&&q.override)o.removeConversion({from:he.from,to:U.to,convert:he.convert});else throw new Error('There is already a conversion from "'+U.from+'" to "'+Z.name+'"');Z.conversionsTo.push({from:U.from,convert:U.convert,index:s++})},o.addConversions=function(U,q){U.forEach(Z=>o.addConversion(Z,q))},o.removeConversion=function(U){we(U);const q=a(U.to),Z=We(q.conversionsTo,fe=>fe.from===U.from);if(!Z)throw new Error("Attempt to remove nonexistent conversion from "+U.from+" to "+U.to);if(Z.convert!==U.convert)throw new Error("Conversion to remove does not match existing conversion");const he=q.conversionsTo.indexOf(Z);q.conversionsTo.splice(he,1)},o.resolve=function(U,q){if(!h(U))throw new TypeError(eR);const Z=U._typedFunctionData.signatures;for(let he=0;he<Z.length;++he)if(Z[he].test(q))return Z[he];return null},o}const tR=zz();function Vn(n){return typeof n=="boolean"?!0:isFinite(n)?n===Math.round(n):!1}var G$=Math.sign||function(n){return n>0?1:n<0?-1:0};function sS(n,e,t){var i={2:"0b",8:"0o",16:"0x"},r=i[e],s="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Vn(t))throw new Error("size must be an integer");if(n>2**(t-1)-1||n<-(2**(t-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!Vn(n))throw new Error("Value must be an integer");n<0&&(n=n+2**t),s="i".concat(t)}var o="";return n<0&&(n=-n,o="-"),"".concat(o).concat(r).concat(n.toString(e)).concat(s)}function qM(n,e){if(typeof e=="function")return e(n);if(n===1/0)return"Infinity";if(n===-1/0)return"-Infinity";if(isNaN(n))return"NaN";var{notation:t,precision:i,wordSize:r}=Bz(e);switch(t){case"fixed":return q$(n,i);case"exponential":return Uz(n,i);case"engineering":return j$(n,i);case"bin":return sS(n,2,r);case"oct":return sS(n,8,r);case"hex":return sS(n,16,r);case"auto":return X$(n,i,e).replace(/((\.\d*?)(0+))($|e)/,function(){var s=arguments[2],o=arguments[4];return s!=="."?s+o:o});default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function Bz(n){var e="auto",t,i;if(n!==void 0)if(bn(n))t=n;else if(Gn(n))t=n.toNumber();else if(fA(n))n.precision!==void 0&&(t=nR(n.precision,()=>{throw new Error('Option "precision" must be a number or BigNumber')})),n.wordSize!==void 0&&(i=nR(n.wordSize,()=>{throw new Error('Option "wordSize" must be a number or BigNumber')})),n.notation&&(e=n.notation);else throw new Error("Unsupported type of options, number, BigNumber, or object expected");return{notation:e,precision:t,wordSize:i}}function p_(n){var e=String(n).toLowerCase().match(/^(-?)(\d+\.?\d*)(e([+-]?\d+))?$/);if(!e)throw new SyntaxError("Invalid number "+n);var t=e[1],i=e[2],r=parseFloat(e[4]||"0"),s=i.indexOf(".");r+=s!==-1?s-1:i.length-1;var o=i.replace(".","").replace(/^0*/,function(a){return r-=a.length,""}).replace(/0*$/,"").split("").map(function(a){return parseInt(a)});return o.length===0&&(o.push(0),r++),{sign:t,coefficients:o,exponent:r}}function j$(n,e){if(isNaN(n)||!isFinite(n))return String(n);var t=p_(n),i=m_(t,e),r=i.exponent,s=i.coefficients,o=r%3===0?r:r<0?r-3-r%3:r-r%3;if(bn(e))for(;e>s.length||r-o+1>s.length;)s.push(0);else for(var a=Math.abs(r-o)-(s.length-1),l=0;l<a;l++)s.push(0);for(var u=Math.abs(r-o),c=1;u>0;)c++,u--;var f=s.slice(c).join(""),h=bn(e)&&f.length||f.match(/[1-9]/)?"."+f:"",m=s.slice(0,c).join("")+h+"e"+(r>=0?"+":"")+o.toString();return i.sign+m}function q$(n,e){if(isNaN(n)||!isFinite(n))return String(n);var t=p_(n),i=typeof e=="number"?m_(t,t.exponent+1+e):t,r=i.coefficients,s=i.exponent+1,o=s+(e||0);return r.length<o&&(r=r.concat(eh(o-r.length))),s<0&&(r=eh(-s+1).concat(r),s=1),s<r.length&&r.splice(s,0,s===0?"0.":"."),i.sign+r.join("")}function Uz(n,e){if(isNaN(n)||!isFinite(n))return String(n);var t=p_(n),i=e?m_(t,e):t,r=i.coefficients,s=i.exponent;r.length<e&&(r=r.concat(eh(e-r.length)));var o=r.shift();return i.sign+o+(r.length>0?"."+r.join(""):"")+"e"+(s>=0?"+":"")+s}function X$(n,e,t){if(isNaN(n)||!isFinite(n))return String(n);var i=iR(t==null?void 0:t.lowerExp,-3),r=iR(t==null?void 0:t.upperExp,5),s=p_(n),o=e?m_(s,e):s;if(o.exponent<i||o.exponent>=r)return Uz(n,e);var a=o.coefficients,l=o.exponent;a.length<e&&(a=a.concat(eh(e-a.length))),a=a.concat(eh(l-a.length+1+(a.length<e?e-a.length:0))),a=eh(-l).concat(a);var u=l>0?l:0;return u<a.length-1&&a.splice(u+1,0,"."),o.sign+a.join("")}function m_(n,e){for(var t={sign:n.sign,coefficients:n.coefficients,exponent:n.exponent},i=t.coefficients;e<=0;)i.unshift(0),t.exponent++,e++;if(i.length>e){var r=i.splice(e,i.length-e);if(r[0]>=5){var s=e-1;for(i[s]++;i[s]===10;)i.pop(),s===0&&(i.unshift(0),t.exponent++,s++),s--,i[s]++}}return t}function eh(n){for(var e=[],t=0;t<n;t++)e.push(0);return e}function $$(n){return n.toExponential().replace(/e.*$/,"").replace(/^0\.?0*|\./,"").length}function Ba(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-8,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(t<=0)throw new Error("Relative tolerance must be greater than 0");if(i<0)throw new Error("Absolute tolerance must be at least 0");return isNaN(n)||isNaN(e)?!1:!isFinite(n)||!isFinite(e)?n===e:n===e?!0:Math.abs(n-e)<=Math.max(t*Math.max(Math.abs(n),Math.abs(e)),i)}function nR(n,e){if(bn(n))return n;if(Gn(n))return n.toNumber();e()}function iR(n,e){return bn(n)?n:Gn(n)?n.toNumber():e}function ot(n,e,t,i){function r(s){var o=H$(s,e.map(K$));return Y$(n,e,s),t(o)}return r.isFactory=!0,r.fn=n,r.dependencies=e.slice().sort(),i&&(r.meta=i),r}function Y$(n,e,t){var i=e.filter(s=>!Z$(s)).every(s=>t[s]!==void 0);if(!i){var r=e.filter(s=>t[s]===void 0);throw new Error('Cannot create function "'.concat(n,'", ')+"some dependencies are missing: ".concat(r.map(s=>'"'.concat(s,'"')).join(", "),"."))}}function Z$(n){return n&&n[0]==="?"}function K$(n){return n&&n[0]==="?"?n.slice(1):n}function J$(n,e){if(Hz(n)&&kz(n,e))return n[e];throw typeof n[e]=="function"&&tY(n,e)?new Error('Cannot access method "'+e+'" as a property'):new Error('No access to property "'+e+'"')}function Q$(n,e,t){if(Hz(n)&&kz(n,e))return n[e]=t,t;throw new Error('No access to property "'+e+'"')}function eY(n,e){return e in n}function kz(n,e){return!n||typeof n!="object"?!1:tm(nY,e)?!0:!(e in Object.prototype||e in Function.prototype)}function tY(n,e){return n==null||typeof n[e]!="function"||tm(n,e)&&Object.getPrototypeOf&&e in Object.getPrototypeOf(n)?!1:tm(iY,e)?!0:!(e in Object.prototype||e in Function.prototype)}function Hz(n){return typeof n=="object"&&n&&n.constructor===Object}var nY={length:!0,name:!0},iY={toString:!0,valueOf:!0,toLocaleString:!0};class rY{constructor(e){this.wrappedObject=e,this[Symbol.iterator]=this.entries}keys(){return Object.keys(this.wrappedObject).values()}get(e){return J$(this.wrappedObject,e)}set(e,t){return Q$(this.wrappedObject,e,t),this}has(e){return eY(this.wrappedObject,e)}entries(){return sY(this.keys(),e=>[e,this.get(e)])}forEach(e){for(var t of this.keys())e(this.get(t),t,this)}delete(e){delete this.wrappedObject[e]}clear(){for(var e of this.keys())this.delete(e)}get size(){return Object.keys(this.wrappedObject).length}}function sY(n,e){return{next:()=>{var t=n.next();return t.done?t:{value:e(t.value),done:!1}}}}function oY(n){return n?n instanceof Map||n instanceof rY||typeof n.set=="function"&&typeof n.get=="function"&&typeof n.keys=="function"&&typeof n.has=="function":!1}var Vz=function(){return Vz=tR.create,tR},aY=["?BigNumber","?Complex","?DenseMatrix","?Fraction"],lY=ot("typed",aY,function(e){var{BigNumber:t,Complex:i,DenseMatrix:r,Fraction:s}=e,o=Vz();return o.clear(),o.addTypes([{name:"number",test:bn},{name:"Complex",test:lA},{name:"BigNumber",test:Gn},{name:"bigint",test:d$},{name:"Fraction",test:uA},{name:"Unit",test:Fz},{name:"identifier",test:a=>ao&&/^(?:[A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])(?:[0-9A-Za-z\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0560-\u0588\u05D0-\u05EA\u05EF-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u0860-\u086A\u0870-\u0887\u0889-\u088E\u08A0-\u08C9\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u09FC\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C5D\u0C60\u0C61\u0C80\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D04-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D54-\u0D56\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E86-\u0E8A\u0E8C-\u0EA3\u0EA5\u0EA7-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16F1-\u16F8\u1700-\u1711\u171F-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1878\u1880-\u1884\u1887-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4C\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1C80-\u1C88\u1C90-\u1CBA\u1CBD-\u1CBF\u1CE9-\u1CEC\u1CEE-\u1CF3\u1CF5\u1CF6\u1CFA\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2119-\u211D\u2124\u2126\u2128\u212A-\u212D\u212F-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2183\u2184\u2C00-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2E2F\u3005\u3006\u3031-\u3035\u303B\u303C\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u31BF\u31F0-\u31FF\u3400-\u4DBF\u4E00-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6E5\uA717-\uA71F\uA722-\uA788\uA78B-\uA7CA\uA7D0\uA7D1\uA7D3\uA7D5-\uA7D9\uA7F2-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA8FE\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB69\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF2D-\uDF40\uDF42-\uDF49\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF]|\uD801[\uDC00-\uDC9D\uDCB0-\uDCD3\uDCD8-\uDCFB\uDD00-\uDD27\uDD30-\uDD63\uDD70-\uDD7A\uDD7C-\uDD8A\uDD8C-\uDD92\uDD94\uDD95\uDD97-\uDDA1\uDDA3-\uDDB1\uDDB3-\uDDB9\uDDBB\uDDBC\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67\uDF80-\uDF85\uDF87-\uDFB0\uDFB2-\uDFBA]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE35\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2\uDD00-\uDD23\uDE80-\uDEA9\uDEB0\uDEB1\uDF00-\uDF1C\uDF27\uDF30-\uDF45\uDF70-\uDF81\uDFB0-\uDFC4\uDFE0-\uDFF6]|\uD804[\uDC03-\uDC37\uDC71\uDC72\uDC75\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD44\uDD47\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE3F\uDE40\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC00-\uDC34\uDC47-\uDC4A\uDC5F-\uDC61\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDEB8\uDF00-\uDF1A\uDF40-\uDF46]|\uD806[\uDC00-\uDC2B\uDCA0-\uDCDF\uDCFF-\uDD06\uDD09\uDD0C-\uDD13\uDD15\uDD16\uDD18-\uDD2F\uDD3F\uDD41\uDDA0-\uDDA7\uDDAA-\uDDD0\uDDE1\uDDE3\uDE00\uDE0B-\uDE32\uDE3A\uDE50\uDE5C-\uDE89\uDE9D\uDEB0-\uDEF8]|\uD807[\uDC00-\uDC08\uDC0A-\uDC2E\uDC40\uDC72-\uDC8F\uDD00-\uDD06\uDD08\uDD09\uDD0B-\uDD30\uDD46\uDD60-\uDD65\uDD67\uDD68\uDD6A-\uDD89\uDD98\uDEE0-\uDEF2\uDF02\uDF04-\uDF10\uDF12-\uDF33\uDFB0]|\uD808[\uDC00-\uDF99]|\uD809[\uDC80-\uDD43]|\uD80B[\uDF90-\uDFF0]|[\uD80C\uD81C-\uD820\uD822\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2F\uDC41-\uDC46]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE70-\uDEBE\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDE40-\uDE7F\uDF00-\uDF4A\uDF50\uDF93-\uDF9F\uDFE0\uDFE1\uDFE3]|\uD821[\uDC00-\uDFF7]|\uD823[\uDC00-\uDCD5\uDD00-\uDD08]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD32\uDD50-\uDD52\uDD55\uDD64-\uDD67\uDD70-\uDEFB]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD837[\uDF00-\uDF1E\uDF25-\uDF2A]|\uD838[\uDC30-\uDC6D\uDD00-\uDD2C\uDD37-\uDD3D\uDD4E\uDE90-\uDEAD\uDEC0-\uDEEB]|\uD839[\uDCD0-\uDCEB\uDFE0-\uDFE6\uDFE8-\uDFEB\uDFED\uDFEE\uDFF0-\uDFFE]|\uD83A[\uDC00-\uDCC4\uDD00-\uDD43\uDD4B]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])*$/.test(a)},{name:"string",test:ao},{name:"Chain",test:B$},{name:"Array",test:Sn},{name:"Matrix",test:In},{name:"DenseMatrix",test:Nz},{name:"SparseMatrix",test:Lz},{name:"Range",test:Oz},{name:"Index",test:cA},{name:"boolean",test:p$},{name:"ResultSet",test:m$},{name:"Help",test:g$},{name:"function",test:v$},{name:"Date",test:y$},{name:"RegExp",test:x$},{name:"null",test:_$},{name:"undefined",test:w$},{name:"AccessorNode",test:S$},{name:"ArrayNode",test:M$},{name:"AssignmentNode",test:E$},{name:"BlockNode",test:b$},{name:"ConditionalNode",test:A$},{name:"ConstantNode",test:C$},{name:"FunctionNode",test:T$},{name:"FunctionAssignmentNode",test:D$},{name:"IndexNode",test:P$},{name:"Node",test:R$},{name:"ObjectNode",test:I$},{name:"OperatorNode",test:F$},{name:"ParenthesisNode",test:N$},{name:"RangeNode",test:L$},{name:"RelationalNode",test:O$},{name:"SymbolNode",test:z$},{name:"Map",test:oY},{name:"Object",test:fA}]),o.addConversions([{from:"number",to:"BigNumber",convert:function(l){if(t||Jv(l),$$(l)>15)throw new TypeError("Cannot implicitly convert a number with >15 significant digits to BigNumber (value: "+l+"). Use function bignumber(x) to convert to BigNumber.");return new t(l)}},{from:"number",to:"Complex",convert:function(l){return i||Qv(l),new i(l,0)}},{from:"BigNumber",to:"Complex",convert:function(l){return i||Qv(l),new i(l.toNumber(),0)}},{from:"bigint",to:"number",convert:function(l){if(l>Number.MAX_SAFE_INTEGER)throw new TypeError("Cannot implicitly convert bigint to number: value exceeds the max safe integer value (value: "+l+")");return Number(l)}},{from:"bigint",to:"BigNumber",convert:function(l){return t||Jv(l),new t(l.toString())}},{from:"bigint",to:"Fraction",convert:function(l){return s||e0(l),new s(l.toString())}},{from:"Fraction",to:"BigNumber",convert:function(l){throw new TypeError("Cannot implicitly convert a Fraction to BigNumber or vice versa. Use function bignumber(x) to convert to BigNumber or fraction(x) to convert to Fraction.")}},{from:"Fraction",to:"Complex",convert:function(l){return i||Qv(l),new i(l.valueOf(),0)}},{from:"number",to:"Fraction",convert:function(l){s||e0(l);var u=new s(l);if(u.valueOf()!==l)throw new TypeError("Cannot implicitly convert a number to a Fraction when there will be a loss of precision (value: "+l+"). Use function fraction(x) to convert to Fraction.");return u}},{from:"string",to:"number",convert:function(l){var u=Number(l);if(isNaN(u))throw new Error('Cannot convert "'+l+'" to a number');return u}},{from:"string",to:"BigNumber",convert:function(l){t||Jv(l);try{return new t(l)}catch{throw new Error('Cannot convert "'+l+'" to BigNumber')}}},{from:"string",to:"bigint",convert:function(l){try{return BigInt(l)}catch{throw new Error('Cannot convert "'+l+'" to BigInt')}}},{from:"string",to:"Fraction",convert:function(l){s||e0(l);try{return new s(l)}catch{throw new Error('Cannot convert "'+l+'" to Fraction')}}},{from:"string",to:"Complex",convert:function(l){i||Qv(l);try{return new i(l)}catch{throw new Error('Cannot convert "'+l+'" to Complex')}}},{from:"boolean",to:"number",convert:function(l){return+l}},{from:"boolean",to:"BigNumber",convert:function(l){return t||Jv(l),new t(+l)}},{from:"boolean",to:"bigint",convert:function(l){return BigInt(+l)}},{from:"boolean",to:"Fraction",convert:function(l){return s||e0(l),new s(+l)}},{from:"boolean",to:"string",convert:function(l){return String(l)}},{from:"Array",to:"Matrix",convert:function(l){return r||uY(),new r(l)}},{from:"Matrix",to:"Array",convert:function(l){return l.valueOf()}}]),o.onMismatch=(a,l,u)=>{var c=o.createError(a,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&$y(l[0])&&u.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},o.onMismatch=(a,l,u)=>{var c=o.createError(a,l,u);if(["wrongType","mismatch"].includes(c.data.category)&&l.length===1&&$y(l[0])&&u.some(h=>!h.params.includes(","))){var f=new TypeError("Function '".concat(a,"' doesn't apply to matrices. To call it ")+"elementwise on a matrix 'M', try 'map(M, ".concat(a,")'."));throw f.data=c.data,f}throw c},o});function Jv(n){throw new Error("Cannot convert value ".concat(n," into a BigNumber: no class 'BigNumber' provided"))}function Qv(n){throw new Error("Cannot convert value ".concat(n," into a Complex number: no class 'Complex' provided"))}function uY(){throw new Error("Cannot convert array into a Matrix: no class 'DenseMatrix' provided")}function e0(n){throw new Error("Cannot convert value ".concat(n," into a Fraction, no class 'Fraction' provided."))}/*!
 *  decimal.js v10.4.3
 *  An arbitrary-precision Decimal type for JavaScript.
 *  https://github.com/MikeMcl/decimal.js
 *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
 *  MIT Licence
 */var Hf=9e15,Xl=1e9,XM="0123456789abcdef",Yy="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",Zy="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",$M={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-Hf,maxE:Hf,crypto:!1},Wz,Ea,Vt=!0,g_="[DecimalError] ",Ll=g_+"Invalid argument: ",Gz=g_+"Precision limit exceeded",jz=g_+"crypto unavailable",qz="[object Decimal]",_r=Math.floor,bi=Math.pow,cY=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,fY=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,hY=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,Xz=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,ho=1e7,Ot=7,dY=9007199254740991,pY=Yy.length-1,YM=Zy.length-1,qe={toStringTag:qz};qe.absoluteValue=qe.abs=function(){var n=new this.constructor(this);return n.s<0&&(n.s=1),Pt(n)};qe.ceil=function(){return Pt(new this.constructor(this),this.e+1,2)};qe.clampedTo=qe.clamp=function(n,e){var t,i=this,r=i.constructor;if(n=new r(n),e=new r(e),!n.s||!e.s)return new r(NaN);if(n.gt(e))throw Error(Ll+e);return t=i.cmp(n),t<0?n:i.cmp(e)>0?e:new r(i)};qe.comparedTo=qe.cmp=function(n){var e,t,i,r,s=this,o=s.d,a=(n=new s.constructor(n)).d,l=s.s,u=n.s;if(!o||!a)return!l||!u?NaN:l!==u?l:o===a?0:!o^l<0?1:-1;if(!o[0]||!a[0])return o[0]?l:a[0]?-u:0;if(l!==u)return l;if(s.e!==n.e)return s.e>n.e^l<0?1:-1;for(i=o.length,r=a.length,e=0,t=i<r?i:r;e<t;++e)if(o[e]!==a[e])return o[e]>a[e]^l<0?1:-1;return i===r?0:i>r^l<0?1:-1};qe.cosine=qe.cos=function(){var n,e,t=this,i=t.constructor;return t.d?t.d[0]?(n=i.precision,e=i.rounding,i.precision=n+Math.max(t.e,t.sd())+Ot,i.rounding=1,t=mY(i,Jz(i,t)),i.precision=n,i.rounding=e,Pt(Ea==2||Ea==3?t.neg():t,n,e,!0)):new i(1):new i(NaN)};qe.cubeRoot=qe.cbrt=function(){var n,e,t,i,r,s,o,a,l,u,c=this,f=c.constructor;if(!c.isFinite()||c.isZero())return new f(c);for(Vt=!1,s=c.s*bi(c.s*c,1/3),!s||Math.abs(s)==1/0?(t=Xi(c.d),n=c.e,(s=(n-t.length+1)%3)&&(t+=s==1||s==-2?"0":"00"),s=bi(t,1/3),n=_r((n+1)/3)-(n%3==(n<0?-1:2)),s==1/0?t="5e"+n:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+n),i=new f(t),i.s=c.s):i=new f(s.toString()),o=(n=f.precision)+3;;)if(a=i,l=a.times(a).times(a),u=l.plus(c),i=An(u.plus(c).times(a),u.plus(l),o+2,1),Xi(a.d).slice(0,o)===(t=Xi(i.d)).slice(0,o))if(t=t.slice(o-3,o+1),t=="9999"||!r&&t=="4999"){if(!r&&(Pt(a,n+1,0),a.times(a).times(a).eq(c))){i=a;break}o+=4,r=1}else{(!+t||!+t.slice(1)&&t.charAt(0)=="5")&&(Pt(i,n+1,1),e=!i.times(i).times(i).eq(c));break}return Vt=!0,Pt(i,n,f.rounding,e)};qe.decimalPlaces=qe.dp=function(){var n,e=this.d,t=NaN;if(e){if(n=e.length-1,t=(n-_r(this.e/Ot))*Ot,n=e[n],n)for(;n%10==0;n/=10)t--;t<0&&(t=0)}return t};qe.dividedBy=qe.div=function(n){return An(this,new this.constructor(n))};qe.dividedToIntegerBy=qe.divToInt=function(n){var e=this,t=e.constructor;return Pt(An(e,new t(n),0,1,1),t.precision,t.rounding)};qe.equals=qe.eq=function(n){return this.cmp(n)===0};qe.floor=function(){return Pt(new this.constructor(this),this.e+1,3)};qe.greaterThan=qe.gt=function(n){return this.cmp(n)>0};qe.greaterThanOrEqualTo=qe.gte=function(n){var e=this.cmp(n);return e==1||e===0};qe.hyperbolicCosine=qe.cosh=function(){var n,e,t,i,r,s=this,o=s.constructor,a=new o(1);if(!s.isFinite())return new o(s.s?1/0:NaN);if(s.isZero())return a;t=o.precision,i=o.rounding,o.precision=t+Math.max(s.e,s.sd())+4,o.rounding=1,r=s.d.length,r<32?(n=Math.ceil(r/3),e=(1/y_(4,n)).toString()):(n=16,e="2.3283064365386962890625e-10"),s=wh(o,1,s.times(e),new o(1),!0);for(var l,u=n,c=new o(8);u--;)l=s.times(s),s=a.minus(l.times(c.minus(l.times(c))));return Pt(s,o.precision=t,o.rounding=i,!0)};qe.hyperbolicSine=qe.sinh=function(){var n,e,t,i,r=this,s=r.constructor;if(!r.isFinite()||r.isZero())return new s(r);if(e=s.precision,t=s.rounding,s.precision=e+Math.max(r.e,r.sd())+4,s.rounding=1,i=r.d.length,i<3)r=wh(s,2,r,r,!0);else{n=1.4*Math.sqrt(i),n=n>16?16:n|0,r=r.times(1/y_(5,n)),r=wh(s,2,r,r,!0);for(var o,a=new s(5),l=new s(16),u=new s(20);n--;)o=r.times(r),r=r.times(a.plus(o.times(l.times(o).plus(u))))}return s.precision=e,s.rounding=t,Pt(r,e,t,!0)};qe.hyperbolicTangent=qe.tanh=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+7,i.rounding=1,An(t.sinh(),t.cosh(),i.precision=n,i.rounding=e)):new i(t.s)};qe.inverseCosine=qe.acos=function(){var n,e=this,t=e.constructor,i=e.abs().cmp(1),r=t.precision,s=t.rounding;return i!==-1?i===0?e.isNeg()?lo(t,r,s):new t(0):new t(NaN):e.isZero()?lo(t,r+4,s).times(.5):(t.precision=r+6,t.rounding=1,e=e.asin(),n=lo(t,r+4,s).times(.5),t.precision=r,t.rounding=s,n.minus(e))};qe.inverseHyperbolicCosine=qe.acosh=function(){var n,e,t=this,i=t.constructor;return t.lte(1)?new i(t.eq(1)?0:NaN):t.isFinite()?(n=i.precision,e=i.rounding,i.precision=n+Math.max(Math.abs(t.e),t.sd())+4,i.rounding=1,Vt=!1,t=t.times(t).minus(1).sqrt().plus(t),Vt=!0,i.precision=n,i.rounding=e,t.ln()):new i(t)};qe.inverseHyperbolicSine=qe.asinh=function(){var n,e,t=this,i=t.constructor;return!t.isFinite()||t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+2*Math.max(Math.abs(t.e),t.sd())+6,i.rounding=1,Vt=!1,t=t.times(t).plus(1).sqrt().plus(t),Vt=!0,i.precision=n,i.rounding=e,t.ln())};qe.inverseHyperbolicTangent=qe.atanh=function(){var n,e,t,i,r=this,s=r.constructor;return r.isFinite()?r.e>=0?new s(r.abs().eq(1)?r.s/0:r.isZero()?r:NaN):(n=s.precision,e=s.rounding,i=r.sd(),Math.max(i,n)<2*-r.e-1?Pt(new s(r),n,e,!0):(s.precision=t=i-r.e,r=An(r.plus(1),new s(1).minus(r),t+n,1),s.precision=n+4,s.rounding=1,r=r.ln(),s.precision=n,s.rounding=e,r.times(.5))):new s(NaN)};qe.inverseSine=qe.asin=function(){var n,e,t,i,r=this,s=r.constructor;return r.isZero()?new s(r):(e=r.abs().cmp(1),t=s.precision,i=s.rounding,e!==-1?e===0?(n=lo(s,t+4,i).times(.5),n.s=r.s,n):new s(NaN):(s.precision=t+6,s.rounding=1,r=r.div(new s(1).minus(r.times(r)).sqrt().plus(1)).atan(),s.precision=t,s.rounding=i,r.times(2)))};qe.inverseTangent=qe.atan=function(){var n,e,t,i,r,s,o,a,l,u=this,c=u.constructor,f=c.precision,h=c.rounding;if(u.isFinite()){if(u.isZero())return new c(u);if(u.abs().eq(1)&&f+4<=YM)return o=lo(c,f+4,h).times(.25),o.s=u.s,o}else{if(!u.s)return new c(NaN);if(f+4<=YM)return o=lo(c,f+4,h).times(.5),o.s=u.s,o}for(c.precision=a=f+10,c.rounding=1,t=Math.min(28,a/Ot+2|0),n=t;n;--n)u=u.div(u.times(u).plus(1).sqrt().plus(1));for(Vt=!1,e=Math.ceil(a/Ot),i=1,l=u.times(u),o=new c(u),r=u;n!==-1;)if(r=r.times(l),s=o.minus(r.div(i+=2)),r=r.times(l),o=s.plus(r.div(i+=2)),o.d[e]!==void 0)for(n=e;o.d[n]===s.d[n]&&n--;);return t&&(o=o.times(2<<t-1)),Vt=!0,Pt(o,c.precision=f,c.rounding=h,!0)};qe.isFinite=function(){return!!this.d};qe.isInteger=qe.isInt=function(){return!!this.d&&_r(this.e/Ot)>this.d.length-2};qe.isNaN=function(){return!this.s};qe.isNegative=qe.isNeg=function(){return this.s<0};qe.isPositive=qe.isPos=function(){return this.s>0};qe.isZero=function(){return!!this.d&&this.d[0]===0};qe.lessThan=qe.lt=function(n){return this.cmp(n)<0};qe.lessThanOrEqualTo=qe.lte=function(n){return this.cmp(n)<1};qe.logarithm=qe.log=function(n){var e,t,i,r,s,o,a,l,u=this,c=u.constructor,f=c.precision,h=c.rounding,m=5;if(n==null)n=new c(10),e=!0;else{if(n=new c(n),t=n.d,n.s<0||!t||!t[0]||n.eq(1))return new c(NaN);e=n.eq(10)}if(t=u.d,u.s<0||!t||!t[0]||u.eq(1))return new c(t&&!t[0]?-1/0:u.s!=1?NaN:t?0:1/0);if(e)if(t.length>1)s=!0;else{for(r=t[0];r%10===0;)r/=10;s=r!==1}if(Vt=!1,a=f+m,o=_l(u,a),i=e?Ky(c,a+10):_l(n,a),l=An(o,i,a,1),nm(l.d,r=f,h))do if(a+=10,o=_l(u,a),i=e?Ky(c,a+10):_l(n,a),l=An(o,i,a,1),!s){+Xi(l.d).slice(r+1,r+15)+1==1e14&&(l=Pt(l,f+1,0));break}while(nm(l.d,r+=10,h));return Vt=!0,Pt(l,f,h)};qe.minus=qe.sub=function(n){var e,t,i,r,s,o,a,l,u,c,f,h,m=this,v=m.constructor;if(n=new v(n),!m.d||!n.d)return!m.s||!n.s?n=new v(NaN):m.d?n.s=-n.s:n=new v(n.d||m.s!==n.s?m:NaN),n;if(m.s!=n.s)return n.s=-n.s,m.plus(n);if(u=m.d,h=n.d,a=v.precision,l=v.rounding,!u[0]||!h[0]){if(h[0])n.s=-n.s;else if(u[0])n=new v(m);else return new v(l===3?-0:0);return Vt?Pt(n,a,l):n}if(t=_r(n.e/Ot),c=_r(m.e/Ot),u=u.slice(),s=c-t,s){for(f=s<0,f?(e=u,s=-s,o=h.length):(e=h,t=c,o=u.length),i=Math.max(Math.ceil(a/Ot),o)+2,s>i&&(s=i,e.length=1),e.reverse(),i=s;i--;)e.push(0);e.reverse()}else{for(i=u.length,o=h.length,f=i<o,f&&(o=i),i=0;i<o;i++)if(u[i]!=h[i]){f=u[i]<h[i];break}s=0}for(f&&(e=u,u=h,h=e,n.s=-n.s),o=u.length,i=h.length-o;i>0;--i)u[o++]=0;for(i=h.length;i>s;){if(u[--i]<h[i]){for(r=i;r&&u[--r]===0;)u[r]=ho-1;--u[r],u[i]+=ho}u[i]-=h[i]}for(;u[--o]===0;)u.pop();for(;u[0]===0;u.shift())--t;return u[0]?(n.d=u,n.e=v_(u,t),Vt?Pt(n,a,l):n):new v(l===3?-0:0)};qe.modulo=qe.mod=function(n){var e,t=this,i=t.constructor;return n=new i(n),!t.d||!n.s||n.d&&!n.d[0]?new i(NaN):!n.d||t.d&&!t.d[0]?Pt(new i(t),i.precision,i.rounding):(Vt=!1,i.modulo==9?(e=An(t,n.abs(),0,3,1),e.s*=n.s):e=An(t,n,0,i.modulo,1),e=e.times(n),Vt=!0,t.minus(e))};qe.naturalExponential=qe.exp=function(){return ZM(this)};qe.naturalLogarithm=qe.ln=function(){return _l(this)};qe.negated=qe.neg=function(){var n=new this.constructor(this);return n.s=-n.s,Pt(n)};qe.plus=qe.add=function(n){var e,t,i,r,s,o,a,l,u,c,f=this,h=f.constructor;if(n=new h(n),!f.d||!n.d)return!f.s||!n.s?n=new h(NaN):f.d||(n=new h(n.d||f.s===n.s?f:NaN)),n;if(f.s!=n.s)return n.s=-n.s,f.minus(n);if(u=f.d,c=n.d,a=h.precision,l=h.rounding,!u[0]||!c[0])return c[0]||(n=new h(f)),Vt?Pt(n,a,l):n;if(s=_r(f.e/Ot),i=_r(n.e/Ot),u=u.slice(),r=s-i,r){for(r<0?(t=u,r=-r,o=c.length):(t=c,i=s,o=u.length),s=Math.ceil(a/Ot),o=s>o?s+1:o+1,r>o&&(r=o,t.length=1),t.reverse();r--;)t.push(0);t.reverse()}for(o=u.length,r=c.length,o-r<0&&(r=o,t=c,c=u,u=t),e=0;r;)e=(u[--r]=u[r]+c[r]+e)/ho|0,u[r]%=ho;for(e&&(u.unshift(e),++i),o=u.length;u[--o]==0;)u.pop();return n.d=u,n.e=v_(u,i),Vt?Pt(n,a,l):n};qe.precision=qe.sd=function(n){var e,t=this;if(n!==void 0&&n!==!!n&&n!==1&&n!==0)throw Error(Ll+n);return t.d?(e=$z(t.d),n&&t.e+1>e&&(e=t.e+1)):e=NaN,e};qe.round=function(){var n=this,e=n.constructor;return Pt(new e(n),n.e+1,e.rounding)};qe.sine=qe.sin=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+Math.max(t.e,t.sd())+Ot,i.rounding=1,t=vY(i,Jz(i,t)),i.precision=n,i.rounding=e,Pt(Ea>2?t.neg():t,n,e,!0)):new i(NaN)};qe.squareRoot=qe.sqrt=function(){var n,e,t,i,r,s,o=this,a=o.d,l=o.e,u=o.s,c=o.constructor;if(u!==1||!a||!a[0])return new c(!u||u<0&&(!a||a[0])?NaN:a?o:1/0);for(Vt=!1,u=Math.sqrt(+o),u==0||u==1/0?(e=Xi(a),(e.length+l)%2==0&&(e+="0"),u=Math.sqrt(e),l=_r((l+1)/2)-(l<0||l%2),u==1/0?e="5e"+l:(e=u.toExponential(),e=e.slice(0,e.indexOf("e")+1)+l),i=new c(e)):i=new c(u.toString()),t=(l=c.precision)+3;;)if(s=i,i=s.plus(An(o,s,t+2,1)).times(.5),Xi(s.d).slice(0,t)===(e=Xi(i.d)).slice(0,t))if(e=e.slice(t-3,t+1),e=="9999"||!r&&e=="4999"){if(!r&&(Pt(s,l+1,0),s.times(s).eq(o))){i=s;break}t+=4,r=1}else{(!+e||!+e.slice(1)&&e.charAt(0)=="5")&&(Pt(i,l+1,1),n=!i.times(i).eq(o));break}return Vt=!0,Pt(i,l,c.rounding,n)};qe.tangent=qe.tan=function(){var n,e,t=this,i=t.constructor;return t.isFinite()?t.isZero()?new i(t):(n=i.precision,e=i.rounding,i.precision=n+10,i.rounding=1,t=t.sin(),t.s=1,t=An(t,new i(1).minus(t.times(t)).sqrt(),n+10,0),i.precision=n,i.rounding=e,Pt(Ea==2||Ea==4?t.neg():t,n,e,!0)):new i(NaN)};qe.times=qe.mul=function(n){var e,t,i,r,s,o,a,l,u,c=this,f=c.constructor,h=c.d,m=(n=new f(n)).d;if(n.s*=c.s,!h||!h[0]||!m||!m[0])return new f(!n.s||h&&!h[0]&&!m||m&&!m[0]&&!h?NaN:!h||!m?n.s/0:n.s*0);for(t=_r(c.e/Ot)+_r(n.e/Ot),l=h.length,u=m.length,l<u&&(s=h,h=m,m=s,o=l,l=u,u=o),s=[],o=l+u,i=o;i--;)s.push(0);for(i=u;--i>=0;){for(e=0,r=l+i;r>i;)a=s[r]+m[i]*h[r-i-1]+e,s[r--]=a%ho|0,e=a/ho|0;s[r]=(s[r]+e)%ho|0}for(;!s[--o];)s.pop();return e?++t:s.shift(),n.d=s,n.e=v_(s,t),Vt?Pt(n,f.precision,f.rounding):n};qe.toBinary=function(n,e){return hA(this,2,n,e)};qe.toDecimalPlaces=qe.toDP=function(n,e){var t=this,i=t.constructor;return t=new i(t),n===void 0?t:(Xr(n,0,Xl),e===void 0?e=i.rounding:Xr(e,0,8),Pt(t,n+t.e+1,e))};qe.toExponential=function(n,e){var t,i=this,r=i.constructor;return n===void 0?t=Yo(i,!0):(Xr(n,0,Xl),e===void 0?e=r.rounding:Xr(e,0,8),i=Pt(new r(i),n+1,e),t=Yo(i,!0,n+1)),i.isNeg()&&!i.isZero()?"-"+t:t};qe.toFixed=function(n,e){var t,i,r=this,s=r.constructor;return n===void 0?t=Yo(r):(Xr(n,0,Xl),e===void 0?e=s.rounding:Xr(e,0,8),i=Pt(new s(r),n+r.e+1,e),t=Yo(i,!1,n+i.e+1)),r.isNeg()&&!r.isZero()?"-"+t:t};qe.toFraction=function(n){var e,t,i,r,s,o,a,l,u,c,f,h,m=this,v=m.d,g=m.constructor;if(!v)return new g(m);if(u=t=new g(1),i=l=new g(0),e=new g(i),s=e.e=$z(v)-m.e-1,o=s%Ot,e.d[0]=bi(10,o<0?Ot+o:o),n==null)n=s>0?e:u;else{if(a=new g(n),!a.isInt()||a.lt(u))throw Error(Ll+a);n=a.gt(e)?s>0?e:u:a}for(Vt=!1,a=new g(Xi(v)),c=g.precision,g.precision=s=v.length*Ot*2;f=An(a,e,0,1,1),r=t.plus(f.times(i)),r.cmp(n)!=1;)t=i,i=r,r=u,u=l.plus(f.times(r)),l=r,r=e,e=a.minus(f.times(r)),a=r;return r=An(n.minus(t),i,0,1,1),l=l.plus(r.times(u)),t=t.plus(r.times(i)),l.s=u.s=m.s,h=An(u,i,s,1).minus(m).abs().cmp(An(l,t,s,1).minus(m).abs())<1?[u,i]:[l,t],g.precision=c,Vt=!0,h};qe.toHexadecimal=qe.toHex=function(n,e){return hA(this,16,n,e)};qe.toNearest=function(n,e){var t=this,i=t.constructor;if(t=new i(t),n==null){if(!t.d)return t;n=new i(1),e=i.rounding}else{if(n=new i(n),e===void 0?e=i.rounding:Xr(e,0,8),!t.d)return n.s?t:n;if(!n.d)return n.s&&(n.s=t.s),n}return n.d[0]?(Vt=!1,t=An(t,n,0,e,1).times(n),Vt=!0,Pt(t)):(n.s=t.s,t=n),t};qe.toNumber=function(){return+this};qe.toOctal=function(n,e){return hA(this,8,n,e)};qe.toPower=qe.pow=function(n){var e,t,i,r,s,o,a=this,l=a.constructor,u=+(n=new l(n));if(!a.d||!n.d||!a.d[0]||!n.d[0])return new l(bi(+a,u));if(a=new l(a),a.eq(1))return a;if(i=l.precision,s=l.rounding,n.eq(1))return Pt(a,i,s);if(e=_r(n.e/Ot),e>=n.d.length-1&&(t=u<0?-u:u)<=dY)return r=Yz(l,a,t,i),n.s<0?new l(1).div(r):Pt(r,i,s);if(o=a.s,o<0){if(e<n.d.length-1)return new l(NaN);if(n.d[e]&1||(o=1),a.e==0&&a.d[0]==1&&a.d.length==1)return a.s=o,a}return t=bi(+a,u),e=t==0||!isFinite(t)?_r(u*(Math.log("0."+Xi(a.d))/Math.LN10+a.e+1)):new l(t+"").e,e>l.maxE+1||e<l.minE-1?new l(e>0?o/0:0):(Vt=!1,l.rounding=a.s=1,t=Math.min(12,(e+"").length),r=ZM(n.times(_l(a,i+t)),i),r.d&&(r=Pt(r,i+5,1),nm(r.d,i,s)&&(e=i+10,r=Pt(ZM(n.times(_l(a,e+t)),e),e+5,1),+Xi(r.d).slice(i+1,i+15)+1==1e14&&(r=Pt(r,i+1,0)))),r.s=o,Vt=!0,l.rounding=s,Pt(r,i,s))};qe.toPrecision=function(n,e){var t,i=this,r=i.constructor;return n===void 0?t=Yo(i,i.e<=r.toExpNeg||i.e>=r.toExpPos):(Xr(n,1,Xl),e===void 0?e=r.rounding:Xr(e,0,8),i=Pt(new r(i),n,e),t=Yo(i,n<=i.e||i.e<=r.toExpNeg,n)),i.isNeg()&&!i.isZero()?"-"+t:t};qe.toSignificantDigits=qe.toSD=function(n,e){var t=this,i=t.constructor;return n===void 0?(n=i.precision,e=i.rounding):(Xr(n,1,Xl),e===void 0?e=i.rounding:Xr(e,0,8)),Pt(new i(t),n,e)};qe.toString=function(){var n=this,e=n.constructor,t=Yo(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()&&!n.isZero()?"-"+t:t};qe.truncated=qe.trunc=function(){return Pt(new this.constructor(this),this.e+1,1)};qe.valueOf=qe.toJSON=function(){var n=this,e=n.constructor,t=Yo(n,n.e<=e.toExpNeg||n.e>=e.toExpPos);return n.isNeg()?"-"+t:t};function Xi(n){var e,t,i,r=n.length-1,s="",o=n[0];if(r>0){for(s+=o,e=1;e<r;e++)i=n[e]+"",t=Ot-i.length,t&&(s+=cl(t)),s+=i;o=n[e],i=o+"",t=Ot-i.length,t&&(s+=cl(t))}else if(o===0)return"0";for(;o%10===0;)o/=10;return s+o}function Xr(n,e,t){if(n!==~~n||n<e||n>t)throw Error(Ll+n)}function nm(n,e,t,i){var r,s,o,a;for(s=n[0];s>=10;s/=10)--e;return--e<0?(e+=Ot,r=0):(r=Math.ceil((e+1)/Ot),e%=Ot),s=bi(10,Ot-e),a=n[r]%s|0,i==null?e<3?(e==0?a=a/100|0:e==1&&(a=a/10|0),o=t<4&&a==99999||t>3&&a==49999||a==5e4||a==0):o=(t<4&&a+1==s||t>3&&a+1==s/2)&&(n[r+1]/s/100|0)==bi(10,e-2)-1||(a==s/2||a==0)&&(n[r+1]/s/100|0)==0:e<4?(e==0?a=a/1e3|0:e==1?a=a/100|0:e==2&&(a=a/10|0),o=(i||t<4)&&a==9999||!i&&t>3&&a==4999):o=((i||t<4)&&a+1==s||!i&&t>3&&a+1==s/2)&&(n[r+1]/s/1e3|0)==bi(10,e-3)-1,o}function F0(n,e,t){for(var i,r=[0],s,o=0,a=n.length;o<a;){for(s=r.length;s--;)r[s]*=e;for(r[0]+=XM.indexOf(n.charAt(o++)),i=0;i<r.length;i++)r[i]>t-1&&(r[i+1]===void 0&&(r[i+1]=0),r[i+1]+=r[i]/t|0,r[i]%=t)}return r.reverse()}function mY(n,e){var t,i,r;if(e.isZero())return e;i=e.d.length,i<32?(t=Math.ceil(i/3),r=(1/y_(4,t)).toString()):(t=16,r="2.3283064365386962890625e-10"),n.precision+=t,e=wh(n,1,e.times(r),new n(1));for(var s=t;s--;){var o=e.times(e);e=o.times(o).minus(o).times(8).plus(1)}return n.precision-=t,e}var An=function(){function n(i,r,s){var o,a=0,l=i.length;for(i=i.slice();l--;)o=i[l]*r+a,i[l]=o%s|0,a=o/s|0;return a&&i.unshift(a),i}function e(i,r,s,o){var a,l;if(s!=o)l=s>o?1:-1;else for(a=l=0;a<s;a++)if(i[a]!=r[a]){l=i[a]>r[a]?1:-1;break}return l}function t(i,r,s,o){for(var a=0;s--;)i[s]-=a,a=i[s]<r[s]?1:0,i[s]=a*o+i[s]-r[s];for(;!i[0]&&i.length>1;)i.shift()}return function(i,r,s,o,a,l){var u,c,f,h,m,v,g,x,y,_,w,E,C,M,T,R,A,D,I,L,H=i.constructor,k=i.s==r.s?1:-1,$=i.d,G=r.d;if(!$||!$[0]||!G||!G[0])return new H(!i.s||!r.s||($?G&&$[0]==G[0]:!G)?NaN:$&&$[0]==0||!G?k*0:k/0);for(l?(m=1,c=i.e-r.e):(l=ho,m=Ot,c=_r(i.e/m)-_r(r.e/m)),I=G.length,A=$.length,y=new H(k),_=y.d=[],f=0;G[f]==($[f]||0);f++);if(G[f]>($[f]||0)&&c--,s==null?(M=s=H.precision,o=H.rounding):a?M=s+(i.e-r.e)+1:M=s,M<0)_.push(1),v=!0;else{if(M=M/m+2|0,f=0,I==1){for(h=0,G=G[0],M++;(f<A||h)&&M--;f++)T=h*l+($[f]||0),_[f]=T/G|0,h=T%G|0;v=h||f<A}else{for(h=l/(G[0]+1)|0,h>1&&(G=n(G,h,l),$=n($,h,l),I=G.length,A=$.length),R=I,w=$.slice(0,I),E=w.length;E<I;)w[E++]=0;L=G.slice(),L.unshift(0),D=G[0],G[1]>=l/2&&++D;do h=0,u=e(G,w,I,E),u<0?(C=w[0],I!=E&&(C=C*l+(w[1]||0)),h=C/D|0,h>1?(h>=l&&(h=l-1),g=n(G,h,l),x=g.length,E=w.length,u=e(g,w,x,E),u==1&&(h--,t(g,I<x?L:G,x,l))):(h==0&&(u=h=1),g=G.slice()),x=g.length,x<E&&g.unshift(0),t(w,g,E,l),u==-1&&(E=w.length,u=e(G,w,I,E),u<1&&(h++,t(w,I<E?L:G,E,l))),E=w.length):u===0&&(h++,w=[0]),_[f++]=h,u&&w[0]?w[E++]=$[R]||0:(w=[$[R]],E=1);while((R++<A||w[0]!==void 0)&&M--);v=w[0]!==void 0}_[0]||_.shift()}if(m==1)y.e=c,Wz=v;else{for(f=1,h=_[0];h>=10;h/=10)f++;y.e=f+c*m-1,Pt(y,a?s+y.e+1:s,o,v)}return y}}();function Pt(n,e,t,i){var r,s,o,a,l,u,c,f,h,m=n.constructor;e:if(e!=null){if(f=n.d,!f)return n;for(r=1,a=f[0];a>=10;a/=10)r++;if(s=e-r,s<0)s+=Ot,o=e,c=f[h=0],l=c/bi(10,r-o-1)%10|0;else if(h=Math.ceil((s+1)/Ot),a=f.length,h>=a)if(i){for(;a++<=h;)f.push(0);c=l=0,r=1,s%=Ot,o=s-Ot+1}else break e;else{for(c=a=f[h],r=1;a>=10;a/=10)r++;s%=Ot,o=s-Ot+r,l=o<0?0:c/bi(10,r-o-1)%10|0}if(i=i||e<0||f[h+1]!==void 0||(o<0?c:c%bi(10,r-o-1)),u=t<4?(l||i)&&(t==0||t==(n.s<0?3:2)):l>5||l==5&&(t==4||i||t==6&&(s>0?o>0?c/bi(10,r-o):0:f[h-1])%10&1||t==(n.s<0?8:7)),e<1||!f[0])return f.length=0,u?(e-=n.e+1,f[0]=bi(10,(Ot-e%Ot)%Ot),n.e=-e||0):f[0]=n.e=0,n;if(s==0?(f.length=h,a=1,h--):(f.length=h+1,a=bi(10,Ot-s),f[h]=o>0?(c/bi(10,r-o)%bi(10,o)|0)*a:0),u)for(;;)if(h==0){for(s=1,o=f[0];o>=10;o/=10)s++;for(o=f[0]+=a,a=1;o>=10;o/=10)a++;s!=a&&(n.e++,f[0]==ho&&(f[0]=1));break}else{if(f[h]+=a,f[h]!=ho)break;f[h--]=0,a=1}for(s=f.length;f[--s]===0;)f.pop()}return Vt&&(n.e>m.maxE?(n.d=null,n.e=NaN):n.e<m.minE&&(n.e=0,n.d=[0])),n}function Yo(n,e,t){if(!n.isFinite())return Kz(n);var i,r=n.e,s=Xi(n.d),o=s.length;return e?(t&&(i=t-o)>0?s=s.charAt(0)+"."+s.slice(1)+cl(i):o>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(n.e<0?"e":"e+")+n.e):r<0?(s="0."+cl(-r-1)+s,t&&(i=t-o)>0&&(s+=cl(i))):r>=o?(s+=cl(r+1-o),t&&(i=t-r-1)>0&&(s=s+"."+cl(i))):((i=r+1)<o&&(s=s.slice(0,i)+"."+s.slice(i)),t&&(i=t-o)>0&&(r+1===o&&(s+="."),s+=cl(i))),s}function v_(n,e){var t=n[0];for(e*=Ot;t>=10;t/=10)e++;return e}function Ky(n,e,t){if(e>pY)throw Vt=!0,t&&(n.precision=t),Error(Gz);return Pt(new n(Yy),e,1,!0)}function lo(n,e,t){if(e>YM)throw Error(Gz);return Pt(new n(Zy),e,t,!0)}function $z(n){var e=n.length-1,t=e*Ot+1;if(e=n[e],e){for(;e%10==0;e/=10)t--;for(e=n[0];e>=10;e/=10)t++}return t}function cl(n){for(var e="";n--;)e+="0";return e}function Yz(n,e,t,i){var r,s=new n(1),o=Math.ceil(i/Ot+4);for(Vt=!1;;){if(t%2&&(s=s.times(e),sR(s.d,o)&&(r=!0)),t=_r(t/2),t===0){t=s.d.length-1,r&&s.d[t]===0&&++s.d[t];break}e=e.times(e),sR(e.d,o)}return Vt=!0,s}function rR(n){return n.d[n.d.length-1]&1}function Zz(n,e,t){for(var i,r=new n(e[0]),s=0;++s<e.length;)if(i=new n(e[s]),i.s)r[t](i)&&(r=i);else{r=i;break}return r}function ZM(n,e){var t,i,r,s,o,a,l,u=0,c=0,f=0,h=n.constructor,m=h.rounding,v=h.precision;if(!n.d||!n.d[0]||n.e>17)return new h(n.d?n.d[0]?n.s<0?0:1/0:1:n.s?n.s<0?0:n:NaN);for(e==null?(Vt=!1,l=v):l=e,a=new h(.03125);n.e>-2;)n=n.times(a),f+=5;for(i=Math.log(bi(2,f))/Math.LN10*2+5|0,l+=i,t=s=o=new h(1),h.precision=l;;){if(s=Pt(s.times(n),l,1),t=t.times(++c),a=o.plus(An(s,t,l,1)),Xi(a.d).slice(0,l)===Xi(o.d).slice(0,l)){for(r=f;r--;)o=Pt(o.times(o),l,1);if(e==null)if(u<3&&nm(o.d,l-i,m,u))h.precision=l+=10,t=s=a=new h(1),c=0,u++;else return Pt(o,h.precision=v,m,Vt=!0);else return h.precision=v,o}o=a}}function _l(n,e){var t,i,r,s,o,a,l,u,c,f,h,m=1,v=10,g=n,x=g.d,y=g.constructor,_=y.rounding,w=y.precision;if(g.s<0||!x||!x[0]||!g.e&&x[0]==1&&x.length==1)return new y(x&&!x[0]?-1/0:g.s!=1?NaN:x?0:g);if(e==null?(Vt=!1,c=w):c=e,y.precision=c+=v,t=Xi(x),i=t.charAt(0),Math.abs(s=g.e)<15e14){for(;i<7&&i!=1||i==1&&t.charAt(1)>3;)g=g.times(n),t=Xi(g.d),i=t.charAt(0),m++;s=g.e,i>1?(g=new y("0."+t),s++):g=new y(i+"."+t.slice(1))}else return u=Ky(y,c+2,w).times(s+""),g=_l(new y(i+"."+t.slice(1)),c-v).plus(u),y.precision=w,e==null?Pt(g,w,_,Vt=!0):g;for(f=g,l=o=g=An(g.minus(1),g.plus(1),c,1),h=Pt(g.times(g),c,1),r=3;;){if(o=Pt(o.times(h),c,1),u=l.plus(An(o,new y(r),c,1)),Xi(u.d).slice(0,c)===Xi(l.d).slice(0,c))if(l=l.times(2),s!==0&&(l=l.plus(Ky(y,c+2,w).times(s+""))),l=An(l,new y(m),c,1),e==null)if(nm(l.d,c-v,_,a))y.precision=c+=v,u=o=g=An(f.minus(1),f.plus(1),c,1),h=Pt(g.times(g),c,1),r=a=1;else return Pt(l,y.precision=w,_,Vt=!0);else return y.precision=w,l;l=u,r+=2}}function Kz(n){return String(n.s*n.s/0)}function KM(n,e){var t,i,r;for((t=e.indexOf("."))>-1&&(e=e.replace(".","")),(i=e.search(/e/i))>0?(t<0&&(t=i),t+=+e.slice(i+1),e=e.substring(0,i)):t<0&&(t=e.length),i=0;e.charCodeAt(i)===48;i++);for(r=e.length;e.charCodeAt(r-1)===48;--r);if(e=e.slice(i,r),e){if(r-=i,n.e=t=t-i-1,n.d=[],i=(t+1)%Ot,t<0&&(i+=Ot),i<r){for(i&&n.d.push(+e.slice(0,i)),r-=Ot;i<r;)n.d.push(+e.slice(i,i+=Ot));e=e.slice(i),i=Ot-e.length}else i-=r;for(;i--;)e+="0";n.d.push(+e),Vt&&(n.e>n.constructor.maxE?(n.d=null,n.e=NaN):n.e<n.constructor.minE&&(n.e=0,n.d=[0]))}else n.e=0,n.d=[0];return n}function gY(n,e){var t,i,r,s,o,a,l,u,c;if(e.indexOf("_")>-1){if(e=e.replace(/(\d)_(?=\d)/g,"$1"),Xz.test(e))return KM(n,e)}else if(e==="Infinity"||e==="NaN")return+e||(n.s=NaN),n.e=NaN,n.d=null,n;if(fY.test(e))t=16,e=e.toLowerCase();else if(cY.test(e))t=2;else if(hY.test(e))t=8;else throw Error(Ll+e);for(s=e.search(/p/i),s>0?(l=+e.slice(s+1),e=e.substring(2,s)):e=e.slice(2),s=e.indexOf("."),o=s>=0,i=n.constructor,o&&(e=e.replace(".",""),a=e.length,s=a-s,r=Yz(i,new i(t),s,s*2)),u=F0(e,t,ho),c=u.length-1,s=c;u[s]===0;--s)u.pop();return s<0?new i(n.s*0):(n.e=v_(u,c),n.d=u,Vt=!1,o&&(n=An(n,r,a*4)),l&&(n=n.times(Math.abs(l)<54?bi(2,l):Sh.pow(2,l))),Vt=!0,n)}function vY(n,e){var t,i=e.d.length;if(i<3)return e.isZero()?e:wh(n,2,e,e);t=1.4*Math.sqrt(i),t=t>16?16:t|0,e=e.times(1/y_(5,t)),e=wh(n,2,e,e);for(var r,s=new n(5),o=new n(16),a=new n(20);t--;)r=e.times(e),e=e.times(s.plus(r.times(o.times(r).minus(a))));return e}function wh(n,e,t,i,r){var s,o,a,l,u=n.precision,c=Math.ceil(u/Ot);for(Vt=!1,l=t.times(t),a=new n(i);;){if(o=An(a.times(l),new n(e++*e++),u,1),a=r?i.plus(o):i.minus(o),i=An(o.times(l),new n(e++*e++),u,1),o=a.plus(i),o.d[c]!==void 0){for(s=c;o.d[s]===a.d[s]&&s--;);if(s==-1)break}s=a,a=i,i=o,o=s}return Vt=!0,o.d.length=c+1,o}function y_(n,e){for(var t=n;--e;)t*=n;return t}function Jz(n,e){var t,i=e.s<0,r=lo(n,n.precision,1),s=r.times(.5);if(e=e.abs(),e.lte(s))return Ea=i?4:1,e;if(t=e.divToInt(r),t.isZero())Ea=i?3:2;else{if(e=e.minus(t.times(r)),e.lte(s))return Ea=rR(t)?i?2:3:i?4:1,e;Ea=rR(t)?i?1:4:i?3:2}return e.minus(r).abs()}function hA(n,e,t,i){var r,s,o,a,l,u,c,f,h,m=n.constructor,v=t!==void 0;if(v?(Xr(t,1,Xl),i===void 0?i=m.rounding:Xr(i,0,8)):(t=m.precision,i=m.rounding),!n.isFinite())c=Kz(n);else{for(c=Yo(n),o=c.indexOf("."),v?(r=2,e==16?t=t*4-3:e==8&&(t=t*3-2)):r=e,o>=0&&(c=c.replace(".",""),h=new m(1),h.e=c.length-o,h.d=F0(Yo(h),10,r),h.e=h.d.length),f=F0(c,10,r),s=l=f.length;f[--l]==0;)f.pop();if(!f[0])c=v?"0p+0":"0";else{if(o<0?s--:(n=new m(n),n.d=f,n.e=s,n=An(n,h,t,i,0,r),f=n.d,s=n.e,u=Wz),o=f[t],a=r/2,u=u||f[t+1]!==void 0,u=i<4?(o!==void 0||u)&&(i===0||i===(n.s<0?3:2)):o>a||o===a&&(i===4||u||i===6&&f[t-1]&1||i===(n.s<0?8:7)),f.length=t,u)for(;++f[--t]>r-1;)f[t]=0,t||(++s,f.unshift(1));for(l=f.length;!f[l-1];--l);for(o=0,c="";o<l;o++)c+=XM.charAt(f[o]);if(v){if(l>1)if(e==16||e==8){for(o=e==16?4:3,--l;l%o;l++)c+="0";for(f=F0(c,r,e),l=f.length;!f[l-1];--l);for(o=1,c="1.";o<l;o++)c+=XM.charAt(f[o])}else c=c.charAt(0)+"."+c.slice(1);c=c+(s<0?"p":"p+")+s}else if(s<0){for(;++s;)c="0"+c;c="0."+c}else if(++s>l)for(s-=l;s--;)c+="0";else s<l&&(c=c.slice(0,s)+"."+c.slice(s))}c=(e==16?"0x":e==2?"0b":e==8?"0o":"")+c}return n.s<0?"-"+c:c}function sR(n,e){if(n.length>e)return n.length=e,!0}function yY(n){return new this(n).abs()}function xY(n){return new this(n).acos()}function _Y(n){return new this(n).acosh()}function wY(n,e){return new this(n).plus(e)}function SY(n){return new this(n).asin()}function MY(n){return new this(n).asinh()}function EY(n){return new this(n).atan()}function bY(n){return new this(n).atanh()}function AY(n,e){n=new this(n),e=new this(e);var t,i=this.precision,r=this.rounding,s=i+4;return!n.s||!e.s?t=new this(NaN):!n.d&&!e.d?(t=lo(this,s,1).times(e.s>0?.25:.75),t.s=n.s):!e.d||n.isZero()?(t=e.s<0?lo(this,i,r):new this(0),t.s=n.s):!n.d||e.isZero()?(t=lo(this,s,1).times(.5),t.s=n.s):e.s<0?(this.precision=s,this.rounding=1,t=this.atan(An(n,e,s,1)),e=lo(this,s,1),this.precision=i,this.rounding=r,t=n.s<0?t.minus(e):t.plus(e)):t=this.atan(An(n,e,s,1)),t}function CY(n){return new this(n).cbrt()}function DY(n){return Pt(n=new this(n),n.e+1,2)}function TY(n,e,t){return new this(n).clamp(e,t)}function PY(n){if(!n||typeof n!="object")throw Error(g_+"Object expected");var e,t,i,r=n.defaults===!0,s=["precision",1,Xl,"rounding",0,8,"toExpNeg",-Hf,0,"toExpPos",0,Hf,"maxE",0,Hf,"minE",-Hf,0,"modulo",0,9];for(e=0;e<s.length;e+=3)if(t=s[e],r&&(this[t]=$M[t]),(i=n[t])!==void 0)if(_r(i)===i&&i>=s[e+1]&&i<=s[e+2])this[t]=i;else throw Error(Ll+t+": "+i);if(t="crypto",r&&(this[t]=$M[t]),(i=n[t])!==void 0)if(i===!0||i===!1||i===0||i===1)if(i)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[t]=!0;else throw Error(jz);else this[t]=!1;else throw Error(Ll+t+": "+i);return this}function RY(n){return new this(n).cos()}function IY(n){return new this(n).cosh()}function Qz(n){var e,t,i;function r(s){var o,a,l,u=this;if(!(u instanceof r))return new r(s);if(u.constructor=r,oR(s)){u.s=s.s,Vt?!s.d||s.e>r.maxE?(u.e=NaN,u.d=null):s.e<r.minE?(u.e=0,u.d=[0]):(u.e=s.e,u.d=s.d.slice()):(u.e=s.e,u.d=s.d?s.d.slice():s.d);return}if(l=typeof s,l==="number"){if(s===0){u.s=1/s<0?-1:1,u.e=0,u.d=[0];return}if(s<0?(s=-s,u.s=-1):u.s=1,s===~~s&&s<1e7){for(o=0,a=s;a>=10;a/=10)o++;Vt?o>r.maxE?(u.e=NaN,u.d=null):o<r.minE?(u.e=0,u.d=[0]):(u.e=o,u.d=[s]):(u.e=o,u.d=[s]);return}else if(s*0!==0){s||(u.s=NaN),u.e=NaN,u.d=null;return}return KM(u,s.toString())}else if(l!=="string")throw Error(Ll+s);return(a=s.charCodeAt(0))===45?(s=s.slice(1),u.s=-1):(a===43&&(s=s.slice(1)),u.s=1),Xz.test(s)?KM(u,s):gY(u,s)}if(r.prototype=qe,r.ROUND_UP=0,r.ROUND_DOWN=1,r.ROUND_CEIL=2,r.ROUND_FLOOR=3,r.ROUND_HALF_UP=4,r.ROUND_HALF_DOWN=5,r.ROUND_HALF_EVEN=6,r.ROUND_HALF_CEIL=7,r.ROUND_HALF_FLOOR=8,r.EUCLID=9,r.config=r.set=PY,r.clone=Qz,r.isDecimal=oR,r.abs=yY,r.acos=xY,r.acosh=_Y,r.add=wY,r.asin=SY,r.asinh=MY,r.atan=EY,r.atanh=bY,r.atan2=AY,r.cbrt=CY,r.ceil=DY,r.clamp=TY,r.cos=RY,r.cosh=IY,r.div=FY,r.exp=NY,r.floor=LY,r.hypot=OY,r.ln=zY,r.log=BY,r.log10=kY,r.log2=UY,r.max=HY,r.min=VY,r.mod=WY,r.mul=GY,r.pow=jY,r.random=qY,r.round=XY,r.sign=$Y,r.sin=YY,r.sinh=ZY,r.sqrt=KY,r.sub=JY,r.sum=QY,r.tan=eZ,r.tanh=tZ,r.trunc=nZ,n===void 0&&(n={}),n&&n.defaults!==!0)for(i=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],e=0;e<i.length;)n.hasOwnProperty(t=i[e++])||(n[t]=this[t]);return r.config(n),r}function FY(n,e){return new this(n).div(e)}function NY(n){return new this(n).exp()}function LY(n){return Pt(n=new this(n),n.e+1,3)}function OY(){var n,e,t=new this(0);for(Vt=!1,n=0;n<arguments.length;)if(e=new this(arguments[n++]),e.d)t.d&&(t=t.plus(e.times(e)));else{if(e.s)return Vt=!0,new this(1/0);t=e}return Vt=!0,t.sqrt()}function oR(n){return n instanceof Sh||n&&n.toStringTag===qz||!1}function zY(n){return new this(n).ln()}function BY(n,e){return new this(n).log(e)}function UY(n){return new this(n).log(2)}function kY(n){return new this(n).log(10)}function HY(){return Zz(this,arguments,"lt")}function VY(){return Zz(this,arguments,"gt")}function WY(n,e){return new this(n).mod(e)}function GY(n,e){return new this(n).mul(e)}function jY(n,e){return new this(n).pow(e)}function qY(n){var e,t,i,r,s=0,o=new this(1),a=[];if(n===void 0?n=this.precision:Xr(n,1,Xl),i=Math.ceil(n/Ot),this.crypto)if(crypto.getRandomValues)for(e=crypto.getRandomValues(new Uint32Array(i));s<i;)r=e[s],r>=429e7?e[s]=crypto.getRandomValues(new Uint32Array(1))[0]:a[s++]=r%1e7;else if(crypto.randomBytes){for(e=crypto.randomBytes(i*=4);s<i;)r=e[s]+(e[s+1]<<8)+(e[s+2]<<16)+((e[s+3]&127)<<24),r>=214e7?crypto.randomBytes(4).copy(e,s):(a.push(r%1e7),s+=4);s=i/4}else throw Error(jz);else for(;s<i;)a[s++]=Math.random()*1e7|0;for(i=a[--s],n%=Ot,i&&n&&(r=bi(10,Ot-n),a[s]=(i/r|0)*r);a[s]===0;s--)a.pop();if(s<0)t=0,a=[0];else{for(t=-1;a[0]===0;t-=Ot)a.shift();for(i=1,r=a[0];r>=10;r/=10)i++;i<Ot&&(t-=Ot-i)}return o.e=t,o.d=a,o}function XY(n){return Pt(n=new this(n),n.e+1,this.rounding)}function $Y(n){return n=new this(n),n.d?n.d[0]?n.s:0*n.s:n.s||NaN}function YY(n){return new this(n).sin()}function ZY(n){return new this(n).sinh()}function KY(n){return new this(n).sqrt()}function JY(n,e){return new this(n).sub(e)}function QY(){var n=0,e=arguments,t=new this(e[n]);for(Vt=!1;t.s&&++n<e.length;)t=t.plus(e[n]);return Vt=!0,Pt(t,this.precision,this.rounding)}function eZ(n){return new this(n).tan()}function tZ(n){return new this(n).tanh()}function nZ(n){return Pt(n=new this(n),n.e+1,1)}qe[Symbol.for("nodejs.util.inspect.custom")]=qe.toString;qe[Symbol.toStringTag]="Decimal";var Sh=qe.constructor=Qz($M);Yy=new Sh(Yy);Zy=new Sh(Zy);var iZ="BigNumber",rZ=["?on","config"],sZ=ot(iZ,rZ,n=>{var{on:e,config:t}=n,i=Sh.clone({precision:t.precision,modulo:Sh.EUCLID});return i.prototype=Object.create(i.prototype),i.prototype.type="BigNumber",i.prototype.isBigNumber=!0,i.prototype.toJSON=function(){return{mathjs:"BigNumber",value:this.toString()}},i.fromJSON=function(r){return new i(r.value)},e&&e("config",function(r,s){r.precision!==s.precision&&i.config({precision:r.precision})}),i},{isClass:!0}),eB={exports:{}};/**
 * @license Complex.js v2.1.1 12/05/2020
 *
 * Copyright (c) 2020, Robert Eisele (robert@xarg.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/(function(n,e){(function(t){var i=Math.cosh||function(f){return Math.abs(f)<1e-9?1-f:(Math.exp(f)+Math.exp(-f))*.5},r=Math.sinh||function(f){return Math.abs(f)<1e-9?f:(Math.exp(f)-Math.exp(-f))*.5},s=function(f){var h=Math.PI/4;if(-h>f||f>h)return Math.cos(f)-1;var m=f*f;return m*(m*(m*(m*(m*(m*(m*(m/20922789888e3-1/87178291200)+1/479001600)-1/3628800)+1/40320)-1/720)+1/24)-1/2)},o=function(f,h){var m=Math.abs(f),v=Math.abs(h);return m<3e3&&v<3e3?Math.sqrt(m*m+v*v):(m<v?(m=v,v=f/h):v=h/f,m*Math.sqrt(1+v*v))},a=function(){throw SyntaxError("Invalid Param")};function l(f,h){var m=Math.abs(f),v=Math.abs(h);return f===0?Math.log(v):h===0?Math.log(m):m<3e3&&v<3e3?Math.log(f*f+h*h)*.5:(f=f/2,h=h/2,.5*Math.log(f*f+h*h)+Math.LN2)}var u=function(f,h){var m={re:0,im:0};if(f==null)m.re=m.im=0;else if(h!==void 0)m.re=f,m.im=h;else switch(typeof f){case"object":if("im"in f&&"re"in f)m.re=f.re,m.im=f.im;else if("abs"in f&&"arg"in f){if(!Number.isFinite(f.abs)&&Number.isFinite(f.arg))return c.INFINITY;m.re=f.abs*Math.cos(f.arg),m.im=f.abs*Math.sin(f.arg)}else if("r"in f&&"phi"in f){if(!Number.isFinite(f.r)&&Number.isFinite(f.phi))return c.INFINITY;m.re=f.r*Math.cos(f.phi),m.im=f.r*Math.sin(f.phi)}else f.length===2?(m.re=f[0],m.im=f[1]):a();break;case"string":m.im=m.re=0;var v=f.match(/\d+\.?\d*e[+-]?\d+|\d+\.?\d*|\.\d+|./g),g=1,x=0;v===null&&a();for(var y=0;y<v.length;y++){var _=v[y];_===" "||_==="	"||_===`
`||(_==="+"?g++:_==="-"?x++:_==="i"||_==="I"?(g+x===0&&a(),v[y+1]!==" "&&!isNaN(v[y+1])?(m.im+=parseFloat((x%2?"-":"")+v[y+1]),y++):m.im+=parseFloat((x%2?"-":"")+"1"),g=x=0):((g+x===0||isNaN(_))&&a(),v[y+1]==="i"||v[y+1]==="I"?(m.im+=parseFloat((x%2?"-":"")+_),y++):m.re+=parseFloat((x%2?"-":"")+_),g=x=0))}g+x>0&&a();break;case"number":m.im=0,m.re=f;break;default:a()}return isNaN(m.re)||isNaN(m.im),m};function c(f,h){if(!(this instanceof c))return new c(f,h);var m=u(f,h);this.re=m.re,this.im=m.im}c.prototype={re:0,im:0,sign:function(){var f=this.abs();return new c(this.re/f,this.im/f)},add:function(f,h){var m=new c(f,h);return this.isInfinite()&&m.isInfinite()?c.NAN:this.isInfinite()||m.isInfinite()?c.INFINITY:new c(this.re+m.re,this.im+m.im)},sub:function(f,h){var m=new c(f,h);return this.isInfinite()&&m.isInfinite()?c.NAN:this.isInfinite()||m.isInfinite()?c.INFINITY:new c(this.re-m.re,this.im-m.im)},mul:function(f,h){var m=new c(f,h);return this.isInfinite()&&m.isZero()||this.isZero()&&m.isInfinite()?c.NAN:this.isInfinite()||m.isInfinite()?c.INFINITY:m.im===0&&this.im===0?new c(this.re*m.re,0):new c(this.re*m.re-this.im*m.im,this.re*m.im+this.im*m.re)},div:function(f,h){var m=new c(f,h);if(this.isZero()&&m.isZero()||this.isInfinite()&&m.isInfinite())return c.NAN;if(this.isInfinite()||m.isZero())return c.INFINITY;if(this.isZero()||m.isInfinite())return c.ZERO;f=this.re,h=this.im;var v=m.re,g=m.im,x,y;return g===0?new c(f/v,h/v):Math.abs(v)<Math.abs(g)?(y=v/g,x=v*y+g,new c((f*y+h)/x,(h*y-f)/x)):(y=g/v,x=g*y+v,new c((f+h*y)/x,(h-f*y)/x))},pow:function(f,h){var m=new c(f,h);if(f=this.re,h=this.im,m.isZero())return c.ONE;if(m.im===0){if(h===0&&f>0)return new c(Math.pow(f,m.re),0);if(f===0)switch((m.re%4+4)%4){case 0:return new c(Math.pow(h,m.re),0);case 1:return new c(0,Math.pow(h,m.re));case 2:return new c(-Math.pow(h,m.re),0);case 3:return new c(0,-Math.pow(h,m.re))}}if(f===0&&h===0&&m.re>0&&m.im>=0)return c.ZERO;var v=Math.atan2(h,f),g=l(f,h);return f=Math.exp(m.re*g-m.im*v),h=m.im*g+m.re*v,new c(f*Math.cos(h),f*Math.sin(h))},sqrt:function(){var f=this.re,h=this.im,m=this.abs(),v,g;if(f>=0){if(h===0)return new c(Math.sqrt(f),0);v=.5*Math.sqrt(2*(m+f))}else v=Math.abs(h)/Math.sqrt(2*(m-f));return f<=0?g=.5*Math.sqrt(2*(m-f)):g=Math.abs(h)/Math.sqrt(2*(m+f)),new c(v,h<0?-g:g)},exp:function(){var f=Math.exp(this.re);return this.im,new c(f*Math.cos(this.im),f*Math.sin(this.im))},expm1:function(){var f=this.re,h=this.im;return new c(Math.expm1(f)*Math.cos(h)+s(h),Math.exp(f)*Math.sin(h))},log:function(){var f=this.re,h=this.im;return new c(l(f,h),Math.atan2(h,f))},abs:function(){return o(this.re,this.im)},arg:function(){return Math.atan2(this.im,this.re)},sin:function(){var f=this.re,h=this.im;return new c(Math.sin(f)*i(h),Math.cos(f)*r(h))},cos:function(){var f=this.re,h=this.im;return new c(Math.cos(f)*i(h),-Math.sin(f)*r(h))},tan:function(){var f=2*this.re,h=2*this.im,m=Math.cos(f)+i(h);return new c(Math.sin(f)/m,r(h)/m)},cot:function(){var f=2*this.re,h=2*this.im,m=Math.cos(f)-i(h);return new c(-Math.sin(f)/m,r(h)/m)},sec:function(){var f=this.re,h=this.im,m=.5*i(2*h)+.5*Math.cos(2*f);return new c(Math.cos(f)*i(h)/m,Math.sin(f)*r(h)/m)},csc:function(){var f=this.re,h=this.im,m=.5*i(2*h)-.5*Math.cos(2*f);return new c(Math.sin(f)*i(h)/m,-Math.cos(f)*r(h)/m)},asin:function(){var f=this.re,h=this.im,m=new c(h*h-f*f+1,-2*f*h).sqrt(),v=new c(m.re-h,m.im+f).log();return new c(v.im,-v.re)},acos:function(){var f=this.re,h=this.im,m=new c(h*h-f*f+1,-2*f*h).sqrt(),v=new c(m.re-h,m.im+f).log();return new c(Math.PI/2-v.im,v.re)},atan:function(){var f=this.re,h=this.im;if(f===0){if(h===1)return new c(0,1/0);if(h===-1)return new c(0,-1/0)}var m=f*f+(1-h)*(1-h),v=new c((1-h*h-f*f)/m,-2*f/m).log();return new c(-.5*v.im,.5*v.re)},acot:function(){var f=this.re,h=this.im;if(h===0)return new c(Math.atan2(1,f),0);var m=f*f+h*h;return m!==0?new c(f/m,-h/m).atan():new c(f!==0?f/0:0,h!==0?-h/0:0).atan()},asec:function(){var f=this.re,h=this.im;if(f===0&&h===0)return new c(0,1/0);var m=f*f+h*h;return m!==0?new c(f/m,-h/m).acos():new c(f!==0?f/0:0,h!==0?-h/0:0).acos()},acsc:function(){var f=this.re,h=this.im;if(f===0&&h===0)return new c(Math.PI/2,1/0);var m=f*f+h*h;return m!==0?new c(f/m,-h/m).asin():new c(f!==0?f/0:0,h!==0?-h/0:0).asin()},sinh:function(){var f=this.re,h=this.im;return new c(r(f)*Math.cos(h),i(f)*Math.sin(h))},cosh:function(){var f=this.re,h=this.im;return new c(i(f)*Math.cos(h),r(f)*Math.sin(h))},tanh:function(){var f=2*this.re,h=2*this.im,m=i(f)+Math.cos(h);return new c(r(f)/m,Math.sin(h)/m)},coth:function(){var f=2*this.re,h=2*this.im,m=i(f)-Math.cos(h);return new c(r(f)/m,-Math.sin(h)/m)},csch:function(){var f=this.re,h=this.im,m=Math.cos(2*h)-i(2*f);return new c(-2*r(f)*Math.cos(h)/m,2*i(f)*Math.sin(h)/m)},sech:function(){var f=this.re,h=this.im,m=Math.cos(2*h)+i(2*f);return new c(2*i(f)*Math.cos(h)/m,-2*r(f)*Math.sin(h)/m)},asinh:function(){var f=this.im;this.im=-this.re,this.re=f;var h=this.asin();return this.re=-this.im,this.im=f,f=h.re,h.re=-h.im,h.im=f,h},acosh:function(){var f=this.acos();if(f.im<=0){var h=f.re;f.re=-f.im,f.im=h}else{var h=f.im;f.im=-f.re,f.re=h}return f},atanh:function(){var f=this.re,h=this.im,m=f>1&&h===0,v=1-f,g=1+f,x=v*v+h*h,y=x!==0?new c((g*v-h*h)/x,(h*v+g*h)/x):new c(f!==-1?f/0:0,h!==0?h/0:0),_=y.re;return y.re=l(y.re,y.im)/2,y.im=Math.atan2(y.im,_)/2,m&&(y.im=-y.im),y},acoth:function(){var f=this.re,h=this.im;if(f===0&&h===0)return new c(0,Math.PI/2);var m=f*f+h*h;return m!==0?new c(f/m,-h/m).atanh():new c(f!==0?f/0:0,h!==0?-h/0:0).atanh()},acsch:function(){var f=this.re,h=this.im;if(h===0)return new c(f!==0?Math.log(f+Math.sqrt(f*f+1)):1/0,0);var m=f*f+h*h;return m!==0?new c(f/m,-h/m).asinh():new c(f!==0?f/0:0,h!==0?-h/0:0).asinh()},asech:function(){var f=this.re,h=this.im;if(this.isZero())return c.INFINITY;var m=f*f+h*h;return m!==0?new c(f/m,-h/m).acosh():new c(f!==0?f/0:0,h!==0?-h/0:0).acosh()},inverse:function(){if(this.isZero())return c.INFINITY;if(this.isInfinite())return c.ZERO;var f=this.re,h=this.im,m=f*f+h*h;return new c(f/m,-h/m)},conjugate:function(){return new c(this.re,-this.im)},neg:function(){return new c(-this.re,-this.im)},ceil:function(f){return f=Math.pow(10,f||0),new c(Math.ceil(this.re*f)/f,Math.ceil(this.im*f)/f)},floor:function(f){return f=Math.pow(10,f||0),new c(Math.floor(this.re*f)/f,Math.floor(this.im*f)/f)},round:function(f){return f=Math.pow(10,f||0),new c(Math.round(this.re*f)/f,Math.round(this.im*f)/f)},equals:function(f,h){var m=new c(f,h);return Math.abs(m.re-this.re)<=c.EPSILON&&Math.abs(m.im-this.im)<=c.EPSILON},clone:function(){return new c(this.re,this.im)},toString:function(){var f=this.re,h=this.im,m="";return this.isNaN()?"NaN":this.isInfinite()?"Infinity":(Math.abs(f)<c.EPSILON&&(f=0),Math.abs(h)<c.EPSILON&&(h=0),h===0?m+f:(f!==0?(m+=f,m+=" ",h<0?(h=-h,m+="-"):m+="+",m+=" "):h<0&&(h=-h,m+="-"),h!==1&&(m+=h),m+"i"))},toVector:function(){return[this.re,this.im]},valueOf:function(){return this.im===0?this.re:null},isNaN:function(){return isNaN(this.re)||isNaN(this.im)},isZero:function(){return this.im===0&&this.re===0},isFinite:function(){return isFinite(this.re)&&isFinite(this.im)},isInfinite:function(){return!(this.isNaN()||this.isFinite())}},c.ZERO=new c(0,0),c.ONE=new c(1,0),c.I=new c(0,1),c.PI=new c(Math.PI,0),c.E=new c(Math.E,0),c.INFINITY=new c(1/0,1/0),c.NAN=new c(NaN,NaN),c.EPSILON=1e-15,Object.defineProperty(c,"__esModule",{value:!0}),c.default=c,c.Complex=c,n.exports=c})()})(eB);var oZ=eB.exports;const Vi=Th(oZ);var aZ="Complex",lZ=[],uZ=ot(aZ,lZ,()=>(Object.defineProperty(Vi,"name",{value:"Complex"}),Vi.prototype.constructor=Vi,Vi.prototype.type="Complex",Vi.prototype.isComplex=!0,Vi.prototype.toJSON=function(){return{mathjs:"Complex",re:this.re,im:this.im}},Vi.prototype.toPolar=function(){return{r:this.abs(),phi:this.arg()}},Vi.prototype.format=function(n){var e="",t=this.im,i=this.re,r=qM(this.re,n),s=qM(this.im,n),o=bn(n)?n:n?n.precision:null;if(o!==null){var a=Math.pow(10,-o);Math.abs(i/t)<a&&(i=0),Math.abs(t/i)<a&&(t=0)}return t===0?e=r:i===0?t===1?e="i":t===-1?e="-i":e=s+"i":t<0?t===-1?e=r+" - i":e=r+" - "+s.substring(1)+"i":t===1?e=r+" + i":e=r+" + "+s+"i",e},Vi.fromPolar=function(n){switch(arguments.length){case 1:{var e=arguments[0];if(typeof e=="object")return Vi(e);throw new TypeError("Input has to be an object with r and phi keys.")}case 2:{var t=arguments[0],i=arguments[1];if(bn(t)){if(Fz(i)&&i.hasBase("ANGLE")&&(i=i.toNumber("rad")),bn(i))return new Vi({r:t,phi:i});throw new TypeError("Phi is not a number nor an angle unit.")}else throw new TypeError("Radius r is not a number.")}default:throw new SyntaxError("Wrong number of arguments in function fromPolar")}},Vi.prototype.valueOf=Vi.prototype.toString,Vi.fromJSON=function(n){return new Vi(n)},Vi.compare=function(n,e){return n.re>e.re?1:n.re<e.re?-1:n.im>e.im?1:n.im<e.im?-1:0},Vi),{isClass:!0});/**
 * @license Fraction.js v4.3.7 31/08/2023
 * https://www.xarg.org/2014/03/rational-numbers-in-javascript/
 *
 * Copyright (c) 2023, Robert Eisele (robert@raw.org)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 **/var cZ=2e3,St={s:1,n:0,d:1};function ha(n,e){if(isNaN(n=parseInt(n,10)))throw N0();return n*e}function Xn(n,e){if(e===0)throw dA();var t=Object.create(fr.prototype);t.s=n<0?-1:1,n=n<0?-n:n;var i=Vf(n,e);return t.n=n/i,t.d=e/i,t}function aR(n){for(var e={},t=n,i=2,r=4;r<=t;){for(;t%i===0;)t/=i,e[i]=(e[i]||0)+1;r+=1+2*i++}return t!==n?t>1&&(e[t]=(e[t]||0)+1):e[n]=(e[n]||0)+1,e}var ss=function(n,e){var t=0,i=1,r=1,s=0,o=0,a=0,l=1,u=1,c=0,f=1,h=1,m=1,v=1e7,g;if(n!=null)if(e!==void 0){if(t=n,i=e,r=t*i,t%1!==0||i%1!==0)throw pZ()}else switch(typeof n){case"object":{if("d"in n&&"n"in n)t=n.n,i=n.d,"s"in n&&(t*=n.s);else if(0 in n)t=n[0],1 in n&&(i=n[1]);else throw N0();r=t*i;break}case"number":{if(n<0&&(r=n,n=-n),n%1===0)t=n;else if(n>0){for(n>=1&&(u=Math.pow(10,Math.floor(1+Math.log(n)/Math.LN10)),n/=u);f<=v&&m<=v;)if(g=(c+h)/(f+m),n===g){f+m<=v?(t=c+h,i=f+m):m>f?(t=h,i=m):(t=c,i=f);break}else n>g?(c+=h,f+=m):(h+=c,m+=f),f>v?(t=h,i=m):(t=c,i=f);t*=u}else(isNaN(n)||isNaN(e))&&(i=t=NaN);break}case"string":{if(f=n.match(/\d+|./g),f===null)throw N0();if(f[c]==="-"?(r=-1,c++):f[c]==="+"&&c++,f.length===c+1?o=ha(f[c++],r):f[c+1]==="."||f[c]==="."?(f[c]!=="."&&(s=ha(f[c++],r)),c++,(c+1===f.length||f[c+1]==="("&&f[c+3]===")"||f[c+1]==="'"&&f[c+3]==="'")&&(o=ha(f[c],r),l=Math.pow(10,f[c].length),c++),(f[c]==="("&&f[c+2]===")"||f[c]==="'"&&f[c+2]==="'")&&(a=ha(f[c+1],r),u=Math.pow(10,f[c+1].length)-1,c+=3)):f[c+1]==="/"||f[c+1]===":"?(o=ha(f[c],r),l=ha(f[c+2],1),c+=3):f[c+3]==="/"&&f[c+1]===" "&&(s=ha(f[c],r),o=ha(f[c+2],r),l=ha(f[c+4],1),c+=5),f.length<=c){i=l*u,r=t=a+i*s+u*o;break}}default:throw N0()}if(i===0)throw dA();St.s=r<0?-1:1,St.n=Math.abs(t),St.d=Math.abs(i)};function fZ(n,e,t){for(var i=1;e>0;n=n*n%t,e>>=1)e&1&&(i=i*n%t);return i}function hZ(n,e){for(;e%2===0;e/=2);for(;e%5===0;e/=5);if(e===1)return 0;for(var t=10%e,i=1;t!==1;i++)if(t=t*10%e,i>cZ)return 0;return i}function dZ(n,e,t){for(var i=1,r=fZ(10,t,e),s=0;s<300;s++){if(i===r)return s;i=i*10%e,r=r*10%e}return 0}function Vf(n,e){if(!n)return e;if(!e)return n;for(;;){if(n%=e,!n)return e;if(e%=n,!e)return n}}function fr(n,e){if(ss(n,e),this instanceof fr)n=Vf(St.d,St.n),this.s=St.s,this.n=St.n/n,this.d=St.d/n;else return Xn(St.s*St.n,St.d)}var dA=function(){return new Error("Division by Zero")},N0=function(){return new Error("Invalid argument")},pZ=function(){return new Error("Parameters must be integer")};fr.prototype={s:1,n:0,d:1,abs:function(){return Xn(this.n,this.d)},neg:function(){return Xn(-this.s*this.n,this.d)},add:function(n,e){return ss(n,e),Xn(this.s*this.n*St.d+St.s*this.d*St.n,this.d*St.d)},sub:function(n,e){return ss(n,e),Xn(this.s*this.n*St.d-St.s*this.d*St.n,this.d*St.d)},mul:function(n,e){return ss(n,e),Xn(this.s*St.s*this.n*St.n,this.d*St.d)},div:function(n,e){return ss(n,e),Xn(this.s*St.s*this.n*St.d,this.d*St.n)},clone:function(){return Xn(this.s*this.n,this.d)},mod:function(n,e){if(isNaN(this.n)||isNaN(this.d))return new fr(NaN);if(n===void 0)return Xn(this.s*this.n%this.d,1);if(ss(n,e),St.n===0&&this.d===0)throw dA();return Xn(this.s*(St.d*this.n)%(St.n*this.d),St.d*this.d)},gcd:function(n,e){return ss(n,e),Xn(Vf(St.n,this.n)*Vf(St.d,this.d),St.d*this.d)},lcm:function(n,e){return ss(n,e),St.n===0&&this.n===0?Xn(0,1):Xn(St.n*this.n,Vf(St.n,this.n)*Vf(St.d,this.d))},ceil:function(n){return n=Math.pow(10,n||0),isNaN(this.n)||isNaN(this.d)?new fr(NaN):Xn(Math.ceil(n*this.s*this.n/this.d),n)},floor:function(n){return n=Math.pow(10,n||0),isNaN(this.n)||isNaN(this.d)?new fr(NaN):Xn(Math.floor(n*this.s*this.n/this.d),n)},round:function(n){return n=Math.pow(10,n||0),isNaN(this.n)||isNaN(this.d)?new fr(NaN):Xn(Math.round(n*this.s*this.n/this.d),n)},roundTo:function(n,e){return ss(n,e),Xn(this.s*Math.round(this.n*St.d/(this.d*St.n))*St.n,St.d)},inverse:function(){return Xn(this.s*this.d,this.n)},pow:function(n,e){if(ss(n,e),St.d===1)return St.s<0?Xn(Math.pow(this.s*this.d,St.n),Math.pow(this.n,St.n)):Xn(Math.pow(this.s*this.n,St.n),Math.pow(this.d,St.n));if(this.s<0)return null;var t=aR(this.n),i=aR(this.d),r=1,s=1;for(var o in t)if(o!=="1"){if(o==="0"){r=0;break}if(t[o]*=St.n,t[o]%St.d===0)t[o]/=St.d;else return null;r*=Math.pow(o,t[o])}for(var o in i)if(o!=="1"){if(i[o]*=St.n,i[o]%St.d===0)i[o]/=St.d;else return null;s*=Math.pow(o,i[o])}return St.s<0?Xn(s,r):Xn(r,s)},equals:function(n,e){return ss(n,e),this.s*this.n*St.d===St.s*St.n*this.d},compare:function(n,e){ss(n,e);var t=this.s*this.n*St.d-St.s*St.n*this.d;return(0<t)-(t<0)},simplify:function(n){if(isNaN(this.n)||isNaN(this.d))return this;n=n||.001;for(var e=this.abs(),t=e.toContinued(),i=1;i<t.length;i++){for(var r=Xn(t[i-1],1),s=i-2;s>=0;s--)r=r.inverse().add(t[s]);if(Math.abs(r.sub(e).valueOf())<n)return r.mul(this.s)}return this},divisible:function(n,e){return ss(n,e),!(!(St.n*this.d)||this.n*St.d%(St.n*this.d))},valueOf:function(){return this.s*this.n/this.d},toFraction:function(n){var e,t="",i=this.n,r=this.d;return this.s<0&&(t+="-"),r===1?t+=i:(n&&(e=Math.floor(i/r))>0&&(t+=e,t+=" ",i%=r),t+=i,t+="/",t+=r),t},toLatex:function(n){var e,t="",i=this.n,r=this.d;return this.s<0&&(t+="-"),r===1?t+=i:(n&&(e=Math.floor(i/r))>0&&(t+=e,i%=r),t+="\\frac{",t+=i,t+="}{",t+=r,t+="}"),t},toContinued:function(){var n,e=this.n,t=this.d,i=[];if(isNaN(e)||isNaN(t))return i;do i.push(Math.floor(e/t)),n=e%t,e=t,t=n;while(e!==1);return i},toString:function(n){var e=this.n,t=this.d;if(isNaN(e)||isNaN(t))return"NaN";n=n||15;var i=hZ(e,t),r=dZ(e,t,i),s=this.s<0?"-":"";if(s+=e/t|0,e%=t,e*=10,e&&(s+="."),i){for(var o=r;o--;)s+=e/t|0,e%=t,e*=10;s+="(";for(var o=i;o--;)s+=e/t|0,e%=t,e*=10;s+=")"}else for(var o=n;e&&o--;)s+=e/t|0,e%=t,e*=10;return s}};var mZ="Fraction",gZ=[],vZ=ot(mZ,gZ,()=>(Object.defineProperty(fr,"name",{value:"Fraction"}),fr.prototype.constructor=fr,fr.prototype.type="Fraction",fr.prototype.isFraction=!0,fr.prototype.toJSON=function(){return{mathjs:"Fraction",n:this.s*this.n,d:this.d}},fr.fromJSON=function(n){return new fr(n)},fr),{isClass:!0}),yZ="Matrix",xZ=[],_Z=ot(yZ,xZ,()=>{function n(){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator")}return n.prototype.type="Matrix",n.prototype.isMatrix=!0,n.prototype.storage=function(){throw new Error("Cannot invoke storage on a Matrix interface")},n.prototype.datatype=function(){throw new Error("Cannot invoke datatype on a Matrix interface")},n.prototype.create=function(e,t){throw new Error("Cannot invoke create on a Matrix interface")},n.prototype.subset=function(e,t,i){throw new Error("Cannot invoke subset on a Matrix interface")},n.prototype.get=function(e){throw new Error("Cannot invoke get on a Matrix interface")},n.prototype.set=function(e,t,i){throw new Error("Cannot invoke set on a Matrix interface")},n.prototype.resize=function(e,t){throw new Error("Cannot invoke resize on a Matrix interface")},n.prototype.reshape=function(e,t){throw new Error("Cannot invoke reshape on a Matrix interface")},n.prototype.clone=function(){throw new Error("Cannot invoke clone on a Matrix interface")},n.prototype.size=function(){throw new Error("Cannot invoke size on a Matrix interface")},n.prototype.map=function(e,t){throw new Error("Cannot invoke map on a Matrix interface")},n.prototype.forEach=function(e){throw new Error("Cannot invoke forEach on a Matrix interface")},n.prototype[Symbol.iterator]=function(){throw new Error("Cannot iterate a Matrix interface")},n.prototype.toArray=function(){throw new Error("Cannot invoke toArray on a Matrix interface")},n.prototype.valueOf=function(){throw new Error("Cannot invoke valueOf on a Matrix interface")},n.prototype.format=function(e){throw new Error("Cannot invoke format on a Matrix interface")},n.prototype.toString=function(){throw new Error("Cannot invoke toString on a Matrix interface")},n},{isClass:!0});function oS(n,e,t){var i=n.constructor,r=new i(2),s="";if(t){if(t<1)throw new Error("size must be in greater than 0");if(!Vn(t))throw new Error("size must be an integer");if(n.greaterThan(r.pow(t-1).sub(1))||n.lessThan(r.pow(t-1).mul(-1)))throw new Error("Value must be in range [-2^".concat(t-1,", 2^").concat(t-1,"-1]"));if(!n.isInteger())throw new Error("Value must be an integer");n.lessThan(0)&&(n=n.add(r.pow(t))),s="i".concat(t)}switch(e){case 2:return"".concat(n.toBinary()).concat(s);case 8:return"".concat(n.toOctal()).concat(s);case 16:return"".concat(n.toHexadecimal()).concat(s);default:throw new Error("Base ".concat(e," not supported "))}}function wZ(n,e){if(typeof e=="function")return e(n);if(!n.isFinite())return n.isNaN()?"NaN":n.gt(0)?"Infinity":"-Infinity";var{notation:t,precision:i,wordSize:r}=Bz(e);switch(t){case"fixed":return MZ(n,i);case"exponential":return lR(n,i);case"engineering":return SZ(n,i);case"bin":return oS(n,2,r);case"oct":return oS(n,8,r);case"hex":return oS(n,16,r);case"auto":{var s=uR(e==null?void 0:e.lowerExp,-3),o=uR(e==null?void 0:e.upperExp,5);if(n.isZero())return"0";var a,l=n.toSignificantDigits(i),u=l.e;return u>=s&&u<o?a=l.toFixed():a=lR(n,i),a.replace(/((\.\d*?)(0+))($|e)/,function(){var c=arguments[2],f=arguments[4];return c!=="."?c+f:f})}default:throw new Error('Unknown notation "'+t+'". Choose "auto", "exponential", "fixed", "bin", "oct", or "hex.')}}function SZ(n,e){var t=n.e,i=t%3===0?t:t<0?t-3-t%3:t-t%3,r=n.mul(Math.pow(10,-i)),s=r.toPrecision(e);if(s.includes("e")){var o=n.constructor;s=new o(s).toFixed()}return s+"e"+(t>=0?"+":"")+i.toString()}function lR(n,e){return e!==void 0?n.toExponential(e-1):n.toExponential()}function MZ(n,e){return n.toFixed(e)}function uR(n,e){return bn(n)?n:Gn(n)?n.toNumber():e}function zn(n,e){var t=EZ(n,e);return e&&typeof e=="object"&&"truncate"in e&&t.length>e.truncate?t.substring(0,e.truncate-3)+"...":t}function EZ(n,e){if(typeof n=="number")return qM(n,e);if(Gn(n))return wZ(n,e);if(bZ(n))return!e||e.fraction!=="decimal"?n.s*n.n+"/"+n.d:n.toString();if(Array.isArray(n))return tB(n,e);if(ao(n))return cR(n);if(typeof n=="function")return n.syntax?String(n.syntax):"function";if(n&&typeof n=="object"){if(typeof n.format=="function")return n.format(e);if(n&&n.toString(e)!=={}.toString())return n.toString(e);var t=Object.keys(n).map(i=>cR(i)+": "+zn(n[i],e));return"{"+t.join(", ")+"}"}return String(n)}function cR(n){for(var e=String(n),t="",i=0;i<e.length;){var r=e.charAt(i);t+=r in fR?fR[r]:r,i++}return'"'+t+'"'}var fR={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"};function tB(n,e){if(Array.isArray(n)){for(var t="[",i=n.length,r=0;r<i;r++)r!==0&&(t+=", "),t+=tB(n[r],e);return t+="]",t}else return zn(n,e)}function bZ(n){return n&&typeof n=="object"&&typeof n.s=="number"&&typeof n.n=="number"&&typeof n.d=="number"||!1}function cn(n,e,t){if(!(this instanceof cn))throw new SyntaxError("Constructor must be called with the new operator");this.actual=n,this.expected=e,this.relation=t,this.message="Dimension mismatch ("+(Array.isArray(n)?"["+n.join(", ")+"]":n)+" "+(this.relation||"!=")+" "+(Array.isArray(e)?"["+e.join(", ")+"]":e)+")",this.stack=new Error().stack}cn.prototype=new RangeError;cn.prototype.constructor=RangeError;cn.prototype.name="DimensionError";cn.prototype.isDimensionError=!0;function Sc(n,e,t){if(!(this instanceof Sc))throw new SyntaxError("Constructor must be called with the new operator");this.index=n,arguments.length<3?(this.min=0,this.max=e):(this.min=e,this.max=t),this.min!==void 0&&this.index<this.min?this.message="Index out of range ("+this.index+" < "+this.min+")":this.max!==void 0&&this.index>=this.max?this.message="Index out of range ("+this.index+" > "+(this.max-1)+")":this.message="Index out of range ("+this.index+")",this.stack=new Error().stack}Sc.prototype=new RangeError;Sc.prototype.constructor=RangeError;Sc.prototype.name="IndexError";Sc.prototype.isIndexError=!0;function xi(n){for(var e=[];Array.isArray(n);)e.push(n.length),n=n[0];return e}function nB(n,e,t){var i,r=n.length;if(r!==e[t])throw new cn(r,e[t]);if(t<e.length-1){var s=t+1;for(i=0;i<r;i++){var o=n[i];if(!Array.isArray(o))throw new cn(e.length-1,e.length,"<");nB(n[i],e,s)}}else for(i=0;i<r;i++)if(Array.isArray(n[i]))throw new cn(e.length+1,e.length,">")}function hR(n,e){var t=e.length===0;if(t){if(Array.isArray(n))throw new cn(n.length,0)}else nB(n,e,0)}function Hn(n,e){if(n!==void 0){if(!bn(n)||!Vn(n))throw new TypeError("Index must be an integer (value: "+n+")");if(n<0||typeof e=="number"&&n>=e)throw new Sc(n,e)}}function im(n,e,t){if(!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new Error("Resizing to scalar is not supported");e.forEach(function(r){if(!bn(r)||!Vn(r)||r<0)throw new TypeError("Invalid size, must contain positive integers (size: "+zn(e)+")")}),(bn(n)||Gn(n))&&(n=[n]);var i=t!==void 0?t:0;return JM(n,e,0,i),n}function JM(n,e,t,i){var r,s,o=n.length,a=e[t],l=Math.min(o,a);if(n.length=a,t<e.length-1){var u=t+1;for(r=0;r<l;r++)s=n[r],Array.isArray(s)||(s=[s],n[r]=s),JM(s,e,u,i);for(r=l;r<a;r++)s=[],n[r]=s,JM(s,e,u,i)}else{for(r=0;r<l;r++)for(;Array.isArray(n[r]);)n[r]=n[r][0];for(r=l;r<a;r++)n[r]=i}}function pA(n,e){var t=QM(n),i=t.length;if(!Array.isArray(n)||!Array.isArray(e))throw new TypeError("Array expected");if(e.length===0)throw new cn(0,i,"!=");e=mA(e,i);var r=iB(e);if(i!==r)throw new cn(r,i,"!=");try{return AZ(t,e)}catch(s){throw s instanceof cn?new cn(r,i,"!="):s}}function mA(n,e){var t=iB(n),i=n.slice(),r=-1,s=n.indexOf(r),o=n.indexOf(r,s+1)>=0;if(o)throw new Error("More than one wildcard in sizes");var a=s>=0,l=e%t===0;if(a)if(l)i[s]=-e/t;else throw new Error("Could not replace wildcard, since "+e+" is no multiple of "+-t);return i}function iB(n){return n.reduce((e,t)=>e*t,1)}function AZ(n,e){for(var t=n,i,r=e.length-1;r>0;r--){var s=e[r];i=[];for(var o=t.length/s,a=0;a<o;a++)i.push(t.slice(a*s,(a+1)*s));t=i}return t}function rB(n,e,t,i){var r=i||xi(n);if(t)for(var s=0;s<t;s++)n=[n],r.unshift(1);for(n=sB(n,e,0);r.length<e;)r.push(1);return n}function sB(n,e,t){var i,r;if(Array.isArray(n)){var s=t+1;for(i=0,r=n.length;i<r;i++)n[i]=sB(n[i],e,s)}else for(var o=t;o<e;o++)n=[n];return n}function QM(n){if(!Array.isArray(n))return n;var e=[];return n.forEach(function t(i){Array.isArray(i)?i.forEach(t):e.push(i)}),e}function rm(n,e){for(var t,i=0,r=0;r<n.length;r++){var s=n[r],o=Array.isArray(s);if(r===0&&o&&(i=s.length),o&&s.length!==i)return;var a=o?rm(s,e):e(s);if(t===void 0)t=a;else if(t!==a)return"mixed"}return t}function oB(n,e,t,i){if(i<t){if(n.length!==e.length)throw new cn(n.length,e.length);for(var r=[],s=0;s<n.length;s++)r[s]=oB(n[s],e[s],t,i+1);return r}else return n.concat(e)}function aB(){var n=Array.prototype.slice.call(arguments,0,-1),e=Array.prototype.slice.call(arguments,-1);if(n.length===1)return n[0];if(n.length>1)return n.slice(1).reduce(function(t,i){return oB(t,i,e,0)},n[0]);throw new Error("Wrong number of arguments in function concat")}function lB(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];for(var i=e.map(h=>h.length),r=Math.max(...i),s=new Array(r).fill(null),o=0;o<e.length;o++)for(var a=e[o],l=i[o],u=0;u<l;u++){var c=r-l+u;a[u]>s[c]&&(s[c]=a[u])}for(var f=0;f<e.length;f++)uB(e[f],s);return s}function uB(n,e){for(var t=e.length,i=n.length,r=0;r<i;r++){var s=t-i+r;if(n[r]<e[s]&&n[r]>1||n[r]>e[s])throw new Error("shape missmatch: missmatch is found in arg with shape (".concat(n,") not possible to broadcast dimension ").concat(i," with size ").concat(n[r]," to size ").concat(e[s]))}}function eE(n,e){var t=xi(n);if(Nl(t,e))return n;uB(t,e);var i=lB(t,e),r=i.length,s=[...Array(r-t.length).fill(1),...t],o=DZ(n);t.length<r&&(o=pA(o,s),t=xi(o));for(var a=0;a<r;a++)t[a]<i[a]&&(o=CZ(o,i[a],a),t=xi(o));return o}function CZ(n,e,t){return aB(...Array(e).fill(n),t)}function DZ(n){return vo([],n)}function cB(n){return Object.keys(n.signatures||{}).reduce(function(e,t){var i=(t.match(/,/g)||[]).length+1;return Math.max(e,i)},-1)}var TZ="DenseMatrix",PZ=["Matrix"],RZ=ot(TZ,PZ,n=>{var{Matrix:e}=n;function t(c,f){if(!(this instanceof t))throw new SyntaxError("Constructor must be called with the new operator");if(f&&!ao(f))throw new Error("Invalid datatype: "+f);if(In(c))c.type==="DenseMatrix"?(this._data=mn(c._data),this._size=mn(c._size),this._datatype=f||c._datatype):(this._data=c.toArray(),this._size=c.size(),this._datatype=f||c._datatype);else if(c&&Sn(c.data)&&Sn(c.size))this._data=c.data,this._size=c.size,hR(this._data,this._size),this._datatype=f||c.datatype;else if(Sn(c))this._data=u(c),this._size=xi(this._data),hR(this._data,this._size),this._datatype=f;else{if(c)throw new TypeError("Unsupported type of data ("+Da(c)+")");this._data=[],this._size=[0],this._datatype=f}}t.prototype=new e,t.prototype.createDenseMatrix=function(c,f){return new t(c,f)},Object.defineProperty(t,"name",{value:"DenseMatrix"}),t.prototype.constructor=t,t.prototype.type="DenseMatrix",t.prototype.isDenseMatrix=!0,t.prototype.getDataType=function(){return rm(this._data,Da)},t.prototype.storage=function(){return"dense"},t.prototype.datatype=function(){return this._datatype},t.prototype.create=function(c,f){return new t(c,f)},t.prototype.subset=function(c,f,h){switch(arguments.length){case 1:return i(this,c);case 2:case 3:return s(this,c,f,h);default:throw new SyntaxError("Wrong number of arguments")}},t.prototype.get=function(c){if(!Sn(c))throw new TypeError("Array expected");if(c.length!==this._size.length)throw new cn(c.length,this._size.length);for(var f=0;f<c.length;f++)Hn(c[f],this._size[f]);for(var h=this._data,m=0,v=c.length;m<v;m++){var g=c[m];Hn(g,h.length),h=h[g]}return h},t.prototype.set=function(c,f,h){if(!Sn(c))throw new TypeError("Array expected");if(c.length<this._size.length)throw new cn(c.length,this._size.length,"<");var m,v,g,x=c.map(function(_){return _+1});l(this,x,h);var y=this._data;for(m=0,v=c.length-1;m<v;m++)g=c[m],Hn(g,y.length),y=y[g];return g=c[c.length-1],Hn(g,y.length),y[g]=f,this};function i(c,f){if(!cA(f))throw new TypeError("Invalid index");var h=f.isScalar();if(h)return c.get(f.min());var m=f.size();if(m.length!==c._size.length)throw new cn(m.length,c._size.length);for(var v=f.min(),g=f.max(),x=0,y=c._size.length;x<y;x++)Hn(v[x],c._size[x]),Hn(g[x],c._size[x]);return new t(r(c._data,f,m.length,0),c._datatype)}function r(c,f,h,m){var v=m===h-1,g=f.dimension(m);return v?g.map(function(x){return Hn(x,c.length),c[x]}).valueOf():g.map(function(x){Hn(x,c.length);var y=c[x];return r(y,f,h,m+1)}).valueOf()}function s(c,f,h,m){if(!f||f.isIndex!==!0)throw new TypeError("Invalid index");var v=f.size(),g=f.isScalar(),x;if(In(h)?(x=h.size(),h=h.valueOf()):x=xi(h),g){if(x.length!==0)throw new TypeError("Scalar expected");c.set(f.min(),h,m)}else{if(!Nl(x,v))try{x.length===0?h=eE([h],v):h=eE(h,v),x=xi(h)}catch{}if(v.length<c._size.length)throw new cn(v.length,c._size.length,"<");if(x.length<v.length){for(var y=0,_=0;v[y]===1&&x[y]===1;)y++;for(;v[y]===1;)_++,y++;h=rB(h,v.length,_,x)}if(!Nl(v,x))throw new cn(v,x,">");var w=f.max().map(function(M){return M+1});l(c,w,m);var E=v.length,C=0;o(c._data,f,h,E,C)}return c}function o(c,f,h,m,v){var g=v===m-1,x=f.dimension(v);g?x.forEach(function(y,_){Hn(y),c[y]=h[_[0]]}):x.forEach(function(y,_){Hn(y),o(c[y],f,h[_[0]],m,v+1)})}t.prototype.resize=function(c,f,h){if(!$y(c))throw new TypeError("Array or Matrix expected");var m=c.valueOf().map(g=>Array.isArray(g)&&g.length===1?g[0]:g),v=h?this.clone():this;return a(v,m,f)};function a(c,f,h){if(f.length===0){for(var m=c._data;Sn(m);)m=m[0];return m}return c._size=f.slice(0),c._data=im(c._data,c._size,h),c}t.prototype.reshape=function(c,f){var h=f?this.clone():this;h._data=pA(h._data,c);var m=h._size.reduce((v,g)=>v*g);return h._size=mA(c,m),h};function l(c,f,h){for(var m=c._size.slice(0),v=!1;m.length<f.length;)m.push(0),v=!0;for(var g=0,x=f.length;g<x;g++)f[g]>m[g]&&(m[g]=f[g],v=!0);v&&a(c,m,h)}t.prototype.clone=function(){var c=new t({data:mn(this._data),size:mn(this._size),datatype:this._datatype});return c},t.prototype.size=function(){return this._size.slice(0)},t.prototype.map=function(c){var f=this,h=cB(c),m=function x(y,_){return Sn(y)?y.map(function(w,E){return x(w,_.concat(E))}):h===1?c(y):h===2?c(y,_):c(y,_,f)},v=m(this._data,[]),g=this._datatype!==void 0?rm(v,Da):void 0;return new t(v,g)},t.prototype.forEach=function(c){var f=this,h=function m(v,g){Sn(v)?v.forEach(function(x,y){m(x,g.concat(y))}):c(v,g,f)};h(this._data,[])},t.prototype[Symbol.iterator]=function*(){var c=function*f(h,m){if(Sn(h))for(var v=0;v<h.length;v++)yield*f(h[v],m.concat(v));else yield{value:h,index:m}};yield*c(this._data,[])},t.prototype.rows=function(){var c=[],f=this.size();if(f.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");var h=this._data;for(var m of h)c.push(new t([m],this._datatype));return c},t.prototype.columns=function(){var c=this,f=[],h=this.size();if(h.length!==2)throw new TypeError("Rows can only be returned for a 2D matrix.");for(var m=this._data,v=function(y){var _=m.map(w=>[w[y]]);f.push(new t(_,c._datatype))},g=0;g<h[1];g++)v(g);return f},t.prototype.toArray=function(){return mn(this._data)},t.prototype.valueOf=function(){return this._data},t.prototype.format=function(c){return zn(this._data,c)},t.prototype.toString=function(){return zn(this._data)},t.prototype.toJSON=function(){return{mathjs:"DenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},t.prototype.diagonal=function(c){if(c){if(Gn(c)&&(c=c.toNumber()),!bn(c)||!Vn(c))throw new TypeError("The parameter k must be an integer number")}else c=0;for(var f=c>0?c:0,h=c<0?-c:0,m=this._size[0],v=this._size[1],g=Math.min(m-h,v-f),x=[],y=0;y<g;y++)x[y]=this._data[y+h][y+f];return new t({data:x,size:[g],datatype:this._datatype})},t.diagonal=function(c,f,h,m){if(!Sn(c))throw new TypeError("Array expected, size parameter");if(c.length!==2)throw new Error("Only two dimensions matrix are supported");if(c=c.map(function(T){if(Gn(T)&&(T=T.toNumber()),!bn(T)||!Vn(T)||T<1)throw new Error("Size values must be positive integers");return T}),h){if(Gn(h)&&(h=h.toNumber()),!bn(h)||!Vn(h))throw new TypeError("The parameter k must be an integer number")}else h=0;var v=h>0?h:0,g=h<0?-h:0,x=c[0],y=c[1],_=Math.min(x-g,y-v),w;if(Sn(f)){if(f.length!==_)throw new Error("Invalid value array length");w=function(R){return f[R]}}else if(In(f)){var E=f.size();if(E.length!==1||E[0]!==_)throw new Error("Invalid matrix length");w=function(R){return f.get([R])}}else w=function(){return f};m||(m=Gn(w(0))?w(0).mul(0):0);var C=[];if(c.length>0){C=im(C,c,m);for(var M=0;M<_;M++)C[M+g][M+v]=w(M)}return new t({data:C,size:[x,y]})},t.fromJSON=function(c){return new t(c)},t.prototype.swapRows=function(c,f){if(!bn(c)||!Vn(c)||!bn(f)||!Vn(f))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Hn(c,this._size[0]),Hn(f,this._size[0]),t._swapRows(c,f,this._data),this},t._swapRows=function(c,f,h){var m=h[c];h[c]=h[f],h[f]=m};function u(c){return In(c)?u(c.valueOf()):Sn(c)?c.map(u):c}return t},{isClass:!0});function Yr(n,e,t){return n&&typeof n.map=="function"?n.map(function(i){return Yr(i,e)}):e(n)}var dR="isInteger",IZ=["typed"],FZ=ot(dR,IZ,n=>{var{typed:e}=n;return e(dR,{number:Vn,BigNumber:function(i){return i.isInt()},bigint:function(i){return!0},Fraction:function(i){return i.d===1&&isFinite(i.n)},"Array | Matrix":e.referToSelf(t=>i=>Yr(i,t))})}),gA="number",vA="number, number";function fB(n){return Math.abs(n)}fB.signature=gA;function hB(n,e){return n+e}hB.signature=vA;function dB(n,e){return n-e}dB.signature=vA;function pB(n,e){return n*e}pB.signature=vA;function mB(n){return-n}mB.signature=gA;function tE(n){return G$(n)}tE.signature=gA;var NZ="number";function gB(n){return n>0}gB.signature=NZ;function zh(n,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1e-9,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0;if(t<=0)throw new Error("Relative tolerance must be greater than 0");if(i<0)throw new Error("Absolute tolerance must be at least 0");return n.isNaN()||e.isNaN()?!1:!n.isFinite()||!e.isFinite()?n.eq(e):n.eq(e)?!0:n.minus(e).abs().lte(n.constructor.max(n.constructor.max(n.abs(),e.abs()).mul(t),i))}var pR="isPositive",LZ=["typed","config"],OZ=ot(pR,LZ,n=>{var{typed:e,config:t}=n;return e(pR,{number:i=>Ba(i,0,t.relTol,t.absTol)?!1:gB(i),BigNumber:i=>zh(i,new i.constructor(0),t.relTol,t.absTol)?!1:!i.isNeg()&&!i.isZero()&&!i.isNaN(),bigint:i=>i>0n,Fraction:i=>i.s>0&&i.n>0,Unit:e.referToSelf(i=>r=>e.find(i,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(i=>r=>Yr(r,i))})}),mR="isZero",zZ=["typed","equalScalar"],BZ=ot(mR,zZ,n=>{var{typed:e,equalScalar:t}=n;return e(mR,{"number | BigNumber | Complex | Fraction":i=>t(i,0),bigint:i=>i===0n,Unit:e.referToSelf(i=>r=>e.find(i,r.valueType())(r.value)),"Array | Matrix":e.referToSelf(i=>r=>Yr(r,i))})});function UZ(n,e,t,i){return Ba(n.re,e.re,t,i)&&Ba(n.im,e.im,t,i)}var Pm=ot("compareUnits",["typed"],n=>{var{typed:e}=n;return{"Unit, Unit":e.referToSelf(t=>(i,r)=>{if(!i.equalBase(r))throw new Error("Cannot compare units with different base");return e.find(t,[i.valueType(),r.valueType()])(i.value,r.value)})}}),Jy="equalScalar",kZ=["typed","config"],HZ=ot(Jy,kZ,n=>{var{typed:e,config:t}=n,i=Pm({typed:e});return e(Jy,{"boolean, boolean":function(s,o){return s===o},"number, number":function(s,o){return Ba(s,o,t.relTol,t.absTol)},"BigNumber, BigNumber":function(s,o){return s.eq(o)||zh(s,o,t.relTol,t.absTol)},"bigint, bigint":function(s,o){return s===o},"Fraction, Fraction":function(s,o){return s.equals(o)},"Complex, Complex":function(s,o){return UZ(s,o,t.relTol,t.absTol)}},i)});ot(Jy,["typed","config"],n=>{var{typed:e,config:t}=n;return e(Jy,{"number, number":function(r,s){return Ba(r,s,t.relTol,t.absTol)}})});var VZ="SparseMatrix",WZ=["typed","equalScalar","Matrix"],GZ=ot(VZ,WZ,n=>{var{typed:e,equalScalar:t,Matrix:i}=n;function r(g,x){if(!(this instanceof r))throw new SyntaxError("Constructor must be called with the new operator");if(x&&!ao(x))throw new Error("Invalid datatype: "+x);if(In(g))s(this,g,x);else if(g&&Sn(g.index)&&Sn(g.ptr)&&Sn(g.size))this._values=g.values,this._index=g.index,this._ptr=g.ptr,this._size=g.size,this._datatype=x||g.datatype;else if(Sn(g))o(this,g,x);else{if(g)throw new TypeError("Unsupported type of data ("+Da(g)+")");this._values=[],this._index=[],this._ptr=[0],this._size=[0,0],this._datatype=x}}function s(g,x,y){x.type==="SparseMatrix"?(g._values=x._values?mn(x._values):void 0,g._index=mn(x._index),g._ptr=mn(x._ptr),g._size=mn(x._size),g._datatype=y||x._datatype):o(g,x.valueOf(),y||x._datatype)}function o(g,x,y){g._values=[],g._index=[],g._ptr=[],g._datatype=y;var _=x.length,w=0,E=t,C=0;if(ao(y)&&(E=e.find(t,[y,y])||t,C=e.convert(0,y)),_>0){var M=0;do{g._ptr.push(g._index.length);for(var T=0;T<_;T++){var R=x[T];if(Sn(R)){if(M===0&&w<R.length&&(w=R.length),M<R.length){var A=R[M];E(A,C)||(g._values.push(A),g._index.push(T))}}else M===0&&w<1&&(w=1),E(R,C)||(g._values.push(R),g._index.push(T))}M++}while(M<w)}g._ptr.push(g._index.length),g._size=[_,w]}r.prototype=new i,r.prototype.createSparseMatrix=function(g,x){return new r(g,x)},Object.defineProperty(r,"name",{value:"SparseMatrix"}),r.prototype.constructor=r,r.prototype.type="SparseMatrix",r.prototype.isSparseMatrix=!0,r.prototype.getDataType=function(){return rm(this._values,Da)},r.prototype.storage=function(){return"sparse"},r.prototype.datatype=function(){return this._datatype},r.prototype.create=function(g,x){return new r(g,x)},r.prototype.density=function(){var g=this._size[0],x=this._size[1];return g!==0&&x!==0?this._index.length/(g*x):0},r.prototype.subset=function(g,x,y){if(!this._values)throw new Error("Cannot invoke subset on a Pattern only matrix");switch(arguments.length){case 1:return a(this,g);case 2:case 3:return l(this,g,x,y);default:throw new SyntaxError("Wrong number of arguments")}};function a(g,x){if(!cA(x))throw new TypeError("Invalid index");var y=x.isScalar();if(y)return g.get(x.min());var _=x.size();if(_.length!==g._size.length)throw new cn(_.length,g._size.length);var w,E,C,M,T=x.min(),R=x.max();for(w=0,E=g._size.length;w<E;w++)Hn(T[w],g._size[w]),Hn(R[w],g._size[w]);var A=g._values,D=g._index,I=g._ptr,L=x.dimension(0),H=x.dimension(1),k=[],$=[];L.forEach(function(W,X){$[W]=X[0],k[W]=!0});var G=A?[]:void 0,J=[],N=[];return H.forEach(function(W){for(N.push(J.length),C=I[W],M=I[W+1];C<M;C++)w=D[C],k[w]===!0&&(J.push($[w]),G&&G.push(A[C]))}),N.push(J.length),new r({values:G,index:J,ptr:N,size:_,datatype:g._datatype})}function l(g,x,y,_){if(!x||x.isIndex!==!0)throw new TypeError("Invalid index");var w=x.size(),E=x.isScalar(),C;if(In(y)?(C=y.size(),y=y.toArray()):C=xi(y),E){if(C.length!==0)throw new TypeError("Scalar expected");g.set(x.min(),y,_)}else{if(w.length!==1&&w.length!==2)throw new cn(w.length,g._size.length,"<");if(C.length<w.length){for(var M=0,T=0;w[M]===1&&C[M]===1;)M++;for(;w[M]===1;)T++,M++;y=rB(y,w.length,T,C)}if(!Nl(w,C))throw new cn(w,C,">");if(w.length===1){var R=x.dimension(0);R.forEach(function(I,L){Hn(I),g.set([I,0],y[L[0]],_)})}else{var A=x.dimension(0),D=x.dimension(1);A.forEach(function(I,L){Hn(I),D.forEach(function(H,k){Hn(H),g.set([I,H],y[L[0]][k[0]],_)})})}}return g}r.prototype.get=function(g){if(!Sn(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new cn(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke get on a Pattern only matrix");var x=g[0],y=g[1];Hn(x,this._size[0]),Hn(y,this._size[1]);var _=u(x,this._ptr[y],this._ptr[y+1],this._index);return _<this._ptr[y+1]&&this._index[_]===x?this._values[_]:0},r.prototype.set=function(g,x,y){if(!Sn(g))throw new TypeError("Array expected");if(g.length!==this._size.length)throw new cn(g.length,this._size.length);if(!this._values)throw new Error("Cannot invoke set on a Pattern only matrix");var _=g[0],w=g[1],E=this._size[0],C=this._size[1],M=t,T=0;ao(this._datatype)&&(M=e.find(t,[this._datatype,this._datatype])||t,T=e.convert(0,this._datatype)),(_>E-1||w>C-1)&&(h(this,Math.max(_+1,E),Math.max(w+1,C),y),E=this._size[0],C=this._size[1]),Hn(_,E),Hn(w,C);var R=u(_,this._ptr[w],this._ptr[w+1],this._index);return R<this._ptr[w+1]&&this._index[R]===_?M(x,T)?c(R,w,this._values,this._index,this._ptr):this._values[R]=x:M(x,T)||f(R,_,w,x,this._values,this._index,this._ptr),this};function u(g,x,y,_){if(y-x===0)return y;for(var w=x;w<y;w++)if(_[w]===g)return w;return x}function c(g,x,y,_,w){y.splice(g,1),_.splice(g,1);for(var E=x+1;E<w.length;E++)w[E]--}function f(g,x,y,_,w,E,C){w.splice(g,0,_),E.splice(g,0,x);for(var M=y+1;M<C.length;M++)C[M]++}r.prototype.resize=function(g,x,y){if(!$y(g))throw new TypeError("Array or Matrix expected");var _=g.valueOf().map(E=>Array.isArray(E)&&E.length===1?E[0]:E);if(_.length!==2)throw new Error("Only two dimensions matrix are supported");_.forEach(function(E){if(!bn(E)||!Vn(E)||E<0)throw new TypeError("Invalid size, must contain positive integers (size: "+zn(_)+")")});var w=y?this.clone():this;return h(w,_[0],_[1],x)};function h(g,x,y,_){var w=_||0,E=t,C=0;ao(g._datatype)&&(E=e.find(t,[g._datatype,g._datatype])||t,C=e.convert(0,g._datatype),w=e.convert(w,g._datatype));var M=!E(w,C),T=g._size[0],R=g._size[1],A,D,I;if(y>R){for(D=R;D<y;D++)if(g._ptr[D]=g._values.length,M)for(A=0;A<T;A++)g._values.push(w),g._index.push(A);g._ptr[y]=g._values.length}else y<R&&(g._ptr.splice(y+1,R-y),g._values.splice(g._ptr[y],g._values.length),g._index.splice(g._ptr[y],g._index.length));if(R=y,x>T){if(M){var L=0;for(D=0;D<R;D++){g._ptr[D]=g._ptr[D]+L,I=g._ptr[D+1]+L;var H=0;for(A=T;A<x;A++,H++)g._values.splice(I+H,0,w),g._index.splice(I+H,0,A),L++}g._ptr[R]=g._values.length}}else if(x<T){var k=0;for(D=0;D<R;D++){g._ptr[D]=g._ptr[D]-k;var $=g._ptr[D],G=g._ptr[D+1]-k;for(I=$;I<G;I++)A=g._index[I],A>x-1&&(g._values.splice(I,1),g._index.splice(I,1),k++)}g._ptr[D]=g._values.length}return g._size[0]=x,g._size[1]=y,g}r.prototype.reshape=function(g,x){if(!Sn(g))throw new TypeError("Array expected");if(g.length!==2)throw new Error("Sparse matrices can only be reshaped in two dimensions");g.forEach(function(W){if(!bn(W)||!Vn(W)||W<=-2||W===0)throw new TypeError("Invalid size, must contain positive integers or -1 (size: "+zn(g)+")")});var y=this._size[0]*this._size[1];g=mA(g,y);var _=g[0]*g[1];if(y!==_)throw new Error("Reshaping sparse matrix will result in the wrong number of elements");var w=x?this.clone():this;if(this._size[0]===g[0]&&this._size[1]===g[1])return w;for(var E=[],C=0;C<w._ptr.length;C++)for(var M=0;M<w._ptr[C+1]-w._ptr[C];M++)E.push(C);for(var T=w._values.slice(),R=w._index.slice(),A=0;A<w._index.length;A++){var D=R[A],I=E[A],L=D*w._size[1]+I;E[A]=L%g[1],R[A]=Math.floor(L/g[1])}w._values.length=0,w._index.length=0,w._ptr.length=g[1]+1,w._size=g.slice();for(var H=0;H<w._ptr.length;H++)w._ptr[H]=0;for(var k=0;k<T.length;k++){var $=R[k],G=E[k],J=T[k],N=u($,w._ptr[G],w._ptr[G+1],w._index);f(N,$,G,J,w._values,w._index,w._ptr)}return w},r.prototype.clone=function(){var g=new r({values:this._values?mn(this._values):void 0,index:mn(this._index),ptr:mn(this._ptr),size:mn(this._size),datatype:this._datatype});return g},r.prototype.size=function(){return this._size.slice(0)},r.prototype.map=function(g,x){if(!this._values)throw new Error("Cannot invoke map on a Pattern only matrix");var y=this,_=this._size[0],w=this._size[1],E=cB(g),C=function(T,R,A){return E===1?g(T):E===2?g(T,[R,A]):g(T,[R,A],y)};return m(this,0,_-1,0,w-1,C,x)};function m(g,x,y,_,w,E,C){var M=[],T=[],R=[],A=t,D=0;ao(g._datatype)&&(A=e.find(t,[g._datatype,g._datatype])||t,D=e.convert(0,g._datatype));for(var I=function(ce,Q,le){ce=E(ce,Q,le),A(ce,D)||(M.push(ce),T.push(Q))},L=_;L<=w;L++){R.push(M.length);var H=g._ptr[L],k=g._ptr[L+1];if(C)for(var $=H;$<k;$++){var G=g._index[$];G>=x&&G<=y&&I(g._values[$],G-x,L-_)}else{for(var J={},N=H;N<k;N++){var W=g._index[N];J[W]=g._values[N]}for(var X=x;X<=y;X++){var ee=X in J?J[X]:0;I(ee,X-x,L-_)}}}return R.push(M.length),new r({values:M,index:T,ptr:R,size:[y-x+1,w-_+1]})}r.prototype.forEach=function(g,x){if(!this._values)throw new Error("Cannot invoke forEach on a Pattern only matrix");for(var y=this,_=this._size[0],w=this._size[1],E=0;E<w;E++){var C=this._ptr[E],M=this._ptr[E+1];if(x)for(var T=C;T<M;T++){var R=this._index[T];g(this._values[T],[R,E],y)}else{for(var A={},D=C;D<M;D++){var I=this._index[D];A[I]=this._values[D]}for(var L=0;L<_;L++){var H=L in A?A[L]:0;g(H,[L,E],y)}}}},r.prototype[Symbol.iterator]=function*(){if(!this._values)throw new Error("Cannot iterate a Pattern only matrix");for(var g=this._size[1],x=0;x<g;x++)for(var y=this._ptr[x],_=this._ptr[x+1],w=y;w<_;w++){var E=this._index[w];yield{value:this._values[w],index:[E,x]}}},r.prototype.toArray=function(){return v(this._values,this._index,this._ptr,this._size,!0)},r.prototype.valueOf=function(){return v(this._values,this._index,this._ptr,this._size,!1)};function v(g,x,y,_,w){var E=_[0],C=_[1],M=[],T,R;for(T=0;T<E;T++)for(M[T]=[],R=0;R<C;R++)M[T][R]=0;for(R=0;R<C;R++)for(var A=y[R],D=y[R+1],I=A;I<D;I++)T=x[I],M[T][R]=g?w?mn(g[I]):g[I]:1;return M}return r.prototype.format=function(g){for(var x=this._size[0],y=this._size[1],_=this.density(),w="Sparse Matrix ["+zn(x,g)+" x "+zn(y,g)+"] density: "+zn(_,g)+`
`,E=0;E<y;E++)for(var C=this._ptr[E],M=this._ptr[E+1],T=C;T<M;T++){var R=this._index[T];w+=`
    (`+zn(R,g)+", "+zn(E,g)+") ==> "+(this._values?zn(this._values[T],g):"X")}return w},r.prototype.toString=function(){return zn(this.toArray())},r.prototype.toJSON=function(){return{mathjs:"SparseMatrix",values:this._values,index:this._index,ptr:this._ptr,size:this._size,datatype:this._datatype}},r.prototype.diagonal=function(g){if(g){if(Gn(g)&&(g=g.toNumber()),!bn(g)||!Vn(g))throw new TypeError("The parameter k must be an integer number")}else g=0;var x=g>0?g:0,y=g<0?-g:0,_=this._size[0],w=this._size[1],E=Math.min(_-y,w-x),C=[],M=[],T=[];T[0]=0;for(var R=x;R<w&&C.length<E;R++)for(var A=this._ptr[R],D=this._ptr[R+1],I=A;I<D;I++){var L=this._index[I];if(L===R-x+y){C.push(this._values[I]),M[C.length-1]=L-y;break}}return T.push(C.length),new r({values:C,index:M,ptr:T,size:[E,1]})},r.fromJSON=function(g){return new r(g)},r.diagonal=function(g,x,y,_,w){if(!Sn(g))throw new TypeError("Array expected, size parameter");if(g.length!==2)throw new Error("Only two dimensions matrix are supported");if(g=g.map(function(W){if(Gn(W)&&(W=W.toNumber()),!bn(W)||!Vn(W)||W<1)throw new Error("Size values must be positive integers");return W}),y){if(Gn(y)&&(y=y.toNumber()),!bn(y)||!Vn(y))throw new TypeError("The parameter k must be an integer number")}else y=0;var E=t,C=0;ao(w)&&(E=e.find(t,[w,w])||t,C=e.convert(0,w));var M=y>0?y:0,T=y<0?-y:0,R=g[0],A=g[1],D=Math.min(R-T,A-M),I;if(Sn(x)){if(x.length!==D)throw new Error("Invalid value array length");I=function(X){return x[X]}}else if(In(x)){var L=x.size();if(L.length!==1||L[0]!==D)throw new Error("Invalid matrix length");I=function(X){return x.get([X])}}else I=function(){return x};for(var H=[],k=[],$=[],G=0;G<A;G++){$.push(H.length);var J=G-M;if(J>=0&&J<D){var N=I(J);E(N,C)||(k.push(J+T),H.push(N))}}return $.push(H.length),new r({values:H,index:k,ptr:$,size:[R,A]})},r.prototype.swapRows=function(g,x){if(!bn(g)||!Vn(g)||!bn(x)||!Vn(x))throw new Error("Row index must be positive integers");if(this._size.length!==2)throw new Error("Only two dimensional matrix is supported");return Hn(g,this._size[0]),Hn(x,this._size[0]),r._swapRows(g,x,this._size[1],this._values,this._index,this._ptr),this},r._forEachRow=function(g,x,y,_,w){for(var E=_[g],C=_[g+1],M=E;M<C;M++)w(y[M],x[M])},r._swapRows=function(g,x,y,_,w,E){for(var C=0;C<y;C++){var M=E[C],T=E[C+1],R=u(g,M,T,w),A=u(x,M,T,w);if(R<T&&A<T&&w[R]===g&&w[A]===x){if(_){var D=_[R];_[R]=_[A],_[A]=D}continue}if(R<T&&w[R]===g&&(A>=T||w[A]!==x)){var I=_?_[R]:void 0;w.splice(A,0,x),_&&_.splice(A,0,I),w.splice(A<=R?R+1:R,1),_&&_.splice(A<=R?R+1:R,1);continue}if(A<T&&w[A]===x&&(R>=T||w[R]!==g)){var L=_?_[A]:void 0;w.splice(R,0,g),_&&_.splice(R,0,L),w.splice(R<=A?A+1:A,1),_&&_.splice(R<=A?A+1:A,1)}}},r},{isClass:!0}),jZ="number",qZ=["typed"];function XZ(n){var e=n.match(/(0[box])([0-9a-fA-F]*)\.([0-9a-fA-F]*)/);if(e){var t={"0b":2,"0o":8,"0x":16}[e[1]],i=e[2],r=e[3];return{input:n,radix:t,integerPart:i,fractionalPart:r}}else return null}function $Z(n){for(var e=parseInt(n.integerPart,n.radix),t=0,i=0;i<n.fractionalPart.length;i++){var r=parseInt(n.fractionalPart[i],n.radix);t+=r/Math.pow(n.radix,i+1)}var s=e+t;if(isNaN(s))throw new SyntaxError('String "'+n.input+'" is not a valid number');return s}var YZ=ot(jZ,qZ,n=>{var{typed:e}=n,t=e("number",{"":function(){return 0},number:function(r){return r},string:function(r){if(r==="NaN")return NaN;var s=XZ(r);if(s)return $Z(s);var o=0,a=r.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);a&&(o=Number(a[2]),r=a[1]);var l=Number(r);if(isNaN(l))throw new SyntaxError('String "'+r+'" is not a valid number');if(a){if(l>2**o-1)throw new SyntaxError('String "'.concat(r,'" is out of range'));l>=2**(o-1)&&(l=l-2**o)}return l},BigNumber:function(r){return r.toNumber()},bigint:function(r){return Number(r)},Fraction:function(r){return r.valueOf()},Unit:e.referToSelf(i=>r=>{var s=r.clone();return s.value=i(r.value),s}),null:function(r){return 0},"Unit, string | Unit":function(r,s){return r.toNumber(s)},"Array | Matrix":e.referToSelf(i=>r=>Yr(r,i))});return t.fromJSON=function(i){return parseFloat(i.value)},t}),ZZ="bignumber",KZ=["typed","BigNumber"],JZ=ot(ZZ,KZ,n=>{var{typed:e,BigNumber:t}=n;return e("bignumber",{"":function(){return new t(0)},number:function(r){return new t(r+"")},string:function(r){var s=r.match(/(0[box][0-9a-fA-F]*)i([0-9]*)/);if(s){var o=s[2],a=t(s[1]),l=new t(2).pow(Number(o));if(a.gt(l.sub(1)))throw new SyntaxError('String "'.concat(r,'" is out of range'));var u=new t(2).pow(Number(o)-1);return a.gte(u)?a.sub(l):a}return new t(r)},BigNumber:function(r){return r},bigint:function(r){return new t(r.toString())},Unit:e.referToSelf(i=>r=>{var s=r.clone();return s.value=i(r.value),s}),Fraction:function(r){return new t(r.n).div(r.d).times(r.s)},null:function(r){return new t(0)},"Array | Matrix":e.referToSelf(i=>r=>Yr(r,i))})}),QZ="complex",eK=["typed","Complex"],tK=ot(QZ,eK,n=>{var{typed:e,Complex:t}=n;return e("complex",{"":function(){return t.ZERO},number:function(r){return new t(r,0)},"number, number":function(r,s){return new t(r,s)},"BigNumber, BigNumber":function(r,s){return new t(r.toNumber(),s.toNumber())},Fraction:function(r){return new t(r.valueOf(),0)},Complex:function(r){return r.clone()},string:function(r){return t(r)},null:function(r){return t(0)},Object:function(r){if("re"in r&&"im"in r)return new t(r.re,r.im);if("r"in r&&"phi"in r||"abs"in r&&"arg"in r)return new t(r);throw new Error("Expected object with properties (re and im) or (r and phi) or (abs and arg)")},"Array | Matrix":e.referToSelf(i=>r=>Yr(r,i))})}),nK="fraction",iK=["typed","Fraction"],rK=ot(nK,iK,n=>{var{typed:e,Fraction:t}=n;return e("fraction",{number:function(r){if(!isFinite(r)||isNaN(r))throw new Error(r+" cannot be represented as a fraction");return new t(r)},string:function(r){return new t(r)},"number, number":function(r,s){return new t(r,s)},null:function(r){return new t(0)},BigNumber:function(r){return new t(r.toString())},bigint:function(r){return new t(r.toString())},Fraction:function(r){return r},Unit:e.referToSelf(i=>r=>{var s=r.clone();return s.value=i(r.value),s}),Object:function(r){return new t(r)},"Array | Matrix":e.referToSelf(i=>r=>Yr(r,i))})}),gR="matrix",sK=["typed","Matrix","DenseMatrix","SparseMatrix"],oK=ot(gR,sK,n=>{var{typed:e,Matrix:t,DenseMatrix:i,SparseMatrix:r}=n;return e(gR,{"":function(){return s([])},string:function(a){return s([],a)},"string, string":function(a,l){return s([],a,l)},Array:function(a){return s(a)},Matrix:function(a){return s(a,a.storage())},"Array | Matrix, string":s,"Array | Matrix, string, string":s});function s(o,a,l){if(a==="dense"||a==="default"||a===void 0)return new i(o,l);if(a==="sparse")return new r(o,l);throw new TypeError("Unknown matrix type "+JSON.stringify(a)+".")}}),vR="matrixFromColumns",aK=["typed","matrix","flatten","size"],lK=ot(vR,aK,n=>{var{typed:e,matrix:t,flatten:i,size:r}=n;return e(vR,{"...Array":function(l){return s(l)},"...Matrix":function(l){return t(s(l.map(u=>u.toArray())))}});function s(a){if(a.length===0)throw new TypeError("At least one column is needed to construct a matrix.");for(var l=o(a[0]),u=[],c=0;c<l;c++)u[c]=[];for(var f of a){var h=o(f);if(h!==l)throw new TypeError("The vectors had different length: "+(l|0)+"  "+(h|0));for(var m=i(f),v=0;v<l;v++)u[v].push(m[v])}return u}function o(a){var l=r(a);if(l.length===1)return l[0];if(l.length===2){if(l[0]===1)return l[1];if(l[1]===1)return l[0];throw new TypeError("At least one of the arguments is not a vector.")}else throw new TypeError("Only one- or two-dimensional vectors are supported.")}}),yR="unaryMinus",uK=["typed"],cK=ot(yR,uK,n=>{var{typed:e}=n;return e(yR,{number:mB,"Complex | BigNumber | Fraction":t=>t.neg(),bigint:t=>-t,Unit:e.referToSelf(t=>i=>{var r=i.clone();return r.value=e.find(t,r.valueType())(i.value),r}),"Array | Matrix":e.referToSelf(t=>i=>Yr(i,t))})}),xR="abs",fK=["typed"],hK=ot(xR,fK,n=>{var{typed:e}=n;return e(xR,{number:fB,"Complex | BigNumber | Fraction | Unit":t=>t.abs(),bigint:t=>t<0n?-t:t,"Array | Matrix":e.referToSelf(t=>i=>Yr(i,t))})}),_R="addScalar",dK=["typed"],pK=ot(_R,dK,n=>{var{typed:e}=n;return e(_R,{"number, number":hB,"Complex, Complex":function(i,r){return i.add(r)},"BigNumber, BigNumber":function(i,r){return i.plus(r)},"bigint, bigint":function(i,r){return i+r},"Fraction, Fraction":function(i,r){return i.add(r)},"Unit, Unit":e.referToSelf(t=>(i,r)=>{if(i.value===null||i.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(r.value===null||r.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!i.equalBase(r))throw new Error("Units do not match");var s=i.clone();return s.value=e.find(t,[s.valueType(),r.valueType()])(s.value,r.value),s.fixPrefix=!1,s})})}),wR="subtractScalar",mK=["typed"],gK=ot(wR,mK,n=>{var{typed:e}=n;return e(wR,{"number, number":dB,"Complex, Complex":function(i,r){return i.sub(r)},"BigNumber, BigNumber":function(i,r){return i.minus(r)},"bigint, bigint":function(i,r){return i-r},"Fraction, Fraction":function(i,r){return i.sub(r)},"Unit, Unit":e.referToSelf(t=>(i,r)=>{if(i.value===null||i.value===void 0)throw new Error("Parameter x contains a unit with undefined value");if(r.value===null||r.value===void 0)throw new Error("Parameter y contains a unit with undefined value");if(!i.equalBase(r))throw new Error("Units do not match");var s=i.clone();return s.value=e.find(t,[s.valueType(),r.valueType()])(s.value,r.value),s.fixPrefix=!1,s})})}),vK="matAlgo11xS0s",yK=["typed","equalScalar"],vB=ot(vK,yK,n=>{var{typed:e,equalScalar:t}=n;return function(r,s,o,a){var l=r._values,u=r._index,c=r._ptr,f=r._size,h=r._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=f[0],v=f[1],g,x=t,y=0,_=o;typeof h=="string"&&(g=h,x=e.find(t,[g,g]),y=e.convert(0,g),s=e.convert(s,g),_=e.find(o,[g,g]));for(var w=[],E=[],C=[],M=0;M<v;M++){C[M]=E.length;for(var T=c[M],R=c[M+1],A=T;A<R;A++){var D=u[A],I=a?_(s,l[A]):_(l[A],s);x(I,y)||(E.push(D),w.push(I))}}return C[v]=E.length,r.createSparseMatrix({values:w,index:E,ptr:C,size:[m,v],datatype:g})}}),xK="matAlgo12xSfs",_K=["typed","DenseMatrix"],Bh=ot(xK,_K,n=>{var{typed:e,DenseMatrix:t}=n;return function(r,s,o,a){var l=r._values,u=r._index,c=r._ptr,f=r._size,h=r._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=f[0],v=f[1],g,x=o;typeof h=="string"&&(g=h,s=e.convert(s,g),x=e.find(o,[g,g]));for(var y=[],_=[],w=[],E=0;E<v;E++){for(var C=E+1,M=c[E],T=c[E+1],R=M;R<T;R++){var A=u[R];_[A]=l[R],w[A]=C}for(var D=0;D<m;D++)E===0&&(y[D]=[]),w[D]===C?y[D][E]=a?x(s,_[D]):x(_[D],s):y[D][E]=a?x(s,0):x(0,s)}return new t({data:y,size:[m,v],datatype:g})}}),wK="matAlgo14xDs",SK=["typed"],yB=ot(wK,SK,n=>{var{typed:e}=n;return function(r,s,o,a){var l=r._data,u=r._size,c=r._datatype,f,h=o;typeof c=="string"&&(f=c,s=e.convert(s,f),h=e.find(o,[f,f]));var m=u.length>0?t(h,0,u,u[0],l,s,a):[];return r.createDenseMatrix({data:m,size:mn(u),datatype:f})};function t(i,r,s,o,a,l,u){var c=[];if(r===s.length-1)for(var f=0;f<o;f++)c[f]=u?i(l,a[f]):i(a[f],l);else for(var h=0;h<o;h++)c[h]=t(i,r+1,s,s[r+1],a[h],l,u);return c}}),MK="matAlgo02xDS0",EK=["typed","equalScalar"],bK=ot(MK,EK,n=>{var{typed:e,equalScalar:t}=n;return function(r,s,o,a){var l=r._data,u=r._size,c=r._datatype||r.getDataType(),f=s._values,h=s._index,m=s._ptr,v=s._size,g=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(u.length!==v.length)throw new cn(u.length,v.length);if(u[0]!==v[0]||u[1]!==v[1])throw new RangeError("Dimension mismatch. Matrix A ("+u+") must match Matrix B ("+v+")");if(!f)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var x=u[0],y=u[1],_,w=t,E=0,C=o;typeof c=="string"&&c===g&&c!=="mixed"&&(_=c,w=e.find(t,[_,_]),E=e.convert(0,_),C=e.find(o,[_,_]));for(var M=[],T=[],R=[],A=0;A<y;A++){R[A]=T.length;for(var D=m[A],I=m[A+1],L=D;L<I;L++){var H=h[L],k=a?C(f[L],l[H][A]):C(l[H][A],f[L]);w(k,E)||(T.push(H),M.push(k))}}return R[y]=T.length,s.createSparseMatrix({values:M,index:T,ptr:R,size:[x,y],datatype:c===r._datatype&&g===s._datatype?_:void 0})}}),AK="matAlgo03xDSf",CK=["typed"],Uh=ot(AK,CK,n=>{var{typed:e}=n;return function(i,r,s,o){var a=i._data,l=i._size,u=i._datatype||i.getDataType(),c=r._values,f=r._index,h=r._ptr,m=r._size,v=r._datatype||r._data===void 0?r._datatype:r.getDataType();if(l.length!==m.length)throw new cn(l.length,m.length);if(l[0]!==m[0]||l[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+m+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=l[0],x=l[1],y,_=0,w=s;typeof u=="string"&&u===v&&u!=="mixed"&&(y=u,_=e.convert(0,y),w=e.find(s,[y,y]));for(var E=[],C=0;C<g;C++)E[C]=[];for(var M=[],T=[],R=0;R<x;R++){for(var A=R+1,D=h[R],I=h[R+1],L=D;L<I;L++){var H=f[L];M[H]=o?w(c[L],a[H][R]):w(a[H][R],c[L]),T[H]=A}for(var k=0;k<g;k++)T[k]===A?E[k][R]=M[k]:E[k][R]=o?w(_,a[k][R]):w(a[k][R],_)}return i.createDenseMatrix({data:E,size:[g,x],datatype:u===i._datatype&&v===r._datatype?y:void 0})}}),DK="matAlgo05xSfSf",TK=["typed","equalScalar"],PK=ot(DK,TK,n=>{var{typed:e,equalScalar:t}=n;return function(r,s,o){var a=r._values,l=r._index,u=r._ptr,c=r._size,f=r._datatype||r._data===void 0?r._datatype:r.getDataType(),h=s._values,m=s._index,v=s._ptr,g=s._size,x=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==g.length)throw new cn(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");var y=c[0],_=c[1],w,E=t,C=0,M=o;typeof f=="string"&&f===x&&f!=="mixed"&&(w=f,E=e.find(t,[w,w]),C=e.convert(0,w),M=e.find(o,[w,w]));var T=a&&h?[]:void 0,R=[],A=[],D=T?[]:void 0,I=T?[]:void 0,L=[],H=[],k,$,G,J;for($=0;$<_;$++){A[$]=R.length;var N=$+1;for(G=u[$],J=u[$+1];G<J;G++)k=l[G],R.push(k),L[k]=N,D&&(D[k]=a[G]);for(G=v[$],J=v[$+1];G<J;G++)k=m[G],L[k]!==N&&R.push(k),H[k]=N,I&&(I[k]=h[G]);if(T)for(G=A[$];G<R.length;){k=R[G];var W=L[k],X=H[k];if(W===N||X===N){var ee=W===N?D[k]:C,te=X===N?I[k]:C,ce=M(ee,te);E(ce,C)?R.splice(G,1):(T.push(ce),G++)}}}return A[_]=R.length,r.createSparseMatrix({values:T,index:R,ptr:A,size:[y,_],datatype:f===r._datatype&&x===s._datatype?w:void 0})}}),RK="matAlgo13xDD",IK=["typed"],FK=ot(RK,IK,n=>{var{typed:e}=n;return function(r,s,o){var a=r._data,l=r._size,u=r._datatype,c=s._data,f=s._size,h=s._datatype,m=[];if(l.length!==f.length)throw new cn(l.length,f.length);for(var v=0;v<l.length;v++){if(l[v]!==f[v])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+f+")");m[v]=l[v]}var g,x=o;typeof u=="string"&&u===h&&(g=u,x=e.find(o,[g,g]));var y=m.length>0?t(x,0,m,m[0],a,c):[];return r.createDenseMatrix({data:y,size:m,datatype:g})};function t(i,r,s,o,a,l){var u=[];if(r===s.length-1)for(var c=0;c<o;c++)u[c]=i(a[c],l[c]);else for(var f=0;f<o;f++)u[f]=t(i,r+1,s,s[r+1],a[f],l[f]);return u}});function Ni(n,e){if(Nl(n.size(),e.size()))return[n,e];var t=lB(n.size(),e.size());return[n,e].map(i=>NK(i,t))}function NK(n,e){return Nl(n.size(),e)?n:n.create(eE(n.valueOf(),e),n.datatype())}var LK="matrixAlgorithmSuite",OK=["typed","matrix"],$l=ot(LK,OK,n=>{var{typed:e,matrix:t}=n,i=FK({typed:e}),r=yB({typed:e});return function(o){var a=o.elop,l=o.SD||o.DS,u;a?(u={"DenseMatrix, DenseMatrix":(m,v)=>i(...Ni(m,v),a),"Array, Array":(m,v)=>i(...Ni(t(m),t(v)),a).valueOf(),"Array, DenseMatrix":(m,v)=>i(...Ni(t(m),v),a),"DenseMatrix, Array":(m,v)=>i(...Ni(m,t(v)),a)},o.SS&&(u["SparseMatrix, SparseMatrix"]=(m,v)=>o.SS(...Ni(m,v),a,!1)),o.DS&&(u["DenseMatrix, SparseMatrix"]=(m,v)=>o.DS(...Ni(m,v),a,!1),u["Array, SparseMatrix"]=(m,v)=>o.DS(...Ni(t(m),v),a,!1)),l&&(u["SparseMatrix, DenseMatrix"]=(m,v)=>l(...Ni(v,m),a,!0),u["SparseMatrix, Array"]=(m,v)=>l(...Ni(t(v),m),a,!0))):(u={"DenseMatrix, DenseMatrix":e.referToSelf(m=>(v,g)=>i(...Ni(v,g),m)),"Array, Array":e.referToSelf(m=>(v,g)=>i(...Ni(t(v),t(g)),m).valueOf()),"Array, DenseMatrix":e.referToSelf(m=>(v,g)=>i(...Ni(t(v),g),m)),"DenseMatrix, Array":e.referToSelf(m=>(v,g)=>i(...Ni(v,t(g)),m))},o.SS&&(u["SparseMatrix, SparseMatrix"]=e.referToSelf(m=>(v,g)=>o.SS(...Ni(v,g),m,!1))),o.DS&&(u["DenseMatrix, SparseMatrix"]=e.referToSelf(m=>(v,g)=>o.DS(...Ni(v,g),m,!1)),u["Array, SparseMatrix"]=e.referToSelf(m=>(v,g)=>o.DS(...Ni(t(v),g),m,!1))),l&&(u["SparseMatrix, DenseMatrix"]=e.referToSelf(m=>(v,g)=>l(...Ni(g,v),m,!0)),u["SparseMatrix, Array"]=e.referToSelf(m=>(v,g)=>l(...Ni(t(g),v),m,!0))));var c=o.scalar||"any",f=o.Ds||o.Ss;f&&(a?(u["DenseMatrix,"+c]=(m,v)=>r(m,v,a,!1),u[c+", DenseMatrix"]=(m,v)=>r(v,m,a,!0),u["Array,"+c]=(m,v)=>r(t(m),v,a,!1).valueOf(),u[c+", Array"]=(m,v)=>r(t(v),m,a,!0).valueOf()):(u["DenseMatrix,"+c]=e.referToSelf(m=>(v,g)=>r(v,g,m,!1)),u[c+", DenseMatrix"]=e.referToSelf(m=>(v,g)=>r(g,v,m,!0)),u["Array,"+c]=e.referToSelf(m=>(v,g)=>r(t(v),g,m,!1).valueOf()),u[c+", Array"]=e.referToSelf(m=>(v,g)=>r(t(g),v,m,!0).valueOf())));var h=o.sS!==void 0?o.sS:o.Ss;return a?(o.Ss&&(u["SparseMatrix,"+c]=(m,v)=>o.Ss(m,v,a,!1)),h&&(u[c+", SparseMatrix"]=(m,v)=>h(v,m,a,!0))):(o.Ss&&(u["SparseMatrix,"+c]=e.referToSelf(m=>(v,g)=>o.Ss(v,g,m,!1))),h&&(u[c+", SparseMatrix"]=e.referToSelf(m=>(v,g)=>h(g,v,m,!0)))),a&&a.signatures&&k$(u,a.signatures),u}}),zK="matAlgo01xDSid",BK=["typed"],xB=ot(zK,BK,n=>{var{typed:e}=n;return function(i,r,s,o){var a=i._data,l=i._size,u=i._datatype||i.getDataType(),c=r._values,f=r._index,h=r._ptr,m=r._size,v=r._datatype||r._data===void 0?r._datatype:r.getDataType();if(l.length!==m.length)throw new cn(l.length,m.length);if(l[0]!==m[0]||l[1]!==m[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+m+")");if(!c)throw new Error("Cannot perform operation on Dense Matrix and Pattern Sparse Matrix");var g=l[0],x=l[1],y=typeof u=="string"&&u!=="mixed"&&u===v?u:void 0,_=y?e.find(s,[y,y]):s,w,E,C=[];for(w=0;w<g;w++)C[w]=[];var M=[],T=[];for(E=0;E<x;E++){for(var R=E+1,A=h[E],D=h[E+1],I=A;I<D;I++)w=f[I],M[w]=o?_(c[I],a[w][E]):_(a[w][E],c[I]),T[w]=R;for(w=0;w<g;w++)T[w]===R?C[w][E]=M[w]:C[w][E]=a[w][E]}return i.createDenseMatrix({data:C,size:[g,x],datatype:u===i._datatype&&v===r._datatype?y:void 0})}}),UK="matAlgo04xSidSid",kK=["typed","equalScalar"],HK=ot(UK,kK,n=>{var{typed:e,equalScalar:t}=n;return function(r,s,o){var a=r._values,l=r._index,u=r._ptr,c=r._size,f=r._datatype||r._data===void 0?r._datatype:r.getDataType(),h=s._values,m=s._index,v=s._ptr,g=s._size,x=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==g.length)throw new cn(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");var y=c[0],_=c[1],w,E=t,C=0,M=o;typeof f=="string"&&f===x&&f!=="mixed"&&(w=f,E=e.find(t,[w,w]),C=e.convert(0,w),M=e.find(o,[w,w]));var T=a&&h?[]:void 0,R=[],A=[],D=a&&h?[]:void 0,I=a&&h?[]:void 0,L=[],H=[],k,$,G,J,N;for($=0;$<_;$++){A[$]=R.length;var W=$+1;for(J=u[$],N=u[$+1],G=J;G<N;G++)k=l[G],R.push(k),L[k]=W,D&&(D[k]=a[G]);for(J=v[$],N=v[$+1],G=J;G<N;G++)if(k=m[G],L[k]===W){if(D){var X=M(D[k],h[G]);E(X,C)?L[k]=null:D[k]=X}}else R.push(k),H[k]=W,I&&(I[k]=h[G]);if(D&&I)for(G=A[$];G<R.length;)k=R[G],L[k]===W?(T[G]=D[k],G++):H[k]===W?(T[G]=I[k],G++):R.splice(G,1)}return A[_]=R.length,r.createSparseMatrix({values:T,index:R,ptr:A,size:[y,_],datatype:f===r._datatype&&x===s._datatype?w:void 0})}}),VK="matAlgo10xSids",WK=["typed","DenseMatrix"],_B=ot(VK,WK,n=>{var{typed:e,DenseMatrix:t}=n;return function(r,s,o,a){var l=r._values,u=r._index,c=r._ptr,f=r._size,h=r._datatype;if(!l)throw new Error("Cannot perform operation on Pattern Sparse Matrix and Scalar value");var m=f[0],v=f[1],g,x=o;typeof h=="string"&&(g=h,s=e.convert(s,g),x=e.find(o,[g,g]));for(var y=[],_=[],w=[],E=0;E<v;E++){for(var C=E+1,M=c[E],T=c[E+1],R=M;R<T;R++){var A=u[R];_[A]=l[R],w[A]=C}for(var D=0;D<m;D++)E===0&&(y[D]=[]),w[D]===C?y[D][E]=a?x(s,_[D]):x(_[D],s):y[D][E]=s}return new t({data:y,size:[m,v],datatype:g})}}),GK="multiplyScalar",jK=["typed"],qK=ot(GK,jK,n=>{var{typed:e}=n;return e("multiplyScalar",{"number, number":pB,"Complex, Complex":function(i,r){return i.mul(r)},"BigNumber, BigNumber":function(i,r){return i.times(r)},"bigint, bigint":function(i,r){return i*r},"Fraction, Fraction":function(i,r){return i.mul(r)},"number | Fraction | BigNumber | Complex, Unit":(t,i)=>i.multiply(t),"Unit, number | Fraction | BigNumber | Complex | Unit":(t,i)=>t.multiply(i)})}),SR="multiply",XK=["typed","matrix","addScalar","multiplyScalar","equalScalar","dot"],$K=ot(SR,XK,n=>{var{typed:e,matrix:t,addScalar:i,multiplyScalar:r,equalScalar:s,dot:o}=n,a=vB({typed:e,equalScalar:s}),l=yB({typed:e});function u(C,M){switch(C.length){case 1:switch(M.length){case 1:if(C[0]!==M[0])throw new RangeError("Dimension mismatch in multiplication. Vectors must have the same length");break;case 2:if(C[0]!==M[0])throw new RangeError("Dimension mismatch in multiplication. Vector length ("+C[0]+") must match Matrix rows ("+M[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+M.length+" dimensions)")}break;case 2:switch(M.length){case 1:if(C[1]!==M[0])throw new RangeError("Dimension mismatch in multiplication. Matrix columns ("+C[1]+") must match Vector length ("+M[0]+")");break;case 2:if(C[1]!==M[0])throw new RangeError("Dimension mismatch in multiplication. Matrix A columns ("+C[1]+") must match Matrix B rows ("+M[0]+")");break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix B has "+M.length+" dimensions)")}break;default:throw new Error("Can only multiply a 1 or 2 dimensional matrix (Matrix A has "+C.length+" dimensions)")}}function c(C,M,T){if(T===0)throw new Error("Cannot multiply two empty vectors");return o(C,M)}function f(C,M){if(M.storage()!=="dense")throw new Error("Support for SparseMatrix not implemented");return h(C,M)}function h(C,M){var T=C._data,R=C._size,A=C._datatype||C.getDataType(),D=M._data,I=M._size,L=M._datatype||M.getDataType(),H=R[0],k=I[1],$,G=i,J=r;A&&L&&A===L&&typeof A=="string"&&A!=="mixed"&&($=A,G=e.find(i,[$,$]),J=e.find(r,[$,$]));for(var N=[],W=0;W<k;W++){for(var X=J(T[0],D[0][W]),ee=1;ee<H;ee++)X=G(X,J(T[ee],D[ee][W]));N[W]=X}return C.createDenseMatrix({data:N,size:[k],datatype:A===C._datatype&&L===M._datatype?$:void 0})}var m=e("_multiplyMatrixVector",{"DenseMatrix, any":g,"SparseMatrix, any":_}),v=e("_multiplyMatrixMatrix",{"DenseMatrix, DenseMatrix":x,"DenseMatrix, SparseMatrix":y,"SparseMatrix, DenseMatrix":w,"SparseMatrix, SparseMatrix":E});function g(C,M){var T=C._data,R=C._size,A=C._datatype||C.getDataType(),D=M._data,I=M._datatype||M.getDataType(),L=R[0],H=R[1],k,$=i,G=r;A&&I&&A===I&&typeof A=="string"&&A!=="mixed"&&(k=A,$=e.find(i,[k,k]),G=e.find(r,[k,k]));for(var J=[],N=0;N<L;N++){for(var W=T[N],X=G(W[0],D[0]),ee=1;ee<H;ee++)X=$(X,G(W[ee],D[ee]));J[N]=X}return C.createDenseMatrix({data:J,size:[L],datatype:A===C._datatype&&I===M._datatype?k:void 0})}function x(C,M){var T=C._data,R=C._size,A=C._datatype||C.getDataType(),D=M._data,I=M._size,L=M._datatype||M.getDataType(),H=R[0],k=R[1],$=I[1],G,J=i,N=r;A&&L&&A===L&&typeof A=="string"&&A!=="mixed"&&A!=="mixed"&&(G=A,J=e.find(i,[G,G]),N=e.find(r,[G,G]));for(var W=[],X=0;X<H;X++){var ee=T[X];W[X]=[];for(var te=0;te<$;te++){for(var ce=N(ee[0],D[0][te]),Q=1;Q<k;Q++)ce=J(ce,N(ee[Q],D[Q][te]));W[X][te]=ce}}return C.createDenseMatrix({data:W,size:[H,$],datatype:A===C._datatype&&L===M._datatype?G:void 0})}function y(C,M){var T=C._data,R=C._size,A=C._datatype||C.getDataType(),D=M._values,I=M._index,L=M._ptr,H=M._size,k=M._datatype||M._data===void 0?M._datatype:M.getDataType();if(!D)throw new Error("Cannot multiply Dense Matrix times Pattern only Matrix");var $=R[0],G=H[1],J,N=i,W=r,X=s,ee=0;A&&k&&A===k&&typeof A=="string"&&A!=="mixed"&&(J=A,N=e.find(i,[J,J]),W=e.find(r,[J,J]),X=e.find(s,[J,J]),ee=e.convert(0,J));for(var te=[],ce=[],Q=[],le=M.createSparseMatrix({values:te,index:ce,ptr:Q,size:[$,G],datatype:A===C._datatype&&k===M._datatype?J:void 0}),pe=0;pe<G;pe++){Q[pe]=ce.length;var ae=L[pe],Te=L[pe+1];if(Te>ae)for(var Pe=0,Ae=0;Ae<$;Ae++){for(var We=Ae+1,z=void 0,Se=ae;Se<Te;Se++){var De=I[Se];Pe!==We?(z=W(T[Ae][De],D[Se]),Pe=We):z=N(z,W(T[Ae][De],D[Se]))}Pe===We&&!X(z,ee)&&(ce.push(Ae),te.push(z))}}return Q[G]=ce.length,le}function _(C,M){var T=C._values,R=C._index,A=C._ptr,D=C._datatype||C._data===void 0?C._datatype:C.getDataType();if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var I=M._data,L=M._datatype||M.getDataType(),H=C._size[0],k=M._size[0],$=[],G=[],J=[],N,W=i,X=r,ee=s,te=0;D&&L&&D===L&&typeof D=="string"&&D!=="mixed"&&(N=D,W=e.find(i,[N,N]),X=e.find(r,[N,N]),ee=e.find(s,[N,N]),te=e.convert(0,N));var ce=[],Q=[];J[0]=0;for(var le=0;le<k;le++){var pe=I[le];if(!ee(pe,te))for(var ae=A[le],Te=A[le+1],Pe=ae;Pe<Te;Pe++){var Ae=R[Pe];Q[Ae]?ce[Ae]=W(ce[Ae],X(pe,T[Pe])):(Q[Ae]=!0,G.push(Ae),ce[Ae]=X(pe,T[Pe]))}}for(var We=G.length,z=0;z<We;z++){var Se=G[z];$[z]=ce[Se]}return J[1]=G.length,C.createSparseMatrix({values:$,index:G,ptr:J,size:[H,1],datatype:D===C._datatype&&L===M._datatype?N:void 0})}function w(C,M){var T=C._values,R=C._index,A=C._ptr,D=C._datatype||C._data===void 0?C._datatype:C.getDataType();if(!T)throw new Error("Cannot multiply Pattern only Matrix times Dense Matrix");var I=M._data,L=M._datatype||M.getDataType(),H=C._size[0],k=M._size[0],$=M._size[1],G,J=i,N=r,W=s,X=0;D&&L&&D===L&&typeof D=="string"&&D!=="mixed"&&(G=D,J=e.find(i,[G,G]),N=e.find(r,[G,G]),W=e.find(s,[G,G]),X=e.convert(0,G));for(var ee=[],te=[],ce=[],Q=C.createSparseMatrix({values:ee,index:te,ptr:ce,size:[H,$],datatype:D===C._datatype&&L===M._datatype?G:void 0}),le=[],pe=[],ae=0;ae<$;ae++){ce[ae]=te.length;for(var Te=ae+1,Pe=0;Pe<k;Pe++){var Ae=I[Pe][ae];if(!W(Ae,X))for(var We=A[Pe],z=A[Pe+1],Se=We;Se<z;Se++){var De=R[Se];pe[De]!==Te?(pe[De]=Te,te.push(De),le[De]=N(Ae,T[Se])):le[De]=J(le[De],N(Ae,T[Se]))}}for(var ke=ce[ae],Me=te.length,Qe=ke;Qe<Me;Qe++){var Ge=te[Qe];ee[Qe]=le[Ge]}}return ce[$]=te.length,Q}function E(C,M){var T=C._values,R=C._index,A=C._ptr,D=C._datatype||C._data===void 0?C._datatype:C.getDataType(),I=M._values,L=M._index,H=M._ptr,k=M._datatype||M._data===void 0?M._datatype:M.getDataType(),$=C._size[0],G=M._size[1],J=T&&I,N,W=i,X=r;D&&k&&D===k&&typeof D=="string"&&D!=="mixed"&&(N=D,W=e.find(i,[N,N]),X=e.find(r,[N,N]));for(var ee=J?[]:void 0,te=[],ce=[],Q=C.createSparseMatrix({values:ee,index:te,ptr:ce,size:[$,G],datatype:D===C._datatype&&k===M._datatype?N:void 0}),le=J?[]:void 0,pe=[],ae,Te,Pe,Ae,We,z,Se,De,ke=0;ke<G;ke++){ce[ke]=te.length;var Me=ke+1;for(We=H[ke],z=H[ke+1],Ae=We;Ae<z;Ae++)if(De=L[Ae],J)for(Te=A[De],Pe=A[De+1],ae=Te;ae<Pe;ae++)Se=R[ae],pe[Se]!==Me?(pe[Se]=Me,te.push(Se),le[Se]=X(I[Ae],T[ae])):le[Se]=W(le[Se],X(I[Ae],T[ae]));else for(Te=A[De],Pe=A[De+1],ae=Te;ae<Pe;ae++)Se=R[ae],pe[Se]!==Me&&(pe[Se]=Me,te.push(Se));if(J)for(var Qe=ce[ke],Ge=te.length,Ze=Qe;Ze<Ge;Ze++){var Y=te[Ze];ee[Ze]=le[Y]}}return ce[G]=te.length,Q}return e(SR,r,{"Array, Array":e.referTo("Matrix, Matrix",C=>(M,T)=>{u(xi(M),xi(T));var R=C(t(M),t(T));return In(R)?R.valueOf():R}),"Matrix, Matrix":function(M,T){var R=M.size(),A=T.size();return u(R,A),R.length===1?A.length===1?c(M,T,R[0]):f(M,T):A.length===1?m(M,T):v(M,T)},"Matrix, Array":e.referTo("Matrix,Matrix",C=>(M,T)=>C(M,t(T))),"Array, Matrix":e.referToSelf(C=>(M,T)=>C(t(M,T.storage()),T)),"SparseMatrix, any":function(M,T){return a(M,T,r,!1)},"DenseMatrix, any":function(M,T){return l(M,T,r,!1)},"any, SparseMatrix":function(M,T){return a(T,M,r,!0)},"any, DenseMatrix":function(M,T){return l(T,M,r,!0)},"Array, any":function(M,T){return l(t(M),T,r,!1).valueOf()},"any, Array":function(M,T){return l(t(T),M,r,!0).valueOf()},"any, any":r,"any, any, ...any":e.referToSelf(C=>(M,T,R)=>{for(var A=C(M,T),D=0;D<R.length;D++)A=C(A,R[D]);return A})})}),MR="sign",YK=["typed","BigNumber","Fraction","complex"],ZK=ot(MR,YK,n=>{var{typed:e,BigNumber:t,complex:i,Fraction:r}=n;return e(MR,{number:tE,Complex:function(o){return o.im===0?i(tE(o.re)):o.sign()},BigNumber:function(o){return new t(o.cmp(0))},bigint:function(o){return o>0n?1n:o<0n?-1n:0n},Fraction:function(o){return new r(o.s,1)},"Array | Matrix":e.referToSelf(s=>o=>Yr(o,s)),Unit:e.referToSelf(s=>o=>{if(!o._isDerived()&&o.units[0].unit.offset!==0)throw new TypeError("sign is ambiguous for units with offset");return e.find(s,o.valueType())(o.value)})})}),KK="sqrt",JK=["config","typed","Complex"],QK=ot(KK,JK,n=>{var{config:e,typed:t,Complex:i}=n;return t("sqrt",{number:r,Complex:function(o){return o.sqrt()},BigNumber:function(o){return!o.isNegative()||e.predictable?o.sqrt():r(o.toNumber())},Unit:function(o){return o.pow(.5)}});function r(s){return isNaN(s)?NaN:s>=0||e.predictable?Math.sqrt(s):new i(s,0).sqrt()}}),ER="subtract",eJ=["typed","matrix","equalScalar","subtractScalar","unaryMinus","DenseMatrix","concat"],tJ=ot(ER,eJ,n=>{var{typed:e,matrix:t,equalScalar:i,subtractScalar:r,unaryMinus:s,DenseMatrix:o,concat:a}=n,l=xB({typed:e}),u=Uh({typed:e}),c=PK({typed:e,equalScalar:i}),f=_B({typed:e,DenseMatrix:o}),h=Bh({typed:e,DenseMatrix:o}),m=$l({typed:e,matrix:t,concat:a});return e(ER,{"any, any":r},m({elop:r,SS:c,DS:l,SD:u,Ss:h,sS:f}))}),nJ="matAlgo09xS0Sf",iJ=["typed","equalScalar"],rJ=ot(nJ,iJ,n=>{var{typed:e,equalScalar:t}=n;return function(r,s,o){var a=r._values,l=r._index,u=r._ptr,c=r._size,f=r._datatype||r._data===void 0?r._datatype:r.getDataType(),h=s._values,m=s._index,v=s._ptr,g=s._size,x=s._datatype||s._data===void 0?s._datatype:s.getDataType();if(c.length!==g.length)throw new cn(c.length,g.length);if(c[0]!==g[0]||c[1]!==g[1])throw new RangeError("Dimension mismatch. Matrix A ("+c+") must match Matrix B ("+g+")");var y=c[0],_=c[1],w,E=t,C=0,M=o;typeof f=="string"&&f===x&&f!=="mixed"&&(w=f,E=e.find(t,[w,w]),C=e.convert(0,w),M=e.find(o,[w,w]));var T=a&&h?[]:void 0,R=[],A=[],D=T?[]:void 0,I=[],L,H,k,$,G;for(H=0;H<_;H++){A[H]=R.length;var J=H+1;if(D)for($=v[H],G=v[H+1],k=$;k<G;k++)L=m[k],I[L]=J,D[L]=h[k];for($=u[H],G=u[H+1],k=$;k<G;k++)if(L=l[k],D){var N=I[L]===J?D[L]:C,W=M(a[k],N);E(W,C)||(R.push(L),T.push(W))}else R.push(L)}return A[_]=R.length,r.createSparseMatrix({values:T,index:R,ptr:A,size:[y,_],datatype:f===r._datatype&&x===s._datatype?w:void 0})}}),bR="dotMultiply",sJ=["typed","matrix","equalScalar","multiplyScalar","concat"],oJ=ot(bR,sJ,n=>{var{typed:e,matrix:t,equalScalar:i,multiplyScalar:r,concat:s}=n,o=bK({typed:e,equalScalar:i}),a=rJ({typed:e,equalScalar:i}),l=vB({typed:e,equalScalar:i}),u=$l({typed:e,matrix:t,concat:s});return e(bR,u({elop:r,SS:a,DS:o,Ss:l}))}),aJ="matAlgo07xSSf",lJ=["typed","DenseMatrix"],Rm=ot(aJ,lJ,n=>{var{typed:e,DenseMatrix:t}=n;return function(s,o,a){var l=s._size,u=s._datatype||s._data===void 0?s._datatype:s.getDataType(),c=o._size,f=o._datatype||o._data===void 0?o._datatype:o.getDataType();if(l.length!==c.length)throw new cn(l.length,c.length);if(l[0]!==c[0]||l[1]!==c[1])throw new RangeError("Dimension mismatch. Matrix A ("+l+") must match Matrix B ("+c+")");var h=l[0],m=l[1],v,g=0,x=a;typeof u=="string"&&u===f&&u!=="mixed"&&(v=u,g=e.convert(0,v),x=e.find(a,[v,v]));var y,_,w=[];for(y=0;y<h;y++)w[y]=[];var E=[],C=[],M=[],T=[];for(_=0;_<m;_++){var R=_+1;for(i(s,_,M,E,R),i(o,_,T,C,R),y=0;y<h;y++){var A=M[y]===R?E[y]:g,D=T[y]===R?C[y]:g;w[y][_]=x(A,D)}}return new t({data:w,size:[h,m],datatype:u===s._datatype&&f===o._datatype?v:void 0})};function i(r,s,o,a,l){for(var u=r._values,c=r._index,f=r._ptr,h=f[s],m=f[s+1];h<m;h++){var v=c[h];o[v]=l,a[v]=u[h]}}}),AR="conj",uJ=["typed"],cJ=ot(AR,uJ,n=>{var{typed:e}=n;return e(AR,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.conjugate(),"Array | Matrix":e.referToSelf(t=>i=>Yr(i,t))})}),CR="im",fJ=["typed"],hJ=ot(CR,fJ,n=>{var{typed:e}=n;return e(CR,{number:()=>0,"BigNumber | Fraction":t=>t.mul(0),Complex:t=>t.im,"Array | Matrix":e.referToSelf(t=>i=>Yr(i,t))})}),DR="re",dJ=["typed"],pJ=ot(DR,dJ,n=>{var{typed:e}=n;return e(DR,{"number | BigNumber | Fraction":t=>t,Complex:t=>t.re,"Array | Matrix":e.referToSelf(t=>i=>Yr(i,t))})}),TR="concat",mJ=["typed","matrix","isInteger"],gJ=ot(TR,mJ,n=>{var{typed:e,matrix:t,isInteger:i}=n;return e(TR,{"...Array | Matrix | number | BigNumber":function(s){var o,a=s.length,l=-1,u,c=!1,f=[];for(o=0;o<a;o++){var h=s[o];if(In(h)&&(c=!0),bn(h)||Gn(h)){if(o!==a-1)throw new Error("Dimension must be specified as last argument");if(u=l,l=h.valueOf(),!i(l))throw new TypeError("Integer number expected for dimension");if(l<0||o>0&&l>u)throw new Sc(l,u+1)}else{var m=mn(h).valueOf(),v=xi(m);if(f[o]=m,u=l,l=v.length-1,o>0&&l!==u)throw new cn(u+1,l+1)}}if(f.length===0)throw new SyntaxError("At least one matrix expected");for(var g=f.shift();f.length;)g=aB(g,f.shift(),l);return c?t(g):g},"...string":function(s){return s.join("")}})}),PR="column",vJ=["typed","Index","matrix","range"],yJ=ot(PR,vJ,n=>{var{typed:e,Index:t,matrix:i,range:r}=n;return e(PR,{"Matrix, number":s,"Array, number":function(a,l){return s(i(mn(a)),l).valueOf()}});function s(o,a){if(o.size().length!==2)throw new Error("Only two dimensional matrix is supported");Hn(a,o.size()[1]);var l=r(0,o.size()[0]),u=new t(l,a),c=o.subset(u);return In(c)?c:i([[c]])}}),RR="diag",xJ=["typed","matrix","DenseMatrix","SparseMatrix"],_J=ot(RR,xJ,n=>{var{typed:e,matrix:t,DenseMatrix:i,SparseMatrix:r}=n;return e(RR,{Array:function(u){return s(u,0,xi(u),null)},"Array, number":function(u,c){return s(u,c,xi(u),null)},"Array, BigNumber":function(u,c){return s(u,c.toNumber(),xi(u),null)},"Array, string":function(u,c){return s(u,0,xi(u),c)},"Array, number, string":function(u,c,f){return s(u,c,xi(u),f)},"Array, BigNumber, string":function(u,c,f){return s(u,c.toNumber(),xi(u),f)},Matrix:function(u){return s(u,0,u.size(),u.storage())},"Matrix, number":function(u,c){return s(u,c,u.size(),u.storage())},"Matrix, BigNumber":function(u,c){return s(u,c.toNumber(),u.size(),u.storage())},"Matrix, string":function(u,c){return s(u,0,u.size(),c)},"Matrix, number, string":function(u,c,f){return s(u,c,u.size(),f)},"Matrix, BigNumber, string":function(u,c,f){return s(u,c.toNumber(),u.size(),f)}});function s(l,u,c,f){if(!Vn(u))throw new TypeError("Second parameter in function diag must be an integer");var h=u>0?u:0,m=u<0?-u:0;switch(c.length){case 1:return o(l,u,f,c[0],m,h);case 2:return a(l,u,f,c,m,h)}throw new RangeError("Matrix for function diag must be 2 dimensional")}function o(l,u,c,f,h,m){var v=[f+h,f+m];if(c&&c!=="sparse"&&c!=="dense")throw new TypeError("Unknown matrix type ".concat(c,'"'));var g=c==="sparse"?r.diagonal(v,l,u):i.diagonal(v,l,u);return c!==null?g:g.valueOf()}function a(l,u,c,f,h,m){if(In(l)){var v=l.diagonal(u);return c!==null?c!==v.storage()?t(v,c):v:v.valueOf()}for(var g=Math.min(f[0]-h,f[1]-m),x=[],y=0;y<g;y++)x[y]=l[y+h][y+m];return c!==null?t(x):x}}),IR="flatten",wJ=["typed","matrix"],SJ=ot(IR,wJ,n=>{var{typed:e,matrix:t}=n;return e(IR,{Array:function(r){return QM(r)},Matrix:function(r){var s=QM(r.toArray());return t(s)}})}),FR="getMatrixDataType",MJ=["typed"],EJ=ot(FR,MJ,n=>{var{typed:e}=n;return e(FR,{Array:function(i){return rm(i,Da)},Matrix:function(i){return i.getDataType()}})}),NR="identity",bJ=["typed","config","matrix","BigNumber","DenseMatrix","SparseMatrix"],AJ=ot(NR,bJ,n=>{var{typed:e,config:t,matrix:i,BigNumber:r,DenseMatrix:s,SparseMatrix:o}=n;return e(NR,{"":function(){return t.matrix==="Matrix"?i([]):[]},string:function(c){return i(c)},"number | BigNumber":function(c){return l(c,c,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, string":function(c,f){return l(c,c,f)},"number | BigNumber, number | BigNumber":function(c,f){return l(c,f,t.matrix==="Matrix"?"dense":void 0)},"number | BigNumber, number | BigNumber, string":function(c,f,h){return l(c,f,h)},Array:function(c){return a(c)},"Array, string":function(c,f){return a(c,f)},Matrix:function(c){return a(c.valueOf(),c.storage())},"Matrix, string":function(c,f){return a(c.valueOf(),f)}});function a(u,c){switch(u.length){case 0:return c?i(c):[];case 1:return l(u[0],u[0],c);case 2:return l(u[0],u[1],c);default:throw new Error("Vector containing two values expected")}}function l(u,c,f){var h=Gn(u)||Gn(c)?r:null;if(Gn(u)&&(u=u.toNumber()),Gn(c)&&(c=c.toNumber()),!Vn(u)||u<1)throw new Error("Parameters in function identity must be positive integers");if(!Vn(c)||c<1)throw new Error("Parameters in function identity must be positive integers");var m=h?new r(1):1,v=h?new h(0):0,g=[u,c];if(f){if(f==="sparse")return o.diagonal(g,m,0,v);if(f==="dense")return s.diagonal(g,m,0,v);throw new TypeError('Unknown matrix type "'.concat(f,'"'))}for(var x=im([],g,v),y=u<c?u:c,_=0;_<y;_++)x[_][_]=m;return x}}),CJ="ones",DJ=["typed","config","matrix","BigNumber"],TJ=ot(CJ,DJ,n=>{var{typed:e,config:t,matrix:i,BigNumber:r}=n;return e("ones",{"":function(){return t.matrix==="Array"?s([]):s([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var f=u.pop();return s(u,f)}else return t.matrix==="Array"?s(u):s(u,"default")},Array:s,Matrix:function(u){var c=u.storage();return s(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return s(u.valueOf(),c)}});function s(l,u){var c=o(l),f=c?new r(1):1;if(a(l),u){var h=i(u);return l.length>0?h.resize(l,f):h}else{var m=[];return l.length>0?im(m,l,f):m}}function o(l){var u=!1;return l.forEach(function(c,f,h){Gn(c)&&(u=!0,h[f]=c.toNumber())}),u}function a(l){l.forEach(function(u){if(typeof u!="number"||!Vn(u)||u<0)throw new Error("Parameters in function ones must be positive integers")})}});function wB(){throw new Error('No "bignumber" implementation available')}function PJ(){throw new Error('No "fraction" implementation available')}function SB(){throw new Error('No "matrix" implementation available')}var LR="range",RJ=["typed","config","?matrix","?bignumber","smaller","smallerEq","larger","largerEq","add","isPositive"],IJ=ot(LR,RJ,n=>{var{typed:e,config:t,matrix:i,bignumber:r,smaller:s,smallerEq:o,larger:a,largerEq:l,add:u,isPositive:c}=n;return e(LR,{string:h,"string, boolean":h,"number, number":function(x,y){return f(m(x,y,1,!1))},"number, number, number":function(x,y,_){return f(m(x,y,_,!1))},"number, number, boolean":function(x,y,_){return f(m(x,y,1,_))},"number, number, number, boolean":function(x,y,_,w){return f(m(x,y,_,w))},"BigNumber, BigNumber":function(x,y){var _=x.constructor;return f(m(x,y,new _(1),!1))},"BigNumber, BigNumber, BigNumber":function(x,y,_){return f(m(x,y,_,!1))},"BigNumber, BigNumber, boolean":function(x,y,_){var w=x.constructor;return f(m(x,y,new w(1),_))},"BigNumber, BigNumber, BigNumber, boolean":function(x,y,_,w){return f(m(x,y,_,w))},"Unit, Unit, Unit":function(x,y,_){return f(m(x,y,_,!1))},"Unit, Unit, Unit, boolean":function(x,y,_,w){return f(m(x,y,_,w))}});function f(g){return t.matrix==="Matrix"?i?i(g):SB():g}function h(g,x){var y=v(g);if(!y)throw new SyntaxError('String "'+g+'" is no valid range');return t.number==="BigNumber"?(r===void 0&&wB(),f(m(r(y.start),r(y.end),r(y.step)))):f(m(y.start,y.end,y.step,x))}function m(g,x,y,_){for(var w=[],E=c(y)?_?o:s:_?l:a,C=g;E(C,x);)w.push(C),C=u(C,y);return w}function v(g){var x=g.split(":"),y=x.map(function(w){return Number(w)}),_=y.some(function(w){return isNaN(w)});if(_)return null;switch(y.length){case 2:return{start:y[0],end:y[1],step:1};case 3:return{start:y[0],end:y[2],step:y[1]};default:return null}}}),OR="reshape",FJ=["typed","isInteger","matrix"],NJ=ot(OR,FJ,n=>{var{typed:e,isInteger:t}=n;return e(OR,{"Matrix, Array":function(r,s){return r.reshape(s,!0)},"Array, Array":function(r,s){return s.forEach(function(o){if(!t(o))throw new TypeError("Invalid size for dimension: "+o)}),pA(r,s)}})}),zR="size",LJ=["typed","config","?matrix"],OJ=ot(zR,LJ,n=>{var{typed:e,config:t,matrix:i}=n;return e(zR,{Matrix:function(s){return s.create(s.size())},Array:xi,string:function(s){return t.matrix==="Array"?[s.length]:i([s.length])},"number | Complex | BigNumber | Unit | boolean | null":function(s){return t.matrix==="Array"?[]:i?i([]):SB()}})}),BR="transpose",zJ=["typed","matrix"],BJ=ot(BR,zJ,n=>{var{typed:e,matrix:t}=n;return e(BR,{Array:o=>i(t(o)).valueOf(),Matrix:i,any:mn});function i(o){var a=o.size(),l;switch(a.length){case 1:l=o.clone();break;case 2:{var u=a[0],c=a[1];if(c===0)throw new RangeError("Cannot transpose a 2D matrix with no columns (size: "+zn(a)+")");switch(o.storage()){case"dense":l=r(o,u,c);break;case"sparse":l=s(o,u,c);break}}break;default:throw new RangeError("Matrix must be a vector or two dimensional (size: "+zn(a)+")")}return l}function r(o,a,l){for(var u=o._data,c=[],f,h=0;h<l;h++){f=c[h]=[];for(var m=0;m<a;m++)f[m]=mn(u[m][h])}return o.createDenseMatrix({data:c,size:[l,a],datatype:o._datatype})}function s(o,a,l){for(var u=o._values,c=o._index,f=o._ptr,h=u?[]:void 0,m=[],v=[],g=[],x=0;x<a;x++)g[x]=0;var y,_,w;for(y=0,_=c.length;y<_;y++)g[c[y]]++;for(var E=0,C=0;C<a;C++)v.push(E),E+=g[C],g[C]=v[C];for(v.push(E),w=0;w<l;w++)for(var M=f[w],T=f[w+1],R=M;R<T;R++){var A=g[c[R]]++;m[A]=w,u&&(h[A]=mn(u[R]))}return o.createSparseMatrix({values:h,index:m,ptr:v,size:[l,a],datatype:o._datatype})}}),UR="zeros",UJ=["typed","config","matrix","BigNumber"],kJ=ot(UR,UJ,n=>{var{typed:e,config:t,matrix:i,BigNumber:r}=n;return e(UR,{"":function(){return t.matrix==="Array"?s([]):s([],"default")},"...number | BigNumber | string":function(u){var c=u[u.length-1];if(typeof c=="string"){var f=u.pop();return s(u,f)}else return t.matrix==="Array"?s(u):s(u,"default")},Array:s,Matrix:function(u){var c=u.storage();return s(u.valueOf(),c)},"Array | Matrix, string":function(u,c){return s(u.valueOf(),c)}});function s(l,u){var c=o(l),f=c?new r(0):0;if(a(l),u){var h=i(u);return l.length>0?h.resize(l,f):h}else{var m=[];return l.length>0?im(m,l,f):m}}function o(l){var u=!1;return l.forEach(function(c,f,h){Gn(c)&&(u=!0,h[f]=c.toNumber())}),u}function a(l){l.forEach(function(u){if(typeof u!="number"||!Vn(u)||u<0)throw new Error("Parameters in function zeros must be positive integers")})}}),HJ="numeric",VJ=["number","?bignumber","?fraction"],WJ=ot(HJ,VJ,n=>{var{number:e,bignumber:t,fraction:i}=n,r={string:!0,number:!0,BigNumber:!0,Fraction:!0},s={number:o=>e(o),BigNumber:t?o=>t(o):wB,bigint:o=>BigInt(o),Fraction:i?o=>i(o):PJ};return function(a){var l=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"number",u=arguments.length>2?arguments[2]:void 0;if(u!==void 0)throw new SyntaxError("numeric() takes one or two arguments");var c=Da(a);if(!(c in r))throw new TypeError("Cannot convert "+a+' of type "'+c+'"; valid input types are '+Object.keys(r).join(", "));if(!(l in s))throw new TypeError("Cannot convert "+a+' to type "'+l+'"; valid output types are '+Object.keys(s).join(", "));return l===c?a:s[l](a)}}),kR="divideScalar",GJ=["typed","numeric"],jJ=ot(kR,GJ,n=>{var{typed:e,numeric:t}=n;return e(kR,{"number, number":function(r,s){return r/s},"Complex, Complex":function(r,s){return r.div(s)},"BigNumber, BigNumber":function(r,s){return r.div(s)},"bigint, bigint":function(r,s){return r/s},"Fraction, Fraction":function(r,s){return r.div(s)},"Unit, number | Complex | Fraction | BigNumber | Unit":(i,r)=>i.divide(r),"number | Fraction | Complex | BigNumber, Unit":(i,r)=>r.divideInto(i)})});function MB(n){var{DenseMatrix:e}=n;return function(i,r,s){var o=i.size();if(o.length!==2)throw new RangeError("Matrix must be two dimensional (size: "+zn(o)+")");var a=o[0],l=o[1];if(a!==l)throw new RangeError("Matrix must be square (size: "+zn(o)+")");var u=[];if(In(r)){var c=r.size(),f=r._data;if(c.length===1){if(c[0]!==a)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var h=0;h<a;h++)u[h]=[f[h]];return new e({data:u,size:[a,1],datatype:r._datatype})}if(c.length===2){if(c[0]!==a||c[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");if(Nz(r)){if(s){u=[];for(var m=0;m<a;m++)u[m]=[f[m][0]];return new e({data:u,size:[a,1],datatype:r._datatype})}return r}if(Lz(r)){for(var v=0;v<a;v++)u[v]=[0];for(var g=r._values,x=r._index,y=r._ptr,_=y[1],w=y[0];w<_;w++){var E=x[w];u[E][0]=g[w]}return new e({data:u,size:[a,1],datatype:r._datatype})}}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}if(Sn(r)){var C=xi(r);if(C.length===1){if(C[0]!==a)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var M=0;M<a;M++)u[M]=[r[M]];return new e({data:u,size:[a,1]})}if(C.length===2){if(C[0]!==a||C[1]!==1)throw new RangeError("Dimension mismatch. Matrix columns must match vector length.");for(var T=0;T<a;T++)u[T]=[r[T][0]];return new e({data:u,size:[a,1]})}throw new RangeError("Dimension mismatch. The right side has to be either 1- or 2-dimensional vector.")}}}var HR="usolve",qJ=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],XJ=ot(HR,qJ,n=>{var{typed:e,matrix:t,divideScalar:i,multiplyScalar:r,subtractScalar:s,equalScalar:o,DenseMatrix:a}=n,l=MB({DenseMatrix:a});return e(HR,{"SparseMatrix, Array | Matrix":function(h,m){return c(h,m)},"DenseMatrix, Array | Matrix":function(h,m){return u(h,m)},"Array, Array | Matrix":function(h,m){var v=t(h),g=u(v,m);return g.valueOf()}});function u(f,h){h=l(f,h,!0);for(var m=h._data,v=f._size[0],g=f._size[1],x=[],y=f._data,_=g-1;_>=0;_--){var w=m[_][0]||0,E=void 0;if(o(w,0))E=0;else{var C=y[_][_];if(o(C,0))throw new Error("Linear system cannot be solved since matrix is singular");E=i(w,C);for(var M=_-1;M>=0;M--)m[M]=[s(m[M][0]||0,r(E,y[M][_]))]}x[_]=[E]}return new a({data:x,size:[v,1]})}function c(f,h){h=l(f,h,!0);for(var m=h._data,v=f._size[0],g=f._size[1],x=f._values,y=f._index,_=f._ptr,w=[],E=g-1;E>=0;E--){var C=m[E][0]||0;if(o(C,0))w[E]=[0];else{for(var M=0,T=[],R=[],A=_[E],D=_[E+1],I=D-1;I>=A;I--){var L=y[I];L===E?M=x[I]:L<E&&(T.push(x[I]),R.push(L))}if(o(M,0))throw new Error("Linear system cannot be solved since matrix is singular");for(var H=i(C,M),k=0,$=R.length;k<$;k++){var G=R[k];m[G]=[s(m[G][0],r(H,T[k]))]}w[E]=[H]}}return new a({data:w,size:[v,1]})}}),VR="usolveAll",$J=["typed","matrix","divideScalar","multiplyScalar","subtractScalar","equalScalar","DenseMatrix"],YJ=ot(VR,$J,n=>{var{typed:e,matrix:t,divideScalar:i,multiplyScalar:r,subtractScalar:s,equalScalar:o,DenseMatrix:a}=n,l=MB({DenseMatrix:a});return e(VR,{"SparseMatrix, Array | Matrix":function(h,m){return c(h,m)},"DenseMatrix, Array | Matrix":function(h,m){return u(h,m)},"Array, Array | Matrix":function(h,m){var v=t(h),g=u(v,m);return g.map(x=>x.valueOf())}});function u(f,h){for(var m=[l(f,h,!0)._data.map(R=>R[0])],v=f._data,g=f._size[0],x=f._size[1],y=x-1;y>=0;y--)for(var _=m.length,w=0;w<_;w++){var E=m[w];if(o(v[y][y],0))if(o(E[y],0)){if(w===0){var M=[...E];M[y]=1;for(var T=y-1;T>=0;T--)M[T]=s(M[T],v[T][y]);m.push(M)}}else{if(w===0)return[];m.splice(w,1),w-=1,_-=1}else{E[y]=i(E[y],v[y][y]);for(var C=y-1;C>=0;C--)E[C]=s(E[C],r(E[y],v[C][y]))}}return m.map(R=>new a({data:R.map(A=>[A]),size:[g,1]}))}function c(f,h){for(var m=[l(f,h,!0)._data.map(ee=>ee[0])],v=f._size[0],g=f._size[1],x=f._values,y=f._index,_=f._ptr,w=g-1;w>=0;w--)for(var E=m.length,C=0;C<E;C++){for(var M=m[C],T=[],R=[],A=_[w],D=_[w+1],I=0,L=D-1;L>=A;L--){var H=y[L];H===w?I=x[L]:H<w&&(T.push(x[L]),R.push(H))}if(o(I,0))if(o(M[w],0)){if(C===0){var J=[...M];J[w]=1;for(var N=0,W=R.length;N<W;N++){var X=R[N];J[X]=s(J[X],T[N])}m.push(J)}}else{if(C===0)return[];m.splice(C,1),C-=1,E-=1}else{M[w]=i(M[w],I);for(var k=0,$=R.length;k<$;k++){var G=R[k];M[G]=s(M[G],r(M[w],T[k]))}}}return m.map(ee=>new a({data:ee.map(te=>[te]),size:[v,1]}))}}),Qy="equal",ZJ=["typed","matrix","equalScalar","DenseMatrix","concat"],KJ=ot(Qy,ZJ,n=>{var{typed:e,matrix:t,equalScalar:i,DenseMatrix:r,concat:s}=n,o=Uh({typed:e}),a=Rm({typed:e,DenseMatrix:r}),l=Bh({typed:e,DenseMatrix:r}),u=$l({typed:e,matrix:t,concat:s});return e(Qy,JJ({typed:e,equalScalar:i}),u({elop:i,SS:a,DS:o,Ss:l}))}),JJ=ot(Qy,["typed","equalScalar"],n=>{var{typed:e,equalScalar:t}=n;return e(Qy,{"any, any":function(r,s){return r===null?s===null:s===null?r===null:r===void 0?s===void 0:s===void 0?r===void 0:t(r,s)}})}),ex="smaller",QJ=["typed","config","matrix","DenseMatrix","concat"],eQ=ot(ex,QJ,n=>{var{typed:e,config:t,matrix:i,DenseMatrix:r,concat:s}=n,o=Uh({typed:e}),a=Rm({typed:e,DenseMatrix:r}),l=Bh({typed:e,DenseMatrix:r}),u=$l({typed:e,matrix:i,concat:s}),c=Pm({typed:e});return e(ex,tQ({typed:e,config:t}),{"boolean, boolean":(f,h)=>f<h,"BigNumber, BigNumber":function(h,m){return h.lt(m)&&!zh(h,m,t.relTol,t.absTol)},"bigint, bigint":(f,h)=>f<h,"Fraction, Fraction":(f,h)=>f.compare(h)===-1,"Complex, Complex":function(h,m){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:a,DS:o,Ss:l}))}),tQ=ot(ex,["typed","config"],n=>{var{typed:e,config:t}=n;return e(ex,{"number, number":function(r,s){return r<s&&!Ba(r,s,t.relTol,t.absTol)}})}),tx="smallerEq",nQ=["typed","config","matrix","DenseMatrix","concat"],iQ=ot(tx,nQ,n=>{var{typed:e,config:t,matrix:i,DenseMatrix:r,concat:s}=n,o=Uh({typed:e}),a=Rm({typed:e,DenseMatrix:r}),l=Bh({typed:e,DenseMatrix:r}),u=$l({typed:e,matrix:i,concat:s}),c=Pm({typed:e});return e(tx,rQ({typed:e,config:t}),{"boolean, boolean":(f,h)=>f<=h,"BigNumber, BigNumber":function(h,m){return h.lte(m)||zh(h,m,t.relTol,t.absTol)},"bigint, bigint":(f,h)=>f<=h,"Fraction, Fraction":(f,h)=>f.compare(h)!==1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:a,DS:o,Ss:l}))}),rQ=ot(tx,["typed","config"],n=>{var{typed:e,config:t}=n;return e(tx,{"number, number":function(r,s){return r<=s||Ba(r,s,t.relTol,t.absTol)}})}),nx="larger",sQ=["typed","config","matrix","DenseMatrix","concat"],oQ=ot(nx,sQ,n=>{var{typed:e,config:t,matrix:i,DenseMatrix:r,concat:s}=n,o=Uh({typed:e}),a=Rm({typed:e,DenseMatrix:r}),l=Bh({typed:e,DenseMatrix:r}),u=$l({typed:e,matrix:i,concat:s}),c=Pm({typed:e});return e(nx,aQ({typed:e,config:t}),{"boolean, boolean":(f,h)=>f>h,"BigNumber, BigNumber":function(h,m){return h.gt(m)&&!zh(h,m,t.relTol,t.absTol)},"bigint, bigint":(f,h)=>f>h,"Fraction, Fraction":(f,h)=>f.compare(h)===1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:a,DS:o,Ss:l}))}),aQ=ot(nx,["typed","config"],n=>{var{typed:e,config:t}=n;return e(nx,{"number, number":function(r,s){return r>s&&!Ba(r,s,t.relTol,t.absTol)}})}),ix="largerEq",lQ=["typed","config","matrix","DenseMatrix","concat"],uQ=ot(ix,lQ,n=>{var{typed:e,config:t,matrix:i,DenseMatrix:r,concat:s}=n,o=Uh({typed:e}),a=Rm({typed:e,DenseMatrix:r}),l=Bh({typed:e,DenseMatrix:r}),u=$l({typed:e,matrix:i,concat:s}),c=Pm({typed:e});return e(ix,cQ({typed:e,config:t}),{"boolean, boolean":(f,h)=>f>=h,"BigNumber, BigNumber":function(h,m){return h.gte(m)||zh(h,m,t.relTol,t.absTol)},"bigint, bigint":function(h,m){return h>=m},"Fraction, Fraction":(f,h)=>f.compare(h)!==-1,"Complex, Complex":function(){throw new TypeError("No ordering relation is defined for complex numbers")}},c,u({SS:a,DS:o,Ss:l}))}),cQ=ot(ix,["typed","config"],n=>{var{typed:e,config:t}=n;return e(ix,{"number, number":function(r,s){return r>=s||Ba(r,s,t.relTol,t.absTol)}})}),fQ="ImmutableDenseMatrix",hQ=["smaller","DenseMatrix"],dQ=ot(fQ,hQ,n=>{var{smaller:e,DenseMatrix:t}=n;function i(r,s){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");if(s&&!ao(s))throw new Error("Invalid datatype: "+s);if(In(r)||Sn(r)){var o=new t(r,s);this._data=o._data,this._size=o._size,this._datatype=o._datatype,this._min=null,this._max=null}else if(r&&Sn(r.data)&&Sn(r.size))this._data=r.data,this._size=r.size,this._datatype=r.datatype,this._min=typeof r.min<"u"?r.min:null,this._max=typeof r.max<"u"?r.max:null;else{if(r)throw new TypeError("Unsupported type of data ("+Da(r)+")");this._data=[],this._size=[0],this._datatype=s,this._min=null,this._max=null}}return i.prototype=new t,i.prototype.type="ImmutableDenseMatrix",i.prototype.isImmutableDenseMatrix=!0,i.prototype.subset=function(r){switch(arguments.length){case 1:{var s=t.prototype.subset.call(this,r);return In(s)?new i({data:s._data,size:s._size,datatype:s._datatype}):s}case 2:case 3:throw new Error("Cannot invoke set subset on an Immutable Matrix instance");default:throw new SyntaxError("Wrong number of arguments")}},i.prototype.set=function(){throw new Error("Cannot invoke set on an Immutable Matrix instance")},i.prototype.resize=function(){throw new Error("Cannot invoke resize on an Immutable Matrix instance")},i.prototype.reshape=function(){throw new Error("Cannot invoke reshape on an Immutable Matrix instance")},i.prototype.clone=function(){return new i({data:mn(this._data),size:mn(this._size),datatype:this._datatype})},i.prototype.toJSON=function(){return{mathjs:"ImmutableDenseMatrix",data:this._data,size:this._size,datatype:this._datatype}},i.fromJSON=function(r){return new i(r)},i.prototype.swapRows=function(){throw new Error("Cannot invoke swapRows on an Immutable Matrix instance")},i.prototype.min=function(){if(this._min===null){var r=null;this.forEach(function(s){(r===null||e(s,r))&&(r=s)}),this._min=r!==null?r:void 0}return this._min},i.prototype.max=function(){if(this._max===null){var r=null;this.forEach(function(s){(r===null||e(r,s))&&(r=s)}),this._max=r!==null?r:void 0}return this._max},i},{isClass:!0}),pQ="Index",mQ=["ImmutableDenseMatrix","getMatrixDataType"],gQ=ot(pQ,mQ,n=>{var{ImmutableDenseMatrix:e,getMatrixDataType:t}=n;function i(s){if(!(this instanceof i))throw new SyntaxError("Constructor must be called with the new operator");this._dimensions=[],this._sourceSize=[],this._isScalar=!0;for(var o=0,a=arguments.length;o<a;o++){var l=arguments[o],u=Sn(l),c=In(l),f=null;if(Oz(l))this._dimensions.push(l),this._isScalar=!1;else if(u||c){var h=void 0;t(l)==="boolean"?(u&&(h=r(WR(l).valueOf())),c&&(h=r(WR(l._data).valueOf())),f=l.valueOf().length):h=r(l.valueOf()),this._dimensions.push(h);var m=h.size();(m.length!==1||m[0]!==1||f!==null)&&(this._isScalar=!1)}else if(typeof l=="number")this._dimensions.push(r([l]));else if(typeof l=="string")this._dimensions.push(l);else throw new TypeError("Dimension must be an Array, Matrix, number, string, or Range");this._sourceSize.push(f)}}i.prototype.type="Index",i.prototype.isIndex=!0;function r(s){for(var o=0,a=s.length;o<a;o++)if(typeof s[o]!="number"||!Vn(s[o]))throw new TypeError("Index parameters must be positive integer numbers");return new e(s)}return i.prototype.clone=function(){var s=new i;return s._dimensions=mn(this._dimensions),s._isScalar=this._isScalar,s._sourceSize=this._sourceSize,s},i.create=function(s){var o=new i;return i.apply(o,s),o},i.prototype.size=function(){for(var s=[],o=0,a=this._dimensions.length;o<a;o++){var l=this._dimensions[o];s[o]=typeof l=="string"?1:l.size()[0]}return s},i.prototype.max=function(){for(var s=[],o=0,a=this._dimensions.length;o<a;o++){var l=this._dimensions[o];s[o]=typeof l=="string"?l:l.max()}return s},i.prototype.min=function(){for(var s=[],o=0,a=this._dimensions.length;o<a;o++){var l=this._dimensions[o];s[o]=typeof l=="string"?l:l.min()}return s},i.prototype.forEach=function(s){for(var o=0,a=this._dimensions.length;o<a;o++)s(this._dimensions[o],o,this)},i.prototype.dimension=function(s){return this._dimensions[s]||null},i.prototype.isObjectProperty=function(){return this._dimensions.length===1&&typeof this._dimensions[0]=="string"},i.prototype.getObjectProperty=function(){return this.isObjectProperty()?this._dimensions[0]:null},i.prototype.isScalar=function(){return this._isScalar},i.prototype.toArray=function(){for(var s=[],o=0,a=this._dimensions.length;o<a;o++){var l=this._dimensions[o];s.push(typeof l=="string"?l:l.toArray())}return s},i.prototype.valueOf=i.prototype.toArray,i.prototype.toString=function(){for(var s=[],o=0,a=this._dimensions.length;o<a;o++){var l=this._dimensions[o];typeof l=="string"?s.push(JSON.stringify(l)):s.push(l.toString())}return"["+s.join(", ")+"]"},i.prototype.toJSON=function(){return{mathjs:"Index",dimensions:this._dimensions}},i.fromJSON=function(s){return i.create(s.dimensions)},i},{isClass:!0});function WR(n){var e=[];return n.forEach((t,i)=>{t&&e.push(i)}),e}var vQ="atan",yQ=["typed"],xQ=ot(vQ,yQ,n=>{var{typed:e}=n;return e("atan",{number:function(i){return Math.atan(i)},Complex:function(i){return i.atan()},BigNumber:function(i){return i.atan()}})}),EB=ot("trigUnit",["typed"],n=>{var{typed:e}=n;return{Unit:e.referToSelf(t=>i=>{if(!i.hasBase(i.constructor.BASE_UNITS.ANGLE))throw new TypeError("Unit in function cot is no angle");return e.find(t,i.valueType())(i.value)})}}),GR="cos",_Q=["typed"],wQ=ot(GR,_Q,n=>{var{typed:e}=n,t=EB({typed:e});return e(GR,{number:Math.cos,"Complex | BigNumber":i=>i.cos()},t)}),jR="sin",SQ=["typed"],MQ=ot(jR,SQ,n=>{var{typed:e}=n,t=EB({typed:e});return e(jR,{number:Math.sin,"Complex | BigNumber":i=>i.sin()},t)}),qR="add",EQ=["typed","matrix","addScalar","equalScalar","DenseMatrix","SparseMatrix","concat"],bQ=ot(qR,EQ,n=>{var{typed:e,matrix:t,addScalar:i,equalScalar:r,DenseMatrix:s,SparseMatrix:o,concat:a}=n,l=xB({typed:e}),u=HK({typed:e,equalScalar:r}),c=_B({typed:e,DenseMatrix:s}),f=$l({typed:e,matrix:t,concat:a});return e(qR,{"any, any":i,"any, any, ...any":e.referToSelf(h=>(m,v,g)=>{for(var x=h(m,v),y=0;y<g.length;y++)x=h(x,g[y]);return x})},f({elop:i,DS:l,SS:u,Ss:c}))}),XR="dot",AQ=["typed","addScalar","multiplyScalar","conj","size"],CQ=ot(XR,AQ,n=>{var{typed:e,addScalar:t,multiplyScalar:i,conj:r,size:s}=n;return e(XR,{"Array | DenseMatrix, Array | DenseMatrix":a,"SparseMatrix, SparseMatrix":l});function o(c,f){var h=u(c),m=u(f),v,g;if(h.length===1)v=h[0];else if(h.length===2&&h[1]===1)v=h[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+h.join(", ")+")");if(m.length===1)g=m[0];else if(m.length===2&&m[1]===1)g=m[0];else throw new RangeError("Expected a column vector, instead got a matrix of size ("+m.join(", ")+")");if(v!==g)throw new RangeError("Vectors must have equal length ("+v+" != "+g+")");if(v===0)throw new RangeError("Cannot calculate the dot product of empty vectors");return v}function a(c,f){var h=o(c,f),m=In(c)?c._data:c,v=In(c)?c._datatype||c.getDataType():void 0,g=In(f)?f._data:f,x=In(f)?f._datatype||f.getDataType():void 0,y=u(c).length===2,_=u(f).length===2,w=t,E=i;if(v&&x&&v===x&&typeof v=="string"&&v!=="mixed"){var C=v;w=e.find(t,[C,C]),E=e.find(i,[C,C])}if(!y&&!_){for(var M=E(r(m[0]),g[0]),T=1;T<h;T++)M=w(M,E(r(m[T]),g[T]));return M}if(!y&&_){for(var R=E(r(m[0]),g[0][0]),A=1;A<h;A++)R=w(R,E(r(m[A]),g[A][0]));return R}if(y&&!_){for(var D=E(r(m[0][0]),g[0]),I=1;I<h;I++)D=w(D,E(r(m[I][0]),g[I]));return D}if(y&&_){for(var L=E(r(m[0][0]),g[0][0]),H=1;H<h;H++)L=w(L,E(r(m[H][0]),g[H][0]));return L}}function l(c,f){o(c,f);for(var h=c._index,m=c._values,v=f._index,g=f._values,x=0,y=t,_=i,w=0,E=0;w<h.length&&E<v.length;){var C=h[w],M=v[E];if(C<M){w++;continue}if(C>M){E++;continue}C===M&&(x=y(x,_(m[w],g[E])),w++,E++)}return x}function u(c){return In(c)?c.size():s(c)}}),$R="qr",DQ=["typed","matrix","zeros","identity","isZero","equal","sign","sqrt","conj","unaryMinus","addScalar","divideScalar","multiplyScalar","subtractScalar","complex"],TQ=ot($R,DQ,n=>{var{typed:e,matrix:t,zeros:i,identity:r,isZero:s,equal:o,sign:a,sqrt:l,conj:u,unaryMinus:c,addScalar:f,divideScalar:h,multiplyScalar:m,subtractScalar:v,complex:g}=n;return vo(e($R,{DenseMatrix:function(E){return y(E)},SparseMatrix:function(E){return _()},Array:function(E){var C=t(E),M=y(C);return{Q:M.Q.valueOf(),R:M.R.valueOf()}}}),{_denseQRimpl:x});function x(w){var E=w._size[0],C=w._size[1],M=r([E],"dense"),T=M._data,R=w.clone(),A=R._data,D,I,L,H=i([E],"");for(L=0;L<Math.min(C,E);++L){var k=A[L][L],$=c(o(k,0)?1:a(k)),G=u($),J=0;for(D=L;D<E;D++)J=f(J,m(A[D][L],u(A[D][L])));var N=m($,l(J));if(!s(N)){var W=v(k,N);for(H[L]=1,D=L+1;D<E;D++)H[D]=h(A[D][L],W);var X=c(u(h(W,N))),ee=void 0;for(I=L;I<C;I++){for(ee=0,D=L;D<E;D++)ee=f(ee,m(u(H[D]),A[D][I]));for(ee=m(ee,X),D=L;D<E;D++)A[D][I]=m(v(A[D][I],m(H[D],ee)),G)}for(D=0;D<E;D++){for(ee=0,I=L;I<E;I++)ee=f(ee,m(T[D][I],H[I]));for(ee=m(ee,X),I=L;I<E;++I)T[D][I]=h(v(T[D][I],m(ee,u(H[I]))),G)}}}return{Q:M,R,toString:function(){return"Q: "+this.Q.toString()+`
R: `+this.R.toString()}}}function y(w){var E=x(w),C=E.R._data;if(w._data.length>0)for(var M=C[0][0].type==="Complex"?g(0):0,T=0;T<C.length;++T)for(var R=0;R<T&&R<(C[0]||[]).length;++R)C[T][R]=M;return E}function _(w){throw new Error("qr not implemented for sparse matrices yet")}}),YR="det",PQ=["typed","matrix","subtractScalar","multiply","divideScalar","isZero","unaryMinus"],RQ=ot(YR,PQ,n=>{var{typed:e,matrix:t,subtractScalar:i,multiply:r,divideScalar:s,isZero:o,unaryMinus:a}=n;return e(YR,{any:function(c){return mn(c)},"Array | Matrix":function(c){var f;switch(In(c)?f=c.size():Array.isArray(c)?(c=t(c),f=c.size()):f=[],f.length){case 0:return mn(c);case 1:if(f[0]===1)return mn(c.valueOf()[0]);if(f[0]===0)return 1;throw new RangeError("Matrix must be square (size: "+zn(f)+")");case 2:{var h=f[0],m=f[1];if(h===m)return l(c.clone().valueOf(),h);if(m===0)return 1;throw new RangeError("Matrix must be square (size: "+zn(f)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+zn(f)+")")}}});function l(u,c,f){if(c===1)return mn(u[0][0]);if(c===2)return i(r(u[0][0],u[1][1]),r(u[1][0],u[0][1]));for(var h=!1,m=new Array(c).fill(0).map((T,R)=>R),v=0;v<c;v++){var g=m[v];if(o(u[g][v])){var x=void 0;for(x=v+1;x<c;x++)if(!o(u[m[x]][v])){g=m[x],m[x]=m[v],m[v]=g,h=!h;break}if(x===c)return u[g][v]}for(var y=u[g][v],_=v===0?1:u[m[v-1]][v-1],w=v+1;w<c;w++)for(var E=m[w],C=v+1;C<c;C++)u[E][C]=s(i(r(u[E][C],y),r(u[E][v],u[g][C])),_)}var M=u[m[c-1]][c-1];return h?a(M):M}}),ZR="inv",IQ=["typed","matrix","divideScalar","addScalar","multiply","unaryMinus","det","identity","abs"],FQ=ot(ZR,IQ,n=>{var{typed:e,matrix:t,divideScalar:i,addScalar:r,multiply:s,unaryMinus:o,det:a,identity:l,abs:u}=n;return e(ZR,{"Array | Matrix":function(h){var m=In(h)?h.size():xi(h);switch(m.length){case 1:if(m[0]===1)return In(h)?t([i(1,h.valueOf()[0])]):[i(1,h[0])];throw new RangeError("Matrix must be square (size: "+zn(m)+")");case 2:{var v=m[0],g=m[1];if(v===g)return In(h)?t(c(h.valueOf(),v,g),h.storage()):c(h,v,g);throw new RangeError("Matrix must be square (size: "+zn(m)+")")}default:throw new RangeError("Matrix must be two dimensional (size: "+zn(m)+")")}},any:function(h){return i(1,h)}});function c(f,h,m){var v,g,x,y,_;if(h===1){if(y=f[0][0],y===0)throw Error("Cannot calculate inverse, determinant is zero");return[[i(1,y)]]}else if(h===2){var w=a(f);if(w===0)throw Error("Cannot calculate inverse, determinant is zero");return[[i(f[1][1],w),i(o(f[0][1]),w)],[i(o(f[1][0]),w),i(f[0][0],w)]]}else{var E=f.concat();for(v=0;v<h;v++)E[v]=E[v].concat();for(var C=l(h).valueOf(),M=0;M<m;M++){var T=u(E[M][M]),R=M;for(v=M+1;v<h;)u(E[v][M])>T&&(T=u(E[v][M]),R=v),v++;if(T===0)throw Error("Cannot calculate inverse, determinant is zero");v=R,v!==M&&(_=E[M],E[M]=E[v],E[v]=_,_=C[M],C[M]=C[v],C[v]=_);var A=E[M],D=C[M];for(v=0;v<h;v++){var I=E[v],L=C[v];if(v!==M){if(I[M]!==0){for(x=i(o(I[M]),A[M]),g=M;g<m;g++)I[g]=r(I[g],s(x,A[g]));for(g=0;g<m;g++)L[g]=r(L[g],s(x,D[g]))}}else{for(x=A[M],g=M;g<m;g++)I[g]=i(I[g],x);for(g=0;g<m;g++)L[g]=i(L[g],x)}}}return C}}});function NQ(n){var{addScalar:e,subtract:t,flatten:i,multiply:r,multiplyScalar:s,divideScalar:o,sqrt:a,abs:l,bignumber:u,diag:c,size:f,reshape:h,inv:m,qr:v,usolve:g,usolveAll:x,equal:y,complex:_,larger:w,smaller:E,matrixFromColumns:C,dot:M}=n;function T(te,ce,Q,le){var pe=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,ae=R(te,ce,Q,le,pe);A(te,ce,Q,le,pe,ae);var{values:Te,C:Pe}=D(te,ce,Q,le,pe);if(pe){var Ae=I(te,ce,Pe,ae,Te,Q,le);return{values:Te,eigenvectors:Ae}}return{values:Te}}function R(te,ce,Q,le,pe){var ae=le==="BigNumber",Te=le==="Complex",Pe=ae?u(0):0,Ae=ae?u(1):Te?_(1):1,We=ae?u(1):1,z=ae?u(10):2,Se=s(z,z),De;pe&&(De=Array(ce).fill(Ae));for(var ke=!1;!ke;){ke=!0;for(var Me=0;Me<ce;Me++){for(var Qe=Pe,Ge=Pe,Ze=0;Ze<ce;Ze++)Me!==Ze&&(Qe=e(Qe,l(te[Ze][Me])),Ge=e(Ge,l(te[Me][Ze])));if(!y(Qe,0)&&!y(Ge,0)){for(var Y=We,B=Qe,we=o(Ge,z),U=s(Ge,z);E(B,we);)B=s(B,Se),Y=s(Y,z);for(;w(B,U);)B=o(B,Se),Y=o(Y,z);var q=E(o(e(B,Ge),Y),s(e(Qe,Ge),.95));if(q){ke=!1;for(var Z=o(1,Y),he=0;he<ce;he++)Me!==he&&(te[Me][he]=s(te[Me][he],Z),te[he][Me]=s(te[he][Me],Y));pe&&(De[Me]=s(De[Me],Z))}}}}return pe?c(De):null}function A(te,ce,Q,le,pe,ae){var Te=le==="BigNumber",Pe=le==="Complex",Ae=Te?u(0):Pe?_(0):0;Te&&(Q=u(Q));for(var We=0;We<ce-2;We++){for(var z=0,Se=Ae,De=We+1;De<ce;De++){var ke=te[De][We];E(l(Se),l(ke))&&(Se=ke,z=De)}if(!E(l(Se),Q)){if(z!==We+1){var Me=te[z];te[z]=te[We+1],te[We+1]=Me;for(var Qe=0;Qe<ce;Qe++){var Ge=te[Qe][z];te[Qe][z]=te[Qe][We+1],te[Qe][We+1]=Ge}if(pe){var Ze=ae[z];ae[z]=ae[We+1],ae[We+1]=Ze}}for(var Y=We+2;Y<ce;Y++){var B=o(te[Y][We],Se);if(B!==0){for(var we=0;we<ce;we++)te[Y][we]=t(te[Y][we],s(B,te[We+1][we]));for(var U=0;U<ce;U++)te[U][We+1]=e(te[U][We+1],s(B,te[U][Y]));if(pe)for(var q=0;q<ce;q++)ae[Y][q]=t(ae[Y][q],s(B,ae[We+1][q]))}}}}return ae}function D(te,ce,Q,le,pe){var ae=le==="BigNumber",Te=le==="Complex",Pe=ae?u(1):Te?_(1):1;ae&&(Q=u(Q));for(var Ae=mn(te),We=[],z=ce,Se=[],De=pe?c(Array(ce).fill(Pe)):void 0,ke=pe?c(Array(z).fill(Pe)):void 0,Me=0;Me<=100;){Me+=1;for(var Qe=Ae[z-1][z-1],Ge=0;Ge<z;Ge++)Ae[Ge][Ge]=t(Ae[Ge][Ge],Qe);var{Q:Ze,R:Y}=v(Ae);Ae=r(Y,Ze);for(var B=0;B<z;B++)Ae[B][B]=e(Ae[B][B],Qe);if(pe&&(ke=r(ke,Ze)),z===1||E(l(Ae[z-1][z-2]),Q)){Me=0,We.push(Ae[z-1][z-1]),pe&&(Se.unshift([[1]]),k(ke,ce),De=r(De,ke),z>1&&(ke=c(Array(z-1).fill(Pe)))),z-=1,Ae.pop();for(var we=0;we<z;we++)Ae[we].pop()}else if(z===2||E(l(Ae[z-2][z-3]),Q)){Me=0;var U=L(Ae[z-2][z-2],Ae[z-2][z-1],Ae[z-1][z-2],Ae[z-1][z-1]);We.push(...U),pe&&(Se.unshift(H(Ae[z-2][z-2],Ae[z-2][z-1],Ae[z-1][z-2],Ae[z-1][z-1],U[0],U[1],Q,le)),k(ke,ce),De=r(De,ke),z>2&&(ke=c(Array(z-2).fill(Pe)))),z-=2,Ae.pop(),Ae.pop();for(var q=0;q<z;q++)Ae[q].pop(),Ae[q].pop()}if(z===0)break}if(We.sort((fe,ue)=>+t(l(fe),l(ue))),Me>100){var Z=Error("The eigenvalues failed to converge. Only found these eigenvalues: "+We.join(", "));throw Z.values=We,Z.vectors=[],Z}var he=pe?r(De,$(Se,ce)):void 0;return{values:We,C:he}}function I(te,ce,Q,le,pe,ae,Te){var Pe=m(Q),Ae=r(Pe,te,Q),We=Te==="BigNumber",z=Te==="Complex",Se=We?u(0):z?_(0):0,De=We?u(1):z?_(1):1,ke=[],Me=[];for(var Qe of pe){var Ge=G(ke,Qe,y);Ge===-1?(ke.push(Qe),Me.push(1)):Me[Ge]+=1}for(var Ze=[],Y=ke.length,B=Array(ce).fill(Se),we=c(Array(ce).fill(De)),U=function(){var he=ke[q],fe=t(Ae,r(he,we)),ue=x(fe,B);for(ue.shift();ue.length<Me[q];){var Ne=J(fe,ce,ue,ae,Te);if(Ne===null)break;ue.push(Ne)}var ge=r(m(le),Q);ue=ue.map(Ee=>r(ge,Ee)),Ze.push(...ue.map(Ee=>({value:he,vector:i(Ee)})))},q=0;q<Y;q++)U();return Ze}function L(te,ce,Q,le){var pe=e(te,le),ae=t(s(te,le),s(ce,Q)),Te=s(pe,.5),Pe=s(a(t(s(pe,pe),s(4,ae))),.5);return[e(Te,Pe),t(Te,Pe)]}function H(te,ce,Q,le,pe,ae,Te,Pe){var Ae=Pe==="BigNumber",We=Pe==="Complex",z=Ae?u(0):We?_(0):0,Se=Ae?u(1):We?_(1):1;if(E(l(Q),Te))return[[Se,z],[z,Se]];if(w(l(t(pe,ae)),Te))return[[t(pe,le),t(ae,le)],[Q,Q]];var De=t(te,pe),ke=t(le,pe);return E(l(ce),Te)&&E(l(ke),Te)?[[De,Se],[Q,z]]:[[ce,z],[ke,Se]]}function k(te,ce){for(var Q=0;Q<te.length;Q++)te[Q].push(...Array(ce-te[Q].length).fill(0));for(var le=te.length;le<ce;le++)te.push(Array(ce).fill(0)),te[le][le]=1;return te}function $(te,ce){for(var Q=[],le=0;le<ce;le++)Q[le]=Array(ce).fill(0);var pe=0;for(var ae of te){for(var Te=ae.length,Pe=0;Pe<Te;Pe++)for(var Ae=0;Ae<Te;Ae++)Q[pe+Pe][pe+Ae]=ae[Pe][Ae];pe+=Te}return Q}function G(te,ce,Q){for(var le=0;le<te.length;le++)if(Q(te[le],ce))return le;return-1}function J(te,ce,Q,le,pe){for(var ae=pe==="BigNumber"?u(1e3):1e3,Te,Pe=0;Pe<5;++Pe){Te=N(ce,Q,pe);try{Te=g(te,Te)}catch{continue}if(w(X(Te),ae))break}if(Pe>=5)return null;for(Pe=0;;){var Ae=g(te,Te);if(E(X(W(Te,[Ae])),le))break;if(++Pe>=10)return null;Te=ee(Ae)}return Te}function N(te,ce,Q){var le=Q==="BigNumber",pe=Q==="Complex",ae=Array(te).fill(0).map(Te=>2*Math.random()-1);return le&&(ae=ae.map(Te=>u(Te))),pe&&(ae=ae.map(Te=>_(Te))),ae=W(ae,ce),ee(ae,Q)}function W(te,ce){var Q=f(te);for(var le of ce)le=h(le,Q),te=t(te,r(o(M(le,te),M(le,le)),le));return te}function X(te){return l(a(M(te,te)))}function ee(te,ce){var Q=ce==="BigNumber",le=ce==="Complex",pe=Q?u(1):le?_(1):1;return r(o(pe,X(te)),te)}return T}function LQ(n){var{config:e,addScalar:t,subtract:i,abs:r,atan:s,cos:o,sin:a,multiplyScalar:l,inv:u,bignumber:c,multiply:f,add:h}=n;function m(A,D){var I=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.relTol,L=arguments.length>3?arguments[3]:void 0,H=arguments.length>4?arguments[4]:void 0;if(L==="number")return v(A,I,H);if(L==="BigNumber")return g(A,I,H);throw TypeError("Unsupported data type: "+L)}function v(A,D,I){var L=A.length,H=Math.abs(D/L),k,$;if(I){$=new Array(L);for(var G=0;G<L;G++)$[G]=Array(L).fill(0),$[G][G]=1}for(var J=M(A);Math.abs(J[1])>=Math.abs(H);){var N=J[0][0],W=J[0][1];k=x(A[N][N],A[W][W],A[N][W]),A=C(A,k,N,W),I&&($=_($,k,N,W)),J=M(A)}for(var X=Array(L).fill(0),ee=0;ee<L;ee++)X[ee]=A[ee][ee];return R(mn(X),$,I)}function g(A,D,I){var L=A.length,H=r(D/L),k,$;if(I){$=new Array(L);for(var G=0;G<L;G++)$[G]=Array(L).fill(0),$[G][G]=1}for(var J=T(A);r(J[1])>=r(H);){var N=J[0][0],W=J[0][1];k=y(A[N][N],A[W][W],A[N][W]),A=E(A,k,N,W),I&&($=w($,k,N,W)),J=T(A)}for(var X=Array(L).fill(0),ee=0;ee<L;ee++)X[ee]=A[ee][ee];return R(mn(X),$,I)}function x(A,D,I){var L=D-A;return Math.abs(L)<=e.relTol?Math.PI/4:.5*Math.atan(2*I/(D-A))}function y(A,D,I){var L=i(D,A);return r(L)<=e.relTol?c(-1).acos().div(4):l(.5,s(f(2,I,u(L))))}function _(A,D,I,L){for(var H=A.length,k=Math.cos(D),$=Math.sin(D),G=Array(H).fill(0),J=Array(H).fill(0),N=0;N<H;N++)G[N]=k*A[N][I]-$*A[N][L],J[N]=$*A[N][I]+k*A[N][L];for(var W=0;W<H;W++)A[W][I]=G[W],A[W][L]=J[W];return A}function w(A,D,I,L){for(var H=A.length,k=o(D),$=a(D),G=Array(H).fill(c(0)),J=Array(H).fill(c(0)),N=0;N<H;N++)G[N]=i(l(k,A[N][I]),l($,A[N][L])),J[N]=t(l($,A[N][I]),l(k,A[N][L]));for(var W=0;W<H;W++)A[W][I]=G[W],A[W][L]=J[W];return A}function E(A,D,I,L){for(var H=A.length,k=c(o(D)),$=c(a(D)),G=l(k,k),J=l($,$),N=Array(H).fill(c(0)),W=Array(H).fill(c(0)),X=f(c(2),k,$,A[I][L]),ee=t(i(l(G,A[I][I]),X),l(J,A[L][L])),te=h(l(J,A[I][I]),X,l(G,A[L][L])),ce=0;ce<H;ce++)N[ce]=i(l(k,A[I][ce]),l($,A[L][ce])),W[ce]=t(l($,A[I][ce]),l(k,A[L][ce]));A[I][I]=ee,A[L][L]=te,A[I][L]=c(0),A[L][I]=c(0);for(var Q=0;Q<H;Q++)Q!==I&&Q!==L&&(A[I][Q]=N[Q],A[Q][I]=N[Q],A[L][Q]=W[Q],A[Q][L]=W[Q]);return A}function C(A,D,I,L){for(var H=A.length,k=Math.cos(D),$=Math.sin(D),G=k*k,J=$*$,N=Array(H).fill(0),W=Array(H).fill(0),X=G*A[I][I]-2*k*$*A[I][L]+J*A[L][L],ee=J*A[I][I]+2*k*$*A[I][L]+G*A[L][L],te=0;te<H;te++)N[te]=k*A[I][te]-$*A[L][te],W[te]=$*A[I][te]+k*A[L][te];A[I][I]=X,A[L][L]=ee,A[I][L]=0,A[L][I]=0;for(var ce=0;ce<H;ce++)ce!==I&&ce!==L&&(A[I][ce]=N[ce],A[ce][I]=N[ce],A[L][ce]=W[ce],A[ce][L]=W[ce]);return A}function M(A){for(var D=A.length,I=0,L=[0,1],H=0;H<D;H++)for(var k=H+1;k<D;k++)Math.abs(I)<Math.abs(A[H][k])&&(I=Math.abs(A[H][k]),L=[H,k]);return[L,I]}function T(A){for(var D=A.length,I=0,L=[0,1],H=0;H<D;H++)for(var k=H+1;k<D;k++)r(I)<r(A[H][k])&&(I=r(A[H][k]),L=[H,k]);return[L,I]}function R(A,D,I){var L=A.length,H=Array(L),k;if(I){k=Array(L);for(var $=0;$<L;$++)k[$]=Array(L)}for(var G=0;G<L;G++){for(var J=0,N=A[0],W=0;W<A.length;W++)r(A[W])<r(N)&&(J=W,N=A[J]);if(H[G]=A.splice(J,1)[0],I)for(var X=0;X<L;X++)k[G][X]=D[X][J],D[X].splice(J,1)}if(!I)return{values:H};var ee=k.map((te,ce)=>({value:H[ce],vector:te}));return{values:H,eigenvectors:ee}}return m}var OQ="eigs",zQ=["config","typed","matrix","addScalar","equal","subtract","abs","atan","cos","sin","multiplyScalar","divideScalar","inv","bignumber","multiply","add","larger","column","flatten","number","complex","sqrt","diag","size","reshape","qr","usolve","usolveAll","im","re","smaller","matrixFromColumns","dot"],BQ=ot(OQ,zQ,n=>{var{config:e,typed:t,matrix:i,addScalar:r,subtract:s,equal:o,abs:a,atan:l,cos:u,sin:c,multiplyScalar:f,divideScalar:h,inv:m,bignumber:v,multiply:g,add:x,larger:y,column:_,flatten:w,number:E,complex:C,sqrt:M,diag:T,size:R,reshape:A,qr:D,usolve:I,usolveAll:L,im:H,re:k,smaller:$,matrixFromColumns:G,dot:J}=n,N=LQ({config:e,addScalar:r,subtract:s,column:_,flatten:w,equal:o,abs:a,atan:l,cos:u,sin:c,multiplyScalar:f,inv:m,bignumber:v,complex:C,multiply:g,add:x}),W=NQ({config:e,addScalar:r,subtract:s,multiply:g,multiplyScalar:f,flatten:w,divideScalar:h,sqrt:M,abs:a,bignumber:v,diag:T,size:R,reshape:A,qr:D,inv:m,usolve:I,usolveAll:L,equal:o,complex:C,larger:y,smaller:$,matrixFromColumns:G,dot:J});return t("eigs",{Array:function(ae){return X(i(ae))},"Array, number|BigNumber":function(ae,Te){return X(i(ae),{precision:Te})},"Array, Object"(pe,ae){return X(i(pe),ae)},Matrix:function(ae){return X(ae,{matricize:!0})},"Matrix, number|BigNumber":function(ae,Te){return X(ae,{precision:Te,matricize:!0})},"Matrix, Object":function(ae,Te){var Pe={matricize:!0};return vo(Pe,Te),X(ae,Pe)}});function X(pe){var ae,Te=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Pe="eigenvectors"in Te?Te.eigenvectors:!0,Ae=(ae=Te.precision)!==null&&ae!==void 0?ae:e.relTol,We=ee(pe,Ae,Pe);return Te.matricize&&(We.values=i(We.values),Pe&&(We.eigenvectors=We.eigenvectors.map(z=>{var{value:Se,vector:De}=z;return{value:Se,vector:i(De)}}))),Pe&&Object.defineProperty(We,"vectors",{enumerable:!1,get:()=>{throw new Error("eigs(M).vectors replaced with eigs(M).eigenvectors")}}),We}function ee(pe,ae,Te){var Pe=pe.toArray(),Ae=pe.size();if(Ae.length!==2||Ae[0]!==Ae[1])throw new RangeError("Matrix must be square (size: ".concat(zn(Ae),")"));var We=Ae[0];if(ce(Pe,We,ae)&&(Q(Pe,We),te(Pe,We,ae))){var z=le(pe,Pe,We);return N(Pe,We,ae,z,Te)}var Se=le(pe,Pe,We);return W(Pe,We,ae,Se,Te)}function te(pe,ae,Te){for(var Pe=0;Pe<ae;Pe++)for(var Ae=Pe;Ae<ae;Ae++)if(y(v(a(s(pe[Pe][Ae],pe[Ae][Pe]))),Te))return!1;return!0}function ce(pe,ae,Te){for(var Pe=0;Pe<ae;Pe++)for(var Ae=0;Ae<ae;Ae++)if(y(v(a(H(pe[Pe][Ae]))),Te))return!1;return!0}function Q(pe,ae){for(var Te=0;Te<ae;Te++)for(var Pe=0;Pe<ae;Pe++)pe[Te][Pe]=k(pe[Te][Pe])}function le(pe,ae,Te){var Pe=pe.datatype();if(Pe==="number"||Pe==="BigNumber"||Pe==="Complex")return Pe;for(var Ae=!1,We=!1,z=!1,Se=0;Se<Te;Se++)for(var De=0;De<Te;De++){var ke=ae[Se][De];if(bn(ke)||uA(ke))Ae=!0;else if(Gn(ke))We=!0;else if(lA(ke))z=!0;else throw TypeError("Unsupported type in Matrix: "+Da(ke))}if(We&&z&&console.warn("Complex BigNumbers not supported, this operation will lose precission."),z){for(var Me=0;Me<Te;Me++)for(var Qe=0;Qe<Te;Qe++)ae[Me][Qe]=C(ae[Me][Qe]);return"Complex"}if(We){for(var Ge=0;Ge<Te;Ge++)for(var Ze=0;Ze<Te;Ze++)ae[Ge][Ze]=v(ae[Ge][Ze]);return"BigNumber"}if(Ae){for(var Y=0;Y<Te;Y++)for(var B=0;B<Te;B++)ae[Y][B]=E(ae[Y][B]);return"number"}else throw TypeError("Matrix contains unsupported types only.")}}),kh=sZ({config:Or}),yA=uZ({}),xA=vZ({}),_A=_Z({}),Zr=RZ({Matrix:_A}),Nt=lY({BigNumber:kh,Complex:yA,DenseMatrix:Zr,Fraction:xA}),bB=hK({typed:Nt}),Hh=pK({typed:Nt}),UQ=xQ({typed:Nt}),wA=tK({Complex:yA,typed:Nt}),AB=cJ({typed:Nt}),kQ=wQ({typed:Nt}),Va=HZ({config:Or,typed:Nt}),HQ=EJ({typed:Nt}),VQ=hJ({typed:Nt}),CB=FZ({typed:Nt}),WQ=OZ({config:Or,typed:Nt}),DB=BZ({equalScalar:Va,typed:Nt}),Mc=qK({typed:Nt}),TB=YZ({typed:Nt}),GQ=pJ({typed:Nt}),jQ=ZK({BigNumber:kh,Fraction:xA,complex:wA,typed:Nt}),qQ=MQ({typed:Nt}),x_=GZ({Matrix:_A,equalScalar:Va,typed:Nt}),Im=gK({typed:Nt}),SA=JZ({BigNumber:kh,typed:Nt}),rx=QK({Complex:yA,config:Or,typed:Nt}),__=cK({typed:Nt}),XQ=rK({Fraction:xA,typed:Nt}),gn=oK({DenseMatrix:Zr,Matrix:_A,SparseMatrix:x_,typed:Nt}),$Q=WJ({bignumber:SA,fraction:XQ,number:TB}),YQ=NJ({isInteger:CB,matrix:gn,typed:Nt}),MA=OJ({matrix:gn,config:Or,typed:Nt}),ZQ=BJ({matrix:gn,typed:Nt}),KQ=kJ({BigNumber:kh,config:Or,matrix:gn,typed:Nt}),Yl=gJ({isInteger:CB,matrix:gn,typed:Nt}),JQ=_J({DenseMatrix:Zr,SparseMatrix:x_,matrix:gn,typed:Nt}),Vh=jJ({numeric:$Q,typed:Nt}),PB=KJ({DenseMatrix:Zr,concat:Yl,equalScalar:Va,matrix:gn,typed:Nt}),RB=SJ({matrix:gn,typed:Nt}),EA=AJ({BigNumber:kh,DenseMatrix:Zr,SparseMatrix:x_,config:Or,matrix:gn,typed:Nt}),QQ=uQ({DenseMatrix:Zr,concat:Yl,config:Or,matrix:gn,typed:Nt}),eee=lK({flatten:RB,matrix:gn,size:MA,typed:Nt}),tee=TJ({BigNumber:kh,config:Or,matrix:gn,typed:Nt}),nee=TQ({addScalar:Hh,complex:wA,conj:AB,divideScalar:Vh,equal:PB,identity:EA,isZero:DB,matrix:gn,multiplyScalar:Mc,sign:jQ,sqrt:rx,subtractScalar:Im,typed:Nt,unaryMinus:__,zeros:KQ}),bA=eQ({DenseMatrix:Zr,concat:Yl,config:Or,matrix:gn,typed:Nt}),IB=tJ({DenseMatrix:Zr,concat:Yl,equalScalar:Va,matrix:gn,subtractScalar:Im,typed:Nt,unaryMinus:__}),iee=XJ({DenseMatrix:Zr,divideScalar:Vh,equalScalar:Va,matrix:gn,multiplyScalar:Mc,subtractScalar:Im,typed:Nt}),FB=bQ({DenseMatrix:Zr,SparseMatrix:x_,addScalar:Hh,concat:Yl,equalScalar:Va,matrix:gn,typed:Nt}),NB=CQ({addScalar:Hh,conj:AB,multiplyScalar:Mc,size:MA,typed:Nt}),ree=dQ({DenseMatrix:Zr,smaller:bA}),see=gQ({ImmutableDenseMatrix:ree,getMatrixDataType:HQ}),LB=oQ({DenseMatrix:Zr,concat:Yl,config:Or,matrix:gn,typed:Nt}),Ls=$K({addScalar:Hh,dot:NB,equalScalar:Va,matrix:gn,multiplyScalar:Mc,typed:Nt}),oee=YJ({DenseMatrix:Zr,divideScalar:Vh,equalScalar:Va,matrix:gn,multiplyScalar:Mc,subtractScalar:Im,typed:Nt}),aee=RQ({divideScalar:Vh,isZero:DB,matrix:gn,multiply:Ls,subtractScalar:Im,typed:Nt,unaryMinus:__}),lee=oJ({concat:Yl,equalScalar:Va,matrix:gn,multiplyScalar:Mc,typed:Nt}),uee=iQ({DenseMatrix:Zr,concat:Yl,config:Or,matrix:gn,typed:Nt}),cee=IJ({bignumber:SA,matrix:gn,add:FB,config:Or,isPositive:WQ,larger:LB,largerEq:QQ,smaller:bA,smallerEq:uee,typed:Nt}),fee=yJ({Index:see,matrix:gn,range:cee,typed:Nt}),hee=FQ({abs:bB,addScalar:Hh,det:aee,divideScalar:Vh,identity:EA,matrix:gn,multiply:Ls,typed:Nt,unaryMinus:__}),dee=BQ({abs:bB,add:FB,addScalar:Hh,atan:UQ,bignumber:SA,column:fee,complex:wA,config:Or,cos:kQ,diag:JQ,divideScalar:Vh,dot:NB,equal:PB,flatten:RB,im:VQ,inv:hee,larger:LB,matrix:gn,matrixFromColumns:eee,multiply:Ls,multiplyScalar:Mc,number:TB,qr:nee,re:GQ,reshape:YQ,sin:qQ,size:MA,smaller:bA,sqrt:rx,subtract:IB,typed:Nt,usolve:iee,usolveAll:oee});function Ol(n,e,t,i){const r=d_(ds[n],ds[e],h_),s=i.current[n],o=i.current[e];if(s===void 0||o===void 0)throw new Error(`${n} or ${e} does not exist`);const l=(t==="plane"?AA:OB)(s.position,o.position);return{trueDistance:r,currDistance:l}}function Fm(n,e,t,i){const r=d_(ds[n],ds[e],h_),s=i[n],o=i[e];if(s===void 0||o===void 0)throw new Error(`${n} or ${e} does not exist`);const l=(t==="plane"?AA:OB)(s,o);return{trueDistance:r,currDistance:l}}function Ec(n,e){let t=0;const i=Object.keys(e);for(const r of i)for(const s of i){if(r===s)continue;const{trueDistance:o,currDistance:a}=Fm(r,s,n,e);t+=Math.abs(o-a)}return t/2}function pee(n){n===void 0&&(n=ds);const e={};for(const[t,i]of Object.entries(n))for(const[r,s]of Object.entries(n)){const o=d_(i,s,h_);e[t]===void 0&&(e[t]={}),e[r]===void 0&&(e[r]={}),e[t][r]=o,e[r][t]=o}return e}const AA=(n,e)=>h$(n,e)*Xy,OB=(n,e)=>{const t=JP(n,Gs),i=JP(e,Gs);return d_(t,i,h_)},mee=n=>gn([[Math.cos(n),-Math.sin(n),0],[Math.sin(n),Math.cos(n),0],[0,0,1]]),KR=(n,e)=>gn([[1,0,n],[0,1,e],[0,0,1]]),JR=(n,e)=>{const t=Math.atan((e.y-n.y)/(e.x-n.x));return n.x>e.x?Math.PI+t:t},gee=n=>{const e=gn(n),[t]=e.size(),i=lee(e,e),r=IB(EA(t),Ls(1/t,tee(1,1))),s=Ls(-.5,Ls(r,Ls(i,r))),{eigenvectors:o}=dee(s);o.sort(h=>h.value);const a=o[o.length-1],l=o[o.length-2],u=Ls(rx(a.value),a.vector),c=Ls(rx(l.value),l.vector);return[u.toArray(),c.toArray()]},vee=(n,e,t)=>{const i=e.findIndex(v=>v===t.city1.name),r=e.findIndex(v=>v===t.city2.name);if(i===void 0||r===void 0)throw new Error("city does not exist");const s=new Fe(n[0][i],n[1][i]),o=new Fe(n[0][r],n[1][r]),a=new Fe(t.city1.position.x,t.city1.position.z),l=new Fe(t.city2.position.x,t.city2.position.z),u=JR(s,o),c=JR(a,l),f=Array.from({length:n[0].length}).map(()=>1),h=gn([...n,f]),m=Ls(KR(a.x,a.y),Ls(mee(-u+c),Ls(KR(-s.x,-s.y),h))).toArray();return ZQ(gn([m[0],m[1]])).toArray()},yee=n=>{const e=pee(n.positions),t=Object.keys(e),i=t.length,r=Array.from({length:i}).map(()=>Array.from({length:i}).map(()=>0));for(let a=0;a<t.length;a++)for(let l=0;l<t.length;l++)r[a][l]=e[t[a]][t[l]]/Xy;const s=vee(gee(r),t,n),o={};for(let a=0;a<t.length;a++){const l=t[a];o[l]=new j(s[a][0],0,s[a][1])}return o},Od={solution:null,prevParams:null},xee=(n,e)=>((Od.solution===null||JSON.stringify(Od.prevParams)!==JSON.stringify(e))&&(Od.solution=yee(e),Od.prevParams=e),Od.solution[n]),_ee=(n,e,t)=>{const i=e.current[n];if(i===void 0||t===null)throw new Error("Base or dest should not be undefined");const r=t.mesh,{trueDistance:s,currDistance:o}=Ol(n,t.name,"plane",e),a=new j().copy(r.position),l=new j().copy(i.position);return new j().lerpVectors(a,l,s/o)},wee=(n,e,t,i,r,s)=>{var o,a,l;if(n==="global"){const[u,c]=s;if(!u||!c)throw new Error("animation should not be null in getFinalPosition");const f=(o=t.current[u])==null?void 0:o.position,h=(a=t.current[c])==null?void 0:a.position;if(f===void 0||h===void 0)throw new Error("City does not exist");const m={city1:{name:u,position:new j().copy(f)},city2:{name:c,position:new j().copy(h)},positions:r};return xee(e,m)}if(n==="fixed"){const u=(l=t.current[e])==null?void 0:l.position;if(u===void 0)throw new Error("City does not exist");return u}return _ee(e,t,i)},See=(n,e,t,i)=>{const r=n.x,s=n.y,o=e.x,a=e.y;if(n.equals(e))throw new Error("centers must be different");const l=(o-r)*(o-r)+(a-s)*(a-s),u=new Fe(r+o,s+a).multiplyScalar(1/2),c=new Fe(o-r,a-s).multiplyScalar((t*t-i*i)/(2*l)),f=1/2*Math.sqrt(2*(t*t+i*i)/l-(t*t-i*i)*(t*t-i*i)/(l*l)-1),h=new Fe(a-s,r-o).multiplyScalar(f),m=u.clone().add(c).add(h),v=u.clone().add(c).sub(h);return{sol1:m,sol2:v}},Mee=(n,e,t)=>{const i=e.current[n];if(i===void 0||t===null)throw new Error("Base or dest should not be undefined");const r=t.mesh,{trueDistance:s,currDistance:o}=Ol(n,t.name,"sphere",e),a=new j().copy(r.position).normalize(),l=new j().copy(i.position).normalize();return _h(a,l,s/o).multiplyScalar(Gs)},Eee=(n,e,t,i)=>{var r;if(n===null)throw new Error("animation should not be null in getFinalPosition");if(n==="global"){if(!ds[e])throw new Error("city does not exist");return aA(ds[e].lat,ds[e].lon,Gs)}if(n==="fixed"){const s=(r=t.current[e])==null?void 0:r.position;if(s===void 0)throw new Error("City does not exist");return s}return Mee(e,t,i)};function bee(n,e,t,i){if(i==="sphere"){const r=new j().copy(n).normalize(),s=new j().copy(e).normalize();return _h(r,s,t).multiplyScalar(Gs)}return new j().lerpVectors(n,e,t)}function Aee({type:n,animation:e,cityName:t,citiesRef:i,hoveredCity:r,contextMenu:s,positions:o}){return n==="sphere"?Eee(e,t,i,r):wee(e,t,i,r,o,[s.cityName,s.anchor])}function Cee(n,e,t){const r=Ve(g=>g.updateAnimationState),s=Ve(g=>g.citiesRef),o=Ve(g=>g.hoveredCity),a=Ve(g=>g.contextMenu),l=Ve(g=>g.animations),u=Ve(g=>g.truePositions),c=Ve(g=>g.isAnimating),f=Ve(g=>g.updateIsAnimating),h=Ve(g=>g.updateCurrPositions),m=l[e]??null,v=ie.useRef(null);ie.useEffect(()=>{if(c||m===null||s.current[e]===void 0)return;const g=s.current[e].position.clone(),{anchor:x}=a;if(x===null&&n==="plane"&&m==="global")return;let y=Aee({animation:m,type:n,cityName:e,citiesRef:s,hoveredCity:o,contextMenu:a,positions:u});const _=0;g.distanceTo(y)<.01&&(y=g.clone()),v.current={source:g,dest:y,elapsed:_},f(!0)},[f,s,e,c,m,n,a,o,u]),Qo((g,x)=>{if(!c||v.current===null)return;if(v.current.elapsed>5){t.current.position.copy(v.current.dest),v.current=null,f(!1),r(null,e),h();return}const y=bee(v.current.source,v.current.dest,v.current.elapsed/5,n);t.current.position.copy(y),v.current.elapsed+=x,h()})}function bc({CityMesh:n}){n===void 0&&(n=Iee);const e=Ve(t=>t.truePositions);return Object.keys(e).map(t=>O.jsx(Dee,{cityName:t,CityMesh:n},t))}function Dee({cityName:n,CityMesh:e}){const t=ie.useRef(null),i=Pee(n,t),r=Ve(a=>a.objectType),s=Ve(a=>a.hoveredCity),o=Ve(a=>a.isDragging);return Cee(r,n,t),Tee(r,n,t),Ree(r,n),Qo(()=>{const a=t.current.position;a.length()>ac&&a.multiplyScalar((ac-1)/a.length())}),ie.useEffect(()=>{t.current.material.color.set(n===(s==null?void 0:s.name)&&o?16755370:16711680)},[s,n,o]),O.jsx(e,{...i,ref:t})}function Tee(n,e,t){const i=Ve(s=>s.citiesRef),r=Ve(s=>s.updateCities);ie.useEffect(()=>{const s=t.current;if(i.current[e]!==void 0)t.current.position.copy(i.current[e].position);else{const{lat:o,lon:a}=ds[e];if(n==="sphere"){const l=aA(o+Kv(),a+Kv(),Gs);t.current.position.copy(l)}else t.current.position.set(o/3+Kv(),0,a/3+Kv())}return r(e,t.current),()=>r(e,s,!0)},[n,i,t,r,e])}function Pee(n,e){const t=Ve(m=>m.hoveredCity),i=Ve(m=>m.isDragging),r=Ve(m=>m.updateHoveredCity),s=Ve(m=>m.updateIsDragging),o=Ve(m=>m.updateContextMenu),a=Ve(m=>m.updateControlsEnabled),l=Ve(m=>m.updateMoveLock);return{onPointerMove:m=>{m.intersections.find(v=>v.object.uuid===e.current.uuid)&&n!==(t==null?void 0:t.name)&&i===!1&&r(n)},onPointerDown:m=>{m.button!==2&&(s(!0),a(!1),l(!1))},onPointerLeave:()=>{},onContextMenu:m=>{m.nativeEvent.preventDefault(),o({cityName:n,mousePosition:[m.nativeEvent.clientX,m.nativeEvent.clientY],anchor:null,visible:!0})}}}function Ree(n,e){const t=Ve(C=>C.hoveredCity),i=Ve(C=>C.truePositions),r=Ve(C=>C.citiesRef),s=Ve(C=>C.moveHoveredCity),o=Ve(C=>C.isDragging),a=Ve(C=>C.updateMoveLock),l=_n(C=>C.pointer),u=_n(C=>C.camera),c=_n(C=>C.raycaster),f=_n(C=>C.scene),h=Ve(C=>C.earthUUID),[m,v]=ie.useState(null),g=Ve(C=>C.route),x=g==="plane"?100:200,y=g==="plane"?200:500,_=.5,w=1.2;function E(){c.setFromCamera(l,u);const M=c.intersectObjects(f.children).find(D=>D.object.uuid===h);if(M===void 0)return null;let{x:T,y:R,z:A}=M.point;return T=+T.toFixed(3),R=+R.toFixed(3),A=+A.toFixed(3),new j(T,R,A)}Qo(()=>{if((t==null?void 0:t.name)!==e||!o||i[e]===void 0||r.current[e]===void 0)return;if(n==="sphere"){const M=aA(i[e].lat,i[e].lon,Gs),T=E();if(T===null)return;const R=T.distanceTo(M);R<_&&(v(e),s(M.x,M.y,M.z,!0)),R>w&&a(!1);return}const C=Object.keys(i).filter(M=>M!==e);for(const M of C){if(r.current[M]===void 0)continue;const{trueDistance:T}=Ol(e,M,n,r),R=E();if(R===null)return;const A=AA(R,r.current[M].position),D=Math.abs(T-A);if(D===0){v(M);break}if(m===M){D>y&&(v(null),a(!1));return}if(D<x){for(const J of C){if(J===M||r.current[J]===void 0)continue;const N=Ol(e,J,n,r),W=N.trueDistance,X=N.currDistance;if(Math.abs(W-X)<x*4){const te=r.current[e].position,ce=r.current[M].position,Q=r.current[J].position,le=new Fe(ce.x,ce.z),pe=new Fe(Q.x,Q.z),ae=T/Xy,Te=W/Xy,{sol1:Pe,sol2:Ae}=See(le,pe,ae,Te),We=new j(Pe.x,0,Pe.y),z=new j(Ae.x,0,Ae.y),{x:Se,y:De,z:ke}=te.distanceTo(We)<te.distanceTo(z)?We:z;s(Se,De,ke,!0),v(M);return}}const I=r.current[e].position,L=r.current[M].position,H=new j().lerpVectors(L,I,T/A),{x:k,y:$,z:G}=H;s(k,$,G,!0),v(M);return}}})}const Iee=ie.forwardRef((n,e)=>O.jsxs("mesh",{ref:e,position:[0,0,0],...n,children:[O.jsx("sphereGeometry",{args:[.5]}),O.jsx("meshBasicMaterial",{color:"red"})]}));function Fee(n,e,t,i,r,s){n.beginPath(),n.moveTo(e+s,t),n.lineTo(e+i-s,t),n.quadraticCurveTo(e+i,t,e+i,t+s),n.lineTo(e+i,t+r-s),n.quadraticCurveTo(e+i,t+r,e+i-s,t+r),n.lineTo(e+s,t+r),n.quadraticCurveTo(e,t+r,e,t+r-s),n.lineTo(e,t+s),n.quadraticCurveTo(e,t,e+s,t),n.closePath(),n.fill(),n.stroke()}const Nee=(n,e)=>{e===void 0&&(e={});const t=e.fontface??"Arial",i=e.fontsize??25,r=e.borderThickness??4,s=e.borderColor??{r:225,g:0,b:0,a:1},o=e.backgroundColor??{r:225,g:140,b:0,a:.9},a=document.createElement("canvas"),l=a.getContext("2d");if(l===null)throw new Error("could not reacte sprite canvas");l.font="Bold "+i+"px "+t;const c=l.measureText(n).width;return l.fillStyle="rgba("+o.r+","+o.g+","+o.b+","+o.a+")",l.strokeStyle="rgba("+s.r+","+s.g+","+s.b+","+s.a+")",l.lineWidth=r,Fee(l,r/2+65,r/2,c+r,i*1.2+r,19),l.fillStyle="rgba(0, 0, 0, 1.0)",l.fillText(n,r+65,i+r),new jn(a)},Lee=n=>{const e={};for(const t of Object.keys(n))e[t]=jM(t);return e},Nm=n=>{const e={};for(let t=0;t<Object.keys(n).length;t++){const i=Object.keys(n)[t];e[i]=String.fromCharCode(t+65)}return e};function Ac({generateLabels:n,TextSprite:e}){e===void 0&&(e=Bee),n===void 0&&(n=Lee);const t=Ve(r=>r.truePositions),i=n(t);return Object.keys(i).map(r=>O.jsx(zee,{message:i[r]??"",cityName:r,TextSprite:e},r))}const Oee=(n,e)=>{const t=Ve(r=>r.citiesRef),i=Ve(r=>r.objectType);Qo(()=>{const r=t.current[e];r!==void 0&&(n.current.position.copy(r.position),i==="sphere"&&n.current.position.multiplyScalar(1.05))})};function zee({message:n,cityName:e,TextSprite:t}){const i=ie.useRef(null);return Oee(i,e),O.jsx(t,{ref:i,message:n})}const CA=n=>(n===void 0&&(n={}),n.scale===void 0&&(n.scale=[10,5,1]),ie.forwardRef(({message:e},t)=>{const i=Nee(e,n);return i.needsUpdate=!0,O.jsx("sprite",{scale:n.scale,position:[0,0,0],ref:t,children:O.jsx("spriteMaterial",{map:i,depthTest:!0,transparent:!0})})})),Bee=CA();function Wh(){const n=Ve(s=>s.nCities),e=Ve(s=>s.nRenderedCities),t=Ve(s=>s.currPositions),i=Ve(s=>s.objectType),r=Math.round(Ec(i,t));return n!==e?null:O.jsx("div",{className:"text-white p-10 text-4xl pointer-events-none select-none",children:r})}function Uee(){const n=Ve(o=>o.citiesRef),e=Ve(o=>o.nRenderedCities),t=Ve(o=>o.objectType),i=Ve(o=>o.hoveredCity),r=i==null?void 0:i.name;if(e===0||r===void 0)return null;const s={};for(const o of Object.keys(n.current)){if(r===o)continue;const{trueDistance:a}=Ol(r,o,t,n);s[o]=a}return O.jsxs("div",{className:"flex flex-col justify-center text-center w-fit text-white",children:[O.jsx("div",{className:"text-xl border-gray-100 border-b",children:"True Distances"}),O.jsx("div",{className:"flex flex-col justify-around text-left",children:Object.keys(s).map(o=>{const a=jM(r),l=jM(o),u=Math.round((s[o]??0)/10)*10;return O.jsxs("div",{className:"",children:[a,"    ",l,": ",u,"km"]},o)})})]})}function w_(){const n="/",[e,t]=ie.useState(!0);return O.jsxs("div",{className:"text-white",children:[O.jsx("div",{className:`overflow-hidden ease-linear duration-500 transition-all min-w-fit pointer-events-none
        ${e?"w-full opacity-100 px-10 ":"w-0 opacity-0 px-0"}`,children:O.jsx(Uee,{})}),O.jsx("br",{}),O.jsx("div",{onClick:()=>t(i=>!i),className:`transition-all ease-linear duration-500
          ${e?"px-10":"px-0"}`,children:O.jsx("div",{className:`pointer-events-auto align-middle inline-block leading-none hover:cursor-pointer text-center w-fit px-1 py-2 transition-all ease-linear duration-500 rounded-r ${e?"rotate-180 ":"rotate-0"}`,children:O.jsx("img",{src:`${n}icons/arrow.svg`})})})]})}function Cc({children:n}){return O.jsx("div",{className:"overflow-hidden w-full h-full absolute top-0 pointer-events-none",children:n})}function zB(){const n=xo();return O.jsxs("div",{className:"flex justify-around text-white text-gray-xs pointer-events-auto",children:[O.jsx("span",{className:"bg-blue-500 rounded-tl-xl p-2 hover:cursor-pointer",onClick:()=>n("/about"),children:"About"}),O.jsx("span",{className:"bg-gray-500 p-2 text-white hover:cursor-pointer",onClick:()=>n("/bug-report"),children:"Report an Issue"})]})}function kee({text:n,time:e,dest:t}){const i=xo(),[r,s]=ie.useState(-1),o=r===0,a=1e3;return ie.useEffect(()=>{r!==0&&(r===-1?s(e):setTimeout(()=>s(r-1),a))},[r,e]),o?O.jsx("div",{className:"pointer-events-auto bg-[#43CF30] p-2 px-4 text-white hover:cursor-pointer rounded-t-xl",onClick:()=>i(`/${t}`),children:n}):O.jsxs("div",{className:"pointer-events-auto bg-gray-600 p-2 px-4 text-white hover:cursor-pointer rounded-t-xl",children:[n,": ",r,"s left"]})}var Hee=Object.defineProperty,Vee=(n,e,t)=>e in n?Hee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Ht=(n,e,t)=>(Vee(n,typeof e!="symbol"?e+"":e,t),t);const t0=new vc,QR=new va,Wee=Math.cos(70*(Math.PI/180)),e3=(n,e)=>(n%e+e)%e;let BB=class extends Ko{constructor(e,t){super(),Ht(this,"object"),Ht(this,"domElement"),Ht(this,"enabled",!0),Ht(this,"target",new j),Ht(this,"minDistance",0),Ht(this,"maxDistance",1/0),Ht(this,"minZoom",0),Ht(this,"maxZoom",1/0),Ht(this,"minPolarAngle",0),Ht(this,"maxPolarAngle",Math.PI),Ht(this,"minAzimuthAngle",-1/0),Ht(this,"maxAzimuthAngle",1/0),Ht(this,"enableDamping",!1),Ht(this,"dampingFactor",.05),Ht(this,"enableZoom",!0),Ht(this,"zoomSpeed",1),Ht(this,"enableRotate",!0),Ht(this,"rotateSpeed",1),Ht(this,"enablePan",!0),Ht(this,"panSpeed",1),Ht(this,"screenSpacePanning",!0),Ht(this,"keyPanSpeed",7),Ht(this,"zoomToCursor",!1),Ht(this,"autoRotate",!1),Ht(this,"autoRotateSpeed",2),Ht(this,"reverseOrbit",!1),Ht(this,"reverseHorizontalOrbit",!1),Ht(this,"reverseVerticalOrbit",!1),Ht(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Ht(this,"mouseButtons",{LEFT:ma.ROTATE,MIDDLE:ma.DOLLY,RIGHT:ma.PAN}),Ht(this,"touches",{ONE:ga.ROTATE,TWO:ga.DOLLY_PAN}),Ht(this,"target0"),Ht(this,"position0"),Ht(this,"zoom0"),Ht(this,"_domElementKeyEvents",null),Ht(this,"getPolarAngle"),Ht(this,"getAzimuthalAngle"),Ht(this,"setPolarAngle"),Ht(this,"setAzimuthalAngle"),Ht(this,"getDistance"),Ht(this,"listenToKeyEvents"),Ht(this,"stopListenToKeyEvents"),Ht(this,"saveState"),Ht(this,"reset"),Ht(this,"update"),Ht(this,"connect"),Ht(this,"dispose"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=ne=>{let Re=e3(ne,2*Math.PI),et=c.phi;et<0&&(et+=2*Math.PI),Re<0&&(Re+=2*Math.PI);let re=Math.abs(Re-et);2*Math.PI-re<re&&(Re<et?Re+=2*Math.PI:et+=2*Math.PI),f.phi=Re-et,i.update()},this.setAzimuthalAngle=ne=>{let Re=e3(ne,2*Math.PI),et=c.theta;et<0&&(et+=2*Math.PI),Re<0&&(Re+=2*Math.PI);let re=Math.abs(Re-et);2*Math.PI-re<re&&(Re<et?Re+=2*Math.PI:et+=2*Math.PI),f.theta=Re-et,i.update()},this.getDistance=()=>i.object.position.distanceTo(i.target),this.listenToKeyEvents=ne=>{ne.addEventListener("keydown",fe),this._domElementKeyEvents=ne},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",fe),this._domElementKeyEvents=null},this.saveState=()=>{i.target0.copy(i.target),i.position0.copy(i.object.position),i.zoom0=i.object.zoom},this.reset=()=>{i.target.copy(i.target0),i.object.position.copy(i.position0),i.object.zoom=i.zoom0,i.object.updateProjectionMatrix(),i.dispatchEvent(r),i.update(),l=a.NONE},this.update=(()=>{const ne=new j,Re=new j(0,1,0),et=new mr().setFromUnitVectors(e.up,Re),re=et.clone().invert(),He=new j,Oe=new mr,Be=2*Math.PI;return function(){const Et=i.object.position;et.setFromUnitVectors(e.up,Re),re.copy(et).invert(),ne.copy(Et).sub(i.target),ne.applyQuaternion(et),c.setFromVector3(ne),i.autoRotate&&l===a.NONE&&k(L()),i.enableDamping?(c.theta+=f.theta*i.dampingFactor,c.phi+=f.phi*i.dampingFactor):(c.theta+=f.theta,c.phi+=f.phi);let Bt=i.minAzimuthAngle,en=i.maxAzimuthAngle;isFinite(Bt)&&isFinite(en)&&(Bt<-Math.PI?Bt+=Be:Bt>Math.PI&&(Bt-=Be),en<-Math.PI?en+=Be:en>Math.PI&&(en-=Be),Bt<=en?c.theta=Math.max(Bt,Math.min(en,c.theta)):c.theta=c.theta>(Bt+en)/2?Math.max(Bt,c.theta):Math.min(en,c.theta)),c.phi=Math.max(i.minPolarAngle,Math.min(i.maxPolarAngle,c.phi)),c.makeSafe(),i.enableDamping===!0?i.target.addScaledVector(m,i.dampingFactor):i.target.add(m),i.zoomToCursor&&A||i.object.isOrthographicCamera?c.radius=te(c.radius):c.radius=te(c.radius*h),ne.setFromSpherical(c),ne.applyQuaternion(re),Et.copy(i.target).add(ne),i.object.matrixAutoUpdate||i.object.updateMatrix(),i.object.lookAt(i.target),i.enableDamping===!0?(f.theta*=1-i.dampingFactor,f.phi*=1-i.dampingFactor,m.multiplyScalar(1-i.dampingFactor)):(f.set(0,0,0),m.set(0,0,0));let yn=!1;if(i.zoomToCursor&&A){let Wt=null;if(i.object instanceof oi&&i.object.isPerspectiveCamera){const Un=ne.length();Wt=te(Un*h);const Nn=Un-Wt;i.object.position.addScaledVector(T,Nn),i.object.updateMatrixWorld()}else if(i.object.isOrthographicCamera){const Un=new j(R.x,R.y,0);Un.unproject(i.object),i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/h)),i.object.updateProjectionMatrix(),yn=!0;const Nn=new j(R.x,R.y,0);Nn.unproject(i.object),i.object.position.sub(Nn).add(Un),i.object.updateMatrixWorld(),Wt=ne.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),i.zoomToCursor=!1;Wt!==null&&(i.screenSpacePanning?i.target.set(0,0,-1).transformDirection(i.object.matrix).multiplyScalar(Wt).add(i.object.position):(t0.origin.copy(i.object.position),t0.direction.set(0,0,-1).transformDirection(i.object.matrix),Math.abs(i.object.up.dot(t0.direction))<Wee?e.lookAt(i.target):(QR.setFromNormalAndCoplanarPoint(i.object.up,i.target),t0.intersectPlane(QR,i.target))))}else i.object instanceof Sa&&i.object.isOrthographicCamera&&(yn=h!==1,yn&&(i.object.zoom=Math.max(i.minZoom,Math.min(i.maxZoom,i.object.zoom/h)),i.object.updateProjectionMatrix()));return h=1,A=!1,yn||He.distanceToSquared(i.object.position)>u||8*(1-Oe.dot(i.object.quaternion))>u?(i.dispatchEvent(r),He.copy(i.object.position),Oe.copy(i.object.quaternion),yn=!1,!0):!1}})(),this.connect=ne=>{ne===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),i.domElement=ne,i.domElement.style.touchAction="none",i.domElement.addEventListener("contextmenu",ge),i.domElement.addEventListener("pointerdown",B),i.domElement.addEventListener("pointercancel",U),i.domElement.addEventListener("wheel",he)},this.dispose=()=>{var ne,Re,et,re,He,Oe;i.domElement&&(i.domElement.style.touchAction="auto"),(ne=i.domElement)==null||ne.removeEventListener("contextmenu",ge),(Re=i.domElement)==null||Re.removeEventListener("pointerdown",B),(et=i.domElement)==null||et.removeEventListener("pointercancel",U),(re=i.domElement)==null||re.removeEventListener("wheel",he),(He=i.domElement)==null||He.ownerDocument.removeEventListener("pointermove",we),(Oe=i.domElement)==null||Oe.ownerDocument.removeEventListener("pointerup",U),i._domElementKeyEvents!==null&&i._domElementKeyEvents.removeEventListener("keydown",fe)};const i=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,c=new HM,f=new HM;let h=1;const m=new j,v=new Fe,g=new Fe,x=new Fe,y=new Fe,_=new Fe,w=new Fe,E=new Fe,C=new Fe,M=new Fe,T=new j,R=new Fe;let A=!1;const D=[],I={};function L(){return 2*Math.PI/60/60*i.autoRotateSpeed}function H(){return Math.pow(.95,i.zoomSpeed)}function k(ne){i.reverseOrbit||i.reverseHorizontalOrbit?f.theta+=ne:f.theta-=ne}function $(ne){i.reverseOrbit||i.reverseVerticalOrbit?f.phi+=ne:f.phi-=ne}const G=(()=>{const ne=new j;return function(et,re){ne.setFromMatrixColumn(re,0),ne.multiplyScalar(-et),m.add(ne)}})(),J=(()=>{const ne=new j;return function(et,re){i.screenSpacePanning===!0?ne.setFromMatrixColumn(re,1):(ne.setFromMatrixColumn(re,0),ne.crossVectors(i.object.up,ne)),ne.multiplyScalar(et),m.add(ne)}})(),N=(()=>{const ne=new j;return function(et,re){const He=i.domElement;if(He&&i.object instanceof oi&&i.object.isPerspectiveCamera){const Oe=i.object.position;ne.copy(Oe).sub(i.target);let Be=ne.length();Be*=Math.tan(i.object.fov/2*Math.PI/180),G(2*et*Be/He.clientHeight,i.object.matrix),J(2*re*Be/He.clientHeight,i.object.matrix)}else He&&i.object instanceof Sa&&i.object.isOrthographicCamera?(G(et*(i.object.right-i.object.left)/i.object.zoom/He.clientWidth,i.object.matrix),J(re*(i.object.top-i.object.bottom)/i.object.zoom/He.clientHeight,i.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),i.enablePan=!1)}})();function W(ne){i.object instanceof oi&&i.object.isPerspectiveCamera||i.object instanceof Sa&&i.object.isOrthographicCamera?h/=ne:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function X(ne){i.object instanceof oi&&i.object.isPerspectiveCamera||i.object instanceof Sa&&i.object.isOrthographicCamera?h*=ne:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),i.enableZoom=!1)}function ee(ne){if(!i.zoomToCursor||!i.domElement)return;A=!0;const Re=i.domElement.getBoundingClientRect(),et=ne.clientX-Re.left,re=ne.clientY-Re.top,He=Re.width,Oe=Re.height;R.x=et/He*2-1,R.y=-(re/Oe)*2+1,T.set(R.x,R.y,1).unproject(i.object).sub(i.object.position).normalize()}function te(ne){return Math.max(i.minDistance,Math.min(i.maxDistance,ne))}function ce(ne){v.set(ne.clientX,ne.clientY)}function Q(ne){ee(ne),E.set(ne.clientX,ne.clientY)}function le(ne){y.set(ne.clientX,ne.clientY)}function pe(ne){g.set(ne.clientX,ne.clientY),x.subVectors(g,v).multiplyScalar(i.rotateSpeed);const Re=i.domElement;Re&&(k(2*Math.PI*x.x/Re.clientHeight),$(2*Math.PI*x.y/Re.clientHeight)),v.copy(g),i.update()}function ae(ne){C.set(ne.clientX,ne.clientY),M.subVectors(C,E),M.y>0?W(H()):M.y<0&&X(H()),E.copy(C),i.update()}function Te(ne){_.set(ne.clientX,ne.clientY),w.subVectors(_,y).multiplyScalar(i.panSpeed),N(w.x,w.y),y.copy(_),i.update()}function Pe(ne){ee(ne),ne.deltaY<0?X(H()):ne.deltaY>0&&W(H()),i.update()}function Ae(ne){let Re=!1;switch(ne.code){case i.keys.UP:N(0,i.keyPanSpeed),Re=!0;break;case i.keys.BOTTOM:N(0,-i.keyPanSpeed),Re=!0;break;case i.keys.LEFT:N(i.keyPanSpeed,0),Re=!0;break;case i.keys.RIGHT:N(-i.keyPanSpeed,0),Re=!0;break}Re&&(ne.preventDefault(),i.update())}function We(){if(D.length==1)v.set(D[0].pageX,D[0].pageY);else{const ne=.5*(D[0].pageX+D[1].pageX),Re=.5*(D[0].pageY+D[1].pageY);v.set(ne,Re)}}function z(){if(D.length==1)y.set(D[0].pageX,D[0].pageY);else{const ne=.5*(D[0].pageX+D[1].pageX),Re=.5*(D[0].pageY+D[1].pageY);y.set(ne,Re)}}function Se(){const ne=D[0].pageX-D[1].pageX,Re=D[0].pageY-D[1].pageY,et=Math.sqrt(ne*ne+Re*Re);E.set(0,et)}function De(){i.enableZoom&&Se(),i.enablePan&&z()}function ke(){i.enableZoom&&Se(),i.enableRotate&&We()}function Me(ne){if(D.length==1)g.set(ne.pageX,ne.pageY);else{const et=Ye(ne),re=.5*(ne.pageX+et.x),He=.5*(ne.pageY+et.y);g.set(re,He)}x.subVectors(g,v).multiplyScalar(i.rotateSpeed);const Re=i.domElement;Re&&(k(2*Math.PI*x.x/Re.clientHeight),$(2*Math.PI*x.y/Re.clientHeight)),v.copy(g)}function Qe(ne){if(D.length==1)_.set(ne.pageX,ne.pageY);else{const Re=Ye(ne),et=.5*(ne.pageX+Re.x),re=.5*(ne.pageY+Re.y);_.set(et,re)}w.subVectors(_,y).multiplyScalar(i.panSpeed),N(w.x,w.y),y.copy(_)}function Ge(ne){const Re=Ye(ne),et=ne.pageX-Re.x,re=ne.pageY-Re.y,He=Math.sqrt(et*et+re*re);C.set(0,He),M.set(0,Math.pow(C.y/E.y,i.zoomSpeed)),W(M.y),E.copy(C)}function Ze(ne){i.enableZoom&&Ge(ne),i.enablePan&&Qe(ne)}function Y(ne){i.enableZoom&&Ge(ne),i.enableRotate&&Me(ne)}function B(ne){var Re,et;i.enabled!==!1&&(D.length===0&&((Re=i.domElement)==null||Re.ownerDocument.addEventListener("pointermove",we),(et=i.domElement)==null||et.ownerDocument.addEventListener("pointerup",U)),Ee(ne),ne.pointerType==="touch"?ue(ne):q(ne))}function we(ne){i.enabled!==!1&&(ne.pointerType==="touch"?Ne(ne):Z(ne))}function U(ne){var Re,et,re;Le(ne),D.length===0&&((Re=i.domElement)==null||Re.releasePointerCapture(ne.pointerId),(et=i.domElement)==null||et.ownerDocument.removeEventListener("pointermove",we),(re=i.domElement)==null||re.ownerDocument.removeEventListener("pointerup",U)),i.dispatchEvent(o),l=a.NONE}function q(ne){let Re;switch(ne.button){case 0:Re=i.mouseButtons.LEFT;break;case 1:Re=i.mouseButtons.MIDDLE;break;case 2:Re=i.mouseButtons.RIGHT;break;default:Re=-1}switch(Re){case ma.DOLLY:if(i.enableZoom===!1)return;Q(ne),l=a.DOLLY;break;case ma.ROTATE:if(ne.ctrlKey||ne.metaKey||ne.shiftKey){if(i.enablePan===!1)return;le(ne),l=a.PAN}else{if(i.enableRotate===!1)return;ce(ne),l=a.ROTATE}break;case ma.PAN:if(ne.ctrlKey||ne.metaKey||ne.shiftKey){if(i.enableRotate===!1)return;ce(ne),l=a.ROTATE}else{if(i.enablePan===!1)return;le(ne),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Z(ne){if(i.enabled!==!1)switch(l){case a.ROTATE:if(i.enableRotate===!1)return;pe(ne);break;case a.DOLLY:if(i.enableZoom===!1)return;ae(ne);break;case a.PAN:if(i.enablePan===!1)return;Te(ne);break}}function he(ne){i.enabled===!1||i.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(ne.preventDefault(),i.dispatchEvent(s),Pe(ne),i.dispatchEvent(o))}function fe(ne){i.enabled===!1||i.enablePan===!1||Ae(ne)}function ue(ne){switch(nt(ne),D.length){case 1:switch(i.touches.ONE){case ga.ROTATE:if(i.enableRotate===!1)return;We(),l=a.TOUCH_ROTATE;break;case ga.PAN:if(i.enablePan===!1)return;z(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(i.touches.TWO){case ga.DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;De(),l=a.TOUCH_DOLLY_PAN;break;case ga.DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;ke(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&i.dispatchEvent(s)}function Ne(ne){switch(nt(ne),l){case a.TOUCH_ROTATE:if(i.enableRotate===!1)return;Me(ne),i.update();break;case a.TOUCH_PAN:if(i.enablePan===!1)return;Qe(ne),i.update();break;case a.TOUCH_DOLLY_PAN:if(i.enableZoom===!1&&i.enablePan===!1)return;Ze(ne),i.update();break;case a.TOUCH_DOLLY_ROTATE:if(i.enableZoom===!1&&i.enableRotate===!1)return;Y(ne),i.update();break;default:l=a.NONE}}function ge(ne){i.enabled!==!1&&ne.preventDefault()}function Ee(ne){D.push(ne)}function Le(ne){delete I[ne.pointerId];for(let Re=0;Re<D.length;Re++)if(D[Re].pointerId==ne.pointerId){D.splice(Re,1);return}}function nt(ne){let Re=I[ne.pointerId];Re===void 0&&(Re=new Fe,I[ne.pointerId]=Re),Re.set(ne.pageX,ne.pageY)}function Ye(ne){const Re=ne.pointerId===D[0].pointerId?D[1]:D[0];return I[Re.pointerId]}t!==void 0&&this.connect(t),this.update()}},Gee=class extends BB{constructor(e,t){super(e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=ma.PAN,this.mouseButtons.RIGHT=ma.ROTATE,this.touches.ONE=ga.PAN,this.touches.TWO=ga.DOLLY_ROTATE}};const t3=new Bi,n0=new j;class DA extends Qb{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],i=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(i),this.setAttribute("position",new _t(e,3)),this.setAttribute("uv",new _t(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,i=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),i.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const i=new jy(t,6,1);return this.setAttribute("instanceStart",new fs(i,3,0)),this.setAttribute("instanceEnd",new fs(i,3,3)),this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e,t=3){let i;e instanceof Float32Array?i=e:Array.isArray(e)&&(i=new Float32Array(e));const r=new jy(i,t*2,1);return this.setAttribute("instanceColorStart",new fs(r,t,0)),this.setAttribute("instanceColorEnd",new fs(r,t,t)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new qb(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Bi);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),t3.setFromBufferAttribute(t),this.boundingBox.union(t3))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ui),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const i=this.boundingSphere.center;this.boundingBox.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)n0.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(n0)),n0.fromBufferAttribute(t,s),r=Math.max(r,i.distanceToSquared(n0));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}applyMatrix(e){return console.warn("THREE.LineSegmentsGeometry: applyMatrix() has been renamed to applyMatrix4()."),this.applyMatrix4(e)}}class UB extends DA{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,i=new Float32Array(2*t);for(let r=0;r<t;r+=3)i[2*r]=e[r],i[2*r+1]=e[r+1],i[2*r+2]=e[r+2],i[2*r+3]=e[r+3],i[2*r+4]=e[r+4],i[2*r+5]=e[r+5];return super.setPositions(i),this}setColors(e,t=3){const i=e.length-t,r=new Float32Array(2*i);if(t===3)for(let s=0;s<i;s+=t)r[2*s]=e[s],r[2*s+1]=e[s+1],r[2*s+2]=e[s+2],r[2*s+3]=e[s+3],r[2*s+4]=e[s+4],r[2*s+5]=e[s+5];else for(let s=0;s<i;s+=t)r[2*s]=e[s],r[2*s+1]=e[s+1],r[2*s+2]=e[s+2],r[2*s+3]=e[s+3],r[2*s+4]=e[s+4],r[2*s+5]=e[s+5],r[2*s+6]=e[s+6],r[2*s+7]=e[s+7];return super.setColors(r,t),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class TA extends Ws{constructor(e){super({type:"LineMaterial",uniforms:ky.clone(ky.merge([ft.common,ft.fog,{worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Fe(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}}])),vertexShader:`
				#include <common>
				#include <fog_pars_vertex>
				#include <logdepthbuf_pars_vertex>
				#include <clipping_planes_pars_vertex>

				uniform float linewidth;
				uniform vec2 resolution;

				attribute vec3 instanceStart;
				attribute vec3 instanceEnd;

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
						attribute vec4 instanceColorStart;
						attribute vec4 instanceColorEnd;
					#else
						varying vec3 vLineColor;
						attribute vec3 instanceColorStart;
						attribute vec3 instanceColorEnd;
					#endif
				#endif

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#ifdef USE_DASH

					uniform float dashScale;
					attribute float instanceDistanceStart;
					attribute float instanceDistanceEnd;
					varying float vLineDistance;

				#endif

				void trimSegment( const in vec4 start, inout vec4 end ) {

					// trim end segment so it terminates between the camera plane and the near plane

					// conservative estimate of the near plane
					float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
					float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
					float nearEstimate = - 0.5 * b / a;

					float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

					end.xyz = mix( start.xyz, end.xyz, alpha );

				}

				void main() {

					#ifdef USE_COLOR

						vLineColor = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

					#endif

					#ifdef USE_DASH

						vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
						vUv = uv;

					#endif

					float aspect = resolution.x / resolution.y;

					// camera space
					vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
					vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

					#ifdef WORLD_UNITS

						worldStart = start.xyz;
						worldEnd = end.xyz;

					#else

						vUv = uv;

					#endif

					// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
					// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
					// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
					// perhaps there is a more elegant solution -- WestLangley

					bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

					if ( perspective ) {

						if ( start.z < 0.0 && end.z >= 0.0 ) {

							trimSegment( start, end );

						} else if ( end.z < 0.0 && start.z >= 0.0 ) {

							trimSegment( end, start );

						}

					}

					// clip space
					vec4 clipStart = projectionMatrix * start;
					vec4 clipEnd = projectionMatrix * end;

					// ndc space
					vec3 ndcStart = clipStart.xyz / clipStart.w;
					vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

					// direction
					vec2 dir = ndcEnd.xy - ndcStart.xy;

					// account for clip-space aspect ratio
					dir.x *= aspect;
					dir = normalize( dir );

					#ifdef WORLD_UNITS

						// get the offset direction as perpendicular to the view vector
						vec3 worldDir = normalize( end.xyz - start.xyz );
						vec3 offset;
						if ( position.y < 0.5 ) {

							offset = normalize( cross( start.xyz, worldDir ) );

						} else {

							offset = normalize( cross( end.xyz, worldDir ) );

						}

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						float forwardOffset = dot( worldDir, vec3( 0.0, 0.0, 1.0 ) );

						// don't extend the line if we're rendering dashes because we
						// won't be rendering the endcaps
						#ifndef USE_DASH

							// extend the line bounds to encompass  endcaps
							start.xyz += - worldDir * linewidth * 0.5;
							end.xyz += worldDir * linewidth * 0.5;

							// shift the position of the quad so it hugs the forward edge of the line
							offset.xy -= dir * forwardOffset;
							offset.z += 0.5;

						#endif

						// endcaps
						if ( position.y > 1.0 || position.y < 0.0 ) {

							offset.xy += dir * 2.0 * forwardOffset;

						}

						// adjust for linewidth
						offset *= linewidth * 0.5;

						// set the world position
						worldPos = ( position.y < 0.5 ) ? start : end;
						worldPos.xyz += offset;

						// project the worldpos
						vec4 clip = projectionMatrix * worldPos;

						// shift the depth of the projected points so the line
						// segments overlap neatly
						vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
						clip.z = clipPose.z * clip.w;

					#else

						vec2 offset = vec2( dir.y, - dir.x );
						// undo aspect ratio adjustment
						dir.x /= aspect;
						offset.x /= aspect;

						// sign flip
						if ( position.x < 0.0 ) offset *= - 1.0;

						// endcaps
						if ( position.y < 0.0 ) {

							offset += - dir;

						} else if ( position.y > 1.0 ) {

							offset += dir;

						}

						// adjust for linewidth
						offset *= linewidth;

						// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
						offset /= resolution.y;

						// select end
						vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

						// back to clip space
						offset *= clip.w;

						clip.xy += offset;

					#endif

					gl_Position = clip;

					vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

					#include <logdepthbuf_vertex>
					#include <clipping_planes_vertex>
					#include <fog_vertex>

				}
			`,fragmentShader:`
				uniform vec3 diffuse;
				uniform float opacity;
				uniform float linewidth;

				#ifdef USE_DASH

					uniform float dashOffset;
					uniform float dashSize;
					uniform float gapSize;

				#endif

				varying float vLineDistance;

				#ifdef WORLD_UNITS

					varying vec4 worldPos;
					varying vec3 worldStart;
					varying vec3 worldEnd;

					#ifdef USE_DASH

						varying vec2 vUv;

					#endif

				#else

					varying vec2 vUv;

				#endif

				#include <common>
				#include <fog_pars_fragment>
				#include <logdepthbuf_pars_fragment>
				#include <clipping_planes_pars_fragment>

				#ifdef USE_COLOR
					#ifdef USE_LINE_COLOR_ALPHA
						varying vec4 vLineColor;
					#else
						varying vec3 vLineColor;
					#endif
				#endif

				vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

					float mua;
					float mub;

					vec3 p13 = p1 - p3;
					vec3 p43 = p4 - p3;

					vec3 p21 = p2 - p1;

					float d1343 = dot( p13, p43 );
					float d4321 = dot( p43, p21 );
					float d1321 = dot( p13, p21 );
					float d4343 = dot( p43, p43 );
					float d2121 = dot( p21, p21 );

					float denom = d2121 * d4343 - d4321 * d4321;

					float numer = d1343 * d4321 - d1321 * d4343;

					mua = numer / denom;
					mua = clamp( mua, 0.0, 1.0 );
					mub = ( d1343 + d4321 * ( mua ) ) / d4343;
					mub = clamp( mub, 0.0, 1.0 );

					return vec2( mua, mub );

				}

				void main() {

					#include <clipping_planes_fragment>

					#ifdef USE_DASH

						if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

						if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

					#endif

					float alpha = opacity;

					#ifdef WORLD_UNITS

						// Find the closest points on the view ray and the line segment
						vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
						vec3 lineDir = worldEnd - worldStart;
						vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

						vec3 p1 = worldStart + lineDir * params.x;
						vec3 p2 = rayEnd * params.y;
						vec3 delta = p1 - p2;
						float len = length( delta );
						float norm = len / linewidth;

						#ifndef USE_DASH

							#ifdef USE_ALPHA_TO_COVERAGE

								float dnorm = fwidth( norm );
								alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

							#else

								if ( norm > 0.5 ) {

									discard;

								}

							#endif

						#endif

					#else

						#ifdef USE_ALPHA_TO_COVERAGE

							// artifacts appear on some hardware if a derivative is taken within a conditional
							float a = vUv.x;
							float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
							float len2 = a * a + b * b;
							float dlen = fwidth( len2 );

							if ( abs( vUv.y ) > 1.0 ) {

								alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

							}

						#else

							if ( abs( vUv.y ) > 1.0 ) {

								float a = vUv.x;
								float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
								float len2 = a * a + b * b;

								if ( len2 > 1.0 ) discard;

							}

						#endif

					#endif

					vec4 diffuseColor = vec4( diffuse, alpha );
					#ifdef USE_COLOR
						#ifdef USE_LINE_COLOR_ALPHA
							diffuseColor *= vLineColor;
						#else
							diffuseColor.rgb *= vLineColor;
						#endif
					#endif

					#include <logdepthbuf_fragment>

					gl_FragColor = diffuseColor;

					#include <tonemapping_fragment>
					#include <${parseInt(pm.replace(/\D+/g,""))>=154?"colorspace_fragment":"encodings_fragment"}>
					#include <fog_fragment>
					#include <premultiplied_alpha_fragment>

				}
			`,clipping:!0}),this.isLineMaterial=!0,this.onBeforeCompile=function(){this.transparent?this.defines.USE_LINE_COLOR_ALPHA="1":delete this.defines.USE_LINE_COLOR_ALPHA},Object.defineProperties(this,{color:{enumerable:!0,get:function(){return this.uniforms.diffuse.value},set:function(t){this.uniforms.diffuse.value=t}},worldUnits:{enumerable:!0,get:function(){return"WORLD_UNITS"in this.defines},set:function(t){t===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}},linewidth:{enumerable:!0,get:function(){return this.uniforms.linewidth.value},set:function(t){this.uniforms.linewidth.value=t}},dashed:{enumerable:!0,get:function(){return"USE_DASH"in this.defines},set(t){!!t!="USE_DASH"in this.defines&&(this.needsUpdate=!0),t===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}},dashScale:{enumerable:!0,get:function(){return this.uniforms.dashScale.value},set:function(t){this.uniforms.dashScale.value=t}},dashSize:{enumerable:!0,get:function(){return this.uniforms.dashSize.value},set:function(t){this.uniforms.dashSize.value=t}},dashOffset:{enumerable:!0,get:function(){return this.uniforms.dashOffset.value},set:function(t){this.uniforms.dashOffset.value=t}},gapSize:{enumerable:!0,get:function(){return this.uniforms.gapSize.value},set:function(t){this.uniforms.gapSize.value=t}},opacity:{enumerable:!0,get:function(){return this.uniforms.opacity.value},set:function(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get:function(){return this.uniforms.resolution.value},set:function(t){this.uniforms.resolution.value.copy(t)}},alphaToCoverage:{enumerable:!0,get:function(){return"USE_ALPHA_TO_COVERAGE"in this.defines},set:function(t){!!t!="USE_ALPHA_TO_COVERAGE"in this.defines&&(this.needsUpdate=!0),t===!0?(this.defines.USE_ALPHA_TO_COVERAGE="",this.extensions.derivatives=!0):(delete this.defines.USE_ALPHA_TO_COVERAGE,this.extensions.derivatives=!1)}}}),this.setValues(e)}}const n3=new j,i3=new j,Wi=new sn,Gi=new sn,Io=new sn,aS=new j,lS=new zt,cr=new rz,r3=new j,i0=new Bi,r0=new Ui,Fo=new sn;let Uo,nE,kB,Zu;function s3(n,e,t){return Fo.set(0,0,-e,1).applyMatrix4(n.projectionMatrix),Fo.multiplyScalar(1/Fo.w),Fo.x=Zu/t.width,Fo.y=Zu/t.height,Fo.applyMatrix4(n.projectionMatrixInverse),Fo.multiplyScalar(1/Fo.w),Math.abs(Math.max(Fo.x,Fo.y))}function jee(n,e){for(let t=0,i=nE.count;t<i;t++){cr.start.fromBufferAttribute(nE,t),cr.end.fromBufferAttribute(kB,t);const r=new j,s=new j;Uo.distanceSqToSegment(cr.start,cr.end,s,r),s.distanceTo(r)<Zu*.5&&e.push({point:s,pointOnLine:r,distance:Uo.origin.distanceTo(s),object:n,face:null,faceIndex:t,uv:null,uv2:null})}}function qee(n,e,t){const i=e.projectionMatrix,s=n.material.resolution,o=n.matrixWorld,a=n.geometry,l=a.attributes.instanceStart,u=a.attributes.instanceEnd,c=-e.near;Uo.at(1,Io),Io.w=1,Io.applyMatrix4(e.matrixWorldInverse),Io.applyMatrix4(i),Io.multiplyScalar(1/Io.w),Io.x*=s.x/2,Io.y*=s.y/2,Io.z=0,aS.copy(Io),lS.multiplyMatrices(e.matrixWorldInverse,o);for(let f=0,h=l.count;f<h;f++){if(Wi.fromBufferAttribute(l,f),Gi.fromBufferAttribute(u,f),Wi.w=1,Gi.w=1,Wi.applyMatrix4(lS),Gi.applyMatrix4(lS),Wi.z>c&&Gi.z>c)continue;if(Wi.z>c){const _=Wi.z-Gi.z,w=(Wi.z-c)/_;Wi.lerp(Gi,w)}else if(Gi.z>c){const _=Gi.z-Wi.z,w=(Gi.z-c)/_;Gi.lerp(Wi,w)}Wi.applyMatrix4(i),Gi.applyMatrix4(i),Wi.multiplyScalar(1/Wi.w),Gi.multiplyScalar(1/Gi.w),Wi.x*=s.x/2,Wi.y*=s.y/2,Gi.x*=s.x/2,Gi.y*=s.y/2,cr.start.copy(Wi),cr.start.z=0,cr.end.copy(Gi),cr.end.z=0;const v=cr.closestPointToPointParameter(aS,!0);cr.at(v,r3);const g=KL.lerp(Wi.z,Gi.z,v),x=g>=-1&&g<=1,y=aS.distanceTo(r3)<Zu*.5;if(x&&y){cr.start.fromBufferAttribute(l,f),cr.end.fromBufferAttribute(u,f),cr.start.applyMatrix4(o),cr.end.applyMatrix4(o);const _=new j,w=new j;Uo.distanceSqToSegment(cr.start,cr.end,w,_),t.push({point:w,pointOnLine:_,distance:Uo.origin.distanceTo(w),object:n,face:null,faceIndex:f,uv:null,uv2:null})}}}class HB extends hi{constructor(e=new DA,t=new TA({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,i=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let o=0,a=0,l=t.count;o<l;o++,a+=2)n3.fromBufferAttribute(t,o),i3.fromBufferAttribute(i,o),r[a]=a===0?0:r[a-1],r[a+1]=r[a]+n3.distanceTo(i3);const s=new jy(r,2,1);return e.setAttribute("instanceDistanceStart",new fs(s,1,0)),e.setAttribute("instanceDistanceEnd",new fs(s,1,1)),this}raycast(e,t){const i=this.material.worldUnits,r=e.camera;r===null&&!i&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;Uo=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;Zu=l.linewidth+s,nE=a.attributes.instanceStart,kB=a.attributes.instanceEnd,a.boundingSphere===null&&a.computeBoundingSphere(),r0.copy(a.boundingSphere).applyMatrix4(o);let u;if(i)u=Zu*.5;else{const f=Math.max(r.near,r0.distanceToPoint(Uo.origin));u=s3(r,f,l.resolution)}if(r0.radius+=u,Uo.intersectsSphere(r0)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),i0.copy(a.boundingBox).applyMatrix4(o);let c;if(i)c=Zu*.5;else{const f=Math.max(r.near,i0.distanceToPoint(Uo.origin));c=s3(r,f,l.resolution)}i0.expandByScalar(c),Uo.intersectsBox(i0)!==!1&&(i?jee(this,t):qee(this,r,t))}}class Xee extends HB{constructor(e=new UB,t=new TA({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}const $ee=ie.forwardRef(function({points:e,color:t=16777215,vertexColors:i,linewidth:r,lineWidth:s,segments:o,dashed:a,...l},u){var c,f;const h=_n(y=>y.size),m=ie.useMemo(()=>o?new HB:new Xee,[o]),[v]=ie.useState(()=>new TA),g=(i==null||(c=i[0])==null?void 0:c.length)===4?4:3,x=ie.useMemo(()=>{const y=o?new DA:new UB,_=e.map(w=>{const E=Array.isArray(w);return w instanceof j||w instanceof sn?[w.x,w.y,w.z]:w instanceof Fe?[w.x,w.y,0]:E&&w.length===3?[w[0],w[1],w[2]]:E&&w.length===2?[w[0],w[1],0]:w});if(y.setPositions(_.flat()),i){t=16777215;const w=i.map(E=>E instanceof mt?E.toArray():E);y.setColors(w.flat(),g)}return y},[e,o,i,g]);return ie.useLayoutEffect(()=>{m.computeLineDistances()},[e,m]),ie.useLayoutEffect(()=>{a?v.defines.USE_DASH="":delete v.defines.USE_DASH,v.needsUpdate=!0},[a,v]),ie.useEffect(()=>()=>x.dispose(),[x]),ie.createElement("primitive",vo({object:m,ref:u},l),ie.createElement("primitive",{object:x,attach:"geometry"}),ie.createElement("primitive",vo({object:v,attach:"material",color:t,vertexColors:!!i,resolution:[h.width,h.height],linewidth:(f=r??s)!==null&&f!==void 0?f:1,dashed:a,transparent:g===4},l)))});function Yee(n,e,t){const i=_n(h=>h.size),r=_n(h=>h.viewport),s=typeof n=="number"?n:i.width*r.dpr,o=i.height*r.dpr,a=(typeof n=="number"?t:n)||{},{samples:l=0,depth:u,...c}=a,f=ie.useMemo(()=>{const h=new Vs(s,o,{minFilter:ai,magFilter:ai,type:gc,...c});return u&&(h.depthTexture=new Gx(s,o,Tr)),h.samples=l,h},[]);return ie.useLayoutEffect(()=>{f.setSize(s,o),l&&(f.samples=l)},[l,f,s,o]),ie.useEffect(()=>()=>f.dispose(),[]),f}const Zee=n=>typeof n=="function",Dc=ie.forwardRef(({envMap:n,resolution:e=256,frames:t=1/0,makeDefault:i,children:r,...s},o)=>{const a=_n(({set:x})=>x),l=_n(({camera:x})=>x),u=_n(({size:x})=>x),c=ie.useRef(null);ie.useImperativeHandle(o,()=>c.current,[]);const f=ie.useRef(null),h=Yee(e);ie.useLayoutEffect(()=>{s.manual||(c.current.aspect=u.width/u.height)},[u,s]),ie.useLayoutEffect(()=>{c.current.updateProjectionMatrix()});let m=0,v=null;const g=Zee(r);return Qo(x=>{g&&(t===1/0||m<t)&&(f.current.visible=!1,x.gl.setRenderTarget(h),v=x.scene.background,n&&(x.scene.background=n),x.gl.render(x.scene,c.current),x.scene.background=v,x.gl.setRenderTarget(null),f.current.visible=!0,m++)}),ie.useLayoutEffect(()=>{if(i){const x=l;return a(()=>({camera:c.current})),()=>a(()=>({camera:x}))}},[c,i,a]),ie.createElement(ie.Fragment,null,ie.createElement("perspectiveCamera",vo({ref:c},s),!g&&r),ie.createElement("group",{ref:f},g&&r(h.texture)))}),VB=ie.forwardRef((n={enableDamping:!0},e)=>{const{domElement:t,camera:i,makeDefault:r,onChange:s,onStart:o,onEnd:a,...l}=n,u=_n(_=>_.invalidate),c=_n(_=>_.camera),f=_n(_=>_.gl),h=_n(_=>_.events),m=_n(_=>_.set),v=_n(_=>_.get),g=t||h.connected||f.domElement,x=i||c,y=ie.useMemo(()=>new Gee(x),[x]);return ie.useEffect(()=>{y.connect(g);const _=w=>{u(),s&&s(w)};return y.addEventListener("change",_),o&&y.addEventListener("start",o),a&&y.addEventListener("end",a),()=>{y.dispose(),y.removeEventListener("change",_),o&&y.removeEventListener("start",o),a&&y.removeEventListener("end",a)}},[s,o,a,y,u,g]),ie.useEffect(()=>{if(r){const _=v().controls;return m({controls:y}),()=>m({controls:_})}},[r,y]),Qo(()=>y.update(),-1),ie.createElement("primitive",vo({ref:e,object:y,enableDamping:!0},l))}),Kee=ie.forwardRef(({makeDefault:n,camera:e,regress:t,domElement:i,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...u},c)=>{const f=_n(M=>M.invalidate),h=_n(M=>M.camera),m=_n(M=>M.gl),v=_n(M=>M.events),g=_n(M=>M.setEvents),x=_n(M=>M.set),y=_n(M=>M.get),_=_n(M=>M.performance),w=e||h,E=i||v.connected||m.domElement,C=ie.useMemo(()=>new BB(w),[w]);return Qo(()=>{C.enabled&&C.update()},-1),ie.useEffect(()=>(s&&C.connect(s===!0?E:s),C.connect(E),()=>void C.dispose()),[s,E,t,C,f]),ie.useEffect(()=>{const M=A=>{f(),t&&_.regress(),o&&o(A)},T=A=>{a&&a(A)},R=A=>{l&&l(A)};return C.addEventListener("change",M),C.addEventListener("start",T),C.addEventListener("end",R),()=>{C.removeEventListener("start",T),C.removeEventListener("end",R),C.removeEventListener("change",M)}},[o,a,l,C,f,g]),ie.useEffect(()=>{if(n){const M=y().controls;return x({controls:C}),()=>x({controls:M})}},[n,C]),ie.createElement("primitive",vo({ref:c,object:C,enableDamping:r},u))}),Lm=ie.forwardRef(({onPointerMove:n,onPointerUp:e},t)=>{const i=[-Math.PI/2,0,-Math.PI/2],s=Dm(c_,"/img/grid.jpg");return s.repeat.set(1,1),s.wrapS=ic,s.wrapT=ic,O.jsxs("mesh",{rotation:i,receiveShadow:!0,position:[0,-.05,0],ref:t,onPointerUp:e,onPointerMove:n,children:[O.jsx("circleGeometry",{args:[ac,64]}),O.jsx("meshStandardMaterial",{map:s,toneMapped:!1})]})});function Om(){const n=Ve(e=>e.controlsEnabled);return O.jsx(VB,{maxPolarAngle:1.5,minDistance:35,maxDistance:200,enabled:n})}const zm=CA({fontsize:50,scale:[20,10,1]}),Bm=ie.forwardRef((n,e)=>O.jsxs("mesh",{ref:e,position:[0,0,0],...n,children:[O.jsx("sphereGeometry",{args:[2]}),O.jsx("meshBasicMaterial",{color:"red"})]}));function Jee({onClick:n,text:e,disabled:t}){return e===void 0&&(e="Continue"),t===void 0&&(t=!1),O.jsx("button",{onClick:n,disabled:t,className:"bg-blue-500 p-5 text-white w-fit rounded "+(t?"opacity-0":"animate-fade"),children:e})}function Qee(n,e){return n===null||e===null?!1:JSON.stringify(n)===JSON.stringify(e)}function Um({onClick:n,text:e,useSnapshot:t,compareSnapshot:i}){i===void 0&&(i=Qee);const r=ie.useRef(null),s=t(),o=Ve(u=>u.nCities),a=Ve(u=>u.nRenderedCities),l=a==o?!i(s,r.current):!0;return ie.useEffect(()=>{r.current===null&&o===a&&(r.current=s)},[s,o,a]),O.jsx(Jee,{onClick:n,disabled:l,text:e})}function ete(){const n=Ve(s=>s.jwt),e=Ve(s=>s.route),t=ie.useCallback(s=>{const o=s.clientX,a=s.clientY;n!==null&&eH(n,o,a)},[n]),i=ie.useCallback(()=>{},[n]),r=()=>{nH(n,e)};ie.useEffect(()=>(window.addEventListener("click",t),window.addEventListener("solver",i),window.addEventListener("unload",r),()=>{window.removeEventListener("click",t),window.removeEventListener("solver",i),window.removeEventListener("unload",r)}))}function tte(){const n=Ve(a=>a.hoveredCity),e=Ve(a=>a.jwt),[t,i]=ie.useState([]),r=ie.useCallback(a=>{const l=a;i(u=>[...u,{...l.detail}])},[]),s=ie.useCallback(a=>{i([{...a.detail}])},[]),o=ie.useCallback(a=>{const l=a,u=[...t,{...l.detail}];e!==null&&n!==null&&tH(e,u,n.name),i([])},[t,e,n]);ie.useEffect(()=>(window.addEventListener("startDrag",s),window.addEventListener("stopDrag",o),window.addEventListener("addPoint",r),()=>{window.removeEventListener("startDrag",s),window.removeEventListener("stopDrag",o),window.removeEventListener("addPoint",r)}),[s,r,o])}function nte(){const n=Ve(l=>l.isDragging),e=Ve(l=>l.mouseRef),t=_n(l=>l.pointer),i=_n(l=>l.camera),r=_n(l=>l.raycaster),s=_n(l=>l.scene),o=Ve(l=>l.earthUUID),a=200;ie.useEffect(()=>{function l(){r.setFromCamera(t,i);const f=r.intersectObjects(s.children).find(g=>g.object.uuid===o);if(f===void 0)return null;let{x:h,y:m,z:v}=f.point;return h=+h.toFixed(3),m=+m.toFixed(3),v=+v.toFixed(3),{x:h,y:m,z:v}}if(n===!0){const c=l();if(c===null)return;console.log("dispatching startDrag"),window.dispatchEvent(new CustomEvent("startDrag",{detail:{...c}}))}const u=setInterval(()=>{if(n===!0){const c=l();if(c===null)return;const f=new CustomEvent("addPoint",{detail:{...c}});console.log("dispatching addPoint"),window.dispatchEvent(f)}},a);return()=>{if(n===!0){console.log("dispatching startDrag");const c=l();if(c===null)return;window.dispatchEvent(new CustomEvent("stopDrag",{detail:{...c}}))}clearInterval(u)}},[n,e,i,s,t,o,r])}function ite(){ste(),ete()}function rte(){tte(),nte()}function ste(){const n=Ve(t=>t.setJwt),e=Ve(t=>t.jwt);ie.useEffect(()=>{if(e!==null){console.log("jwt already set");return}Q6().then(t=>{if(t===null){console.error("could not reach server");return}n(t)})},[e,n])}function ote(){return rte(),null}function Tc({children:n,className:e}){return O.jsxs(f$,{onClick:t=>t.stopPropagation(),className:e,children:[O.jsx(ote,{}),n]})}function Pc(n,e){const t=Ve(u=>u.updateRoute),i=Ve(u=>u.updateNCities),r=Ve(u=>u.nRenderedCities),s=Ve(u=>u.updateHoveredCity),o=Ve(u=>u.route),a=Ve(u=>u.updateProgression),l=xo();ie.useLayoutEffect(()=>{t(e),i(n)},[n,l,e,t,i,a]),ie.useEffect(()=>{r===n&&o===e&&s("atlanta")},[n,e,s,r,o])}const iE={tutorial1:1,tutorial2:2,tutorial3:3,tutorial4:4,tutorial5:5},ate=Object.keys(iE).length;function lte(){const n=Ve(t=>t.route);if(n===null||!(n in iE))return null;const e=iE[n];return O.jsxs("div",{className:"bg-green p-2 text-white rounded-tl-xl",children:["Tutorial Section ",e," / ",ate]})}function km(){return O.jsx("div",{className:"top-0 left-0 fixed w-full h-full z-10 pointer-events-none",children:O.jsx("div",{className:"flex flex-col justify-end w-full h-full",children:O.jsx("div",{className:"flex flex-row justify-end w-full h-fit",children:O.jsx(lte,{})})})})}function ute(){Pc(2,"tutorial1");const n=xo();return O.jsxs("div",{className:"flex h-full ",children:[O.jsxs("div",{className:"w-3/5 relative",children:[O.jsxs(Tc,{className:"bg-black w-full ",children:[O.jsx(Om,{}),O.jsx("ambientLight",{color:16777215,intensity:2}),O.jsx(Dc,{makeDefault:!0,position:[100,100,100],ref:e=>e==null?void 0:e.lookAt(0,0,0)}),O.jsx(mc,{EarthMesh:Lm}),O.jsx(bc,{CityMesh:Bm}),O.jsx(Ac,{generateLabels:Nm,TextSprite:zm})]}),O.jsx(Cc,{children:O.jsx("div",{className:"w-full flex justify-center invisible",children:O.jsx(cte,{})})})]}),O.jsxs("div",{className:"w-2/5 h-full flex flex-col justify-center p-12 *:my-5",children:[O.jsx(fte,{}),O.jsx(Um,{onClick:()=>n("/tutorial/2"),useSnapshot:hte,compareSnapshot:dte})]}),O.jsx(km,{})]})}function cte(){const n=Ve(r=>r.currPositions),e=Ve(r=>r.nRenderedCities),t=Ve(r=>r.objectType);if(e!==2)return O.jsx("div",{className:"text-white p-10 text-4xl pointer-events-none",children:"0"});const{currDistance:i}=Fm("atlanta","beijing",t,n);return O.jsx("div",{className:"text-white p-10 text-4xl pointer-events-none",children:Math.round(Math.abs(i)/10)*10})}function fte(){const n=Ve(s=>s.currPositions),e=Ve(s=>s.objectType),t=Ve(s=>s.nRenderedCities);let i=0,r=Pz;if(t===2){const s=Fm("atlanta","beijing",e,n);i=s.currDistance;const a=-s.trueDistance+i;r=Tm(a)}return O.jsxs("div",{className:"*:my-2 text-xl",children:[O.jsxs("p",{children:["The dots on the left represent two cities,",O.jsx("span",{className:"text-red",children:" Atlanta "}),"and",O.jsx("span",{className:"text-red",children:" Beijing"}),". They are 11550 km apart in reality."]}),O.jsxs("p",{children:["In the representation on the left, these cities are now ",O.jsx("span",{style:{color:r},className:"text-2xl",children:Math.round(Math.abs(i)/10)*10})," km apart. You can click and drag to move them around."]}),O.jsx("p",{children:"Can you make the representation match reality?"}),O.jsxs("p",{children:["The ",O.jsx("span",{style:{color:r},className:"text-2xl",children:"number"})," above changes as you move the dots. Use it as a guide."]})]})}function hte(){const n=Ve(i=>i.currPositions),e=Ve(i=>i.objectType);return{totalError:Ec(e,n)}}function dte(n){if(n===null)return!1;const e=100,{totalError:t}=n;return t<e}function pte(n,e,t){if(n==="plane")return[new j().copy(e),new j().copy(t)];const i=[],r=25,s=new j().copy(t).normalize(),o=new j().copy(e).normalize();for(let a=0;a<=r;a++)i.push(_h(o,s,a/r).multiplyScalar(Gs));return i}function mte(n,e,t){if(n==="plane"){const s=new j().lerpVectors(e,t,.5);return s.add({x:1,y:0,z:1}),s}return _h(new j().copy(e).normalize(),new j().copy(t).normalize(),1/2).multiplyScalar(Gs+2)}function rE(n,e,t){const i=n.clone().project(e),r=(i.x*.5+.5)*t.width,s=(1-i.y*.5-.5)*t.height;return[r,s]}const gte=(n,e)=>Math.atan((e.y-n.y)/(e.x-n.x));function vte(n,e,t,i,r){let o,a;if(n==="plane")o=new j().lerpVectors(e,t,1/2),a=new j().lerpVectors(e,t,1/2+.01);else{const h=e.clone().normalize(),m=t.clone().normalize();o=_h(h,m,1/2).multiplyScalar(Gs),a=_h(h,m,1/2+.01).multiplyScalar(Gs)}const[l,u]=rE(o,i,r),[c,f]=rE(a,i,r);return gte(new Fe(l,u),new Fe(c,f))}function yte(n,e,t){const i=Ve(c=>c.updateHoverPositions),{camera:r,size:s,raycaster:o,scene:a}=_n(),l=Ve(c=>c.earthUUID),u=a.getObjectByProperty("uuid",l);Qo(()=>{const c=mte(n,e.mesh.position,t.mesh.position),[f,h]=rE(c,r,s),m=c.clone().project(r);if(o.setFromCamera(new Fe(m.x,m.y),r),u===void 0)return;const v=o.intersectObject(u);if(v.length!==0&&v[0].point.distanceTo(c)>10){i(`${e.name}_${t.name}`,null);return}const g=vte(n,e.mesh.position,t.mesh.position,r,s);i(`${e.name}_${t.name}`,[f,h],g)})}function WB({baseInfo:n,destInfo:e,radius:t}){const i=ie.useRef(null),r=Ve(c=>c.citiesRef),s=Ve(c=>c.objectType),o=n.mesh.position,a=n.name,l=e.mesh.position,u=e.name;return yte(s,n,e),Qo(()=>{i.current.visible=!0;const c=pte(s,o,l);if(c.length<2||isNaN(c[0].x))return;const f=new kb(c);i.current.geometry.dispose(),i.current.geometry=new Em(f,64,t??.07,50,!1);const{currDistance:h,trueDistance:m}=Ol(a,u,s,r),v=h-m,g=Tm(v),x=new Ha({color:g});i.current.material.dispose(),i.current.material=x}),O.jsx("mesh",{ref:i})}function Hm({radius:n}){const e=Ve(a=>a.citiesRef),t=Ve(a=>a.nRenderedCities),i=Ve(a=>a.nCities),r=Ve(a=>a.hoveredCity),s=Ve(a=>a.clearHoverPositions);if(ie.useEffect(()=>s()),i!==t||r===null)return null;const o=[];for(const a of Object.keys(e.current)){if(a===r.name)continue;const l={mesh:e.current[a],name:a};o.push(O.jsx(WB,{baseInfo:r,destInfo:l,radius:n},a))}return o}function xte({radius:n}){const e=Ve(o=>o.citiesRef),t=Ve(o=>o.nRenderedCities);if(Ve(o=>o.nCities)!==t)return null;const r=Object.keys(e.current),s=[];for(let o=0;o<r.length;o++)for(let a=0;a<o;a++){const l=r[o],u=r[a],c={name:l,mesh:e.current[l]},f={name:u,mesh:e.current[u]};s.push(O.jsx(WB,{baseInfo:c,destInfo:f,radius:n},l+u))}return s}function _te(n){const e=n.indexOf("_"),t=n.slice(0,e),i=n.slice(e+1);return{baseName:t,destName:i}}function Gh(){var t;const n=Ve(i=>i.hoverPositions),e=[];for(const i of Object.keys(n)){const{baseName:r,destName:s}=_te(i);n[i]===void 0||n[i].position===null||e.push(O.jsx(wte,{baseName:r,destName:s,position:n[i].position,rotation:(t=n[i])==null?void 0:t.rotation},i))}return e}function wte({baseName:n,destName:e,position:t,rotation:i}){const[r,s]=t,o=Ve(h=>h.citiesRef),a=Ve(h=>h.objectType);if(o.current===null)return null;const{currDistance:l,trueDistance:u}=Ol(n,e,a,o),c=l-u,f=Tm(c);return O.jsx("p",{style:{top:s,left:r,transform:`rotate(${i}rad)`,color:f},className:"absolute z-0",children:Math.round(Math.abs(c))})}function Ste(){Pc(2,"tutorial2");const n=xo();return O.jsxs("div",{className:"flex h-full ",children:[O.jsxs("div",{className:"w-3/5 relative",children:[O.jsxs(Tc,{className:"bg-black w-full ",children:[O.jsx(Om,{}),O.jsx("ambientLight",{color:16777215,intensity:2}),O.jsx(Dc,{makeDefault:!0,position:[100,100,100],ref:e=>e==null?void 0:e.lookAt(0,0,0)}),O.jsx(mc,{EarthMesh:Lm}),O.jsx(bc,{CityMesh:Bm}),O.jsx(Hm,{radius:.2}),O.jsx(Ac,{generateLabels:Nm,TextSprite:zm})]}),O.jsxs(Cc,{children:[O.jsx("div",{className:"w-full flex justify-center invisible",children:O.jsx(Wh,{})}),O.jsx(Gh,{})]})]}),O.jsxs("div",{className:"w-2/5 h-full flex flex-col justify-center p-12 *:my-5",children:[O.jsx(bte,{}),O.jsx(Um,{onClick:()=>n("/tutorial/3"),useSnapshot:Ate,compareSnapshot:Cte})]}),O.jsx(km,{})]})}function Mte(){const n=Ve(o=>o.currPositions),e=Ve(o=>o.nRenderedCities),t=Ve(o=>o.objectType);if(e!==2)return 0;const{trueDistance:i,currDistance:r}=Fm("atlanta","beijing",t,n);return r-i}function Ete(){const n=Ve(r=>r.hoveredCity),e=Mte(),t=Tm(e),i=Math.round(Math.abs(e));return n===null?O.jsx("p",{children:"Try hovering over a point."}):t===Tz?O.jsxs("p",{children:["More concretely, the line now indicates that the cities are ",O.jsxs("span",{className:"text-[#f30836]",children:[i,"km too far apart"]}),"."]}):t===Rz?O.jsxs("p",{children:["More concretely, the line now indicates that the cities are ",O.jsxs("span",{className:"text-[#3479f3]",children:[i,"km too close together"]}),"."]}):O.jsxs("p",{children:["More concretely, the line now indicates that the cities are ",O.jsx("span",{className:"text-[#36f808]",children:"correctly spaced"}),"."]})}function bte(){return O.jsxs("div",{className:"*:my-2 text-xl",children:[O.jsx("p",{children:"There are many ways to do this."}),O.jsxs("p",{children:["To help you align the cities to reality, there is a line connecting them. It is ",O.jsx("span",{className:"text-[#36f808]",children:"green"})," when the distance is correct,",O.jsx("span",{className:"text-[#3479f3]",children:" blue"}),"  if too short, and ",O.jsx("span",{className:"text-[#f30836]",children:" red"})," if too long."]}),O.jsx("p",{children:"The number above the line indicates how far off you are from matching the real distance."}),O.jsx(Ete,{}),O.jsx("p",{children:"Match the distance again, using the line as a guide."})]})}function Ate(){const n=Ve(i=>i.currPositions),e=Ve(i=>i.objectType);return{totalError:Ec(e,n)}}function Cte(n){if(n===null)return!1;const e=100,{totalError:t}=n;return t<e}function Dte(){Pc(3,"tutorial3");const n=xo();return O.jsxs("div",{className:"flex h-full",children:[O.jsxs("div",{className:"w-3/5 relative",children:[O.jsxs(Tc,{className:"bg-black w-full",children:[O.jsx(Om,{}),O.jsx("ambientLight",{color:16777215,intensity:2}),O.jsx(Dc,{makeDefault:!0,position:[100,100,100],ref:e=>e==null?void 0:e.lookAt(0,0,0)}),O.jsx(mc,{EarthMesh:Lm}),O.jsx(bc,{CityMesh:Bm}),O.jsx(xte,{radius:.2}),O.jsx(Ac,{generateLabels:Nm,TextSprite:zm})]}),O.jsxs(Cc,{children:[O.jsx("div",{className:"w-full flex justify-center",children:O.jsx(Wh,{})}),O.jsx(Gh,{})]})]}),O.jsxs("div",{className:"w-2/5 h-full flex flex-col justify-center p-12 *:my-5",children:[O.jsx(Tte,{}),O.jsx(Um,{onClick:()=>n("/tutorial/4"),useSnapshot:Ite,compareSnapshot:Fte})]}),O.jsx(km,{})]})}function Tte(){return O.jsxs("div",{className:"*:my-2 text-xl",children:[O.jsxs("p",{children:["Now, we are adding another city, ",O.jsx("span",{className:"text-red",children:"Cape Town"}),"."]}),O.jsx("p",{children:"Like before, the lines and numbers between the points represent how close you are to matching the real distances between the cities they represent."}),O.jsx("p",{children:"In addition, the number on top represents the total discrepancy, which is the sum of all discrepancies."}),O.jsx(Pte,{}),O.jsxs("p",{children:["The goal of this challenge is to make that number go to",O.jsx("span",{className:"",children:" 0"}),", completely matching reality."]}),O.jsx("p",{className:"italic",children:"Hint: as you have seen in the previous two sections, there are multiple ways to correctly place just two of the dots at a time."})]})}function uS(n,e){const t=Ve(l=>l.objectType),i=Ve(l=>l.currPositions),{currDistance:r,trueDistance:s}=Fm(n,e,t,i),o=r-s,a=Tm(o);return{d:Math.round(Math.abs(o)),color:a}}function Pte(){return Ve(e=>e.nRenderedCities)!==3?null:O.jsx(Rte,{})}function Rte(){const n=uS("atlanta","beijing"),e=uS("atlanta","cape"),t=uS("beijing","cape"),i=n.d,r=e.d,s=t.d,o=n.color,a=e.color,l=t.color,u=i+r+s;return O.jsxs(O.Fragment,{children:[O.jsx("p",{children:"More explicitly, the current total discrepancy is computed as"}),O.jsxs("p",{className:"text-center text-black",children:[O.jsx("span",{className:"font-semibold",children:u})," = ",O.jsx("span",{style:{color:o},children:i}),"+ ",O.jsxs("span",{style:{color:a},children:[" ",r]}),"+ ",O.jsxs("span",{style:{color:l},children:[" ",s]})]})]})}function Ite(){const n=Ve(i=>i.currPositions),e=Ve(i=>i.objectType);return{totalError:Ec(e,n)}}function Fte(n){if(n===null)return!1;const e=50,{totalError:t}=n;return t<e}function S_(){const n=Ve(g=>g.contextMenu),e=Ve(g=>g.updateContextMenu),t=ie.useRef(null),i=Ve(g=>g.updateAnimationState),r=Ve(g=>g.updateHoveredCity),s=Ve(g=>g.isAnimating),o=Ve(g=>g.objectType),a=Ve(g=>g.citiesRef),l=Ve(g=>g.jwt),u=Object.keys(a.current),{cityName:c}=n;if(s||n.visible===!1||n.mousePosition===null||c===null)return null;const[f,h]=n.mousePosition,m=()=>{let g=1/0,x=null;for(const y of u){if(y===c)continue;const{currDistance:_}=Ol(c,y,o,a);_<g&&(g=_,x=y)}if(x===null)throw new Error("could not find closest city");return x},v=()=>e({...n,visible:!1});return O.jsxs("div",{style:{top:h,left:f},className:"text-sm pointer-events-auto absolute bg-white text-black flex flex-row flex-auto justify-between opacity-90 p-2 rounded  *:p-1  *:px-2",ref:t,children:[O.jsx("button",{onClick:()=>{r(c),i("fixed",c),v(),l!=null&&YT(l,"fixed",c)},children:"Solve City"}),O.jsx("button",{className:"border-l border-l-gray-500",onClick:()=>{if(r(c),i("global"),o==="plane"){const g=m(),x={...n,anchor:g,visible:!1};e(x)}else v();l!=null&&YT(l,"global")},children:"Solve Globally"}),O.jsx("button",{className:"border-l border-l-gray-500",onClick:v,children:"Close"})]})}function Nte(){const n=xo();return Pc(3,"tutorial4"),O.jsxs("div",{className:"flex h-full",children:[O.jsxs("div",{className:"w-3/5 relative",children:[O.jsxs(Tc,{className:"bg-black w-full",children:[O.jsx(Om,{}),O.jsx("ambientLight",{color:16777215,intensity:2}),O.jsx(Dc,{makeDefault:!0,position:[100,100,100],ref:e=>e==null?void 0:e.lookAt(0,0,0)}),O.jsx(mc,{EarthMesh:Lm}),O.jsx(bc,{CityMesh:Bm}),O.jsx(Hm,{radius:.2}),O.jsx(Ac,{generateLabels:Nm,TextSprite:zm})]}),O.jsxs(Cc,{children:[O.jsx("div",{className:"w-full flex justify-center",children:O.jsx(Wh,{})}),O.jsx(w_,{}),O.jsx(Gh,{}),O.jsx(S_,{})]})]}),O.jsxs("div",{className:"w-2/5 h-full flex flex-col justify-center p-12 *:my-5",children:[O.jsx(Lte,{}),O.jsx(Um,{onClick:()=>n("/tutorial/5"),useSnapshot:Ote,compareSnapshot:zte})]}),O.jsx(km,{})]})}function Lte(){return O.jsxs("div",{className:"*:my-2 text-xl",children:[O.jsx("p",{children:"From now on, to reduce clutter, only the lines originating from the hovered city will be shown."}),O.jsx("p",{children:"Additionally, for your reference, the menu in the top left shows the real distances between the hovered city and the rest. It can be toggled on or off by clicking the arrow."}),O.jsx("p",{children:"Match the cities again, just as you did in the previous section."})]})}function Ote(){const n=Ve(i=>i.currPositions),e=Ve(i=>i.objectType);return{totalError:Ec(e,n)}}function zte(n){if(n===null)return!1;const e=50,{totalError:t}=n;return t<e}function Bte({type:n}){if(n===0)return null;if(n===1)return O.jsx("p",{className:"text-red",children:"Please enter an age above 10."});if(n===2)return O.jsx("p",{className:"text-red",children:"Please enter a number."});if(n===3)return O.jsx("p",{className:"text-red",children:"Please enter an age below 100."})}function GB({status:n,answer:e,updateChoice:t}){return O.jsxs("div",{className:`flex flex-row justify-start items-center ${n==="hovering"?"cursor-pointer":"cursor-default"}`,onClick:()=>{t()},children:[O.jsx(kte,{status:n}),O.jsx("div",{className:"px-2",children:e})]})}function Rs({title:n,answers:e,updateAnswer:t}){const i=e.map((r,s)=>({label:r,value:s}));return O.jsx(Ute,{title:n,answers:i,updateAnswer:t})}function Ute({title:n,answers:e,updateAnswer:t}){const[i,r]=ie.useState(null),[s,o]=ie.useState(null),a=u=>()=>{o(u),t({value:e[u].value})},l=u=>u===s?"selected":u===i?"hovering":"default";return O.jsxs("div",{onPointerLeave:()=>r(null),children:[O.jsx("h2",{className:"font-semibold text-xl",children:n}),e.map((u,c)=>O.jsx("div",{onPointerEnter:()=>r(c),children:O.jsx(GB,{status:l(c),answer:u.label,updateChoice:a(c)})},u.label))]})}function jB({active:n,onClick:e}){return O.jsx("div",{className:"bg-blue-500 px-4 py-2 text-white w-fit rounded transition-opacity duration-500 "+(n?"opacity-100 hover:cursor-pointer":"opacity-50 disabled"),onClick:n?e:()=>{},children:"Submit"})}function kte({status:n}){return n==="selected"?O.jsx("span",{className:"inline-block border-black transition ease-in duration-100 border rounded-full w-4 h-4 visible bg-black"}):n==="hovering"?O.jsx("span",{className:"inline-block border-black transision ease-in duration-100 border rounded-full w-4 h-4 visible bg-gray-200"}):O.jsx("span",{className:"inline-block border-black border transition ease-in  duration-100 bg-white rounded-full w-4 h-4 visible"})}const Hte=10;function Vte({action:n}){const e=Ve(l=>l.jwt),[t,i]=ie.useState(Array(Hte).fill(null)),r=l=>u=>{const c=t.slice();c[l]=u,i(c)},s=t.find(l=>l===null)===void 0,o=["Disagree Strongly","Disagree Moderately","Disagree a little","Neither Agree nor Disagree","Agree a little","Agree Moderately","Agree Strongly"],a=()=>{const l=t.map(f=>f.value),u=t[1].text;rH(e,{answers:l,gender_detail:u||null}),n()};return O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"*:my-2",children:[O.jsx(Wte,{updateAnswer:r(0)}),O.jsx(Gte,{updateAnswer:r(1)}),O.jsx(Rs,{updateAnswer:r(2),title:"What is your race?",answers:["white","black","hispanic","asian","other/multiple"]}),O.jsx(Rs,{updateAnswer:r(3),title:"I see myself as extroverted and enthusiastic",answers:o}),O.jsx(Rs,{updateAnswer:r(4),title:"I see myself as sympathetic and warm",answers:o}),O.jsx(Rs,{updateAnswer:r(5),title:"I see myself as organized and self-disciplined",answers:o}),O.jsx(Rs,{updateAnswer:r(6),title:"I see myself as calm and emotionally stable",answers:o}),O.jsx(Rs,{updateAnswer:r(7),title:"I see myself as open to new experiences and unconventional",answers:o}),O.jsx(Rs,{updateAnswer:r(8),title:"Formal Education (pick highest)",answers:["Some High School","Completed High School","Some College","Advanced Degree (e.g. Masters, MBA, JD)"]}),O.jsx(Rs,{updateAnswer:r(9),title:"Family Income Level (pick hightest)",answers:["Receiving government assistance for poverty","Lower middle class (below average income)","Middle class (about average income)","Upper middle class (higher than average income)","Upper class (far above average income / generational wealth)"]})]}),O.jsx(jB,{active:s,onClick:a})]})}function Wte({updateAnswer:n}){const[,e]=ie.useState(""),[t,i]=ie.useState(0),r=s=>{if(e(s),isNaN(+s)){i(2);return}if(+s<=10){i(1);return}if(s===""){i(0);return}if(+s>100){i(3);return}i(0),n({value:+s})};return O.jsxs("div",{children:[O.jsx("h2",{className:"text-xl font-semibold",children:"What is your age?"}),O.jsx(Bte,{type:t}),O.jsx("textarea",{className:"border border-black rounded mt-1 h-fit",onChange:s=>r(s.target.value)})]})}function Gte({updateAnswer:n}){const e=[{label:"Female",value:0},{label:"Male",value:1},{label:"Prefer to not disclose",value:2},{label:"Prefer to self identify",value:3}],[t,i]=ie.useState({selected:null,text:null,hovering:null}),r=t.selected===e.length-1,s=u=>u===t.selected?"selected":u===t.hovering?"hovering":"default",o=u=>()=>{i(c=>({...c,selected:u})),n({value:e[u].value,text:null})},a=u=>()=>{i(c=>({...c,hovering:u}))},l=u=>{var c,f;if(!r){i(h=>({...h,text:null})),n({value:(c=e.at(-1))==null?void 0:c.value,text:null});return}i(h=>({...h,text:u})),n({value:(f=e.at(-1))==null?void 0:f.value,text:u})};return O.jsxs("div",{onMouseLeave:()=>i(u=>({...u,hovering:null})),children:[O.jsx("h2",{className:"font-semibold text-xl",children:"What is your gender?"}),O.jsxs("div",{children:[e.map((u,c)=>O.jsx("div",{onMouseEnter:a(c),children:O.jsx(GB,{updateChoice:o(c),answer:u.label,status:s(c)})},u.label)),O.jsx(jte,{enabled:r,updateChoice:l})]})]})}function jte({enabled:n,updateChoice:e}){const[i,r]=ie.useState("");if(!n)return null;const s=o=>{o.length>30&&(o=o.slice(0,30)),r(o),e(o)};return O.jsxs("div",{children:[O.jsx("h2",{children:"If so, indicate:"}),O.jsx("textarea",{onChange:o=>s(o.target.value),className:"border border-black rounded p-1 w-1/3",value:i}),O.jsx("div",{className:`w-1/3 flex justify-end text-sm ${i.length!==30?"text-gray-900":"text-red"}`,children:O.jsxs("div",{children:["Characters left: ",30-i.length]})})]})}function qte(){Pc(3,"tutorial5");const[n,e]=ie.useState(!1),t=()=>e(!0);return O.jsxs("div",{className:"flex h-full",children:[O.jsxs("div",{className:"w-3/5 relative",children:[O.jsxs(Tc,{className:"bg-black w-full",children:[O.jsx(Om,{}),O.jsx("ambientLight",{color:16777215,intensity:2}),O.jsx(Dc,{makeDefault:!0,position:[100,100,100],ref:i=>i==null?void 0:i.lookAt(0,0,0)}),O.jsx(mc,{EarthMesh:Lm}),O.jsx(bc,{CityMesh:Bm}),O.jsx(Hm,{radius:.2}),O.jsx(Ac,{generateLabels:Nm,TextSprite:zm})]}),O.jsxs(Cc,{children:[O.jsx("div",{className:"w-full flex justify-center",children:O.jsx(Wh,{})}),O.jsx(w_,{}),O.jsx(Gh,{}),O.jsx(S_,{})]})]}),O.jsxs("div",{className:"w-2/5 h-full flex flex-col justify-center p-12 *:my-5",children:[O.jsx($te,{}),O.jsx(Um,{onClick:t,useSnapshot:Yte,compareSnapshot:Zte,text:"Proceed to Challenge"})]}),O.jsx(km,{}),O.jsx(Xte,{enabled:n})]})}function Xte({enabled:n}){const e=xo();return O.jsx("div",{className:`bg-gray-400 bg-opacity-80 fixed top-0 w-full h-full z-10 transition-all ease-in duration-1000
${n?"opacity-100":"pointer-events-none opacity-0"}`,children:O.jsx("div",{className:"w-full h-full flex justify-center flex-col",children:O.jsx("div",{className:"h-4/5 flex w-full justify-center",children:O.jsxs("div",{className:"opacity-100 p-10 bg-white w-1/2 rounded-xl border-2 border-black overflow-y-scroll no-scrollbar",children:[O.jsx("p",{className:"w-full text-xl text-center mb-5 font-bold",children:"Intake Survey"}),O.jsx("p",{className:"mt-5 w-full border-b border-gray-400 mb-5 text-blue",children:"Before continuing, please fill in this short survey."}),O.jsx(Vte,{action:()=>e("/plane")})]})})})})}function $te(){const{visible:n}=Ve(i=>i.contextMenu),[e,t]=ie.useState(n);return ie.useEffect(()=>{n===!0&&t(!0)},[n]),O.jsxs("div",{className:"*:my-2 text-xl",children:[O.jsx("p",{children:"As you may have noticed, the more cities are added, the harder this task becomes."}),O.jsx("p",{children:"Therefore, to assist you, we provide two kinds of solvers."}),O.jsx("p",{children:"Right click on a point to continue."}),O.jsxs("div",{className:`transition duration-1000 ${e?"opacity-100":"opacity-0"}`,children:[O.jsxs("p",{children:["The first, indicated by the ",O.jsx("span",{className:"font-bold",children:"Solve City"})," button, ensures that all distances to the selected city are matched."]}),O.jsxs("p",{className:"my-2",children:["The second, indicated by the ",O.jsx("span",{className:"font-bold",children:"Solve Globally"})," button, constructs the configuration that will ensure the smallest possible discrepancy. Note that this is not necessarily 0."]}),O.jsx("p",{className:"mt-2",children:"Try using both to see how they work."})]})]})}function Yte(){const n=Ve(i=>i.currPositions),e=Ve(i=>i.objectType);return{totalError:Ec(e,n)}}function Zte(n){if(n===null)return!1;const e=50,{totalError:t}=n;return t<e}function qB(){const n=ie.useRef(null),e=ie.useMemo(()=>{const t=[];for(let i=0;i<5e4;i++){const r=(Math.random()-.5)*1e3,s=(Math.random()-.5)*1e3,o=(Math.random()-.5)*1e3;r*r+s*s+o*o>12e4&&t.push(r,s,o)}return t},[]);return Qo((t,i)=>{n.current.rotation.x+=i*.005,n.current.rotation.y+=i*.005}),O.jsx("points",{ref:n,children:O.jsx("bufferGeometry",{children:O.jsx("float32BufferAttribute",{args:[e,3],attach:"attributes-position"})})})}function XB(){const n=Ve(t=>t.controlsEnabled);return Ve(t=>t.objectType)=="sphere"?O.jsx(Kee,{enabled:n,enablePan:!1,enableDamping:!0,dampingFactor:.075,minDistance:50,maxDistance:200,rotateSpeed:.5}):O.jsx(VB,{maxPolarAngle:1.5,minDistance:35,maxDistance:200,enabled:n})}const Kte=5;function Jte({action:n}){const e=Ve(u=>u.jwt),[t,i]=ie.useState(Array(Kte).fill(null)),r=u=>c=>{const f=t.slice();f[u]=c,i(f)},s=t.find((u,c)=>u===null&&c!==t.length-1)===void 0,o=["Fully convinced (~100%)","Strong belief (~80%)","Slight belief (~60%)","On the fence (~50%)","Slight disbelief (~40%)","Strong disbelief (~20%)","Complete disbelief (~0%)"],a=["A great deal","A fair amount","Not very much","None at all"],l=()=>{var h;const u=t.slice(0,-1).map(m=>m.value),c=(h=t.at(-1))==null?void 0:h.text;sH(e,{answers:u,text:c||null}),n()};return O.jsxs(O.Fragment,{children:[O.jsxs("div",{className:"*:my-2",children:[O.jsx(Rs,{updateAnswer:r(0),title:"Before visiting this site, you believe in flat earth about (pick highest)",answers:o}),O.jsx(Rs,{updateAnswer:r(1),title:"After doing this challenge, your belief in flat earth is now (pick highest)",answers:o}),O.jsx(Rs,{updateAnswer:r(2),title:"In general, how much trust and confidence do you have in the competence of institutions?",answers:a}),O.jsx(Rs,{updateAnswer:r(3),title:"In general, how much trust and confidence do you have in the belief that institutions work on behalf of the welfare of the general public?",answers:a}),O.jsx(Qte,{updateAnswer:r(4)})]}),O.jsx(jB,{active:s,onClick:l})]})}function Qte({updateAnswer:n}){const[t,i]=ie.useState(""),r=s=>{s.length>1e3&&(s=s.slice(0,1e3)),i(s),n({text:s})};return O.jsxs("div",{children:[O.jsx("h2",{className:"text-xl font-semibold",children:"(Optional) If you want to, tell us a bit about your belief in a flat earth. Where does it come from? How did it get started? Why does it persist? What could convince you otherwise?"}),O.jsx("textarea",{className:"border border-black rounded w-full min-h-20",onChange:s=>r(s.target.value),value:t}),O.jsx("div",{className:`w-full flex justify-end text-sm ${t.length!==1e3?"text-gray-900":"text-red"}`,children:O.jsxs("div",{children:["Characters left: ",1e3-t.length]})})]})}const Bu="generated",ene="pointerdown",tne="pointerup",sE="pointerleave",nne="pointerout",lc="pointermove",ine="touchstart",o3="touchend",rne="touchmove",sne="touchcancel",one="resize",ane="visibilitychange",js="tsParticles - Error",$i=100,uc=.5,Kn=1e3;var qi;(function(n){n.bottom="bottom",n.bottomLeft="bottom-left",n.bottomRight="bottom-right",n.left="left",n.none="none",n.right="right",n.top="top",n.topLeft="top-left",n.topRight="top-right",n.outside="outside",n.inside="inside"})(qi||(qi={}));function $B(n){return typeof n=="boolean"}function zl(n){return typeof n=="string"}function vs(n){return typeof n=="number"}function Wf(n){return typeof n=="object"&&n!==null}function gr(n){return Array.isArray(n)}function Xe(n){return n==null}const Oo={x:0,y:0,z:0},a3=2,lne=1;class os{constructor(e,t,i){if(this._updateFromAngle=(r,s)=>{this.x=Math.cos(r)*s,this.y=Math.sin(r)*s},!vs(e)&&e){this.x=e.x,this.y=e.y;const r=e;this.z=r.z?r.z:Oo.z}else if(e!==void 0&&t!==void 0)this.x=e,this.y=t,this.z=i??Oo.z;else throw new Error(`${js} Vector3d not initialized correctly`)}static get origin(){return os.create(Oo.x,Oo.y,Oo.z)}get angle(){return Math.atan2(this.y,this.x)}set angle(e){this._updateFromAngle(e,this.length)}get length(){return Math.sqrt(this.getLengthSq())}set length(e){this._updateFromAngle(this.angle,e)}static clone(e){return os.create(e.x,e.y,e.z)}static create(e,t,i){return new os(e,t,i)}add(e){return os.create(this.x+e.x,this.y+e.y,this.z+e.z)}addTo(e){this.x+=e.x,this.y+=e.y,this.z+=e.z}copy(){return os.clone(this)}distanceTo(e){return this.sub(e).length}distanceToSq(e){return this.sub(e).getLengthSq()}div(e){return os.create(this.x/e,this.y/e,this.z/e)}divTo(e){this.x/=e,this.y/=e,this.z/=e}getLengthSq(){return this.x**a3+this.y**a3}mult(e){return os.create(this.x*e,this.y*e,this.z*e)}multTo(e){this.x*=e,this.y*=e,this.z*=e}normalize(){const e=this.length;e!=0&&this.multTo(lne/e)}rotate(e){return os.create(this.x*Math.cos(e)-this.y*Math.sin(e),this.x*Math.sin(e)+this.y*Math.cos(e),Oo.z)}setTo(e){this.x=e.x,this.y=e.y;const t=e;this.z=t.z?t.z:Oo.z}sub(e){return os.create(this.x-e.x,this.y-e.y,this.z-e.z)}subFrom(e){this.x-=e.x,this.y-=e.y,this.z-=e.z}}class Pn extends os{constructor(e,t){super(e,t,Oo.z)}static get origin(){return Pn.create(Oo.x,Oo.y)}static clone(e){return Pn.create(e.x,e.y)}static create(e,t){return new Pn(e,t)}}let une=Math.random;const YB={nextFrame:n=>requestAnimationFrame(n),cancel:n=>cancelAnimationFrame(n)},cne=2,fne=Math.PI*cne;function Xt(){return qs(une(),0,1-Number.EPSILON)}function hne(n){return YB.nextFrame(n)}function dne(n){YB.cancel(n)}function qs(n,e,t){return Math.min(Math.max(n,e),t)}function cS(n,e,t,i){return Math.floor((n*t+e*i)/(t+i))}function Yi(n){const e=Vo(n),t=0;let i=M_(n);return e===i&&(i=t),Xt()*(e-i)+i}function st(n){return vs(n)?n:Yi(n)}function M_(n){return vs(n)?n:n.min}function Vo(n){return vs(n)?n:n.max}function It(n,e){if(n===e||e===void 0&&vs(n))return n;const t=M_(n),i=Vo(n);return e!==void 0?{min:Math.min(t,e),max:Math.max(i,e)}:It(t,i)}function vr(n,e){const t=n.x-e.x,i=n.y-e.y,r=2;return{dx:t,dy:i,distance:Math.sqrt(t**r+i**r)}}function Ir(n,e){return vr(n,e).distance}function Ta(n){return n*Math.PI/180}function pne(n,e,t){if(vs(n))return Ta(n);const i=0,r=.5,s=.25,o=r+s;switch(n){case qi.top:return-Math.PI*r;case qi.topRight:return-Math.PI*s;case qi.right:return i;case qi.bottomRight:return Math.PI*s;case qi.bottom:return Math.PI*r;case qi.bottomLeft:return Math.PI*o;case qi.left:return Math.PI;case qi.topLeft:return-Math.PI*o;case qi.inside:return Math.atan2(t.y-e.y,t.x-e.x);case qi.outside:return Math.atan2(e.y-t.y,e.x-t.x);default:return Xt()*fne}}function mne(n){const e=Pn.origin;return e.length=1,e.angle=n,e}function l3(n,e,t,i){return Pn.create(n.x*(t-i)/(t+i)+e.x*2*i/(t+i),n.y)}function ZB(n){var e,t;return{x:(((e=n.position)==null?void 0:e.x)??Xt()*$i)*n.size.width/$i,y:(((t=n.position)==null?void 0:t.y)??Xt()*$i)*n.size.height/$i}}function KB(n){var t,i;const e={x:((t=n.position)==null?void 0:t.x)!==void 0?st(n.position.x):void 0,y:((i=n.position)==null?void 0:i.y)!==void 0?st(n.position.y):void 0};return ZB({size:n.size,position:e})}function gne(n){var e,t;return{x:((e=n.position)==null?void 0:e.x)??Xt()*n.size.width,y:((t=n.position)==null?void 0:t.y)??Xt()*n.size.height}}function JB(n){return n?n.endsWith("%")?parseFloat(n)/$i:parseFloat(n):1}var Uu;(function(n){n.auto="auto",n.increase="increase",n.decrease="decrease",n.random="random"})(Uu||(Uu={}));var ri;(function(n){n.increasing="increasing",n.decreasing="decreasing"})(ri||(ri={}));var Bl;(function(n){n.none="none",n.max="max",n.min="min"})(Bl||(Bl={}));var rn;(function(n){n.bottom="bottom",n.left="left",n.right="right",n.top="top"})(rn||(rn={}));var Zo;(function(n){n.precise="precise",n.percent="percent"})(Zo||(Zo={}));var th;(function(n){n.max="max",n.min="min",n.random="random"})(th||(th={}));const vne={debug:console.debug,error:console.error,info:console.info,log:console.log,verbose:console.log,warning:console.warn};function cc(){return vne}function u3(n){const e={bounced:!1},{pSide:t,pOtherSide:i,rectSide:r,rectOtherSide:s,velocity:o,factor:a}=n,l=.5,u=0;return i.min<s.min||i.min>s.max||i.max<s.min||i.max>s.max||(t.max>=r.min&&t.max<=(r.max+r.min)*l&&o>u||t.min<=r.max&&t.min>(r.max+r.min)*l&&o<u)&&(e.velocity=o*-a,e.bounced=!0),e}function yne(n,e){const t=Si(e,i=>n.matches(i));return gr(t)?t.some(i=>i):t}function fc(){return typeof window>"u"||!window||typeof window.document>"u"||!window.document}function xne(){return!fc()&&typeof matchMedia<"u"}function QB(n){if(xne())return matchMedia(n)}function _ne(n){if(!(fc()||typeof IntersectionObserver>"u"))return new IntersectionObserver(n)}function wne(n){if(!(fc()||typeof MutationObserver>"u"))return new MutationObserver(n)}function Fn(n,e){return n===e||gr(e)&&e.indexOf(n)>-1}async function oE(n,e){try{await document.fonts.load(`${e??"400"} 36px '${n??"Verdana"}'`)}catch{}}function eU(n){return Math.floor(Xt()*n.length)}function Vm(n,e,t=!0){return n[e!==void 0&&t?e%n.length:eU(n)]}function Wm(n,e,t,i,r){return Sne(Gm(n,i??0),e,t,r)}function Sne(n,e,t,i){let r=!0;return(!i||i===rn.bottom)&&(r=n.top<e.height+t.x),r&&(!i||i===rn.left)&&(r=n.right>t.x),r&&(!i||i===rn.right)&&(r=n.left<e.width+t.y),r&&(!i||i===rn.top)&&(r=n.bottom>t.y),r}function Gm(n,e){return{bottom:n.y+e,left:n.x-e,right:n.x+e,top:n.y-e}}function li(n,...e){for(const t of e){if(t==null)continue;if(!Wf(t)){n=t;continue}const i=Array.isArray(t);i&&(Wf(n)||!n||!Array.isArray(n))?n=[]:!i&&(Wf(n)||!n||Array.isArray(n))&&(n={});for(const r in t){if(r==="__proto__")continue;const s=t,o=s[r],a=n;a[r]=Wf(o)&&Array.isArray(o)?o.map(l=>li(a[r],l)):li(a[r],o)}}return n}function PA(n,e){return!!iU(e,t=>t.enable&&Fn(n,t.mode))}function RA(n,e,t){Si(e,i=>{const r=i.mode;i.enable&&Fn(n,r)&&Mne(i,t)})}function Mne(n,e){const t=n.selectors;Si(t,i=>{e(i,n)})}function tU(n,e){if(!(!e||!n))return iU(n,t=>yne(e,t.selectors))}function aE(n){return{position:n.getPosition(),radius:n.getRadius(),mass:n.getMass(),velocity:n.velocity,factor:Pn.create(st(n.options.bounce.horizontal.value),st(n.options.bounce.vertical.value))}}function nU(n,e){const{x:t,y:i}=n.velocity.sub(e.velocity),[r,s]=[n.position,e.position],{dx:o,dy:a}=vr(s,r);if(t*o+i*a<0)return;const u=-Math.atan2(a,o),c=n.mass,f=e.mass,h=n.velocity.rotate(u),m=e.velocity.rotate(u),v=l3(h,m,c,f),g=l3(m,h,c,f),x=v.rotate(-u),y=g.rotate(-u);n.velocity.x=x.x*n.factor.x,n.velocity.y=x.y*n.factor.y,e.velocity.x=y.x*e.factor.x,e.velocity.y=y.y*e.factor.y}function Ene(n,e){const t=n.getPosition(),i=n.getRadius(),r=Gm(t,i),s=n.options.bounce,o=u3({pSide:{min:r.left,max:r.right},pOtherSide:{min:r.top,max:r.bottom},rectSide:{min:e.left,max:e.right},rectOtherSide:{min:e.top,max:e.bottom},velocity:n.velocity.x,factor:st(s.horizontal.value)});o.bounced&&(o.velocity!==void 0&&(n.velocity.x=o.velocity),o.position!==void 0&&(n.position.x=o.position));const a=u3({pSide:{min:r.top,max:r.bottom},pOtherSide:{min:r.left,max:r.right},rectSide:{min:e.top,max:e.bottom},rectOtherSide:{min:e.left,max:e.right},velocity:n.velocity.y,factor:st(s.vertical.value)});a.bounced&&(a.velocity!==void 0&&(n.velocity.y=a.velocity),a.position!==void 0&&(n.position.y=a.position))}function Si(n,e){return gr(n)?n.map((i,r)=>e(i,r)):e(n,0)}function Zi(n,e,t){return gr(n)?Vm(n,e,t):n}function iU(n,e){return gr(n)?n.find((i,r)=>e(i,r)):e(n,0)?n:void 0}function rU(n,e){const t=n.value,i=n.animation,r={delayTime:st(i.delay)*Kn,enable:i.enable,value:st(n.value)*e,max:Vo(t)*e,min:M_(t)*e,loops:0,maxLoops:st(i.count),time:0},s=1;if(i.enable){switch(r.decay=s-st(i.decay),i.mode){case Uu.increase:r.status=ri.increasing;break;case Uu.decrease:r.status=ri.decreasing;break;case Uu.random:r.status=Xt()>=uc?ri.increasing:ri.decreasing;break}const o=i.mode===Uu.auto;switch(i.startValue){case th.min:r.value=r.min,o&&(r.status=ri.increasing);break;case th.max:r.value=r.max,o&&(r.status=ri.decreasing);break;case th.random:default:r.value=Yi(r),o&&(r.status=Xt()>=uc?ri.increasing:ri.decreasing);break}}return r.initialValue=r.value,r}function sU(n,e){if(!(n.mode===Zo.percent)){const{mode:r,...s}=n;return s}return"x"in n?{x:n.x/$i*e.width,y:n.y/$i*e.height}:{width:n.width/$i*e.width,height:n.height/$i*e.height}}function oU(n,e){return sU(n,e)}function c3(n,e){return sU(n,e)}function bne(n,e,t,i,r){switch(e){case Bl.max:t>=r&&n.destroy();break;case Bl.min:t<=i&&n.destroy();break}}function E_(n,e,t,i,r){if(n.destroyed||!e||!e.enable||(e.maxLoops??0)>0&&(e.loops??0)>(e.maxLoops??0))return;const c=(e.velocity??0)*r.factor,f=e.min,h=e.max,m=e.decay??1;if(e.time||(e.time=0),(e.delayTime??0)>0&&e.time<(e.delayTime??0)&&(e.time+=r.value),!((e.delayTime??0)>0&&e.time<(e.delayTime??0))){switch(e.status){case ri.increasing:e.value>=h?(t?e.status=ri.decreasing:e.value-=h,e.loops||(e.loops=0),e.loops++):e.value+=c;break;case ri.decreasing:e.value<=f?(t?e.status=ri.increasing:e.value+=h,e.loops||(e.loops=0),e.loops++):e.value-=c}e.velocity&&m!==1&&(e.velocity*=m),bne(n,i,e.value,f,h),n.destroyed||(e.value=qs(e.value,f,h))}}function Ut(n,e){if(n.version!==e)throw new Error(`The tsParticles version is different from the loaded plugins version. Engine version: ${n.version}. Plugins version: ${e}`)}var pl;(function(n){n.darken="darken",n.enlighten="enlighten"})(pl||(pl={}));const sx="random",L0="mid";function Ane(n,e){if(e){for(const t of n.colorManagers.values())if(e.startsWith(t.stringPrefix))return t.parseString(e)}}function Us(n,e,t,i=!0){if(!e)return;const r=zl(e)?{value:e}:e;if(zl(r.value))return aU(n,r.value,t,i);if(gr(r.value))return Us(n,{value:Vm(r.value,t,i)});for(const s of n.colorManagers.values()){const o=s.handleRangeColor(r);if(o)return o}}function aU(n,e,t,i=!0){if(!e)return;const r=zl(e)?{value:e}:e;if(zl(r.value))return r.value===sx?uU():Cne(n,r.value);if(gr(r.value))return aU(n,{value:Vm(r.value,t,i)});for(const s of n.colorManagers.values()){const o=s.handleColor(r);if(o)return o}}function Ul(n,e,t,i=!0){const r=Us(n,e,t,i);return r?lU(r):void 0}function lU(n){const c=n.r/255,f=n.g/255,h=n.b/255,m=Math.max(c,f,h),v=Math.min(c,f,h),g={h:0,l:(m+v)*.5,s:0};return m!==v&&(g.s=g.l<.5?(m-v)/(m+v):(m-v)/(2-m-v),g.h=c===m?(f-h)/(m-v):g.h=f===m?2+(h-c)/(m-v):2*2+(c-f)/(m-v)),g.l*=100,g.s*=100,g.h*=60,g.h<0&&(g.h+=360),g.h>=360&&(g.h-=360),g}function Cne(n,e){return Ane(n,e)}function Mh(n){const o=(n.h%360+360)%360,a=Math.max(0,Math.min(100,n.s)),l=Math.max(0,Math.min(100,n.l)),u=o/360,c=a/100,f=l/100,h=255,m=3;if(a===0){const A=Math.round(f*h);return{r:A,g:A,b:A}}const v=.5,g=2,x=(A,D,I)=>{if(I<0&&I++,I>1&&I--,I*6<1)return A+(D-A)*6*I;if(I*g<1)return D;if(I*m<1*g){const $=g/m;return A+(D-A)*($-I)*6}return A},y=1,_=f<v?f*(y+c):f+c-f*c,w=g*f-_,E=1,C=E/m,M=Math.min(h,h*x(w,_,u+C)),T=Math.min(h,h*x(w,_,u)),R=Math.min(h,h*x(w,_,u-C));return{r:Math.round(M),g:Math.round(T),b:Math.round(R)}}function Dne(n){const e=Mh(n);return{a:n.a,b:e.b,g:e.g,r:e.r}}function uU(n){return{b:Math.floor(Yi(It(0,256))),g:Math.floor(Yi(It(0,256))),r:Math.floor(Yi(It(0,256)))}}function $o(n,e){return`rgba(${n.r}, ${n.g}, ${n.b}, ${e??1})`}function Eh(n,e){return`hsla(${n.h}, ${n.s}%, ${n.l}%, ${e??1})`}function IA(n,e,t,i){let r=n,s=e;return r.r===void 0&&(r=Mh(n)),s.r===void 0&&(s=Mh(e)),{b:cS(r.b,s.b,t,i),g:cS(r.g,s.g,t,i),r:cS(r.r,s.r,t,i)}}function lE(n,e,t){if(t===sx)return uU();if(t===L0){const i=n.getFillColor()??n.getStrokeColor(),r=(e==null?void 0:e.getFillColor())??(e==null?void 0:e.getStrokeColor());if(i&&r&&e)return IA(i,r,n.getRadius(),e.getRadius());{const s=i??r;if(s)return Mh(s)}}else return t}function cU(n,e,t,i){const r=zl(e)?e:e.value;return r===sx?i?Us(n,{value:r}):t?sx:L0:r===L0?L0:Us(n,{value:r})}function f3(n){return n!==void 0?{h:n.h.value,s:n.s.value,l:n.l.value}:void 0}function fU(n,e,t){const i={h:{enable:!1,value:n.h},s:{enable:!1,value:n.s},l:{enable:!1,value:n.l}};return e&&(fS(i.h,e.h,t),fS(i.s,e.s,t),fS(i.l,e.l,t)),i}function fS(n,e,t){n.enable=e.enable;const i=0,r=1,s=0,o=0;n.enable?(n.velocity=st(e.speed)/$i*t,n.decay=r-st(e.decay),n.status=ri.increasing,n.loops=s,n.maxLoops=st(e.count),n.time=o,n.delayTime=st(e.delay)*Kn,e.sync||(n.velocity*=Xt(),n.value*=Xt()),n.initialValue=n.value,n.offset=It(e.offset)):n.velocity=i}function hS(n,e,t,i){if(!n||!n.enable||(n.maxLoops??0)>0&&(n.loops??0)>(n.maxLoops??0)||(n.time||(n.time=0),(n.delayTime??0)>0&&n.time<(n.delayTime??0)&&(n.time+=i.value),(n.delayTime??0)>0&&n.time<(n.delayTime??0)))return;const c=n.offset?Yi(n.offset):0,f=(n.velocity??0)*i.factor+c*3.6,h=n.decay??1,m=Vo(e),v=M_(e);!t||n.status===ri.increasing?(n.value+=f,n.value>m&&(n.loops||(n.loops=0),n.loops++,t?n.status=ri.decreasing:n.value-=m)):(n.value-=f,n.value<0&&(n.loops||(n.loops=0),n.loops++,n.status=ri.increasing)),n.velocity&&h!==1&&(n.velocity*=h),n.value=qs(n.value,v,m)}function hU(n,e){if(!n)return;const{h:t,s:i,l:r}=n,s={h:{min:0,max:360},s:{min:0,max:100},l:{min:0,max:100}};t&&hS(t,s.h,!1,e),i&&hS(i,s.s,!0,e),r&&hS(r,s.l,!0,e)}const bh={x:0,y:0},s0={a:1,b:0,c:0,d:1};function mp(n,e,t){n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.closePath()}function Tne(n,e,t){n.fillStyle=t??"rgba(0,0,0,0)",n.fillRect(bh.x,bh.y,e.width,e.height)}function Pne(n,e,t,i){t&&(n.globalAlpha=i,n.drawImage(t,bh.x,bh.y,e.width,e.height),n.globalAlpha=1)}function dS(n,e){n.clearRect(bh.x,bh.y,e.width,e.height)}function Rne(n){const{container:e,context:t,particle:i,delta:r,colorStyles:s,backgroundMask:o,composite:a,radius:l,opacity:u,shadow:c,transform:f}=n,h=i.getPosition(),m=0,v=i.rotation+(i.pathRotation?i.velocity.angle:m),g={sin:Math.sin(v),cos:Math.cos(v)},x=!!v,y=1,_={a:g.cos*(f.a??s0.a),b:x?g.sin*(f.b??y):f.b??s0.b,c:x?-g.sin*(f.c??y):f.c??s0.c,d:g.cos*(f.d??s0.d)};t.setTransform(_.a,_.b,_.c,_.d,h.x,h.y),o&&(t.globalCompositeOperation=a);const w=i.shadowColor;c.enable&&w&&(t.shadowBlur=c.blur,t.shadowColor=$o(w),t.shadowOffsetX=c.offset.x,t.shadowOffsetY=c.offset.y),s.fill&&(t.fillStyle=s.fill);const E=0,C=i.strokeWidth??E;t.lineWidth=C,s.stroke&&(t.strokeStyle=s.stroke);const M={container:e,context:t,particle:i,radius:l,opacity:u,delta:r,transformData:_,strokeWidth:C};Fne(M),Nne(M),Ine(M),t.globalCompositeOperation="source-over",t.resetTransform()}function Ine(n){const{container:e,context:t,particle:i,radius:r,opacity:s,delta:o,transformData:a}=n;if(!i.effect)return;const l=e.effectDrawers.get(i.effect);l&&l.draw({context:t,particle:i,radius:r,opacity:s,delta:o,pixelRatio:e.retina.pixelRatio,transformData:{...a}})}function Fne(n){const{container:e,context:t,particle:i,radius:r,opacity:s,delta:o,strokeWidth:a,transformData:l}=n,u=0;if(!i.shape)return;const c=e.shapeDrawers.get(i.shape);c&&(t.beginPath(),c.draw({context:t,particle:i,radius:r,opacity:s,delta:o,pixelRatio:e.retina.pixelRatio,transformData:{...l}}),i.shapeClose&&t.closePath(),a>u&&t.stroke(),i.shapeFill&&t.fill())}function Nne(n){const{container:e,context:t,particle:i,radius:r,opacity:s,delta:o,transformData:a}=n;if(!i.shape)return;const l=e.shapeDrawers.get(i.shape);l!=null&&l.afterDraw&&l.afterDraw({context:t,particle:i,radius:r,opacity:s,delta:o,pixelRatio:e.retina.pixelRatio,transformData:{...a}})}function Lne(n,e,t){e.draw&&e.draw(n,t)}function One(n,e,t,i){e.drawParticle&&e.drawParticle(n,t,i)}function zne(n,e,t){return{h:n.h,s:n.s,l:n.l+(e===pl.darken?-1:1)*t}}function Bne(n,e,t){const i=e[t],r=1;i!==void 0&&(n[t]=(n[t]??r)*i)}function h3(n,e,t=!1){if(!e)return;const i=n;if(!i)return;const r=i.style;if(r)for(const s in e){const o=e[s];r.setProperty(s,o,t?"important":"")}}class Une{constructor(e,t){this.container=e,this._applyPostDrawUpdaters=s=>{var o;for(const a of this._postDrawUpdaters)(o=a.afterDraw)==null||o.call(a,s)},this._applyPreDrawUpdaters=(s,o,a,l,u,c)=>{var f;for(const h of this._preDrawUpdaters){if(h.getColorStyles){const{fill:m,stroke:v}=h.getColorStyles(o,s,a,l);m&&(u.fill=m),v&&(u.stroke=v)}if(h.getTransformValues){const m=h.getTransformValues(o);for(const v in m)Bne(c,m,v)}(f=h.beforeDraw)==null||f.call(h,o)}},this._applyResizePlugins=()=>{var s;for(const o of this._resizePlugins)(s=o.resize)==null||s.call(o)},this._getPluginParticleColors=s=>{let o,a;for(const l of this._colorPlugins)if(!o&&l.particleFillColor&&(o=Ul(this._engine,l.particleFillColor(s))),!a&&l.particleStrokeColor&&(a=Ul(this._engine,l.particleStrokeColor(s))),o&&a)break;return[o,a]},this._initCover=async()=>{const s=this.container.actualOptions,o=s.backgroundMask.cover,a=o.color;if(a){const l=Us(this._engine,a);if(l){const u={...l,a:o.opacity};this._coverColorStyle=$o(u,u.a)}}else await new Promise((l,u)=>{if(!o.image)return;const c=document.createElement("img");c.addEventListener("load",()=>{this._coverImage={image:c,opacity:o.opacity},l()}),c.addEventListener("error",f=>{u(f.error)}),c.src=o.image})},this._initStyle=()=>{const s=this.element,o=this.container.actualOptions;if(s){this._fullScreen?(this._originalStyle=li({},s.style),this._setFullScreenStyle()):this._resetOriginalStyle();for(const a in o.style){if(!a||!o.style)continue;const l=o.style[a];l&&s.style.setProperty(a,l,"important")}}},this._initTrail=async()=>{const s=this.container.actualOptions,o=s.particles.move.trail,a=o.fill;if(!o.enable)return;const l=1,u=l/o.length;if(a.color){const c=Us(this._engine,a.color);if(!c)return;this._trailFill={color:{...c},opacity:u}}else await new Promise((c,f)=>{if(!a.image)return;const h=document.createElement("img");h.addEventListener("load",()=>{this._trailFill={image:h,opacity:u},c()}),h.addEventListener("error",m=>{f(m.error)}),h.src=a.image})},this._paintBase=s=>{this.draw(o=>Tne(o,this.size,s))},this._paintImage=(s,o)=>{this.draw(a=>Pne(a,this.size,s,o))},this._repairStyle=()=>{const s=this.element;s&&(this._safeMutationObserver(o=>o.disconnect()),this._initStyle(),this.initBackground(),this._safeMutationObserver(o=>{!s||!(s instanceof Node)||o.observe(s,{attributes:!0})}))},this._resetOriginalStyle=()=>{const s=this.element,o=this._originalStyle;s&&o&&h3(s,o)},this._safeMutationObserver=s=>{this._mutationObserver&&s(this._mutationObserver)},this._setFullScreenStyle=()=>{const s=this.element;if(!s)return;const o=10,a=this.container.actualOptions.fullScreen.zIndex.toString(o);h3(s,{position:"fixed","z-index":a,zIndex:a,top:"0",left:"0",width:"100%",height:"100%"},!0)},this._engine=t,this._standardSize={height:0,width:0};const i=e.retina.pixelRatio,r=this._standardSize;this.size={height:r.height*i,width:r.width*i},this._context=null,this._generated=!1,this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}get _fullScreen(){return this.container.actualOptions.fullScreen.enable}clear(){const e=this.container.actualOptions,t=e.particles.move.trail,i=this._trailFill;e.backgroundMask.enable?this.paint():t.enable&&t.length>0&&i?i.color?this._paintBase($o(i.color,i.opacity)):i.image&&this._paintImage(i.image,i.opacity):e.clear&&this.draw(s=>{dS(s,this.size)})}destroy(){if(this.stop(),this._generated){const e=this.element;e==null||e.remove()}else this._resetOriginalStyle();this._preDrawUpdaters=[],this._postDrawUpdaters=[],this._resizePlugins=[],this._colorPlugins=[]}draw(e){const t=this._context;if(t)return e(t)}drawAsync(e){const t=this._context;if(t)return e(t)}drawParticle(e,t){if(e.spawning||e.destroyed)return;const i=e.getRadius();if(i<=0)return;const s=e.getFillColor(),o=e.getStrokeColor()??s;let[a,l]=this._getPluginParticleColors(e);a||(a=s),l||(l=o),!(!a&&!l)&&this.draw(u=>{var T;const c=this.container,f=c.actualOptions,h=e.options.zIndex,m=1,v=m-e.zIndexFactor,g=v**h.opacityRate,x=1,y=e.bubble.opacity??((T=e.opacity)==null?void 0:T.value)??x,_=e.strokeOpacity??y,w=y*g,E=_*g,C={},M={fill:a?Eh(a,w):void 0};M.stroke=l?Eh(l,E):M.fill,this._applyPreDrawUpdaters(u,e,i,w,M,C),Rne({container:c,context:u,particle:e,delta:t,colorStyles:M,backgroundMask:f.backgroundMask.enable,composite:f.backgroundMask.composite,radius:i*v**h.sizeRate,opacity:w,shadow:e.options.shadow,transform:C}),this._applyPostDrawUpdaters(e)})}drawParticlePlugin(e,t,i){this.draw(r=>One(r,e,t,i))}drawPlugin(e,t){this.draw(i=>Lne(i,e,t))}async init(){this._safeMutationObserver(e=>e.disconnect()),this._mutationObserver=wne(e=>{for(const t of e)t.type==="attributes"&&t.attributeName==="style"&&this._repairStyle()}),this.resize(),this._initStyle(),await this._initCover();try{await this._initTrail()}catch(e){cc().error(e)}this.initBackground(),this._safeMutationObserver(e=>{!this.element||!(this.element instanceof Node)||e.observe(this.element,{attributes:!0})}),this.initUpdaters(),this.initPlugins(),this.paint()}initBackground(){const e=this.container.actualOptions,t=e.background,i=this.element;if(!i)return;const r=i.style;if(r){if(t.color){const s=Us(this._engine,t.color);r.backgroundColor=s?$o(s,t.opacity):""}else r.backgroundColor="";r.backgroundImage=t.image||"",r.backgroundPosition=t.position||"",r.backgroundRepeat=t.repeat||"",r.backgroundSize=t.size||""}}initPlugins(){this._resizePlugins=[];for(const e of this.container.plugins.values())e.resize&&this._resizePlugins.push(e),(e.particleFillColor??e.particleStrokeColor)&&this._colorPlugins.push(e)}initUpdaters(){this._preDrawUpdaters=[],this._postDrawUpdaters=[];for(const e of this.container.particles.updaters)e.afterDraw&&this._postDrawUpdaters.push(e),(e.getColorStyles??e.getTransformValues??e.beforeDraw)&&this._preDrawUpdaters.push(e)}loadCanvas(e){this._generated&&this.element&&this.element.remove(),this._generated=e.dataset&&Bu in e.dataset?e.dataset[Bu]==="true":this._generated,this.element=e,this.element.ariaHidden="true",this._originalStyle=li({},this.element.style);const t=this._standardSize;t.height=e.offsetHeight,t.width=e.offsetWidth;const i=this.container.retina.pixelRatio,r=this.size;e.height=r.height=t.height*i,e.width=r.width=t.width*i,this._context=this.element.getContext("2d"),this._safeMutationObserver(s=>{!this.element||!(this.element instanceof Node)||s.observe(this.element,{attributes:!0})}),this.container.retina.init(),this.initBackground()}paint(){const e=this.container.actualOptions;this.draw(t=>{e.backgroundMask.enable&&e.backgroundMask.cover?(dS(t,this.size),this._coverImage?this._paintImage(this._coverImage.image,this._coverImage.opacity):this._coverColorStyle?this._paintBase(this._coverColorStyle):this._paintBase()):this._paintBase()})}resize(){if(!this.element)return!1;const e=this.container,t=e.canvas._standardSize,i={width:this.element.offsetWidth,height:this.element.offsetHeight},r=e.retina.pixelRatio,s={width:i.width*r,height:i.height*r};if(i.height===t.height&&i.width===t.width&&s.height===this.element.height&&s.width===this.element.width)return!1;const o={...t};t.height=i.height,t.width=i.width;const a=this.size;return this.element.width=a.width=s.width,this.element.height=a.height=s.height,this.container.started&&e.particles.setResizeFactor({width:t.width/o.width,height:t.height/o.height}),!0}stop(){this._safeMutationObserver(e=>e.disconnect()),this._mutationObserver=void 0,this.draw(e=>dS(e,this.size))}async windowResize(){if(!this.element||!this.resize())return;const e=this.container,t=e.updateActualOptions();e.particles.setDensity(),this._applyResizePlugins(),t&&await e.refresh()}}var nh;(function(n){n.canvas="canvas",n.parent="parent",n.window="window"})(nh||(nh={}));const d3=2;function Ps(n,e,t,i,r){if(i){let s={passive:!0};$B(r)?s.capture=r:r!==void 0&&(s=r),n.addEventListener(e,t,s)}else{const s=r;n.removeEventListener(e,t,s)}}class kne{constructor(e){this.container=e,this._doMouseTouchClick=t=>{const i=this.container,r=i.actualOptions;if(this._canPush){const s=i.interactivity.mouse,o=s.position;if(!o)return;s.clickPosition={...o},s.clickTime=new Date().getTime();const a=r.interactivity.events.onClick;Si(a.mode,l=>this.container.handleClickMode(l))}t.type==="touchend"&&setTimeout(()=>this._mouseTouchFinish(),500)},this._handleThemeChange=t=>{const i=t,r=this.container,s=r.options,o=s.defaultThemes,a=i.matches?o.dark:o.light,l=s.themes.find(u=>u.name===a);l!=null&&l.default.auto&&r.loadTheme(a)},this._handleVisibilityChange=()=>{const t=this.container,i=t.actualOptions;this._mouseTouchFinish(),i.pauseOnBlur&&(document!=null&&document.hidden?(t.pageHidden=!0,t.pause()):(t.pageHidden=!1,t.animationStatus?t.play(!0):t.draw(!0)))},this._handleWindowResize=()=>{this._resizeTimeout&&(clearTimeout(this._resizeTimeout),delete this._resizeTimeout);const t=async()=>{const i=this.container.canvas;await(i==null?void 0:i.windowResize())};this._resizeTimeout=setTimeout(()=>void t(),this.container.actualOptions.interactivity.events.resize.delay*Kn)},this._manageInteractivityListeners=(t,i)=>{const r=this._handlers,s=this.container,o=s.actualOptions,a=s.interactivity.element;if(!a)return;const l=a,u=s.canvas.element;u&&(u.style.pointerEvents=l===u?"initial":"none"),(o.interactivity.events.onHover.enable||o.interactivity.events.onClick.enable)&&(Ps(a,lc,r.mouseMove,i),Ps(a,ine,r.touchStart,i),Ps(a,rne,r.touchMove,i),o.interactivity.events.onClick.enable?(Ps(a,o3,r.touchEndClick,i),Ps(a,tne,r.mouseUp,i),Ps(a,ene,r.mouseDown,i)):Ps(a,o3,r.touchEnd,i),Ps(a,t,r.mouseLeave,i),Ps(a,sne,r.touchCancel,i))},this._manageListeners=t=>{const i=this._handlers,r=this.container,s=r.actualOptions,o=s.interactivity.detectsOn,a=r.canvas.element;let l=sE;o===nh.window?(r.interactivity.element=window,l=nne):o===nh.parent&&a?r.interactivity.element=a.parentElement??a.parentNode:r.interactivity.element=a,this._manageMediaMatch(t),this._manageResize(t),this._manageInteractivityListeners(l,t),document&&Ps(document,ane,i.visibilityChange,t,!1)},this._manageMediaMatch=t=>{const i=this._handlers,r=QB("(prefers-color-scheme: dark)");if(r){if(r.addEventListener!==void 0){Ps(r,"change",i.themeChange,t);return}r.addListener!==void 0&&(t?r.addListener(i.oldThemeChange):r.removeListener(i.oldThemeChange))}},this._manageResize=t=>{const i=this._handlers,r=this.container;if(!r.actualOptions.interactivity.events.resize)return;if(typeof ResizeObserver>"u"){Ps(window,one,i.resize,t);return}const o=r.canvas.element;this._resizeObserver&&!t?(o&&this._resizeObserver.unobserve(o),this._resizeObserver.disconnect(),delete this._resizeObserver):!this._resizeObserver&&t&&o&&(this._resizeObserver=new ResizeObserver(a=>{a.find(u=>u.target===o)&&this._handleWindowResize()}),this._resizeObserver.observe(o))},this._mouseDown=()=>{const{interactivity:t}=this.container;if(!t)return;const{mouse:i}=t;i.clicking=!0,i.downPosition=i.position},this._mouseTouchClick=t=>{const i=this.container,r=i.actualOptions,{mouse:s}=i.interactivity;s.inside=!0;let o=!1;const a=s.position;if(!(!a||!r.interactivity.events.onClick.enable)){for(const l of i.plugins.values())if(l.clickPositionValid&&(o=l.clickPositionValid(a),o))break;o||this._doMouseTouchClick(t),s.clicking=!1}},this._mouseTouchFinish=()=>{const t=this.container.interactivity;if(!t)return;const i=t.mouse;delete i.position,delete i.clickPosition,delete i.downPosition,t.status=sE,i.inside=!1,i.clicking=!1},this._mouseTouchMove=t=>{const i=this.container,r=i.actualOptions,s=i.interactivity,o=i.canvas.element;if(!(s!=null&&s.element))return;s.mouse.inside=!0;let a;if(t.type.startsWith("pointer")){this._canPush=!0;const u=t;if(s.element===window){if(o){const c=o.getBoundingClientRect();a={x:u.clientX-c.left,y:u.clientY-c.top}}}else if(r.interactivity.detectsOn===nh.parent){const c=u.target,f=u.currentTarget;if(c&&f&&o){const h=c.getBoundingClientRect(),m=f.getBoundingClientRect(),v=o.getBoundingClientRect();a={x:u.offsetX+d3*h.left-(m.left+v.left),y:u.offsetY+d3*h.top-(m.top+v.top)}}else a={x:u.offsetX??u.clientX,y:u.offsetY??u.clientY}}else u.target===o&&(a={x:u.offsetX??u.clientX,y:u.offsetY??u.clientY})}else if(this._canPush=t.type!=="touchmove",o){const u=t,c=1,f=u.touches[u.touches.length-c],h=o.getBoundingClientRect(),m=0;a={x:f.clientX-(h.left??m),y:f.clientY-(h.top??m)}}const l=i.retina.pixelRatio;a&&(a.x*=l,a.y*=l),s.mouse.position=a,s.status=lc},this._touchEnd=t=>{const i=t,r=Array.from(i.changedTouches);for(const s of r)this._touches.delete(s.identifier);this._mouseTouchFinish()},this._touchEndClick=t=>{const i=t,r=Array.from(i.changedTouches);for(const s of r)this._touches.delete(s.identifier);this._mouseTouchClick(t)},this._touchStart=t=>{const i=t,r=Array.from(i.changedTouches);for(const s of r)this._touches.set(s.identifier,performance.now());this._mouseTouchMove(t)},this._canPush=!0,this._touches=new Map,this._handlers={mouseDown:()=>this._mouseDown(),mouseLeave:()=>this._mouseTouchFinish(),mouseMove:t=>this._mouseTouchMove(t),mouseUp:t=>this._mouseTouchClick(t),touchStart:t=>this._touchStart(t),touchMove:t=>this._mouseTouchMove(t),touchEnd:t=>this._touchEnd(t),touchCancel:t=>this._touchEnd(t),touchEndClick:t=>this._touchEndClick(t),visibilityChange:()=>this._handleVisibilityChange(),themeChange:t=>this._handleThemeChange(t),oldThemeChange:t=>this._handleThemeChange(t),resize:()=>{this._handleWindowResize()}}}addListeners(){this._manageListeners(!0)}removeListeners(){this._manageListeners(!1)}}var Cr;(function(n){n.configAdded="configAdded",n.containerInit="containerInit",n.particlesSetup="particlesSetup",n.containerStarted="containerStarted",n.containerStopped="containerStopped",n.containerDestroyed="containerDestroyed",n.containerPaused="containerPaused",n.containerPlay="containerPlay",n.containerBuilt="containerBuilt",n.particleAdded="particleAdded",n.particleDestroyed="particleDestroyed",n.particleRemoved="particleRemoved"})(Cr||(Cr={}));class di{constructor(){this.value=""}static create(e,t){const i=new di;return i.load(e),t!==void 0&&(zl(t)||gr(t)?i.load({value:t}):i.load(t)),i}load(e){Xe(e)||Xe(e.value)||(this.value=e.value)}}class Hne{constructor(){this.color=new di,this.color.value="",this.image="",this.position="",this.repeat="",this.size="",this.opacity=1}load(e){Xe(e)||(e.color!==void 0&&(this.color=di.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image),e.position!==void 0&&(this.position=e.position),e.repeat!==void 0&&(this.repeat=e.repeat),e.size!==void 0&&(this.size=e.size),e.opacity!==void 0&&(this.opacity=e.opacity))}}class Vne{constructor(){this.opacity=1}load(e){Xe(e)||(e.color!==void 0&&(this.color=di.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image),e.opacity!==void 0&&(this.opacity=e.opacity))}}class Wne{constructor(){this.composite="destination-out",this.cover=new Vne,this.enable=!1}load(e){if(!Xe(e)){if(e.composite!==void 0&&(this.composite=e.composite),e.cover!==void 0){const t=e.cover,i=zl(e.cover)?{color:e.cover}:e.cover;this.cover.load(t.color!==void 0||t.image!==void 0?t:{color:i})}e.enable!==void 0&&(this.enable=e.enable)}}}class Gne{constructor(){this.enable=!0,this.zIndex=0}load(e){Xe(e)||(e.enable!==void 0&&(this.enable=e.enable),e.zIndex!==void 0&&(this.zIndex=e.zIndex))}}class jne{constructor(){this.enable=!1,this.mode=[]}load(e){Xe(e)||(e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode))}}var Ah;(function(n){n.circle="circle",n.rectangle="rectangle"})(Ah||(Ah={}));class p3{constructor(){this.selectors=[],this.enable=!1,this.mode=[],this.type=Ah.circle}load(e){Xe(e)||(e.selectors!==void 0&&(this.selectors=e.selectors),e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode),e.type!==void 0&&(this.type=e.type))}}class qne{constructor(){this.enable=!1,this.force=2,this.smooth=10}load(e){Xe(e)||(e.enable!==void 0&&(this.enable=e.enable),e.force!==void 0&&(this.force=e.force),e.smooth!==void 0&&(this.smooth=e.smooth))}}class Xne{constructor(){this.enable=!1,this.mode=[],this.parallax=new qne}load(e){Xe(e)||(e.enable!==void 0&&(this.enable=e.enable),e.mode!==void 0&&(this.mode=e.mode),this.parallax.load(e.parallax))}}class $ne{constructor(){this.delay=.5,this.enable=!0}load(e){Xe(e)||(e.delay!==void 0&&(this.delay=e.delay),e.enable!==void 0&&(this.enable=e.enable))}}class Yne{constructor(){this.onClick=new jne,this.onDiv=new p3,this.onHover=new Xne,this.resize=new $ne}load(e){if(Xe(e))return;this.onClick.load(e.onClick);const t=e.onDiv;t!==void 0&&(this.onDiv=Si(t,i=>{const r=new p3;return r.load(i),r})),this.onHover.load(e.onHover),this.resize.load(e.resize)}}class Zne{constructor(e,t){this._engine=e,this._container=t}load(e){if(Xe(e)||!this._container)return;const t=this._engine.interactors.get(this._container);if(t)for(const i of t)i.loadModeOptions&&i.loadModeOptions(this,e)}}class dU{constructor(e,t){this.detectsOn=nh.window,this.events=new Yne,this.modes=new Zne(e,t)}load(e){if(Xe(e))return;const t=e.detectsOn;t!==void 0&&(this.detectsOn=t),this.events.load(e.events),this.modes.load(e.modes)}}const m3=50;class Kne{load(e){Xe(e)||(e.position&&(this.position={x:e.position.x??m3,y:e.position.y??m3,mode:e.position.mode??Zo.percent}),e.options&&(this.options=li({},e.options)))}}var ku;(function(n){n.screen="screen",n.canvas="canvas"})(ku||(ku={}));class Jne{constructor(){this.maxWidth=1/0,this.options={},this.mode=ku.canvas}load(e){Xe(e)||(Xe(e.maxWidth)||(this.maxWidth=e.maxWidth),Xe(e.mode)||(e.mode===ku.screen?this.mode=ku.screen:this.mode=ku.canvas),Xe(e.options)||(this.options=li({},e.options)))}}var ml;(function(n){n.any="any",n.dark="dark",n.light="light"})(ml||(ml={}));class Qne{constructor(){this.auto=!1,this.mode=ml.any,this.value=!1}load(e){Xe(e)||(e.auto!==void 0&&(this.auto=e.auto),e.mode!==void 0&&(this.mode=e.mode),e.value!==void 0&&(this.value=e.value))}}class eie{constructor(){this.name="",this.default=new Qne}load(e){Xe(e)||(e.name!==void 0&&(this.name=e.name),this.default.load(e.default),e.options!==void 0&&(this.options=li({},e.options)))}}class FA{constructor(){this.count=0,this.enable=!1,this.speed=1,this.decay=0,this.delay=0,this.sync=!1}load(e){Xe(e)||(e.count!==void 0&&(this.count=It(e.count)),e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=It(e.speed)),e.decay!==void 0&&(this.decay=It(e.decay)),e.delay!==void 0&&(this.delay=It(e.delay)),e.sync!==void 0&&(this.sync=e.sync))}}class NA extends FA{constructor(){super(),this.mode=Uu.auto,this.startValue=th.random}load(e){super.load(e),!Xe(e)&&(e.mode!==void 0&&(this.mode=e.mode),e.startValue!==void 0&&(this.startValue=e.startValue))}}class pS extends FA{constructor(){super(),this.offset=0,this.sync=!0}load(e){super.load(e),!Xe(e)&&e.offset!==void 0&&(this.offset=It(e.offset))}}class tie{constructor(){this.h=new pS,this.s=new pS,this.l=new pS}load(e){Xe(e)||(this.h.load(e.h),this.s.load(e.s),this.l.load(e.l))}}class Ch extends di{constructor(){super(),this.animation=new tie}static create(e,t){const i=new Ch;return i.load(e),t!==void 0&&(zl(t)||gr(t)?i.load({value:t}):i.load(t)),i}load(e){if(super.load(e),Xe(e))return;const t=e.animation;t!==void 0&&(t.enable!==void 0?this.animation.h.load(t):this.animation.load(e.animation))}}var ih;(function(n){n.absorb="absorb",n.bounce="bounce",n.destroy="destroy"})(ih||(ih={}));class nie{constructor(){this.speed=2}load(e){Xe(e)||e.speed!==void 0&&(this.speed=e.speed)}}class iie{constructor(){this.enable=!0,this.retries=0}load(e){Xe(e)||(e.enable!==void 0&&(this.enable=e.enable),e.retries!==void 0&&(this.retries=e.retries))}}class So{constructor(){this.value=0}load(e){Xe(e)||Xe(e.value)||(this.value=It(e.value))}}class rie extends So{constructor(){super(),this.animation=new FA}load(e){if(super.load(e),Xe(e))return;const t=e.animation;t!==void 0&&this.animation.load(t)}}class pU extends rie{constructor(){super(),this.animation=new NA}load(e){super.load(e)}}class g3 extends So{constructor(){super(),this.value=1}}class mU{constructor(){this.horizontal=new g3,this.vertical=new g3}load(e){Xe(e)||(this.horizontal.load(e.horizontal),this.vertical.load(e.vertical))}}class sie{constructor(){this.absorb=new nie,this.bounce=new mU,this.enable=!1,this.maxSpeed=50,this.mode=ih.bounce,this.overlap=new iie}load(e){Xe(e)||(this.absorb.load(e.absorb),this.bounce.load(e.bounce),e.enable!==void 0&&(this.enable=e.enable),e.maxSpeed!==void 0&&(this.maxSpeed=It(e.maxSpeed)),e.mode!==void 0&&(this.mode=e.mode),this.overlap.load(e.overlap))}}class oie{constructor(){this.close=!0,this.fill=!0,this.options={},this.type=[]}load(e){if(Xe(e))return;const t=e.options;if(t!==void 0)for(const i in t){const r=t[i];r&&(this.options[i]=li(this.options[i]??{},r))}e.close!==void 0&&(this.close=e.close),e.fill!==void 0&&(this.fill=e.fill),e.type!==void 0&&(this.type=e.type)}}class aie{constructor(){this.offset=0,this.value=90}load(e){Xe(e)||(e.offset!==void 0&&(this.offset=It(e.offset)),e.value!==void 0&&(this.value=It(e.value)))}}class lie{constructor(){this.distance=200,this.enable=!1,this.rotate={x:3e3,y:3e3}}load(e){if(!Xe(e)&&(e.distance!==void 0&&(this.distance=It(e.distance)),e.enable!==void 0&&(this.enable=e.enable),e.rotate)){const t=e.rotate.x;t!==void 0&&(this.rotate.x=t);const i=e.rotate.y;i!==void 0&&(this.rotate.y=i)}}}class uie{constructor(){this.x=50,this.y=50,this.mode=Zo.percent,this.radius=0}load(e){Xe(e)||(e.x!==void 0&&(this.x=e.x),e.y!==void 0&&(this.y=e.y),e.mode!==void 0&&(this.mode=e.mode),e.radius!==void 0&&(this.radius=e.radius))}}class cie{constructor(){this.acceleration=9.81,this.enable=!1,this.inverse=!1,this.maxSpeed=50}load(e){Xe(e)||(e.acceleration!==void 0&&(this.acceleration=It(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.inverse!==void 0&&(this.inverse=e.inverse),e.maxSpeed!==void 0&&(this.maxSpeed=It(e.maxSpeed)))}}class fie{constructor(){this.clamp=!0,this.delay=new So,this.enable=!1,this.options={}}load(e){Xe(e)||(e.clamp!==void 0&&(this.clamp=e.clamp),this.delay.load(e.delay),e.enable!==void 0&&(this.enable=e.enable),this.generator=e.generator,e.options&&(this.options=li(this.options,e.options)))}}class hie{load(e){Xe(e)||(e.color!==void 0&&(this.color=di.create(this.color,e.color)),e.image!==void 0&&(this.image=e.image))}}class die{constructor(){this.enable=!1,this.length=10,this.fill=new hie}load(e){Xe(e)||(e.enable!==void 0&&(this.enable=e.enable),e.fill!==void 0&&this.fill.load(e.fill),e.length!==void 0&&(this.length=e.length))}}var wi;(function(n){n.bounce="bounce",n.none="none",n.out="out",n.destroy="destroy",n.split="split"})(wi||(wi={}));class pie{constructor(){this.default=wi.out}load(e){Xe(e)||(e.default!==void 0&&(this.default=e.default),this.bottom=e.bottom??e.default,this.left=e.left??e.default,this.right=e.right??e.default,this.top=e.top??e.default)}}class mie{constructor(){this.acceleration=0,this.enable=!1}load(e){Xe(e)||(e.acceleration!==void 0&&(this.acceleration=It(e.acceleration)),e.enable!==void 0&&(this.enable=e.enable),e.position&&(this.position=li({},e.position)))}}class gie{constructor(){this.angle=new aie,this.attract=new lie,this.center=new uie,this.decay=0,this.distance={},this.direction=qi.none,this.drift=0,this.enable=!1,this.gravity=new cie,this.path=new fie,this.outModes=new pie,this.random=!1,this.size=!1,this.speed=2,this.spin=new mie,this.straight=!1,this.trail=new die,this.vibrate=!1,this.warp=!1}load(e){if(Xe(e))return;this.angle.load(vs(e.angle)?{value:e.angle}:e.angle),this.attract.load(e.attract),this.center.load(e.center),e.decay!==void 0&&(this.decay=It(e.decay)),e.direction!==void 0&&(this.direction=e.direction),e.distance!==void 0&&(this.distance=vs(e.distance)?{horizontal:e.distance,vertical:e.distance}:{...e.distance}),e.drift!==void 0&&(this.drift=It(e.drift)),e.enable!==void 0&&(this.enable=e.enable),this.gravity.load(e.gravity);const t=e.outModes;t!==void 0&&(Wf(t)?this.outModes.load(t):this.outModes.load({default:t})),this.path.load(e.path),e.random!==void 0&&(this.random=e.random),e.size!==void 0&&(this.size=e.size),e.speed!==void 0&&(this.speed=It(e.speed)),this.spin.load(e.spin),e.straight!==void 0&&(this.straight=e.straight),this.trail.load(e.trail),e.vibrate!==void 0&&(this.vibrate=e.vibrate),e.warp!==void 0&&(this.warp=e.warp)}}class vie extends NA{constructor(){super(),this.destroy=Bl.none,this.speed=2}load(e){super.load(e),!Xe(e)&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class yie extends pU{constructor(){super(),this.animation=new vie,this.value=1}load(e){if(Xe(e))return;super.load(e);const t=e.animation;t!==void 0&&this.animation.load(t)}}class xie{constructor(){this.enable=!1,this.width=1920,this.height=1080}load(e){if(Xe(e))return;e.enable!==void 0&&(this.enable=e.enable);const t=e.width;t!==void 0&&(this.width=t);const i=e.height;i!==void 0&&(this.height=i)}}var sm;(function(n){n.delete="delete",n.wait="wait"})(sm||(sm={}));class _ie{constructor(){this.mode=sm.delete,this.value=0}load(e){Xe(e)||(e.mode!==void 0&&(this.mode=e.mode),e.value!==void 0&&(this.value=e.value))}}class wie{constructor(){this.density=new xie,this.limit=new _ie,this.value=0}load(e){Xe(e)||(this.density.load(e.density),this.limit.load(e.limit),e.value!==void 0&&(this.value=e.value))}}class Sie{constructor(){this.blur=0,this.color=new di,this.enable=!1,this.offset={x:0,y:0},this.color.value="#000"}load(e){Xe(e)||(e.blur!==void 0&&(this.blur=e.blur),this.color=di.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable),e.offset!==void 0&&(e.offset.x!==void 0&&(this.offset.x=e.offset.x),e.offset.y!==void 0&&(this.offset.y=e.offset.y)))}}class Mie{constructor(){this.close=!0,this.fill=!0,this.options={},this.type="circle"}load(e){if(Xe(e))return;const t=e.options;if(t!==void 0)for(const i in t){const r=t[i];r&&(this.options[i]=li(this.options[i]??{},r))}e.close!==void 0&&(this.close=e.close),e.fill!==void 0&&(this.fill=e.fill),e.type!==void 0&&(this.type=e.type)}}class Eie extends NA{constructor(){super(),this.destroy=Bl.none,this.speed=5}load(e){super.load(e),!Xe(e)&&e.destroy!==void 0&&(this.destroy=e.destroy)}}class bie extends pU{constructor(){super(),this.animation=new Eie,this.value=3}load(e){if(super.load(e),Xe(e))return;const t=e.animation;t!==void 0&&this.animation.load(t)}}class v3{constructor(){this.width=0}load(e){Xe(e)||(e.color!==void 0&&(this.color=Ch.create(this.color,e.color)),e.width!==void 0&&(this.width=It(e.width)),e.opacity!==void 0&&(this.opacity=It(e.opacity)))}}class Aie extends So{constructor(){super(),this.opacityRate=1,this.sizeRate=1,this.velocityRate=1}load(e){super.load(e),!Xe(e)&&(e.opacityRate!==void 0&&(this.opacityRate=e.opacityRate),e.sizeRate!==void 0&&(this.sizeRate=e.sizeRate),e.velocityRate!==void 0&&(this.velocityRate=e.velocityRate))}}class Cie{constructor(e,t){this._engine=e,this._container=t,this.bounce=new mU,this.collisions=new sie,this.color=new Ch,this.color.value="#fff",this.effect=new oie,this.groups={},this.move=new gie,this.number=new wie,this.opacity=new yie,this.reduceDuplicates=!1,this.shadow=new Sie,this.shape=new Mie,this.size=new bie,this.stroke=new v3,this.zIndex=new Aie}load(e){if(Xe(e))return;if(e.groups!==void 0)for(const i of Object.keys(e.groups)){if(!Object.hasOwn(e.groups,i))continue;const r=e.groups[i];r!==void 0&&(this.groups[i]=li(this.groups[i]??{},r))}e.reduceDuplicates!==void 0&&(this.reduceDuplicates=e.reduceDuplicates),this.bounce.load(e.bounce),this.color.load(Ch.create(this.color,e.color)),this.effect.load(e.effect),this.move.load(e.move),this.number.load(e.number),this.opacity.load(e.opacity),this.shape.load(e.shape),this.size.load(e.size),this.shadow.load(e.shadow),this.zIndex.load(e.zIndex),this.collisions.load(e.collisions),e.interactivity!==void 0&&(this.interactivity=li({},e.interactivity));const t=e.stroke;if(t&&(this.stroke=Si(t,i=>{const r=new v3;return r.load(i),r})),this._container){const i=this._engine.updaters.get(this._container);if(i)for(const s of i)s.loadOptions&&s.loadOptions(this,e);const r=this._engine.interactors.get(this._container);if(r)for(const s of r)s.loadParticlesOptions&&s.loadParticlesOptions(this,e)}}}function gU(n,...e){for(const t of e)n.load(t)}function LA(n,e,...t){const i=new Cie(n,e);return gU(i,...t),i}class Die{constructor(e,t){this._findDefaultTheme=i=>this.themes.find(r=>r.default.value&&r.default.mode===i)??this.themes.find(r=>r.default.value&&r.default.mode===ml.any),this._importPreset=i=>{this.load(this._engine.getPreset(i))},this._engine=e,this._container=t,this.autoPlay=!0,this.background=new Hne,this.backgroundMask=new Wne,this.clear=!0,this.defaultThemes={},this.delay=0,this.fullScreen=new Gne,this.detectRetina=!0,this.duration=0,this.fpsLimit=120,this.interactivity=new dU(e,t),this.manualParticles=[],this.particles=LA(this._engine,this._container),this.pauseOnBlur=!0,this.pauseOnOutsideViewport=!0,this.responsive=[],this.smooth=!1,this.style={},this.themes=[],this.zLayers=100}load(e){var o,a;if(Xe(e))return;e.preset!==void 0&&Si(e.preset,l=>this._importPreset(l)),e.autoPlay!==void 0&&(this.autoPlay=e.autoPlay),e.clear!==void 0&&(this.clear=e.clear),e.key!==void 0&&(this.key=e.key),e.name!==void 0&&(this.name=e.name),e.delay!==void 0&&(this.delay=It(e.delay));const t=e.detectRetina;t!==void 0&&(this.detectRetina=t),e.duration!==void 0&&(this.duration=It(e.duration));const i=e.fpsLimit;i!==void 0&&(this.fpsLimit=i),e.pauseOnBlur!==void 0&&(this.pauseOnBlur=e.pauseOnBlur),e.pauseOnOutsideViewport!==void 0&&(this.pauseOnOutsideViewport=e.pauseOnOutsideViewport),e.zLayers!==void 0&&(this.zLayers=e.zLayers),this.background.load(e.background);const r=e.fullScreen;$B(r)?this.fullScreen.enable=r:this.fullScreen.load(r),this.backgroundMask.load(e.backgroundMask),this.interactivity.load(e.interactivity),e.manualParticles&&(this.manualParticles=e.manualParticles.map(l=>{const u=new Kne;return u.load(l),u})),this.particles.load(e.particles),this.style=li(this.style,e.style),this._engine.loadOptions(this,e),e.smooth!==void 0&&(this.smooth=e.smooth);const s=this._engine.interactors.get(this._container);if(s)for(const l of s)l.loadOptions&&l.loadOptions(this,e);if(e.responsive!==void 0)for(const l of e.responsive){const u=new Jne;u.load(l),this.responsive.push(u)}if(this.responsive.sort((l,u)=>l.maxWidth-u.maxWidth),e.themes!==void 0)for(const l of e.themes){const u=this.themes.find(c=>c.name===l.name);if(u)u.load(l);else{const c=new eie;c.load(l),this.themes.push(c)}}this.defaultThemes.dark=(o=this._findDefaultTheme(ml.dark))==null?void 0:o.name,this.defaultThemes.light=(a=this._findDefaultTheme(ml.light))==null?void 0:a.name}setResponsive(e,t,i){this.load(i);const r=this.responsive.find(s=>s.mode===ku.screen&&screen?s.maxWidth>screen.availWidth:s.maxWidth*t>e);return this.load(r==null?void 0:r.options),r==null?void 0:r.maxWidth}setTheme(e){if(e){const t=this.themes.find(i=>i.name===e);t&&this.load(t.options)}else{const t=QB("(prefers-color-scheme: dark)"),i=t==null?void 0:t.matches,r=this._findDefaultTheme(i?ml.dark:ml.light);r&&this.load(r.options)}}}var Dh;(function(n){n.external="external",n.particles="particles"})(Dh||(Dh={}));class Tie{constructor(e,t){this.container=t,this._engine=e,this._interactors=[],this._externalInteractors=[],this._particleInteractors=[]}externalInteract(e){for(const t of this._externalInteractors)t.isEnabled()&&t.interact(e)}handleClickMode(e){var t;for(const i of this._externalInteractors)(t=i.handleClickMode)==null||t.call(i,e)}async init(){this._interactors=await this._engine.getInteractors(this.container,!0),this._externalInteractors=[],this._particleInteractors=[];for(const e of this._interactors){switch(e.type){case Dh.external:this._externalInteractors.push(e);break;case Dh.particles:this._particleInteractors.push(e);break}e.init()}}particlesInteract(e,t){for(const i of this._externalInteractors)i.clear(e,t);for(const i of this._particleInteractors)i.isEnabled(e)&&i.interact(e,t)}reset(e){for(const t of this._externalInteractors)t.isEnabled()&&t.reset(e);for(const t of this._particleInteractors)t.isEnabled(e)&&t.reset(e)}}var po;(function(n){n.normal="normal",n.inside="inside",n.outside="outside"})(po||(po={}));const y3=0,uE=2,o0=.5,Pie=2,x3="random";function Rie(n,e,t,i){const r=e.options[n];if(r)return li({close:e.close,fill:e.fill},Zi(r,t,i))}function Iie(n,e,t,i){const r=e.options[n];if(r)return li({close:e.close,fill:e.fill},Zi(r,t,i))}function _3(n){if(!Fn(n.outMode,n.checkModes))return;const e=n.radius*uE;n.coord>n.maxCoord-e?n.setCb(-n.radius):n.coord<e&&n.setCb(n.radius)}class Fie{constructor(e,t){this.container=t,this._calcPosition=(i,r,s,o=y3)=>{for(const v of i.plugins.values()){const g=v.particlePosition!==void 0?v.particlePosition(r,this):void 0;if(g)return os.create(g.x,g.y,s)}const a=i.canvas.size,l=gne({size:a,position:r}),u=os.create(l.x,l.y,s),c=this.getRadius(),f=this.options.move.outModes,h=v=>{_3({outMode:v,checkModes:[wi.bounce],coord:u.x,maxCoord:i.canvas.size.width,setCb:g=>u.x+=g,radius:c})},m=v=>{_3({outMode:v,checkModes:[wi.bounce],coord:u.y,maxCoord:i.canvas.size.height,setCb:g=>u.y+=g,radius:c})};return h(f.left??f.default),h(f.right??f.default),m(f.top??f.default),m(f.bottom??f.default),this._checkOverlap(u,o)?this._calcPosition(i,void 0,s,o+1):u},this._calculateVelocity=()=>{const i=mne(this.direction),r=i.copy(),s=this.options.move;if(s.direction===qi.inside||s.direction===qi.outside)return r;const o=Ta(st(s.angle.value)),a=Ta(st(s.angle.offset)),l={left:a-o*o0,right:a+o*o0};return s.straight||(r.angle+=Yi(It(l.left,l.right))),s.random&&typeof s.speed=="number"&&(r.length*=Xt()),r},this._checkOverlap=(i,r=y3)=>{const s=this.options.collisions,o=this.getRadius();if(!s.enable)return!1;const a=s.overlap;if(a.enable)return!1;const l=a.retries;if(l>=0&&r>l)throw new Error(`${js} particle is overlapping and can't be placed`);return!!this.container.particles.find(c=>Ir(i,c.position)<o+c.getRadius())},this._getRollColor=i=>{if(!i||!this.roll||!this.backColor&&!this.roll.alter)return i;const r=1,s=0,o=this.roll.horizontal&&this.roll.vertical?uE*r:r,a=this.roll.horizontal?Math.PI*o0:s;return Math.floor(((this.roll.angle??s)+a)/(Math.PI/o))%uE?this.backColor?this.backColor:this.roll.alter?zne(i,this.roll.alter.type,this.roll.alter.value):i:i},this._initPosition=i=>{const r=this.container,s=st(this.options.zIndex.value),o=0;this.position=this._calcPosition(r,i,qs(s,o,r.zLayers)),this.initialPosition=this.position.copy();const a=r.canvas.size,l=0;switch(this.moveCenter={...oU(this.options.move.center,a),radius:this.options.move.center.radius??l,mode:this.options.move.center.mode??Zo.percent},this.direction=pne(this.options.move.direction,this.position,this.moveCenter),this.options.move.direction){case qi.inside:this.outType=po.inside;break;case qi.outside:this.outType=po.outside;break}this.offset=Pn.origin},this._engine=e}destroy(e){var s,o,a;if(this.unbreakable||this.destroyed)return;this.destroyed=!0,this.bubble.inRange=!1,this.slow.inRange=!1;const t=this.container,i=this.pathGenerator,r=t.shapeDrawers.get(this.shape);(s=r==null?void 0:r.particleDestroy)==null||s.call(r,this);for(const l of t.plugins.values())(o=l.particleDestroyed)==null||o.call(l,this,e);for(const l of t.particles.updaters)(a=l.particleDestroyed)==null||a.call(l,this,e);i==null||i.reset(this),this._engine.dispatchEvent(Cr.particleDestroyed,{container:this.container,data:{particle:this}})}draw(e){const t=this.container,i=t.canvas;for(const r of t.plugins.values())i.drawParticlePlugin(r,this,e);i.drawParticle(this,e)}getFillColor(){return this._getRollColor(this.bubble.color??f3(this.color))}getMass(){return this.getRadius()**Pie*Math.PI*o0}getPosition(){return{x:this.position.x+this.offset.x,y:this.position.y+this.offset.y,z:this.position.z}}getRadius(){return this.bubble.radius??this.size.value}getStrokeColor(){return this._getRollColor(this.bubble.color??f3(this.strokeColor))}init(e,t,i,r){var R,A,D,I,L,H;const s=this.container,o=this._engine;this.id=e,this.group=r,this.effectClose=!0,this.effectFill=!0,this.shapeClose=!0,this.shapeFill=!0,this.pathRotation=!1,this.lastPathTime=0,this.destroyed=!1,this.unbreakable=!1,this.isRotating=!1,this.rotation=0,this.misplaced=!1,this.retina={maxDistance:{}},this.outType=po.normal,this.ignoresResizeRatio=!0;const a=s.retina.pixelRatio,l=s.actualOptions,u=LA(this._engine,s,l.particles),{reduceDuplicates:c}=u,f=u.effect.type,h=u.shape.type;this.effect=Zi(f,this.id,c),this.shape=Zi(h,this.id,c);const m=u.effect,v=u.shape;if(i){if((R=i.effect)!=null&&R.type){const k=i.effect.type,$=Zi(k,this.id,c);$&&(this.effect=$,m.load(i.effect))}if((A=i.shape)!=null&&A.type){const k=i.shape.type,$=Zi(k,this.id,c);$&&(this.shape=$,v.load(i.shape))}}if(this.effect===x3){const k=[...this.container.effectDrawers.keys()];this.effect=k[Math.floor(Math.random()*k.length)]}if(this.shape===x3){const k=[...this.container.shapeDrawers.keys()];this.shape=k[Math.floor(Math.random()*k.length)]}this.effectData=Rie(this.effect,m,this.id,c),this.shapeData=Iie(this.shape,v,this.id,c),u.load(i);const g=this.effectData;g&&u.load(g.particles);const x=this.shapeData;x&&u.load(x.particles);const y=new dU(o,s);y.load(s.actualOptions.interactivity),y.load(u.interactivity),this.interactivity=y,this.effectFill=(g==null?void 0:g.fill)??u.effect.fill,this.effectClose=(g==null?void 0:g.close)??u.effect.close,this.shapeFill=(x==null?void 0:x.fill)??u.shape.fill,this.shapeClose=(x==null?void 0:x.close)??u.shape.close,this.options=u;const _=this.options.move.path;this.pathDelay=st(_.delay.value)*Kn,_.generator&&(this.pathGenerator=this._engine.getPathGenerator(_.generator),this.pathGenerator&&s.addPath(_.generator,this.pathGenerator)&&this.pathGenerator.init(s)),s.retina.initParticle(this),this.size=rU(this.options.size,a),this.bubble={inRange:!1},this.slow={inRange:!1,factor:1},this._initPosition(t),this.initialVelocity=this._calculateVelocity(),this.velocity=this.initialVelocity.copy();const w=1;this.moveDecay=w-st(this.options.move.decay);const E=s.particles;E.setLastZIndex(this.position.z),this.zIndexFactor=this.position.z/s.zLayers,this.sides=24;let C=s.effectDrawers.get(this.effect);C||(C=this._engine.getEffectDrawer(this.effect),C&&s.effectDrawers.set(this.effect,C)),C!=null&&C.loadEffect&&C.loadEffect(this);let M=s.shapeDrawers.get(this.shape);M||(M=this._engine.getShapeDrawer(this.shape),M&&s.shapeDrawers.set(this.shape,M)),M!=null&&M.loadShape&&M.loadShape(this);const T=M==null?void 0:M.getSidesCount;T&&(this.sides=T(this)),this.spawning=!1,this.shadowColor=Us(this._engine,this.options.shadow.color);for(const k of E.updaters)k.init(this);for(const k of E.movers)(D=k.init)==null||D.call(k,this);(I=C==null?void 0:C.particleInit)==null||I.call(C,s,this),(L=M==null?void 0:M.particleInit)==null||L.call(M,s,this);for(const k of s.plugins.values())(H=k.particleCreated)==null||H.call(k,this)}isInsideCanvas(){const e=this.getRadius(),t=this.container.canvas.size,i=this.position;return i.x>=-e&&i.y>=-e&&i.y<=t.height+e&&i.x<=t.width+e}isVisible(){return!this.destroyed&&!this.spawning&&this.isInsideCanvas()}reset(){var e;for(const t of this.container.particles.updaters)(e=t.reset)==null||e.call(t,this)}}class Nie{constructor(e,t){this.position=e,this.particle=t}}var rh;(function(n){n.circle="circle",n.rectangle="rectangle"})(rh||(rh={}));const zd=2;class vU{constructor(e,t,i){this.position={x:e,y:t},this.type=i}}class yr extends vU{constructor(e,t,i){super(e,t,rh.circle),this.radius=i}contains(e){return Ir(e,this.position)<=this.radius}intersects(e){const t=this.position,i=e.position,r={x:Math.abs(i.x-t.x),y:Math.abs(i.y-t.y)},s=this.radius;if(e instanceof yr||e.type===rh.circle){const o=e,a=s+o.radius,l=Math.sqrt(r.x**zd+r.y**zd);return a>l}else if(e instanceof yo||e.type===rh.rectangle){const o=e,{width:a,height:l}=o.size;return Math.pow(r.x-a,zd)+Math.pow(r.y-l,zd)<=s**zd||r.x<=s+a&&r.y<=s+l||r.x<=a||r.y<=l}return!1}}class yo extends vU{constructor(e,t,i,r){super(e,t,rh.rectangle),this.size={height:r,width:i}}contains(e){const t=this.size.width,i=this.size.height,r=this.position;return e.x>=r.x&&e.x<=r.x+t&&e.y>=r.y&&e.y<=r.y+i}intersects(e){if(e instanceof yr)return e.intersects(this);const t=this.size.width,i=this.size.height,r=this.position,s=e.position,o=e instanceof yo?e.size:{width:0,height:0},a=o.width,l=o.height;return s.x<r.x+t&&s.x+a>r.x&&s.y<r.y+i&&s.y+l>r.y}}const Bd=.5,Lie=2,Oie=4;class ox{constructor(e,t){this.rectangle=e,this.capacity=t,this._subdivide=()=>{const{x:i,y:r}=this.rectangle.position,{width:s,height:o}=this.rectangle.size,{capacity:a}=this;for(let l=0;l<Oie;l++){const u=l%Lie;this._subs.push(new ox(new yo(i+s*Bd*u,r+o*Bd*(Math.round(l*Bd)-u),s*Bd,o*Bd),a))}this._divided=!0},this._points=[],this._divided=!1,this._subs=[]}insert(e){return this.rectangle.contains(e.position)?this._points.length<this.capacity?(this._points.push(e),!0):(this._divided||this._subdivide(),this._subs.some(t=>t.insert(e))):!1}query(e,t){const i=[];if(!e.intersects(this.rectangle))return[];for(const r of this._points)!e.contains(r.position)&&Ir(e.position,r.position)>r.particle.getRadius()&&(!t||t(r.particle))||i.push(r.particle);if(this._divided)for(const r of this._subs)i.push(...r.query(e,t));return i}queryCircle(e,t,i){return this.query(new yr(e.x,e.y,t),i)}queryRectangle(e,t,i){return this.query(new yo(e.x,e.y,t.width,t.height),i)}}const w3=4,zie=2,Bie=1,S3=n=>{const{height:e,width:t}=n,i=-.25,r=1.5;return new yo(i*t,i*e,r*t,r*e)};class Uie{constructor(e,t){this._addToPool=(...r)=>{this._pool.push(...r)},this._applyDensity=(r,s,o)=>{var v;const a=r.number;if(!((v=r.number.density)!=null&&v.enable)){o===void 0?this._limit=a.limit.value:a.limit&&this._groupLimits.set(o,a.limit.value);return}const l=this._initDensityFactor(a.density),u=a.value,c=0,f=a.limit.value>c?a.limit.value:u,h=Math.min(u,f)*l+s,m=Math.min(this.count,this.filter(g=>g.group===o).length);o===void 0?this._limit=a.limit.value*l:this._groupLimits.set(o,a.limit.value*l),m<h?this.push(Math.abs(h-m),void 0,r,o):m>h&&this.removeQuantity(m-h,o)},this._initDensityFactor=r=>{const s=this._container,o=1;if(!s.canvas.element||!r.enable)return o;const a=s.canvas.element,l=s.retina.pixelRatio;return a.width*a.height/(r.height*r.width*l**zie)},this._pushParticle=(r,s,o,a)=>{try{let l=this._pool.pop();l||(l=new Fie(this._engine,this._container)),l.init(this._nextId,r,s,o);let u=!0;return a&&(u=a(l)),u?(this._array.push(l),this._zArray.push(l),this._nextId++,this._engine.dispatchEvent(Cr.particleAdded,{container:this._container,data:{particle:l}}),l):void 0}catch(l){cc().warning(`${js} adding particle: ${l}`)}},this._removeParticle=(r,s,o)=>{const a=this._array[r];if(!a||a.group!==s)return!1;const l=this._zArray.indexOf(a),u=1;return this._array.splice(r,u),this._zArray.splice(l,u),a.destroy(o),this._engine.dispatchEvent(Cr.particleRemoved,{container:this._container,data:{particle:a}}),this._addToPool(a),!0},this._engine=e,this._container=t,this._nextId=0,this._array=[],this._zArray=[],this._pool=[],this._limit=0,this._groupLimits=new Map,this._needsSort=!1,this._lastZIndex=0,this._interactionManager=new Tie(e,t),this._pluginsInitialized=!1;const i=t.canvas.size;this.quadTree=new ox(S3(i),w3),this.movers=[],this.updaters=[]}get count(){return this._array.length}addManualParticles(){const e=this._container;e.actualOptions.manualParticles.forEach(i=>this.addParticle(i.position?oU(i.position,e.canvas.size):void 0,i.options))}addParticle(e,t,i,r){const s=this._container.actualOptions.particles.number.limit.mode,o=i===void 0?this._limit:this._groupLimits.get(i)??this._limit,a=this.count;if(o>0)switch(s){case sm.delete:{const f=a+1-o;f>0&&this.removeQuantity(f);break}case sm.wait:if(a>=o)return;break}return this._pushParticle(e,t,i,r)}clear(){this._array=[],this._zArray=[],this._pluginsInitialized=!1}destroy(){this._array=[],this._zArray=[],this.movers=[],this.updaters=[]}draw(e){const t=this._container,i=t.canvas;i.clear(),this.update(e);for(const r of t.plugins.values())i.drawPlugin(r,e);for(const r of this._zArray)r.draw(e)}filter(e){return this._array.filter(e)}find(e){return this._array.find(e)}get(e){return this._array[e]}handleClickMode(e){this._interactionManager.handleClickMode(e)}async init(){var r,s;const e=this._container,t=e.actualOptions;this._lastZIndex=0,this._needsSort=!1,await this.initPlugins();let i=!1;for(const o of e.plugins.values())if(i=((r=o.particlesInitialization)==null?void 0:r.call(o))??i,i)break;if(this.addManualParticles(),!i){const o=t.particles,a=o.groups;for(const l in a){const u=a[l];for(let c=this.count,f=0;f<((s=u.number)==null?void 0:s.value)&&c<o.number.value;c++,f++)this.addParticle(void 0,u,l)}for(let l=this.count;l<o.number.value;l++)this.addParticle()}}async initPlugins(){if(this._pluginsInitialized)return;const e=this._container;this.movers=await this._engine.getMovers(e,!0),this.updaters=await this._engine.getUpdaters(e,!0),await this._interactionManager.init();for(const t of e.pathGenerators.values())t.init(e)}push(e,t,i,r){for(let s=0;s<e;s++)this.addParticle(t==null?void 0:t.position,i,r)}async redraw(){this.clear(),await this.init(),this.draw({value:0,factor:0})}remove(e,t,i){this.removeAt(this._array.indexOf(e),void 0,t,i)}removeAt(e,t=Bie,i,r){if(e<0||e>this.count)return;let o=0;for(let a=e;o<t&&a<this.count;a++)this._removeParticle(a,i,r)&&(a--,o++)}removeQuantity(e,t){this.removeAt(0,e,t)}setDensity(){const e=this._container.actualOptions,t=e.particles.groups,i=0;for(const r in t)this._applyDensity(t[r],i,r);this._applyDensity(e.particles,e.manualParticles.length)}setLastZIndex(e){this._lastZIndex=e,this._needsSort=this._needsSort||this._lastZIndex<e}setResizeFactor(e){this._resizeFactor=e}update(e){var s,o;const t=this._container,i=new Set;this.quadTree=new ox(S3(t.canvas.size),w3);for(const a of t.pathGenerators.values())a.update();for(const a of t.plugins.values())(s=a.update)==null||s.call(a,e);const r=this._resizeFactor;for(const a of this._array){r&&!a.ignoresResizeRatio&&(a.position.x*=r.width,a.position.y*=r.height,a.initialPosition.x*=r.width,a.initialPosition.y*=r.height),a.ignoresResizeRatio=!1,this._interactionManager.reset(a);for(const l of this._container.plugins.values()){if(a.destroyed)break;(o=l.particleUpdate)==null||o.call(l,a,e)}for(const l of this.movers)l.isEnabled(a)&&l.move(a,e);if(a.destroyed){i.add(a);continue}this.quadTree.insert(new Nie(a.getPosition(),a))}if(i.size){const a=l=>!i.has(l);this._array=this.filter(a),this._zArray=this._zArray.filter(a);for(const l of i)this._engine.dispatchEvent(Cr.particleRemoved,{container:this._container,data:{particle:l}});this._addToPool(...i)}this._interactionManager.externalInteract(e);for(const a of this._array){for(const l of this.updaters)l.update(a,e);!a.destroyed&&!a.spawning&&this._interactionManager.particlesInteract(a,e)}if(delete this._resizeFactor,this._needsSort){const a=this._zArray;a.sort((u,c)=>c.position.z-u.position.z||u.id-c.id);const l=1;this._lastZIndex=a[a.length-l].position.z,this._needsSort=!1}}}const M3=1,E3=1;class kie{constructor(e){this.container=e,this.pixelRatio=M3,this.reduceFactor=E3}init(){const e=this.container,t=e.actualOptions;this.pixelRatio=!t.detectRetina||fc()?M3:window.devicePixelRatio,this.reduceFactor=E3;const i=this.pixelRatio,r=e.canvas;if(r.element){const a=r.element;r.size.width=a.offsetWidth*i,r.size.height=a.offsetHeight*i}const s=t.particles,o=s.move;this.maxSpeed=st(o.gravity.maxSpeed)*i,this.sizeAnimationSpeed=st(s.size.animation.speed)*i}initParticle(e){const t=e.options,i=this.pixelRatio,r=t.move,s=r.distance,o=e.retina;o.moveDrift=st(r.drift)*i,o.moveSpeed=st(r.speed)*i,o.sizeAnimationSpeed=st(t.size.animation.speed)*i;const a=o.maxDistance;a.horizontal=s.horizontal!==void 0?s.horizontal*i:void 0,a.vertical=s.vertical!==void 0?s.vertical*i:void 0,o.maxSpeed=st(r.gravity.maxSpeed)*i}}function ni(n){return n&&!n.destroyed}const mS=60;function Hie(n,e=mS,t=!1){return{value:n,factor:t?mS/e:mS*n/Kn}}function yf(n,e,...t){const i=new Die(n,e);return gU(i,...t),i}class Vie{constructor(e,t,i){this._intersectionManager=r=>{if(!(!ni(this)||!this.actualOptions.pauseOnOutsideViewport))for(const s of r)s.target===this.interactivity.element&&(s.isIntersecting?this.play():this.pause())},this._nextFrame=r=>{try{if(!this._smooth&&this._lastFrameTime!==void 0&&r<this._lastFrameTime+Kn/this.fpsLimit){this.draw(!1);return}this._lastFrameTime??(this._lastFrameTime=r);const s=Hie(r-this._lastFrameTime,this.fpsLimit,this._smooth);if(this.addLifeTime(s.value),this._lastFrameTime=r,s.value>Kn){this.draw(!1);return}if(this.particles.draw(s),!this.alive()){this.destroy();return}this.animationStatus&&this.draw(!1)}catch(s){cc().error(`${js} in animation loop`,s)}},this._engine=e,this.id=Symbol(t),this.fpsLimit=120,this._smooth=!1,this._delay=0,this._duration=0,this._lifeTime=0,this._firstStart=!0,this.started=!1,this.destroyed=!1,this._paused=!0,this._lastFrameTime=0,this.zLayers=100,this.pageHidden=!1,this._clickHandlers=new Map,this._sourceOptions=i,this._initialSourceOptions=i,this.retina=new kie(this),this.canvas=new Une(this,this._engine),this.particles=new Uie(this._engine,this),this.pathGenerators=new Map,this.interactivity={mouse:{clicking:!1,inside:!1}},this.plugins=new Map,this.effectDrawers=new Map,this.shapeDrawers=new Map,this._options=yf(this._engine,this),this.actualOptions=yf(this._engine,this),this._eventListeners=new kne(this),this._intersectionObserver=_ne(r=>this._intersectionManager(r)),this._engine.dispatchEvent(Cr.containerBuilt,{container:this})}get animationStatus(){return!this._paused&&!this.pageHidden&&ni(this)}get options(){return this._options}get sourceOptions(){return this._sourceOptions}addClickHandler(e){if(!ni(this))return;const t=this.interactivity.element;if(!t)return;const i=(f,h,m)=>{if(!ni(this))return;const v=this.retina.pixelRatio,g={x:h.x*v,y:h.y*v},x=this.particles.quadTree.queryCircle(g,m*v);e(f,x)},r=f=>{if(!ni(this))return;const h=f,m={x:h.offsetX||h.clientX,y:h.offsetY||h.clientY};i(f,m,1)},s=()=>{ni(this)&&(u=!0,c=!1)},o=()=>{ni(this)&&(c=!0)},a=f=>{if(ni(this)){if(u&&!c){const h=f,m=1;let v=h.touches[h.touches.length-m];if(!v&&(v=h.changedTouches[h.changedTouches.length-m],!v))return;const g=this.canvas.element,x=g?g.getBoundingClientRect():void 0,y=0,_={x:v.clientX-(x?x.left:y),y:v.clientY-(x?x.top:y)};i(f,_,Math.max(v.radiusX,v.radiusY))}u=!1,c=!1}},l=()=>{ni(this)&&(u=!1,c=!1)};let u=!1,c=!1;this._clickHandlers.set("click",r),this._clickHandlers.set("touchstart",s),this._clickHandlers.set("touchmove",o),this._clickHandlers.set("touchend",a),this._clickHandlers.set("touchcancel",l);for(const[f,h]of this._clickHandlers)t.addEventListener(f,h)}addLifeTime(e){this._lifeTime+=e}addPath(e,t,i=!1){return!ni(this)||!i&&this.pathGenerators.has(e)?!1:(this.pathGenerators.set(e,t),!0)}alive(){return!this._duration||this._lifeTime<=this._duration}clearClickHandlers(){var e;if(ni(this)){for(const[t,i]of this._clickHandlers)(e=this.interactivity.element)==null||e.removeEventListener(t,i);this._clickHandlers.clear()}}destroy(e=!0){var t,i;if(ni(this)){this.stop(),this.clearClickHandlers(),this.particles.destroy(),this.canvas.destroy();for(const r of this.effectDrawers.values())(t=r.destroy)==null||t.call(r,this);for(const r of this.shapeDrawers.values())(i=r.destroy)==null||i.call(r,this);for(const r of this.effectDrawers.keys())this.effectDrawers.delete(r);for(const r of this.shapeDrawers.keys())this.shapeDrawers.delete(r);if(this._engine.clearPlugins(this),this.destroyed=!0,e){const r=this._engine.items,s=r.findIndex(a=>a===this);s>=0&&r.splice(s,1)}this._engine.dispatchEvent(Cr.containerDestroyed,{container:this})}}draw(e){if(!ni(this))return;let t=e;const i=r=>{t&&(this._lastFrameTime=void 0,t=!1),this._nextFrame(r)};this._drawAnimationFrame=hne(r=>i(r))}async export(e,t={}){for(const i of this.plugins.values()){if(!i.export)continue;const r=await i.export(e,t);if(r.supported)return r.blob}cc().error(`${js} - Export plugin with type ${e} not found`)}handleClickMode(e){var t;if(ni(this)){this.particles.handleClickMode(e);for(const i of this.plugins.values())(t=i.handleClickMode)==null||t.call(i,e)}}async init(){var f,h,m,v;if(!ni(this))return;const e=this._engine.getSupportedEffects();for(const g of e){const x=this._engine.getEffectDrawer(g);x&&this.effectDrawers.set(g,x)}const t=this._engine.getSupportedShapes();for(const g of t){const x=this._engine.getShapeDrawer(g);x&&this.shapeDrawers.set(g,x)}await this.particles.initPlugins(),this._options=yf(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=yf(this._engine,this,this._options);const i=await this._engine.getAvailablePlugins(this);for(const[g,x]of i)this.plugins.set(g,x);this.retina.init(),await this.canvas.init(),this.updateActualOptions(),this.canvas.initBackground(),this.canvas.resize();const{zLayers:r,duration:s,delay:o,fpsLimit:a,smooth:l}=this.actualOptions;this.zLayers=r,this._duration=st(s)*Kn,this._delay=st(o)*Kn,this._lifeTime=0;const u=120,c=0;this.fpsLimit=a>c?a:u,this._smooth=l;for(const g of this.effectDrawers.values())await((f=g.init)==null?void 0:f.call(g,this));for(const g of this.shapeDrawers.values())await((h=g.init)==null?void 0:h.call(g,this));for(const g of this.plugins.values())await((m=g.init)==null?void 0:m.call(g));this._engine.dispatchEvent(Cr.containerInit,{container:this}),await this.particles.init(),this.particles.setDensity();for(const g of this.plugins.values())(v=g.particlesSetup)==null||v.call(g);this._engine.dispatchEvent(Cr.particlesSetup,{container:this})}async loadTheme(e){ni(this)&&(this._currentTheme=e,await this.refresh())}pause(){var e;if(ni(this)&&(this._drawAnimationFrame!==void 0&&(dne(this._drawAnimationFrame),delete this._drawAnimationFrame),!this._paused)){for(const t of this.plugins.values())(e=t.pause)==null||e.call(t);this.pageHidden||(this._paused=!0),this._engine.dispatchEvent(Cr.containerPaused,{container:this})}}play(e){if(!ni(this))return;const t=this._paused||e;if(this._firstStart&&!this.actualOptions.autoPlay){this._firstStart=!1;return}if(this._paused&&(this._paused=!1),t)for(const i of this.plugins.values())i.play&&i.play();this._engine.dispatchEvent(Cr.containerPlay,{container:this}),this.draw(t??!1)}async refresh(){if(ni(this))return this.stop(),this.start()}async reset(e){if(ni(this))return this._initialSourceOptions=e,this._sourceOptions=e,this._options=yf(this._engine,this,this._initialSourceOptions,this.sourceOptions),this.actualOptions=yf(this._engine,this,this._options),this.refresh()}async start(){!ni(this)||this.started||(await this.init(),this.started=!0,await new Promise(e=>{const t=async()=>{var i;this._eventListeners.addListeners(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.observe(this.interactivity.element);for(const r of this.plugins.values())await((i=r.start)==null?void 0:i.call(r));this._engine.dispatchEvent(Cr.containerStarted,{container:this}),this.play(),e()};this._delayTimeout=setTimeout(()=>void t(),this._delay)}))}stop(){var e;if(!(!ni(this)||!this.started)){this._delayTimeout&&(clearTimeout(this._delayTimeout),delete this._delayTimeout),this._firstStart=!0,this.started=!1,this._eventListeners.removeListeners(),this.pause(),this.particles.clear(),this.canvas.stop(),this.interactivity.element instanceof HTMLElement&&this._intersectionObserver&&this._intersectionObserver.unobserve(this.interactivity.element);for(const t of this.plugins.values())(e=t.stop)==null||e.call(t);for(const t of this.plugins.keys())this.plugins.delete(t);this._sourceOptions=this._options,this._engine.dispatchEvent(Cr.containerStopped,{container:this})}}updateActualOptions(){this.actualOptions.responsive=[];const e=this.actualOptions.setResponsive(this.canvas.size.width,this.retina.pixelRatio,this._options);return this.actualOptions.setTheme(this._currentTheme),this._responsiveMaxWidth===e?!1:(this._responsiveMaxWidth=e,!0)}}class Wie{constructor(){this._listeners=new Map}addEventListener(e,t){this.removeEventListener(e,t);let i=this._listeners.get(e);i||(i=[],this._listeners.set(e,i)),i.push(t)}dispatchEvent(e,t){const i=this._listeners.get(e);i==null||i.forEach(r=>r(t))}hasEventListener(e){return!!this._listeners.get(e)}removeAllEventListeners(e){e?this._listeners.delete(e):this._listeners=new Map}removeEventListener(e,t){const i=this._listeners.get(e);if(!i)return;const r=i.length,s=i.indexOf(t);if(s<0)return;const a=1;r===a?this._listeners.delete(e):i.splice(s,a)}}async function gS(n,e,t,i=!1){let r=e.get(n);return(!r||i)&&(r=await Promise.all([...t.values()].map(s=>s(n))),e.set(n,r)),r}async function Gie(n){const e=Zi(n.url,n.index);if(!e)return n.fallback;const t=await fetch(e);return t.ok?await t.json():(cc().error(`${js} ${t.status} while retrieving config file`),n.fallback)}const yU="true",b3="false",vS="canvas",jie=n=>{let e;if(n instanceof HTMLCanvasElement||n.tagName.toLowerCase()===vS)e=n,e.dataset[Bu]||(e.dataset[Bu]=b3);else{const i=n.getElementsByTagName(vS);i.length?(e=i[0],e.dataset[Bu]=b3):(e=document.createElement(vS),e.dataset[Bu]=yU,n.appendChild(e))}const t="100%";return e.style.width||(e.style.width=t),e.style.height||(e.style.height=t),e},qie=(n,e)=>{let t=e??document.getElementById(n);return t||(t=document.createElement("div"),t.id=n,t.dataset[Bu]=yU,document.body.append(t),t)};class Xie{constructor(){this._configs=new Map,this._domArray=[],this._eventDispatcher=new Wie,this._initialized=!1,this.plugins=[],this.colorManagers=new Map,this.easingFunctions=new Map,this._initializers={interactors:new Map,movers:new Map,updaters:new Map},this.interactors=new Map,this.movers=new Map,this.updaters=new Map,this.presets=new Map,this.effectDrawers=new Map,this.shapeDrawers=new Map,this.pathGenerators=new Map}get configs(){const e={};for(const[t,i]of this._configs)e[t]=i;return e}get items(){return this._domArray}get version(){return"3.7.1"}async addColorManager(e,t=!0){this.colorManagers.set(e.key,e),await this.refresh(t)}addConfig(e){const t=e.key??e.name??"default";this._configs.set(t,e),this._eventDispatcher.dispatchEvent(Cr.configAdded,{data:{name:t,config:e}})}async addEasing(e,t,i=!0){this.getEasing(e)||(this.easingFunctions.set(e,t),await this.refresh(i))}async addEffect(e,t,i=!0){Si(e,r=>{this.getEffectDrawer(r)||this.effectDrawers.set(r,t)}),await this.refresh(i)}addEventListener(e,t){this._eventDispatcher.addEventListener(e,t)}async addInteractor(e,t,i=!0){this._initializers.interactors.set(e,t),await this.refresh(i)}async addMover(e,t,i=!0){this._initializers.movers.set(e,t),await this.refresh(i)}async addParticleUpdater(e,t,i=!0){this._initializers.updaters.set(e,t),await this.refresh(i)}async addPathGenerator(e,t,i=!0){this.getPathGenerator(e)||this.pathGenerators.set(e,t),await this.refresh(i)}async addPlugin(e,t=!0){this.getPlugin(e.id)||this.plugins.push(e),await this.refresh(t)}async addPreset(e,t,i=!1,r=!0){(i||!this.getPreset(e))&&this.presets.set(e,t),await this.refresh(r)}async addShape(e,t=!0){for(const i of e.validTypes)this.getShapeDrawer(i)||this.shapeDrawers.set(i,e);await this.refresh(t)}clearPlugins(e){this.updaters.delete(e),this.movers.delete(e),this.interactors.delete(e)}dispatchEvent(e,t){this._eventDispatcher.dispatchEvent(e,t)}dom(){return this.items}domItem(e){return this.item(e)}async getAvailablePlugins(e){const t=new Map;for(const i of this.plugins)i.needsPlugin(e.actualOptions)&&t.set(i.id,await i.getPlugin(e));return t}getEasing(e){return this.easingFunctions.get(e)??(t=>t)}getEffectDrawer(e){return this.effectDrawers.get(e)}async getInteractors(e,t=!1){return gS(e,this.interactors,this._initializers.interactors,t)}async getMovers(e,t=!1){return gS(e,this.movers,this._initializers.movers,t)}getPathGenerator(e){return this.pathGenerators.get(e)}getPlugin(e){return this.plugins.find(t=>t.id===e)}getPreset(e){return this.presets.get(e)}getShapeDrawer(e){return this.shapeDrawers.get(e)}getSupportedEffects(){return this.effectDrawers.keys()}getSupportedShapes(){return this.shapeDrawers.keys()}async getUpdaters(e,t=!1){return gS(e,this.updaters,this._initializers.updaters,t)}init(){this._initialized||(this._initialized=!0)}item(e){const{items:t}=this,i=t[e];if(!i||i.destroyed){t.splice(e,1);return}return i}async load(e){var v;const i=e.id??((v=e.element)==null?void 0:v.id)??`tsparticles${Math.floor(Xt()*1e4)}`,{index:r,url:s}=e,o=s?await Gie({fallback:e.options,url:s,index:r}):e.options,a=Zi(o,r),{items:l}=this,u=l.findIndex(g=>g.id.description===i),c=0,f=new Vie(this,i,a);if(u>=c){const g=this.item(u),x=1,y=0,_=g?x:y;g&&!g.destroyed&&g.destroy(!1),l.splice(u,_,f)}else l.push(f);const h=qie(i,e.element),m=jie(h);return f.canvas.loadCanvas(m),await f.start(),f}loadOptions(e,t){this.plugins.forEach(i=>{var r;return(r=i.loadOptions)==null?void 0:r.call(i,e,t)})}loadParticlesOptions(e,t,...i){const r=this.updaters.get(e);r&&r.forEach(s=>{var o;return(o=s.loadOptions)==null?void 0:o.call(s,t,...i)})}async refresh(e=!0){e&&await Promise.all(this.items.map(t=>t.refresh()))}removeEventListener(e,t){this._eventDispatcher.removeEventListener(e,t)}setOnClickHandler(e){const{items:t}=this;if(!t.length)throw new Error(`${js} can only set click handlers after calling tsParticles.load()`);t.forEach(i=>i.addClickHandler(e))}}function $ie(){const n=new Xie;return n.init(),n}class Mo{constructor(e){this.type=Dh.external,this.container=e}}class OA{constructor(e){this.type=Dh.particles,this.container=e}}var dr;(function(n){n.clockwise="clockwise",n.counterClockwise="counter-clockwise",n.random="random"})(dr||(dr={}));var A3;(function(n){n.linear="linear",n.radial="radial",n.random="random"})(A3||(A3={}));var Ku;(function(n){n.easeInBack="ease-in-back",n.easeInCirc="ease-in-circ",n.easeInCubic="ease-in-cubic",n.easeInLinear="ease-in-linear",n.easeInQuad="ease-in-quad",n.easeInQuart="ease-in-quart",n.easeInQuint="ease-in-quint",n.easeInExpo="ease-in-expo",n.easeInSine="ease-in-sine",n.easeOutBack="ease-out-back",n.easeOutCirc="ease-out-circ",n.easeOutCubic="ease-out-cubic",n.easeOutLinear="ease-out-linear",n.easeOutQuad="ease-out-quad",n.easeOutQuart="ease-out-quart",n.easeOutQuint="ease-out-quint",n.easeOutExpo="ease-out-expo",n.easeOutSine="ease-out-sine",n.easeInOutBack="ease-in-out-back",n.easeInOutCirc="ease-in-out-circ",n.easeInOutCubic="ease-in-out-cubic",n.easeInOutLinear="ease-in-out-linear",n.easeInOutQuad="ease-in-out-quad",n.easeInOutQuart="ease-in-out-quart",n.easeInOutQuint="ease-in-out-quint",n.easeInOutExpo="ease-in-out-expo",n.easeInOutSine="ease-in-out-sine"})(Ku||(Ku={}));const zA=$ie();fc()||(window.tsParticles=zA);const Yie=n=>{const e=n.id??"tsparticles";return ie.useEffect(()=>{let t;return zA.load({id:e,url:n.url,options:n.options}).then(i=>{var r;t=i,(r=n.particlesLoaded)==null||r.call(n,i)}),()=>{t==null||t.destroy()}},[e,n,n.url,n.options]),O.jsx("div",{id:e,className:n.className})};async function Zie(n){await n(zA)}class Kie{constructor(){this.radius=0,this.mass=0}load(e){Xe(e)||(e.mass!==void 0&&(this.mass=e.mass),e.radius!==void 0&&(this.radius=e.radius))}}class Jie extends So{constructor(){super(),this.density=5,this.value=50,this.limit=new Kie}load(e){Xe(e)||(super.load(e),e.density!==void 0&&(this.density=e.density),vs(e.limit)?this.limit.radius=e.limit:this.limit.load(e.limit))}}class ax{constructor(){this.color=new di,this.color.value="#000000",this.draggable=!1,this.opacity=1,this.destroy=!0,this.orbits=!1,this.size=new Jie}load(e){Xe(e)||(e.color!==void 0&&(this.color=di.create(this.color,e.color)),e.draggable!==void 0&&(this.draggable=e.draggable),this.name=e.name,e.opacity!==void 0&&(this.opacity=e.opacity),e.position!==void 0&&(this.position={},e.position.x!==void 0&&(this.position.x=It(e.position.x)),e.position.y!==void 0&&(this.position.y=It(e.position.y))),e.size!==void 0&&this.size.load(e.size),e.destroy!==void 0&&(this.destroy=e.destroy),e.orbits!==void 0&&(this.orbits=e.orbits))}}var lx;(function(n){n.absorber="absorber"})(lx||(lx={}));const Qie=2,ere=.033,tre=0,nre=0,ire=0,C3={x:0,y:0},rre=0,sre=2,D3=Math.PI*sre,T3=0;class ore{constructor(e,t,i,r,s){var a;this._calcPosition=()=>{const l=KB({size:this._container.canvas.size,position:this.options.position});return Pn.create(l.x,l.y)},this._updateParticlePosition=(l,u)=>{if(l.destroyed)return;const c=this._container,f=c.canvas.size;if(l.needsNewPosition){const h=ZB({size:f});l.position.setTo(h),l.velocity.setTo(l.initialVelocity),l.absorberOrbit=void 0,l.needsNewPosition=!1}if(this.options.orbits){if(l.absorberOrbit===void 0&&(l.absorberOrbit=Pn.origin,l.absorberOrbit.length=Ir(l.getPosition(),this.position),l.absorberOrbit.angle=Xt()*D3),l.absorberOrbit.length<=this.size&&!this.options.destroy){const x=Math.min(f.width,f.height),y=1,_=.1,w=.2;l.absorberOrbit.length=x*(y+(Xt()*w-_))}l.absorberOrbitDirection===void 0&&(l.absorberOrbitDirection=l.velocity.x>=T3?dr.clockwise:dr.counterClockwise);const h=l.absorberOrbit.length,m=l.absorberOrbit.angle,v=l.absorberOrbitDirection;l.velocity.setTo(Pn.origin);const g={x:v===dr.clockwise?Math.cos:Math.sin,y:v===dr.clockwise?Math.sin:Math.cos};l.position.x=this.position.x+h*g.x(m),l.position.y=this.position.y+h*g.y(m),l.absorberOrbit.length-=u.length,l.absorberOrbit.angle+=(l.retina.moveSpeed??T3)*c.retina.pixelRatio/$i*c.retina.reduceFactor}else{const h=Pn.origin;h.length=u.length,h.angle=u.angle,l.velocity.addTo(h)}},this._absorbers=e,this._container=t,this._engine=i,this.initialPosition=s?Pn.create(s.x,s.y):void 0,r instanceof ax?this.options=r:(this.options=new ax,this.options.load(r)),this.dragging=!1,this.name=this.options.name,this.opacity=this.options.opacity,this.size=st(this.options.size.value)*t.retina.pixelRatio,this.mass=this.size*this.options.size.density*t.retina.reduceFactor;const o=this.options.size.limit;this.limit={radius:o.radius*t.retina.pixelRatio*t.retina.reduceFactor,mass:o.mass},this.color=Us(this._engine,this.options.color)??{b:0,g:0,r:0},this.position=((a=this.initialPosition)==null?void 0:a.copy())??this._calcPosition()}attract(e){const t=this._container,i=this.options;if(i.draggable){const u=t.interactivity.mouse;u.clicking&&u.downPosition?Ir(this.position,u.downPosition)<=this.size&&(this.dragging=!0):this.dragging=!1,this.dragging&&u.position&&(this.position.x=u.position.x,this.position.y=u.position.y)}const r=e.getPosition(),{dx:s,dy:o,distance:a}=vr(this.position,r),l=Pn.create(s,o);if(l.length=this.mass/Math.pow(a,Qie)*t.retina.reduceFactor,a<this.size+e.getRadius()){const u=e.getRadius()*ere*t.retina.pixelRatio;this.size>e.getRadius()&&a<this.size-e.getRadius()||e.absorberOrbit!==void 0&&e.absorberOrbit.length<tre?i.destroy?e.destroy():(e.needsNewPosition=!0,this._updateParticlePosition(e,l)):(i.destroy&&(e.size.value-=u),this._updateParticlePosition(e,l)),(this.limit.radius<=nre||this.size<this.limit.radius)&&(this.size+=u),(this.limit.mass<=ire||this.mass<this.limit.mass)&&(this.mass+=u*this.options.size.density*t.retina.reduceFactor)}else this._updateParticlePosition(e,l)}draw(e){e.translate(this.position.x,this.position.y),e.beginPath(),e.arc(C3.x,C3.y,this.size,rre,D3,!1),e.closePath(),e.fillStyle=$o(this.color,this.opacity),e.fill()}resize(){const e=this.initialPosition;this.position=e&&Wm(e,this._container.canvas.size,Pn.origin)?e:this._calcPosition()}}const P3=0;class are{constructor(e,t){this._container=e,this._engine=t,this.array=[],this.absorbers=[],this.interactivityAbsorbers=[],e.getAbsorber=i=>i===void 0||vs(i)?this.array[i??P3]:this.array.find(r=>r.name===i),e.addAbsorber=async(i,r)=>this.addAbsorber(i,r)}async addAbsorber(e,t){const i=new ore(this,this._container,this._engine,e,t);return this.array.push(i),Promise.resolve(i)}draw(e){for(const t of this.array)t.draw(e)}handleClickMode(e){const t=this.absorbers,i=this.interactivityAbsorbers;if(e===lx.absorber){const r=Zi(i),s=r??Zi(t),o=this._container.interactivity.mouse.clickPosition;this.addAbsorber(s,o)}}async init(){this.absorbers=this._container.actualOptions.absorbers,this.interactivityAbsorbers=this._container.actualOptions.interactivity.modes.absorbers;const e=Si(this.absorbers,async t=>{await this.addAbsorber(t)});e instanceof Array?await Promise.all(e):await e}particleUpdate(e){for(const t of this.array)if(t.attract(e),e.destroyed)break}removeAbsorber(e){const t=this.array.indexOf(e);t>=P3&&this.array.splice(t,1)}resize(){for(const e of this.array)e.resize()}stop(){this.array=[]}}class lre{constructor(e){this.id="absorbers",this._engine=e}async getPlugin(e){return Promise.resolve(new are(e,this._engine))}loadOptions(e,t){var i,r;!this.needsPlugin(e)&&!this.needsPlugin(t)||(t!=null&&t.absorbers&&(e.absorbers=Si(t.absorbers,s=>{const o=new ax;return o.load(s),o})),e.interactivity.modes.absorbers=Si((r=(i=t==null?void 0:t.interactivity)==null?void 0:i.modes)==null?void 0:r.absorbers,s=>{const o=new ax;return o.load(s),o}))}needsPlugin(e){var i,r,s;if(!e)return!1;const t=e.absorbers;return gr(t)?!!t.length:t?!0:!!((s=(r=(i=e.interactivity)==null?void 0:i.events)==null?void 0:r.onClick)!=null&&s.mode&&Fn(lx.absorber,e.interactivity.events.onClick.mode))}}async function ure(n,e=!0){Ut(n,"3.7.1"),await n.addPlugin(new lre(n),e)}class cre{load(e){Xe(e)||(e.bottom!==void 0&&(this.bottom=It(e.bottom)),e.left!==void 0&&(this.left=It(e.left)),e.right!==void 0&&(this.right=It(e.right)),e.top!==void 0&&(this.top=It(e.top)))}}var ux;(function(n){n.none="none",n.split="split"})(ux||(ux={}));class fre extends So{constructor(){super(),this.value=3}}class hre extends So{constructor(){super(),this.value={min:4,max:9}}}class dre{constructor(){this.count=1,this.factor=new fre,this.rate=new hre,this.sizeOffset=!0}load(e){Xe(e)||(e.color!==void 0&&(this.color=di.create(this.color,e.color)),e.count!==void 0&&(this.count=e.count),this.factor.load(e.factor),this.rate.load(e.rate),this.particles=Si(e.particles,t=>li({},t)),e.sizeOffset!==void 0&&(this.sizeOffset=e.sizeOffset),e.colorOffset&&(this.colorOffset=this.colorOffset??{},e.colorOffset.h!==void 0&&(this.colorOffset.h=e.colorOffset.h),e.colorOffset.s!==void 0&&(this.colorOffset.s=e.colorOffset.s),e.colorOffset.l!==void 0&&(this.colorOffset.l=e.colorOffset.l)))}}class pre{constructor(){this.bounds=new cre,this.mode=ux.none,this.split=new dre}load(e){Xe(e)||(e.mode&&(this.mode=e.mode),e.bounds&&this.bounds.load(e.bounds),this.split.load(e.split))}}const a0=0,mre=.5,gre=0,vre=1,yre=500,xre=0;function _re(n,e,t,i){const r=t.options.destroy;if(!r)return;const s=r.split,o=LA(n,e,t.options),a=st(s.factor.value),l=t.getFillColor();s.color?o.color.load(s.color):s.colorOffset&&l?o.color.load({value:{hsl:{h:l.h+st(s.colorOffset.h??a0),s:l.s+st(s.colorOffset.s??a0),l:l.l+st(s.colorOffset.l??a0)}}}):o.color.load({value:{hsl:t.getFillColor()}}),o.move.load({center:{x:t.position.x,y:t.position.y,mode:Zo.precise}}),vs(o.size.value)?o.size.value/=a:(o.size.value.min/=a,o.size.value.max/=a),o.load(i);const u=s.sizeOffset?It(-t.size.value,t.size.value):a0,c={x:t.position.x+Yi(u),y:t.position.y+Yi(u)};return e.particles.addParticle(c,o,t.group,f=>f.size.value<mre?!1:(f.velocity.length=Yi(It(t.velocity.length,f.velocity.length)),f.splitCount=(t.splitCount??gre)+vre,f.unbreakable=!0,setTimeout(()=>{f.unbreakable=!1},yre),!0))}function wre(n,e,t){const i=t.options.destroy;if(!i)return;const r=i.split;if(r.count>=xre&&(t.splitCount===void 0||t.splitCount++>r.count))return;const s=st(r.rate.value),o=Zi(r.particles);for(let a=0;a<s;a++)_re(n,e,t,o)}class Sre{constructor(e,t){this.container=t,this.engine=e}init(e){const t=this.container,i=e.options,r=i.destroy;if(!r)return;e.splitCount=0;const s=r.bounds;e.destroyBounds||(e.destroyBounds={});const{bottom:o,left:a,right:l,top:u}=s,{destroyBounds:c}=e,f=t.canvas.size;o&&(c.bottom=st(o)*f.height/$i),a&&(c.left=st(a)*f.width/$i),l&&(c.right=st(l)*f.width/$i),u&&(c.top=st(u)*f.height/$i)}isEnabled(e){return!e.destroyed}loadOptions(e,...t){e.destroy||(e.destroy=new pre);for(const i of t)e.destroy.load(i==null?void 0:i.destroy)}particleDestroyed(e,t){if(t)return;const i=e.options.destroy;i&&i.mode===ux.split&&wre(this.engine,this.container,e)}update(e){if(!this.isEnabled(e))return;const t=e.getPosition(),i=e.destroyBounds;i&&(i.bottom!==void 0&&t.y>=i.bottom||i.left!==void 0&&t.x<=i.left||i.right!==void 0&&t.x>=i.right||i.top!==void 0&&t.y<=i.top)&&e.destroy()}}async function Mre(n,e=!0){Ut(n,"3.7.1"),await n.addParticleUpdater("destroy",t=>Promise.resolve(new Sre(n,t)),e)}class Ere{constructor(){this.wait=!1}load(e){Xe(e)||(e.count!==void 0&&(this.count=e.count),e.delay!==void 0&&(this.delay=It(e.delay)),e.duration!==void 0&&(this.duration=It(e.duration)),e.wait!==void 0&&(this.wait=e.wait))}}class bre{constructor(){this.quantity=1,this.delay=.1}load(e){Xe(e)||(e.quantity!==void 0&&(this.quantity=It(e.quantity)),e.delay!==void 0&&(this.delay=It(e.delay)))}}class Are{constructor(){this.color=!1,this.opacity=!1}load(e){Xe(e)||(e.color!==void 0&&(this.color=e.color),e.opacity!==void 0&&(this.opacity=e.opacity))}}class Cre{constructor(){this.options={},this.replace=new Are,this.type="square"}load(e){Xe(e)||(e.options!==void 0&&(this.options=li({},e.options??{})),this.replace.load(e.replace),e.type!==void 0&&(this.type=e.type))}}class xU{constructor(){this.mode=Zo.percent,this.height=0,this.width=0}load(e){Xe(e)||(e.mode!==void 0&&(this.mode=e.mode),e.height!==void 0&&(this.height=e.height),e.width!==void 0&&(this.width=e.width))}}class gl{constructor(){this.autoPlay=!0,this.fill=!0,this.life=new Ere,this.rate=new bre,this.shape=new Cre,this.startCount=0}load(e){Xe(e)||(e.autoPlay!==void 0&&(this.autoPlay=e.autoPlay),e.size!==void 0&&(this.size||(this.size=new xU),this.size.load(e.size)),e.direction!==void 0&&(this.direction=e.direction),this.domId=e.domId,e.fill!==void 0&&(this.fill=e.fill),this.life.load(e.life),this.name=e.name,this.particles=Si(e.particles,t=>li({},t)),this.rate.load(e.rate),this.shape.load(e.shape),e.position!==void 0&&(this.position={},e.position.x!==void 0&&(this.position.x=It(e.position.x)),e.position.y!==void 0&&(this.position.y=It(e.position.y))),e.spawnColor!==void 0&&(this.spawnColor===void 0&&(this.spawnColor=new Ch),this.spawnColor.load(e.spawnColor)),e.startCount!==void 0&&(this.startCount=e.startCount))}}var cx;(function(n){n.emitter="emitter"})(cx||(cx={}));const R3=.5,I3=0,l0=0,F3=0,Dre=0,Tre=-1,Pre=1;function N3(n,e){n.color?n.color.value=e:n.color={value:e}}class Rre{constructor(e,t,i,r,s){var u,c;this.emitters=t,this.container=i,this._destroy=()=>{var f,h;(f=this._mutationObserver)==null||f.disconnect(),this._mutationObserver=void 0,(h=this._resizeObserver)==null||h.disconnect(),this._resizeObserver=void 0,this.emitters.removeEmitter(this),this._engine.dispatchEvent("emitterDestroyed",{container:this.container,data:{emitter:this}})},this._prepareToDie=()=>{var v;if(this._paused)return;const f=((v=this.options.life)==null?void 0:v.duration)!==void 0?st(this.options.life.duration):void 0;this.container.retina.reduceFactor&&(this._lifeCount>0||this._immortal)&&f!==void 0&&f>0&&(this._duration=f*Kn)},this._setColorAnimation=(f,h,m,v=Pre)=>{const g=this.container;if(!f.enable)return h;const x=Yi(f.offset),y=st(this.options.rate.delay),_=y*Kn/g.retina.reduceFactor,w=0,E=st(f.speed??w);return(h+E*g.fpsLimit/_+x*v)%m},this._engine=e,this._currentDuration=0,this._currentEmitDelay=0,this._currentSpawnDelay=0,this._initialPosition=s,r instanceof gl?this.options=r:(this.options=new gl,this.options.load(r)),this._spawnDelay=st(this.options.life.delay??I3)*Kn/this.container.retina.reduceFactor,this.position=this._initialPosition??this._calcPosition(),this.name=this.options.name,this.fill=this.options.fill,this._firstSpawn=!this.options.life.wait,this._startParticlesAdded=!1;let o=li({},this.options.particles);if(o??(o={}),o.move??(o.move={}),(u=o.move).direction??(u.direction=this.options.direction),this.options.spawnColor&&(this.spawnColor=Ul(this._engine,this.options.spawnColor)),this._paused=!this.options.autoPlay,this._particlesOptions=o,this._size=this._calcSize(),this.size=c3(this._size,this.container.canvas.size),this._lifeCount=this.options.life.count??Tre,this._immortal=this._lifeCount<=l0,this.options.domId){const f=document.getElementById(this.options.domId);f&&(this._mutationObserver=new MutationObserver(()=>{this.resize()}),this._resizeObserver=new ResizeObserver(()=>{this.resize()}),this._mutationObserver.observe(f,{attributes:!0,attributeFilter:["style","width","height"]}),this._resizeObserver.observe(f))}const a=this.options.shape,l=(c=this._engine.emitterShapeManager)==null?void 0:c.getShapeGenerator(a.type);l&&(this._shape=l.generate(this.position,this.size,this.fill,a.options)),this._engine.dispatchEvent("emitterCreated",{container:i,data:{emitter:this}}),this.play()}externalPause(){this._paused=!0,this.pause()}externalPlay(){this._paused=!1,this.play()}async init(){var e;await((e=this._shape)==null?void 0:e.init())}pause(){this._paused||delete this._emitDelay}play(){if(!this._paused&&this.container.retina.reduceFactor&&(this._lifeCount>l0||this._immortal||!this.options.life.count)&&(this._firstSpawn||this._currentSpawnDelay>=(this._spawnDelay??F3))){if(this._emitDelay===void 0){const e=st(this.options.rate.delay);this._emitDelay=e*Kn/this.container.retina.reduceFactor}(this._lifeCount>l0||this._immortal)&&this._prepareToDie()}}resize(){var t;const e=this._initialPosition;this.position=e&&Wm(e,this.container.canvas.size,Pn.origin)?e:this._calcPosition(),this._size=this._calcSize(),this.size=c3(this._size,this.container.canvas.size),(t=this._shape)==null||t.resize(this.position,this.size)}update(e){var t;this._paused||(this._firstSpawn&&(this._firstSpawn=!1,this._currentSpawnDelay=this._spawnDelay??F3,this._currentEmitDelay=this._emitDelay??Dre),this._startParticlesAdded||(this._startParticlesAdded=!0,this._emitParticles(this.options.startCount)),this._duration!==void 0&&(this._currentDuration+=e.value,this._currentDuration>=this._duration&&(this.pause(),this._spawnDelay!==void 0&&delete this._spawnDelay,this._immortal||this._lifeCount--,this._lifeCount>l0||this._immortal?(this.position=this._calcPosition(),(t=this._shape)==null||t.resize(this.position,this.size),this._spawnDelay=st(this.options.life.delay??I3)*Kn/this.container.retina.reduceFactor):this._destroy(),this._currentDuration-=this._duration,delete this._duration)),this._spawnDelay!==void 0&&(this._currentSpawnDelay+=e.value,this._currentSpawnDelay>=this._spawnDelay&&(this._engine.dispatchEvent("emitterPlay",{container:this.container}),this.play(),this._currentSpawnDelay-=this._currentSpawnDelay,delete this._spawnDelay)),this._emitDelay!==void 0&&(this._currentEmitDelay+=e.value,this._currentEmitDelay>=this._emitDelay&&(this._emit(),this._currentEmitDelay-=this._emitDelay)))}_calcPosition(){if(this.options.domId){const e=document.getElementById(this.options.domId);if(e){const t=e.getBoundingClientRect(),i=this.container.retina.pixelRatio;return{x:(t.x+t.width*R3)*i,y:(t.y+t.height*R3)*i}}}return KB({size:this.container.canvas.size,position:this.options.position})}_calcSize(){const e=this.container;if(this.options.domId){const t=document.getElementById(this.options.domId);if(t){const i=t.getBoundingClientRect();return{width:i.width*e.retina.pixelRatio,height:i.height*e.retina.pixelRatio,mode:Zo.precise}}}return this.options.size??(()=>{const t=new xU;return t.load({height:0,mode:Zo.percent,width:0}),t})()}_emit(){if(this._paused)return;const e=st(this.options.rate.quantity);this._emitParticles(e)}_emitParticles(e){var i;const t=Zi(this._particlesOptions);for(let r=0;r<e;r++){const s=li({},t);if(this.spawnColor){const l=(i=this.options.spawnColor)==null?void 0:i.animation;if(l){const u={h:360,s:100,l:100},c=3.6;this.spawnColor.h=this._setColorAnimation(l.h,this.spawnColor.h,u.h,c),this.spawnColor.s=this._setColorAnimation(l.s,this.spawnColor.s,u.s),this.spawnColor.l=this._setColorAnimation(l.l,this.spawnColor.l,u.l)}N3(s,this.spawnColor)}const o=this.options.shape;let a=this.position;if(this._shape){const l=this._shape.randomPosition();if(l){a=l.position;const u=o.replace;u.color&&l.color&&N3(s,l.color),u.opacity&&(s.opacity?s.opacity.value=l.opacity:s.opacity={value:l.opacity})}else a=null}a&&this.container.particles.addParticle(a,s)}}}class Ire{constructor(e,t){this.container=t,this._engine=e,this.array=[],this.emitters=[],this.interactivityEmitters={random:{count:1,enable:!1},value:[]};const i=0;t.getEmitter=r=>r===void 0||vs(r)?this.array[r??i]:this.array.find(s=>s.name===r),t.addEmitter=async(r,s)=>this.addEmitter(r,s),t.removeEmitter=r=>{const s=t.getEmitter(r);s&&this.removeEmitter(s)},t.playEmitter=r=>{const s=t.getEmitter(r);s&&s.externalPlay()},t.pauseEmitter=r=>{const s=t.getEmitter(r);s&&s.externalPause()}}async addEmitter(e,t){const i=new gl;i.load(e);const r=new Rre(this._engine,this,this.container,i,t);return await r.init(),this.array.push(r),r}handleClickMode(e){const t=this.emitters,i=this.interactivityEmitters;if(e!==cx.emitter)return;let r;if(i&&gr(i.value))if(i.value.length>0&&i.random.enable){r=[];const l=[];for(let u=0;u<i.random.count;u++){const c=eU(i.value);if(l.includes(c)&&l.length<i.value.length){u--;continue}l.push(c),r.push(Vm(i.value,c))}}else r=i.value;else r=i==null?void 0:i.value;const s=r??t,o=this.container.interactivity.mouse.clickPosition;Si(s,async a=>{await this.addEmitter(a,o)})}async init(){if(this.emitters=this.container.actualOptions.emitters,this.interactivityEmitters=this.container.actualOptions.interactivity.modes.emitters,!!this.emitters)if(gr(this.emitters))for(const e of this.emitters)await this.addEmitter(e);else await this.addEmitter(this.emitters)}pause(){for(const e of this.array)e.pause()}play(){for(const e of this.array)e.play()}removeEmitter(e){const t=this.array.indexOf(e);t>=0&&this.array.splice(t,1)}resize(){for(const e of this.array)e.resize()}stop(){this.array=[]}update(e){for(const t of this.array)t.update(e)}}class Fre{constructor(e){this._engine=e,this.id="emitters"}getPlugin(e){return Promise.resolve(new Ire(this._engine,e))}loadOptions(e,t){var r,s;if(!this.needsPlugin(e)&&!this.needsPlugin(t))return;t!=null&&t.emitters&&(e.emitters=Si(t.emitters,o=>{const a=new gl;return a.load(o),a}));const i=(s=(r=t==null?void 0:t.interactivity)==null?void 0:r.modes)==null?void 0:s.emitters;if(i)if(gr(i))e.interactivity.modes.emitters={random:{count:1,enable:!0},value:i.map(o=>{const a=new gl;return a.load(o),a})};else{const o=i;if(o.value!==void 0)if(gr(o.value))e.interactivity.modes.emitters={random:{count:o.random.count??1,enable:o.random.enable??!1},value:o.value.map(l=>{const u=new gl;return u.load(l),u})};else{const l=new gl;l.load(o.value),e.interactivity.modes.emitters={random:{count:o.random.count??1,enable:o.random.enable??!1},value:l}}else(e.interactivity.modes.emitters={random:{count:1,enable:!1},value:new gl}).value.load(i)}}needsPlugin(e){var i,r,s;if(!e)return!1;const t=e.emitters;return gr(t)&&!!t.length||t!==void 0||!!((s=(r=(i=e.interactivity)==null?void 0:i.events)==null?void 0:r.onClick)!=null&&s.mode)&&Fn(cx.emitter,e.interactivity.events.onClick.mode)}}const yS=new Map;class Nre{constructor(e){this._engine=e}addShapeGenerator(e,t){this.getShapeGenerator(e)||yS.set(e,t)}getShapeGenerator(e){return yS.get(e)}getSupportedShapeGenerators(){return yS.keys()}}class _U{constructor(e,t,i,r){this.position=e,this.size=t,this.fill=i,this.options=r}resize(e,t){this.position=e,this.size=t}}async function Lre(n,e=!0){Ut(n,"3.7.1"),n.emitterShapeManager||(n.emitterShapeManager=new Nre(n)),n.addEmitterShapeGenerator||(n.addEmitterShapeGenerator=(i,r)=>{var s;(s=n.emitterShapeManager)==null||s.addShapeGenerator(i,r)});const t=new Fre(n);await n.addPlugin(t,e)}const Ud=.25,cE=2,Ore=Math.PI*cE,L3=2,O3=.5;class zre extends _U{constructor(e,t,i,r){super(e,t,i,r)}async init(){}randomPosition(){const e=this.size,t=this.fill,i=this.position,r=(f,h)=>{const m=Xt()*Ud,v=Math.atan(h/f*Math.tan(Ore*m)),g=Xt();return g<Ud?v:g<cE*Ud?Math.PI-v:g<cE*Ud+Ud?Math.PI+v:-v},s=(f,h,m)=>f*h/Math.sqrt((h*Math.cos(m))**L3+(f*Math.sin(m))**L3),[o,a]=[e.width*O3,e.height*O3],l=r(o,a),u=s(o,a,l),c=t?u*Math.sqrt(Xt()):u;return{position:{x:i.x+c*Math.cos(l),y:i.y+c*Math.sin(l)}}}}class Bre{generate(e,t,i,r){return new zre(e,t,i,r)}}async function Ure(n,e=!0){var i;const t=n;Ut(t,"3.7.1"),(i=t.addEmitterShapeGenerator)==null||i.call(t,"circle",new Bre),await t.refresh(e)}const z3=.5,kre=4,Hre=2;var Gf;(function(n){n[n.TopLeft=0]="TopLeft",n[n.TopRight=1]="TopRight",n[n.BottomRight=2]="BottomRight",n[n.BottomLeft=3]="BottomLeft"})(Gf||(Gf={}));function B3(n,e){return n+e*(Xt()-uc)}class Vre extends _U{constructor(e,t,i,r){super(e,t,i,r)}async init(){}randomPosition(){const e=this.fill,t=this.position,i=this.size;if(e)return{position:{x:B3(t.x,i.width),y:B3(t.y,i.height)}};{const r=i.width*z3,s=i.height*z3,o=Math.floor(Xt()*kre),a=(Xt()-uc)*Hre;switch(o){case Gf.TopLeft:return{position:{x:t.x+a*r,y:t.y-s}};case Gf.TopRight:return{position:{x:t.x-r,y:t.y+a*s}};case Gf.BottomRight:return{position:{x:t.x+a*r,y:t.y+s}};case Gf.BottomLeft:default:return{position:{x:t.x+r,y:t.y+a*s}}}}}}class Wre{generate(e,t,i,r){return new Vre(e,t,i,r)}}async function Gre(n,e=!0){var i;const t=n;Ut(t,"3.7.1"),(i=t.addEmitterShapeGenerator)==null||i.call(t,"square",new Wre),await t.refresh(e)}class jre{constructor(){this.delay=1,this.pauseOnStop=!1,this.quantity=1}load(e){Xe(e)||(e.delay!==void 0&&(this.delay=e.delay),e.quantity!==void 0&&(this.quantity=e.quantity),e.particles!==void 0&&(this.particles=li({},e.particles)),e.pauseOnStop!==void 0&&(this.pauseOnStop=e.pauseOnStop))}}const U3="trail";class qre extends Mo{constructor(e){super(e),this._delay=0}clear(){}init(){}interact(e){var u,c,f,h;const t=this.container,{interactivity:i}=t;if(!t.retina.reduceFactor)return;const r=t.actualOptions,s=r.interactivity.modes.trail;if(!s)return;const o=s.delay*Kn/this.container.retina.reduceFactor;if(this._delay<o&&(this._delay+=e.value),this._delay<o)return;const a=!(s.pauseOnStop&&(i.mouse.position===this._lastPosition||((u=i.mouse.position)==null?void 0:u.x)===((c=this._lastPosition)==null?void 0:c.x)&&((f=i.mouse.position)==null?void 0:f.y)===((h=this._lastPosition)==null?void 0:h.y))),l=t.interactivity.mouse.position;l?this._lastPosition={...l}:delete this._lastPosition,a&&t.particles.push(s.quantity,t.interactivity.mouse,s.particles),this._delay-=o}isEnabled(e){const t=this.container,i=t.actualOptions,r=t.interactivity.mouse,s=((e==null?void 0:e.interactivity)??i.interactivity).events;return r.clicking&&r.inside&&!!r.position&&Fn(U3,s.onClick.mode)||r.inside&&!!r.position&&Fn(U3,s.onHover.mode)}loadModeOptions(e,...t){e.trail||(e.trail=new jre);for(const i of t)e.trail.load(i==null?void 0:i.trail)}reset(){}}async function Xre(n,e=!0){Ut(n,"3.7.1"),await n.addInteractor("externalTrail",t=>Promise.resolve(new qre(t)),e)}var Hu;(function(n){n.both="both",n.horizontal="horizontal",n.vertical="vertical"})(Hu||(Hu={}));const $re=2,wU=Math.PI*$re,Yre=360;function Zre(n,e){const t=e.options.roll;if(!(t!=null&&t.enable)){e.roll={enable:!1,horizontal:!1,vertical:!1,angle:0,speed:0};return}if(e.roll={enable:t.enable,horizontal:t.mode===Hu.horizontal||t.mode===Hu.both,vertical:t.mode===Hu.vertical||t.mode===Hu.both,angle:Xt()*wU,speed:st(t.speed)/Yre},t.backColor)e.backColor=Ul(n,t.backColor);else if(t.darken.enable&&t.enlighten.enable){const i=Xt()>=uc?pl.darken:pl.enlighten;e.roll.alter={type:i,value:st(i===pl.darken?t.darken.value:t.enlighten.value)}}else t.darken.enable?e.roll.alter={type:pl.darken,value:st(t.darken.value)}:t.enlighten.enable&&(e.roll.alter={type:pl.enlighten,value:st(t.enlighten.value)})}function Kre(n,e){const t=n.options.roll,i=n.roll;if(!i||!(t!=null&&t.enable))return;const r=i.speed*e.factor,s=wU;i.angle+=r,i.angle>s&&(i.angle-=s)}class k3{constructor(){this.enable=!1,this.value=0}load(e){Xe(e)||(e.enable!==void 0&&(this.enable=e.enable),e.value!==void 0&&(this.value=It(e.value)))}}class Jre{constructor(){this.darken=new k3,this.enable=!1,this.enlighten=new k3,this.mode=Hu.vertical,this.speed=25}load(e){Xe(e)||(e.backColor!==void 0&&(this.backColor=di.create(this.backColor,e.backColor)),this.darken.load(e.darken),e.enable!==void 0&&(this.enable=e.enable),this.enlighten.load(e.enlighten),e.mode!==void 0&&(this.mode=e.mode),e.speed!==void 0&&(this.speed=It(e.speed)))}}class Qre{constructor(e){this._engine=e}getTransformValues(e){var s;const t=((s=e.roll)==null?void 0:s.enable)&&e.roll,i=t&&t.horizontal,r=t&&t.vertical;return{a:i?Math.cos(t.angle):void 0,d:r?Math.sin(t.angle):void 0}}init(e){Zre(this._engine,e)}isEnabled(e){const t=e.options.roll;return!e.destroyed&&!e.spawning&&!!(t!=null&&t.enable)}loadOptions(e,...t){e.roll||(e.roll=new Jre);for(const i of t)e.roll.load(i==null?void 0:i.roll)}update(e,t){this.isEnabled(e)&&Kre(e,t)}}async function ese(n,e=!0){Ut(n,"3.7.1"),await n.addParticleUpdater("roll",()=>Promise.resolve(new Qre(n)),e)}const fE=.5,Vu=0,uo=1,H3=60,V3=0,tse=.01;function nse(n){const e=n.initialPosition,{dx:t,dy:i}=vr(e,n.position),r=Math.abs(t),s=Math.abs(i),{maxDistance:o}=n.retina,a=o.horizontal,l=o.vertical;if(!a&&!l)return;const u=(a&&r>=a)??!1,c=(l&&s>=l)??!1;if((u||c)&&!n.misplaced)n.misplaced=!!a&&r>a||!!l&&s>l,a&&(n.velocity.x=n.velocity.y*fE-n.velocity.x),l&&(n.velocity.y=n.velocity.x*fE-n.velocity.y);else if((!a||r<a)&&(!l||s<l)&&n.misplaced)n.misplaced=!1;else if(n.misplaced){const f=n.position,h=n.velocity;a&&(f.x<e.x&&h.x<Vu||f.x>e.x&&h.x>Vu)&&(h.x*=-Xt()),l&&(f.y<e.y&&h.y<Vu||f.y>e.y&&h.y>Vu)&&(h.y*=-Xt())}}function ise(n,e,t,i,r,s){sse(n,s);const o=n.gravity,a=o!=null&&o.enable&&o.inverse?-uo:uo;r&&t&&(n.velocity.x+=r*s.factor/(H3*t)),o!=null&&o.enable&&t&&(n.velocity.y+=a*(o.acceleration*s.factor)/(H3*t));const l=n.moveDecay;n.velocity.multTo(l);const u=n.velocity.mult(t);o!=null&&o.enable&&i>Vu&&(!o.inverse&&u.y>=Vu&&u.y>=i||o.inverse&&u.y<=Vu&&u.y<=-i)&&(u.y=a*i,t&&(n.velocity.y=u.y/t));const c=n.options.zIndex,f=(uo-n.zIndexFactor)**c.velocityRate;u.multTo(f);const{position:h}=n;h.addTo(u),e.vibrate&&(h.x+=Math.sin(h.x*Math.cos(h.y)),h.y+=Math.cos(h.y*Math.sin(h.x)))}function rse(n,e){const t=n.container;if(!n.spin)return;const i={x:n.spin.direction===dr.clockwise?Math.cos:Math.sin,y:n.spin.direction===dr.clockwise?Math.sin:Math.cos};n.position.x=n.spin.center.x+n.spin.radius*i.x(n.spin.angle),n.position.y=n.spin.center.y+n.spin.radius*i.y(n.spin.angle),n.spin.radius+=n.spin.acceleration;const r=Math.max(t.canvas.size.width,t.canvas.size.height),s=r*fE;n.spin.radius>s?(n.spin.radius=s,n.spin.acceleration*=-uo):n.spin.radius<V3&&(n.spin.radius=V3,n.spin.acceleration*=-uo),n.spin.angle+=e*tse*(uo-n.spin.radius/r)}function sse(n,e){var o;const t=n.options,i=t.move.path;if(!i.enable)return;if(n.lastPathTime<=n.pathDelay){n.lastPathTime+=e.value;return}const s=(o=n.pathGenerator)==null?void 0:o.generate(n,e);s&&n.velocity.addTo(s),i.clamp&&(n.velocity.x=qs(n.velocity.x,-uo,uo),n.velocity.y=qs(n.velocity.y,-uo,uo)),n.lastPathTime-=n.pathDelay}function ose(n){return n.slow.inRange?n.slow.factor:uo}function ase(n){const e=n.container,t=n.options,i=t.move.spin;if(!i.enable)return;const r=i.position??{x:50,y:50},s=.01,o={x:r.x*s*e.canvas.size.width,y:r.y*s*e.canvas.size.height},a=n.getPosition(),l=Ir(a,o),u=st(i.acceleration);n.retina.spinAcceleration=u*e.retina.pixelRatio;const c=0;n.spin={center:o,direction:n.velocity.x>=c?dr.clockwise:dr.counterClockwise,angle:n.velocity.angle,radius:l,acceleration:n.retina.spinAcceleration}}const lse=2,use=1,cse=1;class fse{init(e){const t=e.options,i=t.move.gravity;e.gravity={enable:i.enable,acceleration:st(i.acceleration),inverse:i.inverse},ase(e)}isEnabled(e){return!e.destroyed&&e.options.move.enable}move(e,t){var g,x;const i=e.options,r=i.move;if(!r.enable)return;const s=e.container,o=s.retina.pixelRatio;(g=e.retina).moveSpeed??(g.moveSpeed=st(r.speed)*o),(x=e.retina).moveDrift??(x.moveDrift=st(e.options.move.drift)*o);const a=ose(e),l=e.retina.moveSpeed*s.retina.reduceFactor,u=e.retina.moveDrift,c=Vo(i.size.value)*o,f=r.size?e.getRadius()/c:use,h=t.factor||cse,m=l*f*a*h/lse,v=e.retina.maxSpeed??s.retina.maxSpeed;r.spin.enable?rse(e,m):ise(e,r,m,v,u,t),nse(e)}}async function hse(n,e=!0){Ut(n,"3.7.1"),await n.addMover("base",()=>Promise.resolve(new fse),e)}const dse=2,pse=Math.PI*dse,mse=0,W3={x:0,y:0};function gse(n){const{context:e,particle:t,radius:i}=n;t.circleRange||(t.circleRange={min:mse,max:pse});const r=t.circleRange;e.arc(W3.x,W3.y,i,r.min,r.max,!1)}const vse=12,yse=360,G3=0;class xse{constructor(){this.validTypes=["circle"]}draw(e){gse(e)}getSidesCount(){return vse}particleInit(e,t){const i=t.shapeData,r=(i==null?void 0:i.angle)??{max:yse,min:G3};t.circleRange=Wf(r)?{min:Ta(r.min),max:Ta(r.max)}:{min:G3,max:Ta(r)}}}async function _se(n,e=!0){Ut(n,"3.7.1"),await n.addShape(new xse,e)}class wse{constructor(e,t){this._container=e,this._engine=t}init(e){const t=Ul(this._engine,e.options.color,e.id,e.options.reduceDuplicates);t&&(e.color=fU(t,e.options.color.animation,this._container.retina.reduceFactor))}isEnabled(e){const{h:t,s:i,l:r}=e.options.color.animation,{color:s}=e;return!e.destroyed&&!e.spawning&&((s==null?void 0:s.h.value)!==void 0&&t.enable||(s==null?void 0:s.s.value)!==void 0&&i.enable||(s==null?void 0:s.l.value)!==void 0&&r.enable)}update(e,t){hU(e.color,t)}}async function Sse(n,e=!0){Ut(n,"3.7.1"),await n.addParticleUpdater("color",t=>Promise.resolve(new wse(t,n)),e)}var Cu;(function(n){n[n.r=1]="r",n[n.g=2]="g",n[n.b=3]="b",n[n.a=4]="a"})(Cu||(Cu={}));const Mse=/^#?([a-f\d])([a-f\d])([a-f\d])([a-f\d])?$/i,Ese=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})?$/i,u0=16,bse=1,Ase=255;class Cse{constructor(){this.key="hex",this.stringPrefix="#"}handleColor(e){return this._parseString(e.value)}handleRangeColor(e){return this._parseString(e.value)}parseString(e){return this._parseString(e)}_parseString(e){if(typeof e!="string"||!(e!=null&&e.startsWith(this.stringPrefix)))return;const t=e.replace(Mse,(r,s,o,a,l)=>s+s+o+o+a+a+(l!==void 0?l+l:"")),i=Ese.exec(t);return i?{a:i[Cu.a]!==void 0?parseInt(i[Cu.a],u0)/Ase:bse,b:parseInt(i[Cu.b],u0),g:parseInt(i[Cu.g],u0),r:parseInt(i[Cu.r],u0)}:void 0}}async function Dse(n,e=!0){Ut(n,"3.7.1"),await n.addColorManager(new Cse,e)}var jf;(function(n){n[n.h=1]="h",n[n.s=2]="s",n[n.l=3]="l",n[n.a=5]="a"})(jf||(jf={}));class Tse{constructor(){this.key="hsl",this.stringPrefix="hsl"}handleColor(e){const t=e.value,i=t.hsl??e.value;if(i.h!==void 0&&i.s!==void 0&&i.l!==void 0)return Mh(i)}handleRangeColor(e){const t=e.value,i=t.hsl??e.value;if(i.h!==void 0&&i.l!==void 0)return Mh({h:st(i.h),l:st(i.l),s:st(i.s)})}parseString(e){if(!e.startsWith("hsl"))return;const t=/hsla?\(\s*(\d+)\s*[\s,]\s*(\d+)%\s*[\s,]\s*(\d+)%\s*([\s,]\s*(0|1|0?\.\d+|(\d{1,3})%)\s*)?\)/i,i=t.exec(e),r=4,s=1,o=10;return i?Dne({a:i.length>r?JB(i[jf.a]):s,h:parseInt(i[jf.h],o),l:parseInt(i[jf.l],o),s:parseInt(i[jf.s],o)}):void 0}}async function Pse(n,e=!0){Ut(n,"3.7.1"),await n.addColorManager(new Tse,e)}class Rse{constructor(e){this.container=e}init(e){const t=e.options.opacity,i=1;e.opacity=rU(t,i);const r=t.animation;r.enable&&(e.opacity.velocity=st(r.speed)/$i*this.container.retina.reduceFactor,r.sync||(e.opacity.velocity*=Xt()))}isEnabled(e){return!e.destroyed&&!e.spawning&&!!e.opacity&&e.opacity.enable&&((e.opacity.maxLoops??0)<=0||(e.opacity.maxLoops??0)>0&&(e.opacity.loops??0)<(e.opacity.maxLoops??0))}reset(e){e.opacity&&(e.opacity.time=0,e.opacity.loops=0)}update(e,t){!this.isEnabled(e)||!e.opacity||E_(e,e.opacity,!0,e.options.opacity.animation.destroy,t)}}async function Ise(n,e=!0){Ut(n,"3.7.1"),await n.addParticleUpdater("opacity",t=>Promise.resolve(new Rse(t)),e)}const fx=0,sh=0;function Fse(n){if(n.outMode!==wi.bounce&&n.outMode!==wi.split||n.direction!==rn.left&&n.direction!==rn.right)return;n.bounds.right<sh&&n.direction===rn.left?n.particle.position.x=n.size+n.offset.x:n.bounds.left>n.canvasSize.width&&n.direction===rn.right&&(n.particle.position.x=n.canvasSize.width-n.size-n.offset.x);const e=n.particle.velocity.x;let t=!1;if(n.direction===rn.right&&n.bounds.right>=n.canvasSize.width&&e>fx||n.direction===rn.left&&n.bounds.left<=sh&&e<fx){const r=st(n.particle.options.bounce.horizontal.value);n.particle.velocity.x*=-r,t=!0}if(!t)return;const i=n.offset.x+n.size;n.bounds.right>=n.canvasSize.width&&n.direction===rn.right?n.particle.position.x=n.canvasSize.width-i:n.bounds.left<=sh&&n.direction===rn.left&&(n.particle.position.x=i),n.outMode===wi.split&&n.particle.destroy()}function Nse(n){if(n.outMode!==wi.bounce&&n.outMode!==wi.split||n.direction!==rn.bottom&&n.direction!==rn.top)return;n.bounds.bottom<sh&&n.direction===rn.top?n.particle.position.y=n.size+n.offset.y:n.bounds.top>n.canvasSize.height&&n.direction===rn.bottom&&(n.particle.position.y=n.canvasSize.height-n.size-n.offset.y);const e=n.particle.velocity.y;let t=!1;if(n.direction===rn.bottom&&n.bounds.bottom>=n.canvasSize.height&&e>fx||n.direction===rn.top&&n.bounds.top<=sh&&e<fx){const r=st(n.particle.options.bounce.vertical.value);n.particle.velocity.y*=-r,t=!0}if(!t)return;const i=n.offset.y+n.size;n.bounds.bottom>=n.canvasSize.height&&n.direction===rn.bottom?n.particle.position.y=n.canvasSize.height-i:n.bounds.top<=sh&&n.direction===rn.top&&(n.particle.position.y=i),n.outMode===wi.split&&n.particle.destroy()}class Lse{constructor(e){this.container=e,this.modes=[wi.bounce,wi.split]}update(e,t,i,r){if(!this.modes.includes(r))return;const s=this.container;let o=!1;for(const h of s.plugins.values())if(h.particleBounce!==void 0&&(o=h.particleBounce(e,i,t)),o)break;if(o)return;const a=e.getPosition(),l=e.offset,u=e.getRadius(),c=Gm(a,u),f=s.canvas.size;Fse({particle:e,outMode:r,direction:t,bounds:c,canvasSize:f,offset:l,size:u}),Nse({particle:e,outMode:r,direction:t,bounds:c,canvasSize:f,offset:l,size:u})}}const c0=0;class Ose{constructor(e){this.container=e,this.modes=[wi.destroy]}update(e,t,i,r){if(!this.modes.includes(r))return;const s=this.container;switch(e.outType){case po.normal:case po.outside:if(Wm(e.position,s.canvas.size,Pn.origin,e.getRadius(),t))return;break;case po.inside:{const{dx:o,dy:a}=vr(e.position,e.moveCenter),{x:l,y:u}=e.velocity;if(l<c0&&o>e.moveCenter.radius||u<c0&&a>e.moveCenter.radius||l>=c0&&o<-e.moveCenter.radius||u>=c0&&a<-e.moveCenter.radius)return;break}}s.particles.remove(e,e.group,!0)}}const f0=0;class zse{constructor(e){this.container=e,this.modes=[wi.none]}update(e,t,i,r){if(!this.modes.includes(r)||((e.options.move.distance.horizontal&&(t===rn.left||t===rn.right))??(e.options.move.distance.vertical&&(t===rn.top||t===rn.bottom))))return;const s=e.options.move.gravity,o=this.container,a=o.canvas.size,l=e.getRadius();if(s.enable){const u=e.position;(!s.inverse&&u.y>a.height+l&&t===rn.bottom||s.inverse&&u.y<-l&&t===rn.top)&&o.particles.remove(e)}else{if(e.velocity.y>f0&&e.position.y<=a.height+l||e.velocity.y<f0&&e.position.y>=-l||e.velocity.x>f0&&e.position.x<=a.width+l||e.velocity.x<f0&&e.position.x>=-l)return;Wm(e.position,o.canvas.size,Pn.origin,l,t)||o.particles.remove(e)}}}const h0=0,d0=0;class Bse{constructor(e){this.container=e,this.modes=[wi.out]}update(e,t,i,r){if(!this.modes.includes(r))return;const s=this.container;switch(e.outType){case po.inside:{const{x:o,y:a}=e.velocity,l=Pn.origin;l.length=e.moveCenter.radius,l.angle=e.velocity.angle+Math.PI,l.addTo(Pn.create(e.moveCenter));const{dx:u,dy:c}=vr(e.position,l);if(o<=h0&&u>=d0||a<=h0&&c>=d0||o>=h0&&u<=d0||a>=h0&&c<=d0)return;e.position.x=Math.floor(Yi({min:0,max:s.canvas.size.width})),e.position.y=Math.floor(Yi({min:0,max:s.canvas.size.height}));const{dx:f,dy:h}=vr(e.position,e.moveCenter);e.direction=Math.atan2(-h,-f),e.velocity.angle=e.direction;break}default:{if(Wm(e.position,s.canvas.size,Pn.origin,e.getRadius(),t))return;switch(e.outType){case po.outside:{e.position.x=Math.floor(Yi({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.x,e.position.y=Math.floor(Yi({min:-e.moveCenter.radius,max:e.moveCenter.radius}))+e.moveCenter.y;const{dx:o,dy:a}=vr(e.position,e.moveCenter);e.moveCenter.radius&&(e.direction=Math.atan2(a,o),e.velocity.angle=e.direction);break}case po.normal:{const o=e.options.move.warp,a=s.canvas.size,l={bottom:a.height+e.getRadius()+e.offset.y,left:-e.getRadius()-e.offset.x,right:a.width+e.getRadius()+e.offset.x,top:-e.getRadius()-e.offset.y},u=e.getRadius(),c=Gm(e.position,u);t===rn.right&&c.left>a.width+e.offset.x?(e.position.x=l.left,e.initialPosition.x=e.position.x,o||(e.position.y=Xt()*a.height,e.initialPosition.y=e.position.y)):t===rn.left&&c.right<-e.offset.x&&(e.position.x=l.right,e.initialPosition.x=e.position.x,o||(e.position.y=Xt()*a.height,e.initialPosition.y=e.position.y)),t===rn.bottom&&c.top>a.height+e.offset.y?(o||(e.position.x=Xt()*a.width,e.initialPosition.x=e.position.x),e.position.y=l.top,e.initialPosition.y=e.position.y):t===rn.top&&c.bottom<-e.offset.y&&(o||(e.position.x=Xt()*a.width,e.initialPosition.x=e.position.x),e.position.y=l.bottom,e.initialPosition.y=e.position.y);break}}break}}}}const Use=(n,e)=>n.default===e||n.bottom===e||n.left===e||n.right===e||n.top===e;class kse{constructor(e){this._addUpdaterIfMissing=(t,i,r)=>{const s=t.options.move.outModes;!this.updaters.has(i)&&Use(s,i)&&this.updaters.set(i,r(this.container))},this._updateOutMode=(t,i,r,s)=>{for(const o of this.updaters.values())o.update(t,s,i,r)},this.container=e,this.updaters=new Map}init(e){this._addUpdaterIfMissing(e,wi.bounce,t=>new Lse(t)),this._addUpdaterIfMissing(e,wi.out,t=>new Bse(t)),this._addUpdaterIfMissing(e,wi.destroy,t=>new Ose(t)),this._addUpdaterIfMissing(e,wi.none,t=>new zse(t))}isEnabled(e){return!e.destroyed&&!e.spawning}update(e,t){const i=e.options.move.outModes;this._updateOutMode(e,t,i.bottom??i.default,rn.bottom),this._updateOutMode(e,t,i.left??i.default,rn.left),this._updateOutMode(e,t,i.right??i.default,rn.right),this._updateOutMode(e,t,i.top??i.default,rn.top)}}async function Hse(n,e=!0){Ut(n,"3.7.1"),await n.addParticleUpdater("outModes",t=>Promise.resolve(new kse(t)),e)}var qf;(function(n){n[n.r=1]="r",n[n.g=2]="g",n[n.b=3]="b",n[n.a=5]="a"})(qf||(qf={}));class Vse{constructor(){this.key="rgb",this.stringPrefix="rgb"}handleColor(e){const t=e.value,i=t.rgb??e.value;if(i.r!==void 0)return i}handleRangeColor(e){const t=e.value,i=t.rgb??e.value;if(i.r!==void 0)return{r:st(i.r),g:st(i.g),b:st(i.b)}}parseString(e){if(!e.startsWith(this.stringPrefix))return;const t=/rgba?\(\s*(\d{1,3})\s*[\s,]\s*(\d{1,3})\s*[\s,]\s*(\d{1,3})\s*([\s,]\s*(0|1|0?\.\d+|(\d{1,3})%)\s*)?\)/i,i=t.exec(e),r=10;return i?{a:i.length>4?JB(i[qf.a]):1,b:parseInt(i[qf.b],r),g:parseInt(i[qf.g],r),r:parseInt(i[qf.r],r)}:void 0}}async function Wse(n,e=!0){Ut(n,"3.7.1"),await n.addColorManager(new Vse,e)}const vu=0;class Gse{init(e){const t=e.container,i=e.options.size,r=i.animation;r.enable&&(e.size.velocity=(e.retina.sizeAnimationSpeed??t.retina.sizeAnimationSpeed)/$i*t.retina.reduceFactor,r.sync||(e.size.velocity*=Xt()))}isEnabled(e){return!e.destroyed&&!e.spawning&&e.size.enable&&((e.size.maxLoops??vu)<=vu||(e.size.maxLoops??vu)>vu&&(e.size.loops??vu)<(e.size.maxLoops??vu))}reset(e){e.size.loops=vu}update(e,t){this.isEnabled(e)&&E_(e,e.size,!0,e.options.size.animation.destroy,t)}}async function jse(n,e=!0){Ut(n,"3.7.1"),await n.addParticleUpdater("size",()=>Promise.resolve(new Gse),e)}async function qse(n,e=!0){Ut(n,"3.7.1"),await Dse(n,!1),await Pse(n,!1),await Wse(n,!1),await hse(n,!1),await _se(n,!1),await Sse(n,!1),await Ise(n,!1),await Hse(n,!1),await jse(n,!1),await n.refresh(e)}async function Xse(n,e=!0){Ut(n,"3.7.1"),await n.addEasing(Ku.easeInQuad,t=>t**2,!1),await n.addEasing(Ku.easeOutQuad,t=>1-(1-t)**2,!1),await n.addEasing(Ku.easeInOutQuad,t=>t<.5?2*t**2:1-(-2*t+2)**2/2,!1),await n.refresh(e)}function $se(n,e){const{context:t,opacity:i}=n,r=.5,s=t.globalAlpha;if(!e)return;const o=e.width,a=o*r;t.globalAlpha=i,t.drawImage(e,-a,-a,o,o),t.globalAlpha=s}const xS='"Twemoji Mozilla", Apple Color Emoji, "Segoe UI Emoji", "Noto Color Emoji", "EmojiOne Color"',j3=0;class Yse{constructor(){this.validTypes=["emoji"],this._emojiShapeDict=new Map}destroy(){for(const[e,t]of this._emojiShapeDict)t instanceof ImageBitmap&&(t==null||t.close()),this._emojiShapeDict.delete(e)}draw(e){const t=e.particle.emojiDataKey;if(!t)return;const i=this._emojiShapeDict.get(t);i&&$se(e,i)}async init(e){const t=e.actualOptions,{validTypes:i}=this;if(!i.find(o=>Fn(o,t.particles.shape.type)))return;const r=[oE(xS)],s=i.map(o=>t.particles.shape.options[o]).find(o=>!!o);s&&Si(s,o=>{o.font&&r.push(oE(o.font))}),await Promise.all(r)}particleDestroy(e){e.emojiDataKey=void 0}particleInit(e,t){const r=t.shapeData;if(!(r!=null&&r.value))return;const s=Zi(r.value,t.randomIndexData);if(!s)return;const o=typeof s=="string"?{font:r.font??xS,padding:r.padding??j3,value:s}:{font:xS,padding:j3,...r,...s},a=o.font,l=o.value,u=`${l}_${a}`;if(this._emojiShapeDict.has(u)){t.emojiDataKey=u;return}const c=o.padding*2,f=Vo(t.size.value),h=f+c,m=h*2;let v;if(typeof OffscreenCanvas<"u"){const g=new OffscreenCanvas(m,m),x=g.getContext("2d");if(!x)return;x.font=`400 ${f*2}px ${a}`,x.textBaseline="middle",x.textAlign="center",x.fillText(l,h,h),v=g.transferToImageBitmap()}else{const g=document.createElement("canvas");g.width=m,g.height=m;const x=g.getContext("2d");if(!x)return;x.font=`400 ${f*2}px ${a}`,x.textBaseline="middle",x.textAlign="center",x.fillText(l,h,h),v=g}this._emojiShapeDict.set(u,v),t.emojiDataKey=u}}async function Zse(n,e=!0){Ut(n,"3.7.1"),await n.addShape(new Yse,e)}const Kse=1,Jse=1,SU=0;function MU(n,e,t,i,r,s){const o=e.actualOptions.interactivity.modes.attract;if(!o)return;const a=e.particles.quadTree.query(r,s);for(const l of a){const{dx:u,dy:c,distance:f}=vr(l.position,t),h=o.speed*o.factor,m=qs(n.getEasing(o.easing)(Jse-f/i)*h,Kse,o.maxSpeed),v=Pn.create(f?u/f*m:h,f?c/f*m:h);l.position.subFrom(v)}}function Qse(n,e,t){e.attract||(e.attract={particles:[]});const{attract:i}=e;if(i.finish||(i.count||(i.count=0),i.count++,i.count===e.particles.count&&(i.finish=!0)),i.clicking){const r=e.interactivity.mouse.clickPosition,s=e.retina.attractModeDistance;if(!s||s<SU||!r)return;MU(n,e,r,s,new yr(r.x,r.y,s),o=>t(o))}else i.clicking===!1&&(i.particles=[])}function eoe(n,e,t){const i=e.interactivity.mouse.position,r=e.retina.attractModeDistance;!r||r<SU||!i||MU(n,e,i,r,new yr(i.x,i.y,r),s=>t(s))}class toe{constructor(){this.distance=200,this.duration=.4,this.easing=Ku.easeOutQuad,this.factor=1,this.maxSpeed=50,this.speed=1}load(e){Xe(e)||(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.easing!==void 0&&(this.easing=e.easing),e.factor!==void 0&&(this.factor=e.factor),e.maxSpeed!==void 0&&(this.maxSpeed=e.maxSpeed),e.speed!==void 0&&(this.speed=e.speed))}}const kd="attract";let noe=class extends Mo{constructor(e,t){super(t),this._engine=e,t.attract||(t.attract={particles:[]}),this.handleClickMode=i=>{const r=this.container.actualOptions,s=r.interactivity.modes.attract;if(!(!s||i!==kd)){t.attract||(t.attract={particles:[]}),t.attract.clicking=!0,t.attract.count=0;for(const o of t.attract.particles)this.isEnabled(o)&&o.velocity.setTo(o.initialVelocity);t.attract.particles=[],t.attract.finish=!1,setTimeout(()=>{t.destroyed||(t.attract||(t.attract={particles:[]}),t.attract.clicking=!1)},s.duration*Kn)}}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.attract;t&&(e.retina.attractModeDistance=t.distance*e.retina.pixelRatio)}interact(){const e=this.container,t=e.actualOptions,i=e.interactivity.status===lc,r=t.interactivity.events,{enable:s,mode:o}=r.onHover,{enable:a,mode:l}=r.onClick;i&&s&&Fn(kd,o)?eoe(this._engine,this.container,u=>this.isEnabled(u)):a&&Fn(kd,l)&&Qse(this._engine,this.container,u=>this.isEnabled(u))}isEnabled(e){const t=this.container,i=t.actualOptions,r=t.interactivity.mouse,s=((e==null?void 0:e.interactivity)??i.interactivity).events;if((!r.position||!s.onHover.enable)&&(!r.clickPosition||!s.onClick.enable))return!1;const o=s.onHover.mode,a=s.onClick.mode;return Fn(kd,o)||Fn(kd,a)}loadModeOptions(e,...t){e.attract||(e.attract=new toe);for(const i of t)e.attract.load(i==null?void 0:i.attract)}reset(){}};async function ioe(n,e=!0){Ut(n,"3.7.1"),await n.addInteractor("externalAttract",t=>Promise.resolve(new noe(n,t)),e)}const roe=2,O0=.5,soe=Math.PI*O0,q3=2,EU=10,ooe=0;function bU(n,e,t,i,r){const s=n.particles.quadTree.query(i,r);for(const o of s)i instanceof yr?nU(aE(o),{position:e,radius:t,mass:t**roe*soe,velocity:Pn.origin,factor:Pn.origin}):i instanceof yo&&Ene(o,Gm(e,t))}function aoe(n,e,t,i){const r=document.querySelectorAll(e);r.length&&r.forEach(s=>{const o=s,a=n.retina.pixelRatio,l={x:(o.offsetLeft+o.offsetWidth*O0)*a,y:(o.offsetTop+o.offsetHeight*O0)*a},u=o.offsetWidth*O0*a,c=EU*a,f=t.type===Ah.circle?new yr(l.x,l.y,u+c):new yo(o.offsetLeft*a-c,o.offsetTop*a-c,o.offsetWidth*a+c*q3,o.offsetHeight*a+c*q3);i(l,u,f)})}function loe(n,e,t,i){RA(t,e,(r,s)=>aoe(n,r,s,(o,a,l)=>bU(n,o,a,l,i)))}function uoe(n,e){const t=n.retina.pixelRatio,i=EU*t,r=n.interactivity.mouse.position,s=n.retina.bounceModeDistance;!s||s<ooe||!r||bU(n,r,s,new yr(r.x,r.y,s+i),e)}class coe{constructor(){this.distance=200}load(e){Xe(e)||e.distance!==void 0&&(this.distance=e.distance)}}const p0="bounce";class foe extends Mo{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bounce;t&&(e.retina.bounceModeDistance=t.distance*e.retina.pixelRatio)}interact(){const e=this.container,t=e.actualOptions,i=t.interactivity.events,r=e.interactivity.status===lc,s=i.onHover.enable,o=i.onHover.mode,a=i.onDiv;r&&s&&Fn(p0,o)?uoe(this.container,l=>this.isEnabled(l)):loe(this.container,a,p0,l=>this.isEnabled(l))}isEnabled(e){const t=this.container,i=t.actualOptions,r=t.interactivity.mouse,s=((e==null?void 0:e.interactivity)??i.interactivity).events,o=s.onDiv;return!!r.position&&s.onHover.enable&&Fn(p0,s.onHover.mode)||PA(p0,o)}loadModeOptions(e,...t){e.bounce||(e.bounce=new coe);for(const i of t)e.bounce.load(i==null?void 0:i.bounce)}reset(){}}async function hoe(n,e=!0){Ut(n,"3.7.1"),await n.addInteractor("externalBounce",t=>Promise.resolve(new foe(t)),e)}class AU{constructor(){this.distance=200,this.duration=.4,this.mix=!1}load(e){if(!Xe(e)){if(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.mix!==void 0&&(this.mix=e.mix),e.opacity!==void 0&&(this.opacity=e.opacity),e.color!==void 0){const t=gr(this.color)?void 0:this.color;this.color=Si(e.color,i=>di.create(t,i))}e.size!==void 0&&(this.size=e.size)}}}class doe extends AU{constructor(){super(),this.selectors=[]}load(e){super.load(e),!Xe(e)&&e.selectors!==void 0&&(this.selectors=e.selectors)}}class poe extends AU{load(e){super.load(e),!Xe(e)&&(this.divs=Si(e.divs,t=>{const i=new doe;return i.load(t),i}))}}var Lo;(function(n){n.color="color",n.opacity="opacity",n.size="size"})(Lo||(Lo={}));function X3(n,e,t,i){if(e>=t){const r=n+(e-t)*i;return qs(r,n,e)}else if(e<t){const r=n-(t-e)*i;return qs(r,e,n)}}const yu="bubble",_S=0,moe=0,goe=2,$3=1,Y3=1,voe=0,yoe=0,wS=.5,SS=1;class xoe extends Mo{constructor(e,t){super(e),this._clickBubble=()=>{var c;const i=this.container,r=i.actualOptions,s=i.interactivity.mouse.clickPosition,o=r.interactivity.modes.bubble;if(!o||!s)return;i.bubble||(i.bubble={});const a=i.retina.bubbleModeDistance;if(!a||a<_S)return;const l=i.particles.quadTree.queryCircle(s,a,f=>this.isEnabled(f)),{bubble:u}=i;for(const f of l){if(!u.clicking)continue;f.bubble.inRange=!u.durationEnd;const h=f.getPosition(),m=Ir(h,s),v=(new Date().getTime()-(i.interactivity.mouse.clickTime??moe))/Kn;v>o.duration&&(u.durationEnd=!0),v>o.duration*goe&&(u.clicking=!1,u.durationEnd=!1);const g={bubbleObj:{optValue:i.retina.bubbleModeSize,value:f.bubble.radius},particlesObj:{optValue:Vo(f.options.size.value)*i.retina.pixelRatio,value:f.size.value},type:Lo.size};this._process(f,m,v,g);const x={bubbleObj:{optValue:o.opacity,value:f.bubble.opacity},particlesObj:{optValue:Vo(f.options.opacity.value),value:((c=f.opacity)==null?void 0:c.value)??$3},type:Lo.opacity};this._process(f,m,v,x),!u.durationEnd&&m<=a?this._hoverBubbleColor(f,m):delete f.bubble.color}},this._hoverBubble=()=>{const i=this.container,r=i.interactivity.mouse.position,s=i.retina.bubbleModeDistance;if(!s||s<_S||!r)return;const o=i.particles.quadTree.queryCircle(r,s,a=>this.isEnabled(a));for(const a of o){a.bubble.inRange=!0;const l=a.getPosition(),u=Ir(l,r),c=Y3-u/s;u<=s?c>=yoe&&i.interactivity.status===lc&&(this._hoverBubbleSize(a,c),this._hoverBubbleOpacity(a,c),this._hoverBubbleColor(a,c)):this.reset(a),i.interactivity.status===sE&&this.reset(a)}},this._hoverBubbleColor=(i,r,s)=>{const o=this.container.actualOptions,a=s??o.interactivity.modes.bubble;if(a){if(!i.bubble.finalColor){const l=a.color;if(!l)return;const u=Zi(l);i.bubble.finalColor=Ul(this._engine,u)}if(i.bubble.finalColor)if(a.mix){i.bubble.color=void 0;const l=i.getFillColor();i.bubble.color=l?lU(IA(l,i.bubble.finalColor,Y3-r,r)):i.bubble.finalColor}else i.bubble.color=i.bubble.finalColor}},this._hoverBubbleOpacity=(i,r,s)=>{var h,m;const o=this.container,a=o.actualOptions,l=(s==null?void 0:s.opacity)??((h=a.interactivity.modes.bubble)==null?void 0:h.opacity);if(!l)return;const u=i.options.opacity.value,c=((m=i.opacity)==null?void 0:m.value)??$3,f=X3(c,l,Vo(u),r);f!==void 0&&(i.bubble.opacity=f)},this._hoverBubbleSize=(i,r,s)=>{const o=this.container,a=s!=null&&s.size?s.size*o.retina.pixelRatio:o.retina.bubbleModeSize;if(a===void 0)return;const l=Vo(i.options.size.value)*o.retina.pixelRatio,u=i.size.value,c=X3(u,a,l,r);c!==void 0&&(i.bubble.radius=c)},this._process=(i,r,s,o)=>{const a=this.container,l=o.bubbleObj.optValue,u=a.actualOptions,c=u.interactivity.modes.bubble;if(!c||l===void 0)return;const f=c.duration,h=a.retina.bubbleModeDistance,m=o.particlesObj.optValue,v=o.bubbleObj.value,g=o.particlesObj.value??voe,x=o.type;if(!(!h||h<_S||l===m))if(a.bubble||(a.bubble={}),a.bubble.durationEnd)v&&(x===Lo.size&&delete i.bubble.radius,x===Lo.opacity&&delete i.bubble.opacity);else if(r<=h){if((v??g)!==l){const _=g-s*(g-l)/f;x===Lo.size&&(i.bubble.radius=_),x===Lo.opacity&&(i.bubble.opacity=_)}}else x===Lo.size&&delete i.bubble.radius,x===Lo.opacity&&delete i.bubble.opacity},this._singleSelectorHover=(i,r,s)=>{const o=this.container,a=document.querySelectorAll(r),l=o.actualOptions.interactivity.modes.bubble;!l||!a.length||a.forEach(u=>{const c=u,f=o.retina.pixelRatio,h={x:(c.offsetLeft+c.offsetWidth*wS)*f,y:(c.offsetTop+c.offsetHeight*wS)*f},m=c.offsetWidth*wS*f,v=s.type===Ah.circle?new yr(h.x,h.y,m):new yo(c.offsetLeft*f,c.offsetTop*f,c.offsetWidth*f,c.offsetHeight*f),g=o.particles.quadTree.query(v,x=>this.isEnabled(x));for(const x of g){if(!v.contains(x.getPosition()))continue;x.bubble.inRange=!0;const y=l.divs,_=tU(y,c);(!x.bubble.div||x.bubble.div!==c)&&(this.clear(x,i,!0),x.bubble.div=c),this._hoverBubbleSize(x,SS,_),this._hoverBubbleOpacity(x,SS,_),this._hoverBubbleColor(x,SS,_)}})},this._engine=t,e.bubble||(e.bubble={}),this.handleClickMode=i=>{i===yu&&(e.bubble||(e.bubble={}),e.bubble.clicking=!0)}}clear(e,t,i){e.bubble.inRange&&!i||(delete e.bubble.div,delete e.bubble.opacity,delete e.bubble.radius,delete e.bubble.color)}init(){const e=this.container,t=e.actualOptions.interactivity.modes.bubble;t&&(e.retina.bubbleModeDistance=t.distance*e.retina.pixelRatio,t.size!==void 0&&(e.retina.bubbleModeSize=t.size*e.retina.pixelRatio))}interact(e){const t=this.container.actualOptions,i=t.interactivity.events,r=i.onHover,s=i.onClick,o=r.enable,a=r.mode,l=s.enable,u=s.mode,c=i.onDiv;o&&Fn(yu,a)?this._hoverBubble():l&&Fn(yu,u)?this._clickBubble():RA(yu,c,(f,h)=>this._singleSelectorHover(e,f,h))}isEnabled(e){const t=this.container,i=t.actualOptions,r=t.interactivity.mouse,s=((e==null?void 0:e.interactivity)??i.interactivity).events,{onClick:o,onDiv:a,onHover:l}=s,u=PA(yu,a);return u||l.enable&&r.position||o.enable&&r.clickPosition?Fn(yu,l.mode)||Fn(yu,o.mode)||u:!1}loadModeOptions(e,...t){e.bubble||(e.bubble=new poe);for(const i of t)e.bubble.load(i==null?void 0:i.bubble)}reset(e){e.bubble.inRange=!1}}async function _oe(n,e=!0){Ut(n,"3.7.1"),await n.addInteractor("externalBubble",t=>Promise.resolve(new xoe(t,n)),e)}class woe{constructor(){this.opacity=.5}load(e){Xe(e)||e.opacity!==void 0&&(this.opacity=e.opacity)}}class Soe{constructor(){this.distance=80,this.links=new woe,this.radius=60}load(e){Xe(e)||(e.distance!==void 0&&(this.distance=e.distance),this.links.load(e.links),e.radius!==void 0&&(this.radius=e.radius))}}const Z3=0,K3=1,Moe=0;function Eoe(n,e,t,i){const r=Math.floor(t.getRadius()/e.getRadius()),s=e.getFillColor(),o=t.getFillColor();if(!s||!o)return;const a=e.getPosition(),l=t.getPosition(),u=IA(s,o,e.getRadius(),t.getRadius()),c=n.createLinearGradient(a.x,a.y,l.x,l.y);return c.addColorStop(Z3,Eh(s,i)),c.addColorStop(qs(r,Z3,K3),$o(u,i)),c.addColorStop(K3,Eh(o,i)),c}function boe(n,e,t,i,r){mp(n,i,r),n.lineWidth=e,n.strokeStyle=t,n.stroke()}function Aoe(n,e,t,i){const r=n.actualOptions,s=r.interactivity.modes.connect;if(s)return Eoe(e,t,i,s.links.opacity)}function Coe(n,e,t){n.canvas.draw(i=>{const r=Aoe(n,i,e,t);if(!r)return;const s=e.getPosition(),o=t.getPosition();boe(i,e.retina.linksWidth??Moe,r,s,o)})}const Doe="connect",J3=0;class Toe extends Mo{constructor(e){super(e)}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.connect;t&&(e.retina.connectModeDistance=t.distance*e.retina.pixelRatio,e.retina.connectModeRadius=t.radius*e.retina.pixelRatio)}interact(){const e=this.container;if(e.actualOptions.interactivity.events.onHover.enable&&e.interactivity.status==="pointermove"){const i=e.interactivity.mouse.position,{connectModeDistance:r,connectModeRadius:s}=e.retina;if(!r||r<J3||!s||s<J3||!i)return;const o=Math.abs(s),a=e.particles.quadTree.queryCircle(i,o,l=>this.isEnabled(l));a.forEach((l,u)=>{const c=l.getPosition(),f=1;for(const h of a.slice(u+f)){const m=h.getPosition(),v=Math.abs(r),g=Math.abs(c.x-m.x),x=Math.abs(c.y-m.y);g<v&&x<v&&Coe(e,l,h)}})}}isEnabled(e){const t=this.container,i=t.interactivity.mouse,r=((e==null?void 0:e.interactivity)??t.actualOptions.interactivity).events;return r.onHover.enable&&i.position?Fn(Doe,r.onHover.mode):!1}loadModeOptions(e,...t){e.connect||(e.connect=new Soe);for(const i of t)e.connect.load(i==null?void 0:i.connect)}reset(){}}async function Poe(n,e=!0){Ut(n,"3.7.1"),await n.addInteractor("externalConnect",t=>Promise.resolve(new Toe(t)),e)}class Roe{constructor(){this.blink=!1,this.consent=!1,this.opacity=1}load(e){Xe(e)||(e.blink!==void 0&&(this.blink=e.blink),e.color!==void 0&&(this.color=di.create(this.color,e.color)),e.consent!==void 0&&(this.consent=e.consent),e.opacity!==void 0&&(this.opacity=e.opacity))}}class Ioe{constructor(){this.distance=100,this.links=new Roe}load(e){Xe(e)||(e.distance!==void 0&&(this.distance=e.distance),this.links.load(e.links))}}const Foe=0;function Noe(n,e,t,i,r,s){mp(n,t,i),n.strokeStyle=$o(r,s),n.lineWidth=e,n.stroke()}function Loe(n,e,t,i,r){n.canvas.draw(s=>{const o=e.getPosition();Noe(s,e.retina.linksWidth??Foe,o,r,t,i)})}const Ooe="grab",zoe=0,Boe=0;class Uoe extends Mo{constructor(e,t){super(e),this._engine=t}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.grab;t&&(e.retina.grabModeDistance=t.distance*e.retina.pixelRatio)}interact(){var a;const e=this.container,t=e.actualOptions,i=t.interactivity;if(!i.modes.grab||!i.events.onHover.enable||e.interactivity.status!==lc)return;const r=e.interactivity.mouse.position;if(!r)return;const s=e.retina.grabModeDistance;if(!s||s<zoe)return;const o=e.particles.quadTree.queryCircle(r,s,l=>this.isEnabled(l));for(const l of o){const u=l.getPosition(),c=Ir(u,r);if(c>s)continue;const f=i.modes.grab.links,h=f.opacity,m=h-c*h/s;if(m<=Boe)continue;const v=f.color??((a=l.options.links)==null?void 0:a.color);if(!e.particles.grabLineColor&&v){const x=i.modes.grab.links;e.particles.grabLineColor=cU(this._engine,v,x.blink,x.consent)}const g=lE(l,void 0,e.particles.grabLineColor);g&&Loe(e,l,g,m,r)}}isEnabled(e){const t=this.container,i=t.interactivity.mouse,r=((e==null?void 0:e.interactivity)??t.actualOptions.interactivity).events;return r.onHover.enable&&!!i.position&&Fn(Ooe,r.onHover.mode)}loadModeOptions(e,...t){e.grab||(e.grab=new Ioe);for(const i of t)e.grab.load(i==null?void 0:i.grab)}reset(){}}async function koe(n,e=!0){Ut(n,"3.7.1"),await n.addInteractor("externalGrab",t=>Promise.resolve(new Uoe(t,n)),e)}const Hoe="pause";class Voe extends Mo{constructor(e){super(e),this.handleClickMode=t=>{if(t!==Hoe)return;const i=this.container;i.animationStatus?i.pause():i.play()}}clear(){}init(){}interact(){}isEnabled(){return!0}reset(){}}async function Woe(n,e=!0){Ut(n,"3.7.1"),await n.addInteractor("externalPause",t=>Promise.resolve(new Voe(t)),e)}class Goe{constructor(){this.default=!0,this.groups=[],this.quantity=4}load(e){if(Xe(e))return;e.default!==void 0&&(this.default=e.default),e.groups!==void 0&&(this.groups=e.groups.map(i=>i)),this.groups.length||(this.default=!0);const t=e.quantity;t!==void 0&&(this.quantity=It(t))}}const joe="push",qoe=0;class Xoe extends Mo{constructor(e){super(e),this.handleClickMode=t=>{if(t!==joe)return;const i=this.container,r=i.actualOptions,s=r.interactivity.modes.push;if(!s)return;const o=st(s.quantity);if(o<=qoe)return;const a=Vm([void 0,...s.groups]),l=a!==void 0?i.actualOptions.particles.groups[a]:void 0;i.particles.push(o,i.interactivity.mouse,l,a)}}clear(){}init(){}interact(){}isEnabled(){return!0}loadModeOptions(e,...t){e.push||(e.push=new Goe);for(const i of t)e.push.load(i==null?void 0:i.push)}reset(){}}async function $oe(n,e=!0){Ut(n,"3.7.1"),await n.addInteractor("externalPush",t=>Promise.resolve(new Xoe(t)),e)}class Yoe{constructor(){this.quantity=2}load(e){if(Xe(e))return;const t=e.quantity;t!==void 0&&(this.quantity=It(t))}}const Zoe="remove";class Koe extends Mo{constructor(e){super(e),this.handleClickMode=t=>{const i=this.container,r=i.actualOptions;if(!r.interactivity.modes.remove||t!==Zoe)return;const s=st(r.interactivity.modes.remove.quantity);i.particles.removeQuantity(s)}}clear(){}init(){}interact(){}isEnabled(){return!0}loadModeOptions(e,...t){e.remove||(e.remove=new Yoe);for(const i of t)e.remove.load(i==null?void 0:i.remove)}reset(){}}async function Joe(n,e=!0){Ut(n,"3.7.1"),await n.addInteractor("externalRemove",t=>Promise.resolve(new Koe(t)),e)}class CU{constructor(){this.distance=200,this.duration=.4,this.factor=100,this.speed=1,this.maxSpeed=50,this.easing=Ku.easeOutQuad}load(e){Xe(e)||(e.distance!==void 0&&(this.distance=e.distance),e.duration!==void 0&&(this.duration=e.duration),e.easing!==void 0&&(this.easing=e.easing),e.factor!==void 0&&(this.factor=e.factor),e.speed!==void 0&&(this.speed=e.speed),e.maxSpeed!==void 0&&(this.maxSpeed=e.maxSpeed))}}class Qoe extends CU{constructor(){super(),this.selectors=[]}load(e){super.load(e),!Xe(e)&&e.selectors!==void 0&&(this.selectors=e.selectors)}}class eae extends CU{load(e){super.load(e),!Xe(e)&&(this.divs=Si(e.divs,t=>{const i=new Qoe;return i.load(t),i}))}}const xu="repulse",tae=0,nae=6,iae=3,rae=2,sae=0,oae=0,aae=1,MS=.5;class lae extends Mo{constructor(e,t){super(t),this._clickRepulse=()=>{const i=this.container,r=i.actualOptions.interactivity.modes.repulse;if(!r)return;const s=i.repulse??{particles:[]};if(s.finish||(s.count||(s.count=0),s.count++,s.count===i.particles.count&&(s.finish=!0)),s.clicking){const o=i.retina.repulseModeDistance;if(!o||o<tae)return;const a=Math.pow(o/nae,iae),l=i.interactivity.mouse.clickPosition;if(l===void 0)return;const u=new yr(l.x,l.y,a),c=i.particles.quadTree.query(u,f=>this.isEnabled(f));for(const f of c){const{dx:h,dy:m,distance:v}=vr(l,f.position),g=v**rae,x=r.speed,y=-a*x/g;if(g<=a){s.particles.push(f);const _=Pn.create(h,m);_.length=y,f.velocity.setTo(_)}}}else if(s.clicking===!1){for(const o of s.particles)o.velocity.setTo(o.initialVelocity);s.particles=[]}},this._hoverRepulse=()=>{const i=this.container,r=i.interactivity.mouse.position,s=i.retina.repulseModeDistance;!s||s<sae||!r||this._processRepulse(r,s,new yr(r.x,r.y,s))},this._processRepulse=(i,r,s,o)=>{const a=this.container,l=a.particles.quadTree.query(s,x=>this.isEnabled(x)),u=a.actualOptions.interactivity.modes.repulse;if(!u)return;const{easing:c,speed:f,factor:h,maxSpeed:m}=u,v=this._engine.getEasing(c),g=((o==null?void 0:o.speed)??f)*h;for(const x of l){const{dx:y,dy:_,distance:w}=vr(x.position,i),E=qs(v(aae-w/r)*g,oae,m),C=Pn.create(w?y/w*E:g,w?_/w*E:g);x.position.addTo(C)}},this._singleSelectorRepulse=(i,r)=>{const s=this.container,o=s.actualOptions.interactivity.modes.repulse;if(!o)return;const a=document.querySelectorAll(i);a.length&&a.forEach(l=>{const u=l,c=s.retina.pixelRatio,f={x:(u.offsetLeft+u.offsetWidth*MS)*c,y:(u.offsetTop+u.offsetHeight*MS)*c},h=u.offsetWidth*MS*c,m=r.type===Ah.circle?new yr(f.x,f.y,h):new yo(u.offsetLeft*c,u.offsetTop*c,u.offsetWidth*c,u.offsetHeight*c),v=o.divs,g=tU(v,u);this._processRepulse(f,h,m,g)})},this._engine=e,t.repulse||(t.repulse={particles:[]}),this.handleClickMode=i=>{const r=this.container.actualOptions,s=r.interactivity.modes.repulse;if(!s||i!==xu)return;t.repulse||(t.repulse={particles:[]});const o=t.repulse;o.clicking=!0,o.count=0;for(const a of t.repulse.particles)this.isEnabled(a)&&a.velocity.setTo(a.initialVelocity);o.particles=[],o.finish=!1,setTimeout(()=>{t.destroyed||(o.clicking=!1)},s.duration*Kn)}}clear(){}init(){const e=this.container,t=e.actualOptions.interactivity.modes.repulse;t&&(e.retina.repulseModeDistance=t.distance*e.retina.pixelRatio)}interact(){const e=this.container,t=e.actualOptions,i=e.interactivity.status===lc,r=t.interactivity.events,s=r.onHover,o=s.enable,a=s.mode,l=r.onClick,u=l.enable,c=l.mode,f=r.onDiv;i&&o&&Fn(xu,a)?this._hoverRepulse():u&&Fn(xu,c)?this._clickRepulse():RA(xu,f,(h,m)=>this._singleSelectorRepulse(h,m))}isEnabled(e){const t=this.container,i=t.actualOptions,r=t.interactivity.mouse,s=((e==null?void 0:e.interactivity)??i.interactivity).events,o=s.onDiv,a=s.onHover,l=s.onClick,u=PA(xu,o);if(!(u||a.enable&&r.position||l.enable&&r.clickPosition))return!1;const c=a.mode,f=l.mode;return Fn(xu,c)||Fn(xu,f)||u}loadModeOptions(e,...t){e.repulse||(e.repulse=new eae);for(const i of t)e.repulse.load(i==null?void 0:i.repulse)}reset(){}}async function uae(n,e=!0){Ut(n,"3.7.1"),await n.addInteractor("externalRepulse",t=>Promise.resolve(new lae(n,t)),e)}class cae{constructor(){this.factor=3,this.radius=200}load(e){Xe(e)||(e.factor!==void 0&&(this.factor=e.factor),e.radius!==void 0&&(this.radius=e.radius))}}const fae="slow",hae=0;class dae extends Mo{constructor(e){super(e)}clear(e,t,i){e.slow.inRange&&!i||(e.slow.factor=1)}init(){const e=this.container,t=e.actualOptions.interactivity.modes.slow;t&&(e.retina.slowModeRadius=t.radius*e.retina.pixelRatio)}interact(){}isEnabled(e){const t=this.container,i=t.interactivity.mouse,r=((e==null?void 0:e.interactivity)??t.actualOptions.interactivity).events;return r.onHover.enable&&!!i.position&&Fn(fae,r.onHover.mode)}loadModeOptions(e,...t){e.slow||(e.slow=new cae);for(const i of t)e.slow.load(i==null?void 0:i.slow)}reset(e){e.slow.inRange=!1;const t=this.container,i=t.actualOptions,r=t.interactivity.mouse.position,s=t.retina.slowModeRadius,o=i.interactivity.modes.slow;if(!o||!s||s<hae||!r)return;const a=e.getPosition(),l=Ir(r,a),u=l/s,c=o.factor,{slow:f}=e;l>s||(f.inRange=!0,f.factor=u/c)}}async function pae(n,e=!0){Ut(n,"3.7.1"),await n.addInteractor("externalSlow",t=>Promise.resolve(new dae(t)),e)}const mae=0,gae=1,vae=/(#(?:[0-9a-f]{2}){2,4}|(#[0-9a-f]{3})|(rgb|hsl)a?\((-?\d+%?[,\s]+){2,3}\s*[\d.]+%?\))|currentcolor/gi;function yae(n,e,t){const{svgData:i}=n;if(!i)return"";const r=Eh(e,t);if(i.includes("fill"))return i.replace(vae,()=>r);const s=i.indexOf(">");return`${i.substring(mae,s)} fill="${r}"${i.substring(s)}`}async function b_(n){return new Promise(e=>{n.loading=!0;const t=new Image;n.element=t,t.addEventListener("load",()=>{n.loading=!1,e()}),t.addEventListener("error",()=>{n.element=void 0,n.error=!0,n.loading=!1,cc().error(`${js} loading image: ${n.source}`),e()}),t.src=n.source})}async function xae(n){if(n.type!=="svg"){await b_(n);return}n.loading=!0;const e=await fetch(n.source);e.ok?n.svgData=await e.text():(cc().error(`${js} Image not found`),n.error=!0),n.loading=!1}function _ae(n,e,t,i){var o;const r=yae(n,t,((o=i.opacity)==null?void 0:o.value)??gae),s={color:t,gif:e.gif,data:{...n,svgData:r},loaded:!1,ratio:e.width/e.height,replaceColor:e.replaceColor,source:e.src};return new Promise(a=>{const l=new Blob([r],{type:"image/svg+xml"}),u=URL||window.URL||window.webkitURL||window,c=u.createObjectURL(l),f=new Image;f.addEventListener("load",()=>{s.loaded=!0,s.element=f,a(s),u.revokeObjectURL(c)});const h=async()=>{u.revokeObjectURL(c);const m={...n,error:!1,loading:!0};await b_(m),s.loaded=!0,s.element=m.element,a(s)};f.addEventListener("error",()=>void h()),f.src=c})}const ES=[0,4,2,1],Q3=[8,8,4,2];class wae{constructor(e){this.pos=0,this.data=new Uint8ClampedArray(e)}getString(e){const t=this.data.slice(this.pos,this.pos+e);return this.pos+=t.length,t.reduce((i,r)=>i+String.fromCharCode(r),"")}nextByte(){return this.data[this.pos++]}nextTwoBytes(){return this.pos+=2,this.data[this.pos-2]+(this.data[this.pos-1]<<8)}readSubBlocks(){let e="",t=0;const i=0,r=0;do{t=this.data[this.pos++];for(let s=t;--s>=i;e+=String.fromCharCode(this.data[this.pos++]));}while(t!==r);return e}readSubBlocksBin(){let e=this.data[this.pos],t=0;const i=0,r=1;for(let o=0;e!==i;o+=e+r,e=this.data[this.pos+o])t+=e;const s=new Uint8Array(t);e=this.data[this.pos++];for(let o=0;e!==i;e=this.data[this.pos++])for(let a=e;--a>=i;s[o++]=this.data[this.pos++]);return s}skipSubBlocks(){for(const e=1,t=0;this.data[this.pos]!==t;this.pos+=this.data[this.pos]+e);this.pos++}}var no;(function(n){n[n.Replace=0]="Replace",n[n.Combine=1]="Combine",n[n.RestoreBackground=2]="RestoreBackground",n[n.RestorePrevious=3]="RestorePrevious",n[n.UndefinedA=4]="UndefinedA",n[n.UndefinedB=5]="UndefinedB",n[n.UndefinedC=6]="UndefinedC",n[n.UndefinedD=7]="UndefinedD"})(no||(no={}));var ba;(function(n){n[n.Extension=33]="Extension",n[n.ApplicationExtension=255]="ApplicationExtension",n[n.GraphicsControlExtension=249]="GraphicsControlExtension",n[n.PlainTextExtension=1]="PlainTextExtension",n[n.CommentExtension=254]="CommentExtension",n[n.Image=44]="Image",n[n.EndOfFile=59]="EndOfFile"})(ba||(ba={}));const kr={x:0,y:0},Sae=0,eI=.5,Mae=0,tI=0,hE=0;function DU(n,e){const t=[];for(let i=0;i<e;i++)t.push({r:n.data[n.pos],g:n.data[n.pos+1],b:n.data[n.pos+2]}),n.pos+=3;return t}function Eae(n,e,t,i){switch(n.nextByte()){case ba.GraphicsControlExtension:{const r=e.frames[t(!1)];n.pos++;const s=n.nextByte();r.GCreserved=(s&224)>>>5,r.disposalMethod=(s&28)>>>2,r.userInputDelayFlag=(s&2)===2;const o=(s&1)===1;r.delayTime=n.nextTwoBytes()*10;const a=n.nextByte();o&&i(a),n.pos++;break}case ba.ApplicationExtension:{n.pos++;const r={identifier:n.getString(8),authenticationCode:n.getString(3),data:n.readSubBlocksBin()};e.applicationExtensions.push(r);break}case ba.CommentExtension:{e.comments.push([t(!1),n.readSubBlocks()]);break}case ba.PlainTextExtension:{if(e.globalColorTable.length===0)throw new EvalError("plain text extension without global color table");n.pos++,e.frames[t(!1)].plainTextData={left:n.nextTwoBytes(),top:n.nextTwoBytes(),width:n.nextTwoBytes(),height:n.nextTwoBytes(),charSize:{width:n.nextTwoBytes(),height:n.nextTwoBytes()},foregroundColor:n.nextByte(),backgroundColor:n.nextByte(),text:n.readSubBlocks()};break}default:n.skipSubBlocks();break}}async function bae(n,e,t,i,r,s){const o=e.frames[i(!0)];o.left=n.nextTwoBytes(),o.top=n.nextTwoBytes(),o.width=n.nextTwoBytes(),o.height=n.nextTwoBytes();const a=n.nextByte(),l=(a&128)===128,u=(a&64)===64;o.sortFlag=(a&32)===32,o.reserved=(a&24)>>>3;const c=1<<(a&7)+1;l&&(o.localColorTable=DU(n,c));const f=y=>{const{r:_,g:w,b:E}=(l?o.localColorTable:e.globalColorTable)[y];return y!==r(null)?{r:_,g:w,b:E,a:255}:{r:_,g:w,b:E,a:t?~~((_+w+E)/3):0}},h=(()=>{try{return new ImageData(o.width,o.height,{colorSpace:"srgb"})}catch(y){if(y instanceof DOMException&&y.name==="IndexSizeError")return null;throw y}})();if(h==null)throw new EvalError("GIF frame size is to large");const m=n.nextByte(),v=n.readSubBlocksBin(),g=1<<m,x=(y,_)=>{const w=y>>>3,E=y&7;return(v[w]+(v[w+1]<<8)+(v[w+2]<<16)&(1<<_)-1<<E)>>>E};if(u){for(let y=0,_=m+1,w=0,E=[[0]],C=0;C<4;C++)if(ES[C]<o.height){let M=0,T=0,R=!1;for(;!R;){const A=y;if(y=x(w,_),w+=_+1,y===g){_=m+1,E.length=g+2;for(let D=0;D<E.length;D++)E[D]=D<g?[D]:[]}else{y>=E.length?E.push(E[A].concat(E[A][0])):A!==g&&E.push(E[A].concat(E[y][0]));for(const D of E[y]){const{r:I,g:L,b:H,a:k}=f(D);h.data.set([I,L,H,k],ES[C]*o.width+Q3[C]*T+M%(o.width*4)),M+=4}E.length===1<<_&&_<12&&_++}M===o.width*4*(T+1)&&(T++,ES[C]+Q3[C]*T>=o.height&&(R=!0))}}o.image=h,o.bitmap=await createImageBitmap(h)}else{let y=0,_=m+1,w=0,E=-4,C=!1;const M=[[0]];for(;!C;){const T=y;if(y=x(w,_),w+=_,y===g){_=m+1,M.length=g+2;for(let R=0;R<M.length;R++)M[R]=R<g?[R]:[]}else{if(y===g+1){C=!0;break}y>=M.length?M.push(M[T].concat(M[T][0])):T!==g&&M.push(M[T].concat(M[y][0]));for(const R of M[y]){const{r:A,g:D,b:I,a:L}=f(R);h.data.set([A,D,I,L],E+=4)}M.length>=1<<_&&_<12&&_++}}o.image=h,o.bitmap=await createImageBitmap(h)}}async function Aae(n,e,t,i,r,s){switch(n.nextByte()){case ba.EndOfFile:return!0;case ba.Image:await bae(n,e,t,i,r);break;case ba.Extension:Eae(n,e,i,r);break;default:throw new EvalError("undefined block found")}return!1}function Cae(n){for(const e of n.applicationExtensions)if(e.identifier+e.authenticationCode==="NETSCAPE2.0")return e.data[1]+(e.data[2]<<8);return NaN}async function Dae(n,e,t){t||(t=!1);const i=await fetch(n);if(!i.ok&&i.status===404)throw new EvalError("file not found");const r=await i.arrayBuffer(),s={width:0,height:0,totalTime:0,colorRes:0,pixelAspectRatio:0,frames:[],sortFlag:!1,globalColorTable:[],backgroundImage:new ImageData(1,1,{colorSpace:"srgb"}),comments:[],applicationExtensions:[]},o=new wae(new Uint8ClampedArray(r));if(o.getString(6)!=="GIF89a")throw new Error("not a supported GIF file");s.width=o.nextTwoBytes(),s.height=o.nextTwoBytes();const a=o.nextByte(),l=(a&128)===128;s.colorRes=(a&112)>>>4,s.sortFlag=(a&8)===8;const u=1<<(a&7)+1,c=o.nextByte();s.pixelAspectRatio=o.nextByte(),s.pixelAspectRatio!==0&&(s.pixelAspectRatio=(s.pixelAspectRatio+15)/64),l&&(s.globalColorTable=DU(o,u));const f=(()=>{try{return new ImageData(s.width,s.height,{colorSpace:"srgb"})}catch(E){if(E instanceof DOMException&&E.name==="IndexSizeError")return null;throw E}})();if(f==null)throw new Error("GIF frame size is to large");const{r:h,g:m,b:v}=s.globalColorTable[c];f.data.set(l?[h,m,v,255]:[0,0,0,0]);for(let E=4;E<f.data.length;E*=2)f.data.copyWithin(E,0,E);s.backgroundImage=f;let g=-1,x=!0,y=-1;const _=E=>(E&&(x=!0),g),w=E=>(E!=null&&(y=E),y);try{do x&&(s.frames.push({left:0,top:0,width:0,height:0,disposalMethod:no.Replace,image:new ImageData(1,1,{colorSpace:"srgb"}),plainTextData:null,userInputDelayFlag:!1,delayTime:0,sortFlag:!1,localColorTable:[],reserved:0,GCreserved:0}),g++,y=-1,x=!1);while(!await Aae(o,s,t,_,w,e));s.frames.length--;for(const E of s.frames){if(E.userInputDelayFlag&&E.delayTime===0){s.totalTime=1/0;break}s.totalTime+=E.delayTime}return s}catch(E){throw E instanceof EvalError?new Error(`error while parsing frame ${g} "${E.message}"`):E}}function Tae(n){const{context:e,radius:t,particle:i,delta:r}=n,s=i.image;if(!(s!=null&&s.gifData)||!s.gif)return;const o=new OffscreenCanvas(s.gifData.width,s.gifData.height),a=o.getContext("2d");if(!a)throw new Error("could not create offscreen canvas context");a.imageSmoothingQuality="low",a.imageSmoothingEnabled=!1,a.clearRect(kr.x,kr.y,o.width,o.height),i.gifLoopCount===void 0&&(i.gifLoopCount=s.gifLoopCount??hE);let l=i.gifFrame??Sae;const u={x:-s.gifData.width*eI,y:-s.gifData.height*eI},c=s.gifData.frames[l];if(i.gifTime===void 0&&(i.gifTime=Mae),!!c.bitmap){switch(e.scale(t/s.gifData.width,t/s.gifData.height),c.disposalMethod){case no.UndefinedA:case no.UndefinedB:case no.UndefinedC:case no.UndefinedD:case no.Replace:a.drawImage(c.bitmap,c.left,c.top),e.drawImage(o,u.x,u.y),a.clearRect(kr.x,kr.y,o.width,o.height);break;case no.Combine:a.drawImage(c.bitmap,c.left,c.top),e.drawImage(o,u.x,u.y);break;case no.RestoreBackground:a.drawImage(c.bitmap,c.left,c.top),e.drawImage(o,u.x,u.y),a.clearRect(kr.x,kr.y,o.width,o.height),s.gifData.globalColorTable.length?a.putImageData(s.gifData.backgroundImage,u.x,u.y):a.putImageData(s.gifData.frames[tI].image,u.x+c.left,u.y+c.top);break;case no.RestorePrevious:{const f=a.getImageData(kr.x,kr.y,o.width,o.height);a.drawImage(c.bitmap,c.left,c.top),e.drawImage(o,u.x,u.y),a.clearRect(kr.x,kr.y,o.width,o.height),a.putImageData(f,kr.x,kr.y)}break}if(i.gifTime+=r.value,i.gifTime>c.delayTime){if(i.gifTime-=c.delayTime,++l>=s.gifData.frames.length){if(--i.gifLoopCount<=hE)return;l=tI,a.clearRect(kr.x,kr.y,o.width,o.height)}i.gifFrame=l}e.scale(s.gifData.width/t,s.gifData.height/t)}}async function Pae(n){if(n.type!=="gif"){await b_(n);return}n.loading=!0;try{n.gifData=await Dae(n.source),n.gifLoopCount=Cae(n.gifData)??hE,n.gifLoopCount||(n.gifLoopCount=1/0)}catch{n.error=!0}n.loading=!1}const Rae=2,Iae=1,Fae=12,Nae=1;class Lae{constructor(e){this.validTypes=["image","images"],this.loadImageShape=async t=>{if(!this._engine.loadImage)throw new Error(`${js} image shape not initialized`);await this._engine.loadImage({gif:t.gif,name:t.name,replaceColor:t.replaceColor??!1,src:t.src})},this._engine=e}addImage(e){this._engine.images||(this._engine.images=[]),this._engine.images.push(e)}draw(e){const{context:t,radius:i,particle:r,opacity:s}=e,o=r.image,a=o==null?void 0:o.element;if(o){if(t.globalAlpha=s,o.gif&&o.gifData)Tae(e);else if(a){const l=o.ratio,u={x:-i,y:-i},c=i*Rae;t.drawImage(a,u.x,u.y,c,c/l)}t.globalAlpha=Iae}}getSidesCount(){return Fae}async init(e){const t=e.actualOptions;if(!(!t.preload||!this._engine.loadImage))for(const i of t.preload)await this._engine.loadImage(i)}loadShape(e){if(e.shape!=="image"&&e.shape!=="images")return;this._engine.images||(this._engine.images=[]);const t=e.shapeData;if(!t)return;this._engine.images.find(r=>r.name===t.name||r.source===t.src)||this.loadImageShape(t).then(()=>{this.loadShape(e)})}particleInit(e,t){if(t.shape!=="image"&&t.shape!=="images")return;this._engine.images||(this._engine.images=[]);const i=this._engine.images,r=t.shapeData;if(!r)return;const s=t.getFillColor(),o=i.find(l=>l.name===r.name||l.source===r.src);if(!o)return;const a=r.replaceColor??o.replaceColor;if(o.loading){setTimeout(()=>{this.particleInit(e,t)});return}(async()=>{let l;o.svgData&&s?l=await _ae(o,r,s,t):l={color:s,data:o,element:o.element,gif:o.gif,gifData:o.gifData,gifLoopCount:o.gifLoopCount,loaded:!0,ratio:r.width&&r.height?r.width/r.height:o.ratio??Nae,replaceColor:a,source:r.src},l.ratio||(l.ratio=1);const u=r.fill??t.shapeFill,c=r.close??t.shapeClose,f={image:l,fill:u,close:c};t.image=f.image,t.shapeFill=f.fill,t.shapeClose=f.close})()}}class Oae{constructor(){this.src="",this.gif=!1}load(e){Xe(e)||(e.gif!==void 0&&(this.gif=e.gif),e.height!==void 0&&(this.height=e.height),e.name!==void 0&&(this.name=e.name),e.replaceColor!==void 0&&(this.replaceColor=e.replaceColor),e.src!==void 0&&(this.src=e.src),e.width!==void 0&&(this.width=e.width))}}class zae{constructor(e){this.id="imagePreloader",this._engine=e}async getPlugin(){return await Promise.resolve(),{}}loadOptions(e,t){if(!(t!=null&&t.preload))return;e.preload||(e.preload=[]);const i=e.preload;for(const r of t.preload){const s=i.find(o=>o.name===r.name||o.src===r.src);if(s)s.load(r);else{const o=new Oae;o.load(r),i.push(o)}}}needsPlugin(){return!0}}const Bae=3;function Uae(n){n.loadImage||(n.loadImage=async e=>{if(!e.name&&!e.src)throw new Error(`${js} no image source provided`);if(n.images||(n.images=[]),!n.images.find(t=>t.name===e.name||t.source===e.src))try{const t={gif:e.gif??!1,name:e.name??e.src,source:e.src,type:e.src.substring(e.src.length-Bae),error:!1,loading:!0,replaceColor:e.replaceColor,ratio:e.width&&e.height?e.width/e.height:void 0};n.images.push(t);let i;e.gif?i=Pae:i=e.replaceColor?xae:b_,await i(t)}catch{throw new Error(`${js} ${e.name??e.src} not found`)}})}async function kae(n,e=!0){Ut(n,"3.7.1"),Uae(n);const t=new zae(n);await n.addPlugin(t,e),await n.addShape(new Lae(n),e)}class Hae extends So{constructor(){super(),this.sync=!1}load(e){Xe(e)||(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class Vae extends So{constructor(){super(),this.sync=!1}load(e){Xe(e)||(super.load(e),e.sync!==void 0&&(this.sync=e.sync))}}class Wae{constructor(){this.count=0,this.delay=new Hae,this.duration=new Vae}load(e){Xe(e)||(e.count!==void 0&&(this.count=e.count),this.delay.load(e.delay),this.duration.load(e.duration))}}const xf=0,Gae=-1,nI=0,iI=0;function jae(n,e,t){if(!n.life)return;const i=n.life;let r=!1;if(n.spawning)if(i.delayTime+=e.value,i.delayTime>=n.life.delay)r=!0,n.spawning=!1,i.delayTime=xf,i.time=xf;else return;if(i.duration===Gae||n.spawning||(r?i.time=xf:i.time+=e.value,i.time<i.duration))return;if(i.time=xf,n.life.count>nI&&n.life.count--,n.life.count===nI){n.destroy();return}const s=It(iI,t.width),o=It(iI,t.width);n.position.x=Yi(s),n.position.y=Yi(o),n.spawning=!0,i.delayTime=xf,i.time=xf,n.reset();const a=n.options.life;a&&(i.delay=st(a.delay.value)*Kn,i.duration=st(a.duration.value)*Kn)}const _u=0,rI=1,sI=-1;class qae{constructor(e){this.container=e}init(e){const t=this.container,i=e.options,r=i.life;r&&(e.life={delay:t.retina.reduceFactor?st(r.delay.value)*(r.delay.sync?rI:Xt())/t.retina.reduceFactor*Kn:_u,delayTime:_u,duration:t.retina.reduceFactor?st(r.duration.value)*(r.duration.sync?rI:Xt())/t.retina.reduceFactor*Kn:_u,time:_u,count:r.count},e.life.duration<=_u&&(e.life.duration=sI),e.life.count<=_u&&(e.life.count=sI),e.life&&(e.spawning=e.life.delay>_u))}isEnabled(e){return!e.destroyed}loadOptions(e,...t){e.life||(e.life=new Wae);for(const i of t)e.life.load(i==null?void 0:i.life)}update(e,t){!this.isEnabled(e)||!e.life||jae(e,t,this.container.canvas.size)}}async function Xae(n,e=!0){Ut(n,"3.7.1"),await n.addParticleUpdater("life",async t=>Promise.resolve(new qae(t)),e)}function $ae(n){const{context:e,particle:t,radius:i}=n,r=t.shapeData,s=0;e.moveTo(-i,s),e.lineTo(i,s),e.lineCap=(r==null?void 0:r.cap)??"butt"}const Yae=1;class Zae{constructor(){this.validTypes=["line"]}draw(e){$ae(e)}getSidesCount(){return Yae}}async function Kae(n,e=!0){Ut(n,"3.7.1"),await n.addShape(new Zae,e)}const oI=.5;class Jae{init(){}isEnabled(e){return!fc()&&!e.destroyed&&e.container.actualOptions.interactivity.events.onHover.parallax.enable}move(e){const t=e.container,i=t.actualOptions,r=i.interactivity.events.onHover.parallax;if(fc()||!r.enable)return;const s=r.force,o=t.interactivity.mouse.position;if(!o)return;const a=t.canvas.size,l={x:a.width*oI,y:a.height*oI},u=r.smooth,c=e.getRadius()/s,f={x:(o.x-l.x)*c,y:(o.y-l.y)*c},{offset:h}=e;h.x+=(f.x-h.x)/u,h.y+=(f.y-h.y)/u}}async function Qae(n,e=!0){Ut(n,"3.7.1"),await n.addMover("parallax",()=>Promise.resolve(new Jae),e)}const aI=1e3,ele=1;class tle extends OA{constructor(e){super(e)}clear(){}init(){}interact(e){const t=this.container;e.attractDistance===void 0&&(e.attractDistance=st(e.options.move.attract.distance)*t.retina.pixelRatio);const i=e.attractDistance,r=e.getPosition(),s=t.particles.quadTree.queryCircle(r,i);for(const o of s){if(e===o||!o.options.move.attract.enable||o.destroyed||o.spawning)continue;const a=o.getPosition(),{dx:l,dy:u}=vr(r,a),c=e.options.move.attract.rotate,f=l/(c.x*aI),h=u/(c.y*aI),m=o.size.value/e.size.value,v=ele/m;e.velocity.x-=f*m,e.velocity.y-=h*m,o.velocity.x+=f*v,o.velocity.y+=h*v}}isEnabled(e){return e.options.move.attract.enable}reset(){}}async function nle(n,e=!0){Ut(n,"3.7.1"),await n.addInteractor("particlesAttract",t=>Promise.resolve(new tle(t)),e)}const ile=.5,rle=10,sle=0;function lI(n,e,t,i,r,s){const o=qs(n.options.collisions.absorb.speed*r.factor/rle,sle,i);n.size.value+=o*ile,t.size.value-=o,i<=s&&(t.size.value=0,t.destroy())}function ole(n,e,t,i){const r=n.getRadius(),s=e.getRadius();r===void 0&&s!==void 0?n.destroy():r!==void 0&&s===void 0?e.destroy():r!==void 0&&s!==void 0&&(r>=s?lI(n,r,e,s,t,i):lI(e,s,n,r,t,i))}const uI=n=>{n.collisionMaxSpeed===void 0&&(n.collisionMaxSpeed=st(n.options.collisions.maxSpeed)),n.velocity.length>n.collisionMaxSpeed&&(n.velocity.length=n.collisionMaxSpeed)};function TU(n,e){nU(aE(n),aE(e)),uI(n),uI(e)}function ale(n,e){!n.unbreakable&&!e.unbreakable&&TU(n,e),n.getRadius()===void 0&&e.getRadius()!==void 0?n.destroy():n.getRadius()!==void 0&&e.getRadius()===void 0?e.destroy():n.getRadius()!==void 0&&e.getRadius()!==void 0&&(n.getRadius()>=e.getRadius()?e:n).destroy()}function lle(n,e,t,i){switch(n.options.collisions.mode){case ih.absorb:{ole(n,e,t,i);break}case ih.bounce:{TU(n,e);break}case ih.destroy:{ale(n,e);break}}}const ule=2;class cle extends OA{constructor(e){super(e)}clear(){}init(){}interact(e,t){if(e.destroyed||e.spawning)return;const i=this.container,r=e.getPosition(),s=e.getRadius(),o=i.particles.quadTree.queryCircle(r,s*ule);for(const a of o){if(e===a||!a.options.collisions.enable||e.options.collisions.mode!==a.options.collisions.mode||a.destroyed||a.spawning)continue;const l=a.getPosition(),u=a.getRadius();if(Math.abs(Math.round(r.z)-Math.round(l.z))>s+u)continue;const c=Ir(r,l),f=s+u;c>f||lle(e,a,t,i.retina.pixelRatio)}}isEnabled(e){return e.options.collisions.enable}reset(){}}async function fle(n,e=!0){Ut(n,"3.7.1"),await n.addInteractor("particlesCollisions",t=>Promise.resolve(new cle(t)),e)}const bS=2;class hle extends yr{constructor(e,t,i,r){super(e,t,i),this.canvasSize=r,this.canvasSize={...r}}contains(e){const{width:t,height:i}=this.canvasSize,{x:r,y:s}=e;return super.contains(e)||super.contains({x:r-t,y:s})||super.contains({x:r-t,y:s-i})||super.contains({x:r,y:s-i})}intersects(e){if(super.intersects(e))return!0;const t=e,i=e,r={x:e.position.x-this.canvasSize.width,y:e.position.y-this.canvasSize.height};if(i.radius!==void 0){const s=new yr(r.x,r.y,i.radius*bS);return super.intersects(s)}else if(t.size!==void 0){const s=new yo(r.x,r.y,t.size.width*bS,t.size.height*bS);return super.intersects(s)}return!1}}class dle{constructor(){this.blur=5,this.color=new di,this.color.value="#000",this.enable=!1}load(e){Xe(e)||(e.blur!==void 0&&(this.blur=e.blur),this.color=di.create(this.color,e.color),e.enable!==void 0&&(this.enable=e.enable))}}class ple{constructor(){this.enable=!1,this.frequency=1}load(e){Xe(e)||(e.color!==void 0&&(this.color=di.create(this.color,e.color)),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=e.opacity))}}class mle{constructor(){this.blink=!1,this.color=new di,this.color.value="#fff",this.consent=!1,this.distance=100,this.enable=!1,this.frequency=1,this.opacity=1,this.shadow=new dle,this.triangles=new ple,this.width=1,this.warp=!1}load(e){Xe(e)||(e.id!==void 0&&(this.id=e.id),e.blink!==void 0&&(this.blink=e.blink),this.color=di.create(this.color,e.color),e.consent!==void 0&&(this.consent=e.consent),e.distance!==void 0&&(this.distance=e.distance),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=e.opacity),this.shadow.load(e.shadow),this.triangles.load(e.triangles),e.width!==void 0&&(this.width=e.width),e.warp!==void 0&&(this.warp=e.warp))}}const cI=2,gle=1,m0={x:0,y:0},vle=0;function yle(n,e,t,i,r){const{dx:s,dy:o,distance:a}=vr(n,e);if(!r||a<=t)return a;const l={x:Math.abs(s),y:Math.abs(o)},u={x:Math.min(l.x,i.width-l.x),y:Math.min(l.y,i.height-l.y)};return Math.sqrt(u.x**cI+u.y**cI)}class xle extends OA{constructor(e,t){super(e),this._setColor=i=>{if(!i.options.links)return;const r=this._linkContainer,s=i.options.links;let o=s.id===void 0?r.particles.linksColor:r.particles.linksColors.get(s.id);if(o)return;const a=s.color;o=cU(this._engine,a,s.blink,s.consent),s.id===void 0?r.particles.linksColor=o:r.particles.linksColors.set(s.id,o)},this._linkContainer=e,this._engine=t}clear(){}init(){this._linkContainer.particles.linksColor=void 0,this._linkContainer.particles.linksColors=new Map}interact(e){if(!e.options.links)return;e.links=[];const t=e.getPosition(),i=this.container,r=i.canvas.size;if(t.x<m0.x||t.y<m0.y||t.x>r.width||t.y>r.height)return;const s=e.options.links,o=s.opacity,a=e.retina.linksDistance??vle,l=s.warp;let u;l?u=new hle(t.x,t.y,a,r):u=new yr(t.x,t.y,a);const c=i.particles.quadTree.query(u);for(const f of c){const h=f.options.links;if(e===f||!(h!=null&&h.enable)||s.id!==h.id||f.spawning||f.destroyed||!f.links||e.links.some(x=>x.destination===f)||f.links.some(x=>x.destination===e))continue;const m=f.getPosition();if(m.x<m0.x||m.y<m0.y||m.x>r.width||m.y>r.height)continue;const v=yle(t,m,a,r,l&&h.warp);if(v>a)continue;const g=(gle-v/a)*o;this._setColor(e),e.links.push({destination:f,opacity:g})}}isEnabled(e){var t;return!!((t=e.options.links)!=null&&t.enable)}loadParticlesOptions(e,...t){e.links||(e.links=new mle);for(const i of t)e.links.load(i==null?void 0:i.links)}reset(){}}async function _le(n,e=!0){await n.addInteractor("particlesLinks",async t=>Promise.resolve(new xle(t,n)),e)}function wle(n,e,t,i){n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.lineTo(i.x,i.y),n.closePath()}function Sle(n){let e=!1;const{begin:t,end:i,engine:r,maxDistance:s,context:o,canvasSize:a,width:l,backgroundMask:u,colorLine:c,opacity:f,links:h}=n;if(Ir(t,i)<=s)mp(o,t,i),e=!0;else if(h.warp){let v,g;const x={x:i.x-a.width,y:i.y},y=vr(t,x);if(y.distance<=s){const _=t.y-y.dy/y.dx*t.x;v={x:0,y:_},g={x:a.width,y:_}}else{const _={x:i.x,y:i.y-a.height},w=vr(t,_);if(w.distance<=s){const C=-(t.y-w.dy/w.dx*t.x)/(w.dy/w.dx);v={x:C,y:0},g={x:C,y:a.height}}else{const E={x:i.x-a.width,y:i.y-a.height},C=vr(t,E);if(C.distance<=s){const M=t.y-C.dy/C.dx*t.x;v={x:-M/(C.dy/C.dx),y:M},g={x:v.x+a.width,y:v.y+a.height}}}}v&&g&&(mp(o,t,v),mp(o,i,g),e=!0)}if(!e)return;o.lineWidth=l,u.enable&&(o.globalCompositeOperation=u.composite),o.strokeStyle=$o(c,f);const{shadow:m}=h;if(m.enable){const v=Us(r,m.color);v&&(o.shadowBlur=m.blur,o.shadowColor=$o(v))}o.stroke()}function Mle(n){const{context:e,pos1:t,pos2:i,pos3:r,backgroundMask:s,colorTriangle:o,opacityTriangle:a}=n;wle(e,t,i,r),s.enable&&(e.globalCompositeOperation=s.composite),e.fillStyle=$o(o,a),e.fill()}function Ele(n){return n.sort((e,t)=>e-t),n.join("_")}function fI(n,e){const t=Ele(n.map(r=>r.id));let i=e.get(t);return i===void 0&&(i=Xt(),e.set(t,i)),i}const hI=0,AS=0,dI=0,ble=.5,Ale=1;class Cle{constructor(e,t){this._drawLinkLine=(i,r)=>{const s=i.options.links;if(!(s!=null&&s.enable))return;const o=this._container,a=o.actualOptions,l=r.destination,u=i.getPosition(),c=l.getPosition();let f=r.opacity;o.canvas.draw(h=>{var _;let m;const v=(_=i.options.twinkle)==null?void 0:_.lines;if(v!=null&&v.enable){const w=v.frequency,E=Us(this._engine,v.color);Xt()<w&&E&&(m=E,f=st(v.opacity))}if(!m){const w=s.id!==void 0?o.particles.linksColors.get(s.id):o.particles.linksColor;m=lE(i,l,w)}if(!m)return;const g=i.retina.linksWidth??AS,x=i.retina.linksDistance??dI,{backgroundMask:y}=a;Sle({context:h,width:g,begin:u,end:c,engine:this._engine,maxDistance:x,canvasSize:o.canvas.size,links:s,backgroundMask:y,colorLine:m,opacity:f})})},this._drawLinkTriangle=(i,r,s)=>{const o=i.options.links;if(!(o!=null&&o.enable))return;const a=o.triangles;if(!a.enable)return;const l=this._container,u=l.actualOptions,c=r.destination,f=s.destination,h=a.opacity??(r.opacity+s.opacity)*ble;h<=hI||l.canvas.draw(m=>{const v=i.getPosition(),g=c.getPosition(),x=f.getPosition(),y=i.retina.linksDistance??dI;if(Ir(v,g)>y||Ir(x,g)>y||Ir(x,v)>y)return;let _=Us(this._engine,a.color);if(!_){const w=o.id!==void 0?l.particles.linksColors.get(o.id):l.particles.linksColor;_=lE(i,c,w)}_&&Mle({context:m,pos1:v,pos2:g,pos3:x,backgroundMask:u.backgroundMask,colorTriangle:_,opacityTriangle:h})})},this._drawTriangles=(i,r,s,o)=>{var u,c,f;const a=s.destination;if(!((u=i.links)!=null&&u.triangles.enable&&((c=a.options.links)!=null&&c.triangles.enable)))return;const l=(f=a.links)==null?void 0:f.filter(h=>{const m=this._getLinkFrequency(a,h.destination);return a.options.links&&m<=a.options.links.frequency&&o.findIndex(g=>g.destination===h.destination)>=0});if(l!=null&&l.length)for(const h of l){const m=h.destination;this._getTriangleFrequency(r,a,m)>i.links.triangles.frequency||this._drawLinkTriangle(r,s,h)}},this._getLinkFrequency=(i,r)=>fI([i,r],this._freqs.links),this._getTriangleFrequency=(i,r,s)=>fI([i,r,s],this._freqs.triangles),this._container=e,this._engine=t,this._freqs={links:new Map,triangles:new Map}}drawParticle(e,t){const{links:i,options:r}=t;if(!(i!=null&&i.length))return;const s=i.filter(o=>r.links&&(r.links.frequency>=Ale||this._getLinkFrequency(t,o.destination)<=r.links.frequency));for(const o of s)this._drawTriangles(r,t,o,s),o.opacity>hI&&(t.retina.linksWidth??AS)>AS&&this._drawLinkLine(t,o)}async init(){this._freqs.links=new Map,this._freqs.triangles=new Map,await Promise.resolve()}particleCreated(e){if(e.links=[],!e.options.links)return;const t=this._container.retina.pixelRatio,{retina:i}=e,{distance:r,width:s}=e.options.links;i.linksDistance=r*t,i.linksWidth=s*t}particleDestroyed(e){e.links=[]}}class Dle{constructor(e){this.id="links",this._engine=e}getPlugin(e){return Promise.resolve(new Cle(e,this._engine))}loadOptions(){}needsPlugin(){return!0}}async function Tle(n,e=!0){const t=new Dle(n);await n.addPlugin(t,e)}async function Ple(n,e=!0){Ut(n,"3.7.1"),await _le(n,e),await Tle(n,e)}const Rle=180,g0={x:0,y:0},Ile=2;function Fle(n,e,t){const{context:i}=n,r=t.count.numerator*t.count.denominator,s=t.count.numerator/t.count.denominator,o=Rle*(s-Ile)/s,a=Math.PI-Ta(o);if(i){i.beginPath(),i.translate(e.x,e.y),i.moveTo(g0.x,g0.y);for(let l=0;l<r;l++)i.lineTo(t.length,g0.y),i.translate(t.length,g0.y),i.rotate(a)}}const Nle=5;class PU{draw(e){const{particle:t,radius:i}=e,r=this.getCenter(t,i),s=this.getSidesData(t,i);Fle(e,r,s)}getSidesCount(e){const t=e.shapeData;return Math.round(st((t==null?void 0:t.sides)??Nle))}}const pI=3.5,mI=2.66,Lle=3;class Ole extends PU{constructor(){super(...arguments),this.validTypes=["polygon"]}getCenter(e,t){return{x:-t/(e.sides/pI),y:-t/(mI/pI)}}getSidesData(e,t){const i=e.sides;return{count:{denominator:1,numerator:i},length:t*mI/(i/Lle)}}}const zle=1.66,Ble=3,Ule=2;class kle extends PU{constructor(){super(...arguments),this.validTypes=["triangle"]}getCenter(e,t){return{x:-t,y:t/zle}}getSidesCount(){return Ble}getSidesData(e,t){const i=t*Ule;return{count:{denominator:2,numerator:3},length:i}}}async function Hle(n,e=!0){Ut(n,"3.7.1"),await n.addShape(new Ole,e)}async function Vle(n,e=!0){Ut(n,"3.7.1"),await n.addShape(new kle,e)}async function Wle(n,e=!0){Ut(n,"3.7.1"),await Hle(n,e),await Vle(n,e)}class Gle{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(e){Xe(e)||(e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=It(e.speed)),e.decay!==void 0&&(this.decay=It(e.decay)),e.sync!==void 0&&(this.sync=e.sync))}}class jle extends So{constructor(){super(),this.animation=new Gle,this.direction=dr.clockwise,this.path=!1,this.value=0}load(e){Xe(e)||(super.load(e),e.direction!==void 0&&(this.direction=e.direction),this.animation.load(e.animation),e.path!==void 0&&(this.path=e.path))}}const RU=2,qle=Math.PI*RU,Xle=1,$le=360;class Yle{constructor(e){this.container=e}init(e){const t=e.options.rotate;if(!t)return;e.rotate={enable:t.animation.enable,value:Ta(st(t.value)),min:0,max:qle},e.pathRotation=t.path;let i=t.direction;switch(i===dr.random&&(i=Math.floor(Xt()*RU)>0?dr.counterClockwise:dr.clockwise),i){case dr.counterClockwise:case"counterClockwise":e.rotate.status=ri.decreasing;break;case dr.clockwise:e.rotate.status=ri.increasing;break}const r=t.animation;r.enable&&(e.rotate.decay=Xle-st(r.decay),e.rotate.velocity=st(r.speed)/$le*this.container.retina.reduceFactor,r.sync||(e.rotate.velocity*=Xt())),e.rotation=e.rotate.value}isEnabled(e){const t=e.options.rotate;return t?!e.destroyed&&!e.spawning&&(!!t.value||t.animation.enable||t.path):!1}loadOptions(e,...t){e.rotate||(e.rotate=new jle);for(const i of t)e.rotate.load(i==null?void 0:i.rotate)}update(e,t){this.isEnabled(e)&&(e.isRotating=!!e.rotate,e.rotate&&(E_(e,e.rotate,!1,Bl.none,t),e.rotation=e.rotate.value))}}async function Zle(n,e=!0){Ut(n,"3.7.1"),await n.addParticleUpdater("rotate",t=>Promise.resolve(new Yle(t)),e)}const Kle=2,Jle=Math.sqrt(Kle),Qle=2;function eue(n){const{context:e,radius:t}=n,i=t/Jle,r=i*Qle;e.rect(-i,-i,r,r)}const tue=4;class nue{constructor(){this.validTypes=["edge","square"]}draw(e){eue(e)}getSidesCount(){return tue}}async function iue(n,e=!0){Ut(n,"3.7.1"),await n.addShape(new nue,e)}const rue=2,_f={x:0,y:0};function sue(n){const{context:e,particle:t,radius:i}=n,r=t.sides,s=t.starInset??rue;e.moveTo(_f.x,_f.y-i);for(let o=0;o<r;o++)e.rotate(Math.PI/r),e.lineTo(_f.x,_f.y-i*s),e.rotate(Math.PI/r),e.lineTo(_f.x,_f.y-i)}const oue=2,aue=5;class lue{constructor(){this.validTypes=["star"]}draw(e){sue(e)}getSidesCount(e){const t=e.shapeData;return Math.round(st((t==null?void 0:t.sides)??aue))}particleInit(e,t){const i=t.shapeData;t.starInset=st((i==null?void 0:i.inset)??oue)}}async function uue(n,e=!0){Ut(n,"3.7.1"),await n.addShape(new lue,e)}const cue=1;class fue{constructor(e,t){this._container=e,this._engine=t}init(e){var o;const t=this._container,i=e.options,r=Zi(i.stroke,e.id,i.reduceDuplicates);e.strokeWidth=st(r.width)*t.retina.pixelRatio,e.strokeOpacity=st(r.opacity??cue),e.strokeAnimation=(o=r.color)==null?void 0:o.animation;const s=Ul(this._engine,r.color)??e.getFillColor();s&&(e.strokeColor=fU(s,e.strokeAnimation,t.retina.reduceFactor))}isEnabled(e){const t=e.strokeAnimation,{strokeColor:i}=e;return!e.destroyed&&!e.spawning&&!!t&&((i==null?void 0:i.h.value)!==void 0&&i.h.enable||(i==null?void 0:i.s.value)!==void 0&&i.s.enable||(i==null?void 0:i.l.value)!==void 0&&i.l.enable)}update(e,t){this.isEnabled(e)&&hU(e.strokeColor,t)}}async function hue(n,e=!0){Ut(n,"3.7.1"),await n.addParticleUpdater("strokeColor",t=>Promise.resolve(new fue(t,n)),e)}async function due(n,e=!0){Ut(n,"3.7.1"),await Qae(n,!1),await ioe(n,!1),await hoe(n,!1),await _oe(n,!1),await Poe(n,!1),await koe(n,!1),await Woe(n,!1),await $oe(n,!1),await Joe(n,!1),await uae(n,!1),await pae(n,!1),await nle(n,!1),await fle(n,!1),await Ple(n,!1),await Xse(n,!1),await Zse(n,!1),await kae(n,!1),await Kae(n,!1),await Wle(n,!1),await iue(n,!1),await uue(n,!1),await Xae(n,!1),await Zle(n,!1),await hue(n,!1),await qse(n,e)}const IU=2,gI=.5;function pue(n){const{context:e,particle:t,radius:i,opacity:r}=n,s=t.shapeData;if(!s)return;const o=s.value;if(o===void 0)return;t.text===void 0&&(t.text=Zi(o,t.randomIndexData));const a=t.text,l=s.style??"",u=s.weight??"400",c=Math.round(i)*IU,f=s.font??"Verdana",h=t.shapeFill,m=a==null?void 0:a.split(`
`);if(m){e.font=`${l} ${u} ${c}px "${f}"`,e.globalAlpha=r;for(let v=0;v<m.length;v++)mue(e,m[v],i,r,v,h);e.globalAlpha=1}}function mue(n,e,t,i,r,s){const o=e.length*t*gI,a={x:-o,y:t*gI},l=t*IU;s?n.fillText(e,a.x,a.y+l*r):n.strokeText(e,a.x,a.y+l*r)}class gue{constructor(){this.validTypes=["text","character","char","multiline-text"]}draw(e){pue(e)}async init(e){const t=e.actualOptions,{validTypes:i}=this;if(i.find(r=>Fn(r,t.particles.shape.type))){const r=i.map(o=>t.particles.shape.options[o]).find(o=>!!o),s=[];Si(r,o=>{s.push(oE(o.font,o.weight))}),await Promise.all(s)}}particleInit(e,t){if(!t.shape||!this.validTypes.includes(t.shape))return;const i=t.shapeData;if(i===void 0)return;const r=i.value;r!==void 0&&(t.text=Zi(r,t.randomIndexData))}}async function vue(n,e=!0){Ut(n,"3.7.1"),await n.addShape(new gue,e)}var vl;(function(n){n.clockwise="clockwise",n.counterClockwise="counter-clockwise",n.random="random"})(vl||(vl={}));class yue{constructor(){this.enable=!1,this.speed=0,this.decay=0,this.sync=!1}load(e){Xe(e)||(e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0&&(this.speed=It(e.speed)),e.decay!==void 0&&(this.decay=It(e.decay)),e.sync!==void 0&&(this.sync=e.sync))}}class xue extends So{constructor(){super(),this.animation=new yue,this.direction=vl.clockwise,this.enable=!1,this.value=0}load(e){super.load(e),!Xe(e)&&(this.animation.load(e.animation),e.direction!==void 0&&(this.direction=e.direction),e.enable!==void 0&&(this.enable=e.enable))}}const Hd=1,FU=2,_ue=Math.PI*FU,wue=360;class Sue{constructor(e){this.container=e}getTransformValues(e){var i;const t=((i=e.tilt)==null?void 0:i.enable)&&e.tilt;return{b:t?Math.cos(t.value)*t.cosDirection:void 0,c:t?Math.sin(t.value)*t.sinDirection:void 0}}init(e){var s;const t=e.options.tilt;if(!t)return;e.tilt={enable:t.enable,value:Ta(st(t.value)),sinDirection:Xt()>=uc?Hd:-Hd,cosDirection:Xt()>=uc?Hd:-Hd,min:0,max:_ue};let i=t.direction;switch(i===vl.random&&(i=Math.floor(Xt()*FU)>0?vl.counterClockwise:vl.clockwise),i){case vl.counterClockwise:case"counterClockwise":e.tilt.status=ri.decreasing;break;case vl.clockwise:e.tilt.status=ri.increasing;break}const r=(s=e.options.tilt)==null?void 0:s.animation;r!=null&&r.enable&&(e.tilt.decay=Hd-st(r.decay),e.tilt.velocity=st(r.speed)/wue*this.container.retina.reduceFactor,r.sync||(e.tilt.velocity*=Xt()))}isEnabled(e){var i;const t=(i=e.options.tilt)==null?void 0:i.animation;return!e.destroyed&&!e.spawning&&!!(t!=null&&t.enable)}loadOptions(e,...t){e.tilt||(e.tilt=new xue);for(const i of t)e.tilt.load(i==null?void 0:i.tilt)}async update(e,t){!this.isEnabled(e)||!e.tilt||(E_(e,e.tilt,!1,Bl.none,t),await Promise.resolve())}}async function Mue(n,e=!0){Ut(n,"3.7.1"),await n.addParticleUpdater("tilt",t=>Promise.resolve(new Sue(t)),e)}class vI{constructor(){this.enable=!1,this.frequency=.05,this.opacity=1}load(e){Xe(e)||(e.color!==void 0&&(this.color=di.create(this.color,e.color)),e.enable!==void 0&&(this.enable=e.enable),e.frequency!==void 0&&(this.frequency=e.frequency),e.opacity!==void 0&&(this.opacity=It(e.opacity)))}}class Eue{constructor(){this.lines=new vI,this.particles=new vI}load(e){Xe(e)||(this.lines.load(e.lines),this.particles.load(e.particles))}}class bue{constructor(e){this._engine=e}getColorStyles(e,t,i,r){const s=e.options,o=s.twinkle;if(!o)return{};const a=o.particles,l=a.enable&&Xt()<a.frequency,u=e.options.zIndex,c=1,f=(c-e.zIndexFactor)**u.opacityRate,h=l?st(a.opacity)*f:r,m=Ul(this._engine,a.color),v=m?Eh(m,h):void 0,g={},x=l&&v;return g.fill=x?v:void 0,g.stroke=x?v:void 0,g}async init(){await Promise.resolve()}isEnabled(e){const t=e.options,i=t.twinkle;return i?i.particles.enable:!1}loadOptions(e,...t){e.twinkle||(e.twinkle=new Eue);for(const i of t)e.twinkle.load(i==null?void 0:i.twinkle)}async update(){await Promise.resolve()}}async function Aue(n,e=!0){Ut(n,"3.7.1"),await n.addParticleUpdater("twinkle",()=>Promise.resolve(new bue(n)),e)}class Cue{constructor(){this.angle=50,this.move=10}load(e){Xe(e)||(e.angle!==void 0&&(this.angle=It(e.angle)),e.move!==void 0&&(this.move=It(e.move)))}}class Due{constructor(){this.distance=5,this.enable=!1,this.speed=new Cue}load(e){if(!Xe(e)&&(e.distance!==void 0&&(this.distance=It(e.distance)),e.enable!==void 0&&(this.enable=e.enable),e.speed!==void 0))if(vs(e.speed))this.speed.load({angle:e.speed});else{const t=e.speed;t.min!==void 0?this.speed.load({angle:t}):this.speed.load(e.speed)}}}const Tue=0,Pue=2,Rue=Math.PI*Pue,Iue=60;function Fue(n,e){const{wobble:t}=n.options,{wobble:i}=n;if(!(t!=null&&t.enable)||!i)return;const r=i.angleSpeed*e.factor,s=i.moveSpeed*e.factor,o=s*((n.retina.wobbleDistance??Tue)*e.factor)/(Kn/Iue),a=Rue,{position:l}=n;i.angle+=r,i.angle>a&&(i.angle-=a),l.x+=o*Math.cos(i.angle),l.y+=o*Math.abs(Math.sin(i.angle))}const Nue=2,Lue=Math.PI*Nue,Oue=360,zue=10,Bue=0;class Uue{constructor(e){this.container=e}init(e){const t=e.options.wobble;t!=null&&t.enable?e.wobble={angle:Xt()*Lue,angleSpeed:st(t.speed.angle)/Oue,moveSpeed:st(t.speed.move)/zue}:e.wobble={angle:0,angleSpeed:0,moveSpeed:0},e.retina.wobbleDistance=st((t==null?void 0:t.distance)??Bue)*this.container.retina.pixelRatio}isEnabled(e){var t;return!e.destroyed&&!e.spawning&&!!((t=e.options.wobble)!=null&&t.enable)}loadOptions(e,...t){e.wobble||(e.wobble=new Due);for(const i of t)e.wobble.load(i==null?void 0:i.wobble)}update(e,t){this.isEnabled(e)&&Fue(e,t)}}async function kue(n,e=!0){Ut(n,"3.7.1"),await n.addParticleUpdater("wobble",t=>Promise.resolve(new Uue(t)),e)}async function Hue(n,e=!0){Ut(n,"3.7.1"),await Mre(n,!1),await ese(n,!1),await Mue(n,!1),await Aue(n,!1),await kue(n,!1),await vue(n,!1),await Xre(n,!1),await ure(n,!1),await Lre(n,!1),await Ure(n,!1),await Gre(n,!1),await due(n,e)}function Vue(){const[n,e]=ie.useState(!1);ie.useEffect(()=>{Zie(async i=>{await Hue(i)}).then(()=>{e(!0)})},[]);const t=ie.useMemo(()=>({fullScreen:{zIndex:1},emitters:{position:{x:50,y:100},rate:{quantity:5,delay:.15}},particles:{color:{value:["#1E00FF","#FF0061","#E1FF00","#00FF9E"]},move:{decay:.05,direction:"top",enable:!0,gravity:{enable:!0},outModes:{top:"none",default:"destroy"},speed:{min:50,max:100}},number:{value:0},opacity:{value:1},rotate:{value:{min:0,max:360},direction:"random",animation:{enable:!0,speed:30}},tilt:{direction:"random",enable:!0,value:{min:0,max:360},animation:{enable:!0,speed:30}},size:{value:3,animation:{enable:!0,startValue:"min",count:1,speed:16,sync:!0}},roll:{darken:{enable:!0,value:25},enlighten:{enable:!0,value:25},enable:!0,speed:{min:5,max:15}},wobble:{distance:30,enable:!0,speed:{min:-7,max:7}},shape:{type:["circle","square"],options:{}}},responsive:[{maxWidth:1024,options:{particles:{move:{speed:{min:33,max:66}}}}}]}),[]);return n?O.jsx(Yie,{id:"tsparticles",particlesLoaded:async i=>console.log(i),options:t}):O.jsx(O.Fragment,{})}function Wue(){return Pc(8,"globe"),O.jsxs(O.Fragment,{children:[O.jsxs(Tc,{className:"bg-black",children:[O.jsx(Dc,{makeDefault:!0,position:[50,50,50],ref:n=>n==null?void 0:n.lookAt(0,0,0)}),O.jsx(XB,{}),O.jsx(mc,{EarthMesh:jue}),O.jsx(qB,{}),O.jsx(bc,{}),O.jsx(Hm,{}),O.jsx(Ac,{})]}),O.jsxs(Cc,{children:[O.jsx("div",{className:"w-full flex justify-center z-0",children:O.jsx(Wh,{})}),O.jsx("div",{className:"top-0 left-0 fixed w-full h-full z-10 pointer-events-none",children:O.jsx("div",{className:"flex w-full h-full flex-col justify-end",children:O.jsx("div",{className:"flex justify-end w-full",children:O.jsx(zB,{})})})}),O.jsx(w_,{}),O.jsx(Gh,{}),O.jsx(S_,{})]}),O.jsx(Gue,{})]})}function Gue(){const[n,e]=ie.useState(!1),t=Ve(o=>o.currPositions),i=Ve(o=>o.nCities),r=Ve(o=>o.nRenderedCities);if(i!==r)return null;const s=!n&&Math.round(Ec("sphere",t))===0;return O.jsx("div",{className:`bg-gray-400 bg-opacity-80 fixed top-0 w-full h-full z-10 transition-all ease-in duration-1000
${s?"opacity-100":"pointer-events-none opacity-0"}`,children:O.jsx("div",{className:"w-full h-full flex justify-center flex-col",children:O.jsxs("div",{className:"h-4/5 flex w-full justify-center",children:[O.jsxs("div",{className:"opacity-100 p-10 bg-white w-1/2 rounded-xl border border-black overflow-y-scroll no-scrollbar",children:[O.jsx("p",{className:"w-full text-xl text-center mb-5 font-bold",children:"Congratulations!"}),O.jsx("p",{className:"w-full border-b border-gray-400 mb-5 text-blue",children:"You have sucessfully completed the challenge! In order to continue playing, please fill out this short survey."}),O.jsx(Jte,{action:()=>e(!0)})]}),O.jsx(Vue,{})]})})})}const jue=ie.forwardRef(({onPointerMove:n,onPointerUp:e},t)=>{const r=Dm(c_,"/img/globe1.jpg");return O.jsxs("mesh",{onPointerUp:e,onPointerMove:n,ref:t,children:[O.jsx("sphereGeometry",{args:[Gs,50,50]}),O.jsx("meshBasicMaterial",{map:r})]})});function que(){const n=Ve(e=>e.updateMousePosition);ie.useEffect(()=>{const e=t=>{n(t.clientX,t.clientY)};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)},[n])}function Xue(){const[n,e]=ie.useState(""),[t,i]=ie.useState(""),r=xo(),s=Ve(u=>u.jwt),o=30,a=2e3,l=n==="";return O.jsx("div",{className:"flex w-full min-h-screen h-fit justify-center ",children:O.jsxs("div",{className:"w-2/3 mt-20",children:[O.jsx("h1",{className:"text-2xl font-bold border-b border-gray-300 py-2 ",children:"Bug Report"}),O.jsxs("div",{className:"my-2 border-b border-gray-300 pb-2",children:[O.jsx("p",{children:"If you encountered in our app, please let us know by describing the issue in as much detail as possible, including steps to reproduce if possible."}),O.jsx("p",{children:"We thank you for your support!"})]}),O.jsxs("form",{className:"my-5",onSubmit:u=>{u.preventDefault(),iH(s,{report:n,email:t})},children:[O.jsx("label",{htmlFor:"report",className:"my-1 font-semibold block",children:"What is the issue?"}),O.jsx("textarea",{id:"report",onChange:u=>{u.target.value.length>a?e(u.target.value.slice(0,a)):e(u.target.value)},className:"my-2 block border-gray-500 border rounded p-0.5 w-full font-normal min-h-32 h-fit",value:n}),O.jsx("div",{className:`w-full flex justify-end text-sm ${n.length!==a?"text-gray-900":"text-red"}`,children:O.jsxs("div",{children:["Characters left: ",a-n.length]})}),O.jsx("p",{className:"my-1",children:"If you would like to be kelp updated with the progress on this issue, you can include your email below. "}),O.jsx("label",{htmlFor:"email",className:"my-1 font-semibold block",children:"Email (optional)"}),O.jsx("input",{type:"text",id:"email",onChange:u=>{u.target.value.length>o?i(u.target.value.slice(0,o)):i(u.target.value)},className:"my-2 block border-gray-500 border rounded p-0.5 font-normal w-1/3",value:t}),O.jsxs("div",{className:"flex w-full justify-between mt-3",children:[O.jsx("button",{className:"bg-blue-500 p-3 text-white w-fit rounded ",onClick:()=>r(-1),children:"Back"}),O.jsx("input",{type:"submit",className:`p-3 text-white w-fit rounded ${l?"bg-gray-500":"bg-blue-500 transition-all hover:bg-blue-800 hover:cursor-pointer"}`,disabled:l})]})]})]})})}function $ue(){const n=xo();return O.jsx("div",{className:"flex w-full justify-center",children:O.jsxs("div",{className:"w-3/5 py-20",children:[O.jsx("h1",{className:"border-b border-gray-300 text-2xl font-bold py-1",children:"Our Mission"}),O.jsxs("div",{className:"py-2 *:mb-3",children:[O.jsx("p",{children:"Many people believe that the earth is flat, and there is good reason for this belief. Primarily, lived experience strongly suggests that this is the case. To any observer standing on the surface, the appearance of the Earth is clearly flat. But of course, appearances can be deceiving."}),O.jsx("p",{children:"As members of society, we inevitably must outsource facts about reality to others. Most of us are not astronauts or pilots, but these pilots and astronauts can provide us with information we do not have first hand access to. For this system to work smoothly, however, there is a presumption of trust. Unfortunately, trust in the integrity of institutions has collapsed, and it is not at historic lows. There are many reasons for this. Institutions are not immune to mission drift, ideological capture, and blatant self interest."}),O.jsx("p",{children:"We cannot solve these problems here, but what we can do is introduce a trustless method where you can verify for yourself whether the earth is flat. You're smart, and it is through your own reasoning that you must convince yourself whether the earth is flat or not. Specifically, the only information we rely on is the distances between known major cities, which you could measure and confirm for yourself. Our claim is that nobody, not even you, will be able to fit the distances between the worlds cities in a planar configuration. We are putting up a million dollar reward to anyone that manages to do this."}),O.jsx("p",{children:"Lets see if you can do it!"})]}),O.jsx("div",{className:"flex w-full justify-end",children:O.jsx("button",{className:"bg-blue-500 py-2 px-4 text-white w-fit rounded ",onClick:()=>n(-1),children:"Back"})})]})})}const NU=[-Math.PI/2,0,-Math.PI/2];function Yue(){return Pc(4,"plane"),O.jsxs(O.Fragment,{children:[O.jsxs(Tc,{className:"bg-black",children:[O.jsx(Dc,{makeDefault:!0,position:[100,100,100],ref:n=>n==null?void 0:n.lookAt(0,0,0)}),O.jsx(XB,{}),O.jsx("ambientLight",{color:16777215,intensity:2}),O.jsx(bc,{CityMesh:ece}),O.jsx(mc,{EarthMesh:Zue}),O.jsx(Kue,{}),O.jsx(qB,{}),O.jsx(Hm,{}),O.jsx(Ac,{TextSprite:Que})]}),O.jsxs(Cc,{children:[O.jsx("div",{className:"w-full flex justify-center z-0",children:O.jsx(Wh,{})}),O.jsx("div",{className:"top-0 left-0 fixed w-full h-full z-10 pointer-events-none",children:O.jsx("div",{className:"flex w-full h-full flex-col justify-end",children:O.jsx("div",{className:"flex justify-end w-full",children:O.jsx(zB,{})})})}),O.jsx("div",{className:"top-0 left-0 fixed w-full h-full z-200 pointer-events-none",children:O.jsx("div",{className:"flex w-full h-full flex-col justify-end",children:O.jsx("div",{className:"flex w-full justify-center",children:O.jsx(kee,{time:60,text:"Continue",dest:"globe"})})})}),O.jsx(w_,{}),O.jsx(Gh,{}),O.jsx(S_,{})]})]})}const Zue=ie.forwardRef(({onPointerMove:n,onPointerUp:e},t)=>{const r=Dm(c_,"/img/disk.png");return O.jsxs("mesh",{rotation:NU,receiveShadow:!0,position:[0,-.05,0],onPointerUp:e,onPointerMove:n,ref:t,children:[O.jsx("circleGeometry",{args:[ac,64]}),O.jsx("meshStandardMaterial",{map:r,toneMapped:!1})]})});function Kue(){const n=[];for(let e=0;e<ac;e+=10)n.push(O.jsx(Jue,{amplitude:e},e));return O.jsxs(O.Fragment,{children:[n,O.jsxs("mesh",{rotation:NU,receiveShadow:!0,position:[0,-.05,0],children:[O.jsx("circleGeometry",{args:[ac,32]}),O.jsx("meshBasicMaterial",{color:"gray",wireframe:!0})]})]})}function Jue({amplitude:n=ac,resolution:e=90}){const t=ie.useMemo(()=>{const i=360/e;return Array.from({length:e+1},(r,s)=>{const o=s*i*Math.PI/180;return new j(Math.cos(o)*n,0,Math.sin(o)*n)})},[n,e]);return O.jsx($ee,{points:t,color:"grey",linewidth:1})}const Que=CA({fontsize:30,scale:[20,10,1]}),ece=ie.forwardRef((n,e)=>O.jsxs("mesh",{ref:e,position:[0,0,0],...n,children:[O.jsx("sphereGeometry",{args:[1]}),O.jsx("meshBasicMaterial",{color:"red"})]}));function tce(){const n="/",e=xo();return O.jsxs("div",{className:"w-full h-full flex justify-center align-center flex-col bg-black",children:[O.jsx("div",{className:"flex flex-col justify-center flex-grow",children:O.jsx("div",{className:"flex flex-row w-full justify-center",children:O.jsxs("div",{className:"w-1/3 text-center",children:[O.jsx("div",{className:"w-full flex justify-center",children:O.jsx("img",{src:`${n}img/rotating.gif`,className:"w-40"})}),O.jsx("h1",{className:"text-center text-white text-2xl font-semibold ",children:" The Flat Earth Challenge"}),O.jsx("button",{className:"text-xl text-gray-400 mt-20 border-2 rounded-lg border-gray-400 px-2 py-1 hover:border-white hover:text-white",onClick:()=>e("/tutorial/1"),children:"Tutorial"})]})})}),O.jsx("div",{className:"h-1/5 w-full"})]})}function nce(){return que(),ite(),O.jsx(c6,{})}const ice="/",rce=p6([{path:"/",element:O.jsx(nce,{}),children:[{index:!0,element:O.jsx(tce,{})},{path:"/tutorial/1",element:O.jsx(ute,{})},{path:"/tutorial/2",element:O.jsx(Ste,{})},{path:"/tutorial/3",element:O.jsx(Dte,{})},{path:"/tutorial/4",element:O.jsx(Nte,{})},{path:"/tutorial/5",element:O.jsx(qte,{})},{path:"/globe",element:O.jsx(Wue,{})},{path:"/plane",element:O.jsx(Yue,{})},{path:"/bug-report",element:O.jsx(Xue,{})},{path:"/about",element:O.jsx($ue,{})}]}],{basename:ice});function sce(){return O.jsx(O.Fragment,{children:O.jsx(M6,{router:rce})})}CS.createRoot(document.getElementById("root")).render(O.jsx(vE.StrictMode,{children:O.jsx(sce,{})}));
